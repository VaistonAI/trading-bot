function PX(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();function vo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function IX(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var zw={exports:{}},Df={};var kM;function NX(){if(kM)return Df;kM=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var c in i)c!=="key"&&(s[c]=i[c])}else s=i;return i=s.ref,{$$typeof:t,type:n,key:a,ref:i!==void 0?i:null,props:s}}return Df.Fragment=e,Df.jsx=r,Df.jsxs=r,Df}var LM;function OX(){return LM||(LM=1,zw.exports=NX()),zw.exports}var m=OX(),Uw={exports:{}},He={};var zM;function jX(){if(zM)return He;zM=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),g=Symbol.iterator;function y(H){return H===null||typeof H!="object"?null:(H=g&&H[g]||H["@@iterator"],typeof H=="function"?H:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,w={};function E(H,G,le){this.props=H,this.context=G,this.refs=w,this.updater=le||S}E.prototype.isReactComponent={},E.prototype.setState=function(H,G){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,G,"setState")},E.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function R(){}R.prototype=E.prototype;function T(H,G,le){this.props=H,this.context=G,this.refs=w,this.updater=le||S}var M=T.prototype=new R;M.constructor=T,x(M,E.prototype),M.isPureReactComponent=!0;var D=Array.isArray;function z(){}var j={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function L(H,G,le){var X=le.ref;return{$$typeof:t,type:H,key:G,ref:X!==void 0?X:null,props:le}}function V(H,G){return L(H.type,G,H.props)}function U(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function F(H){var G={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(le){return G[le]})}var q=/\/+/g;function ve(H,G){return typeof H=="object"&&H!==null&&H.key!=null?F(""+H.key):G.toString(36)}function Ae(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(z,z):(H.status="pending",H.then(function(G){H.status==="pending"&&(H.status="fulfilled",H.value=G)},function(G){H.status==="pending"&&(H.status="rejected",H.reason=G)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function Y(H,G,le,X,ge){var be=typeof H;(be==="undefined"||be==="boolean")&&(H=null);var we=!1;if(H===null)we=!0;else switch(be){case"bigint":case"string":case"number":we=!0;break;case"object":switch(H.$$typeof){case t:case e:we=!0;break;case h:return we=H._init,Y(we(H._payload),G,le,X,ge)}}if(we)return ge=ge(H),we=X===""?"."+ve(H,0):X,D(ge)?(le="",we!=null&&(le=we.replace(q,"$&/")+"/"),Y(ge,G,le,"",function(je){return je})):ge!=null&&(U(ge)&&(ge=V(ge,le+(ge.key==null||H&&H.key===ge.key?"":(""+ge.key).replace(q,"$&/")+"/")+we)),G.push(ge)),1;we=0;var Ke=X===""?".":X+":";if(D(H))for(var se=0;se<H.length;se++)X=H[se],be=Ke+ve(X,se),we+=Y(X,G,le,be,ge);else if(se=y(H),typeof se=="function")for(H=se.call(H),se=0;!(X=H.next()).done;)X=X.value,be=Ke+ve(X,se++),we+=Y(X,G,le,be,ge);else if(be==="object"){if(typeof H.then=="function")return Y(Ae(H),G,le,X,ge);throw G=String(H),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return we}function ae(H,G,le){if(H==null)return H;var X=[],ge=0;return Y(H,X,"","",function(be){return G.call(le,be,ge++)}),X}function pe(H){if(H._status===-1){var G=H._result;G=G(),G.then(function(le){(H._status===0||H._status===-1)&&(H._status=1,H._result=le)},function(le){(H._status===0||H._status===-1)&&(H._status=2,H._result=le)}),H._status===-1&&(H._status=0,H._result=G)}if(H._status===1)return H._result.default;throw H._result}var me=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},_e={map:ae,forEach:function(H,G,le){ae(H,function(){G.apply(this,arguments)},le)},count:function(H){var G=0;return ae(H,function(){G++}),G},toArray:function(H){return ae(H,function(G){return G})||[]},only:function(H){if(!U(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return He.Activity=p,He.Children=_e,He.Component=E,He.Fragment=r,He.Profiler=i,He.PureComponent=T,He.StrictMode=n,He.Suspense=u,He.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,He.__COMPILER_RUNTIME={__proto__:null,c:function(H){return j.H.useMemoCache(H)}},He.cache=function(H){return function(){return H.apply(null,arguments)}},He.cacheSignal=function(){return null},He.cloneElement=function(H,G,le){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var X=x({},H.props),ge=H.key;if(G!=null)for(be in G.key!==void 0&&(ge=""+G.key),G)!O.call(G,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&G.ref===void 0||(X[be]=G[be]);var be=arguments.length-2;if(be===1)X.children=le;else if(1<be){for(var we=Array(be),Ke=0;Ke<be;Ke++)we[Ke]=arguments[Ke+2];X.children=we}return L(H.type,ge,X)},He.createContext=function(H){return H={$$typeof:a,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:s,_context:H},H},He.createElement=function(H,G,le){var X,ge={},be=null;if(G!=null)for(X in G.key!==void 0&&(be=""+G.key),G)O.call(G,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(ge[X]=G[X]);var we=arguments.length-2;if(we===1)ge.children=le;else if(1<we){for(var Ke=Array(we),se=0;se<we;se++)Ke[se]=arguments[se+2];ge.children=Ke}if(H&&H.defaultProps)for(X in we=H.defaultProps,we)ge[X]===void 0&&(ge[X]=we[X]);return L(H,be,ge)},He.createRef=function(){return{current:null}},He.forwardRef=function(H){return{$$typeof:c,render:H}},He.isValidElement=U,He.lazy=function(H){return{$$typeof:h,_payload:{_status:-1,_result:H},_init:pe}},He.memo=function(H,G){return{$$typeof:d,type:H,compare:G===void 0?null:G}},He.startTransition=function(H){var G=j.T,le={};j.T=le;try{var X=H(),ge=j.S;ge!==null&&ge(le,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(z,me)}catch(be){me(be)}finally{G!==null&&le.types!==null&&(G.types=le.types),j.T=G}},He.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},He.use=function(H){return j.H.use(H)},He.useActionState=function(H,G,le){return j.H.useActionState(H,G,le)},He.useCallback=function(H,G){return j.H.useCallback(H,G)},He.useContext=function(H){return j.H.useContext(H)},He.useDebugValue=function(){},He.useDeferredValue=function(H,G){return j.H.useDeferredValue(H,G)},He.useEffect=function(H,G){return j.H.useEffect(H,G)},He.useEffectEvent=function(H){return j.H.useEffectEvent(H)},He.useId=function(){return j.H.useId()},He.useImperativeHandle=function(H,G,le){return j.H.useImperativeHandle(H,G,le)},He.useInsertionEffect=function(H,G){return j.H.useInsertionEffect(H,G)},He.useLayoutEffect=function(H,G){return j.H.useLayoutEffect(H,G)},He.useMemo=function(H,G){return j.H.useMemo(H,G)},He.useOptimistic=function(H,G){return j.H.useOptimistic(H,G)},He.useReducer=function(H,G,le){return j.H.useReducer(H,G,le)},He.useRef=function(H){return j.H.useRef(H)},He.useState=function(H){return j.H.useState(H)},He.useSyncExternalStore=function(H,G,le){return j.H.useSyncExternalStore(H,G,le)},He.useTransition=function(){return j.H.useTransition()},He.version="19.2.0",He}var UM;function dh(){return UM||(UM=1,Uw.exports=jX()),Uw.exports}var A=dh();const ea=vo(A),MX=PX({__proto__:null,default:ea},[A]);var Bw={exports:{}},kf={},qw={exports:{}},Vw={};var BM;function DX(){return BM||(BM=1,(function(t){function e(Y,ae){var pe=Y.length;Y.push(ae);e:for(;0<pe;){var me=pe-1>>>1,_e=Y[me];if(0<i(_e,ae))Y[me]=ae,Y[pe]=_e,pe=me;else break e}}function r(Y){return Y.length===0?null:Y[0]}function n(Y){if(Y.length===0)return null;var ae=Y[0],pe=Y.pop();if(pe!==ae){Y[0]=pe;e:for(var me=0,_e=Y.length,H=_e>>>1;me<H;){var G=2*(me+1)-1,le=Y[G],X=G+1,ge=Y[X];if(0>i(le,pe))X<_e&&0>i(ge,le)?(Y[me]=ge,Y[X]=pe,me=X):(Y[me]=le,Y[G]=pe,me=G);else if(X<_e&&0>i(ge,pe))Y[me]=ge,Y[X]=pe,me=X;else break e}}return ae}function i(Y,ae){var pe=Y.sortIndex-ae.sortIndex;return pe!==0?pe:Y.id-ae.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],d=[],h=1,p=null,g=3,y=!1,S=!1,x=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function M(Y){for(var ae=r(d);ae!==null;){if(ae.callback===null)n(d);else if(ae.startTime<=Y)n(d),ae.sortIndex=ae.expirationTime,e(u,ae);else break;ae=r(d)}}function D(Y){if(x=!1,M(Y),!S)if(r(u)!==null)S=!0,z||(z=!0,F());else{var ae=r(d);ae!==null&&Ae(D,ae.startTime-Y)}}var z=!1,j=-1,O=5,L=-1;function V(){return w?!0:!(t.unstable_now()-L<O)}function U(){if(w=!1,z){var Y=t.unstable_now();L=Y;var ae=!0;try{e:{S=!1,x&&(x=!1,R(j),j=-1),y=!0;var pe=g;try{t:{for(M(Y),p=r(u);p!==null&&!(p.expirationTime>Y&&V());){var me=p.callback;if(typeof me=="function"){p.callback=null,g=p.priorityLevel;var _e=me(p.expirationTime<=Y);if(Y=t.unstable_now(),typeof _e=="function"){p.callback=_e,M(Y),ae=!0;break t}p===r(u)&&n(u),M(Y)}else n(u);p=r(u)}if(p!==null)ae=!0;else{var H=r(d);H!==null&&Ae(D,H.startTime-Y),ae=!1}}break e}finally{p=null,g=pe,y=!1}ae=void 0}}finally{ae?F():z=!1}}}var F;if(typeof T=="function")F=function(){T(U)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,ve=q.port2;q.port1.onmessage=U,F=function(){ve.postMessage(null)}}else F=function(){E(U,0)};function Ae(Y,ae){j=E(function(){Y(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(Y){switch(g){case 1:case 2:case 3:var ae=3;break;default:ae=g}var pe=g;g=ae;try{return Y()}finally{g=pe}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(Y,ae){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var pe=g;g=Y;try{return ae()}finally{g=pe}},t.unstable_scheduleCallback=function(Y,ae,pe){var me=t.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?me+pe:me):pe=me,Y){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=pe+_e,Y={id:h++,callback:ae,priorityLevel:Y,startTime:pe,expirationTime:_e,sortIndex:-1},pe>me?(Y.sortIndex=pe,e(d,Y),r(u)===null&&Y===r(d)&&(x?(R(j),j=-1):x=!0,Ae(D,pe-me))):(Y.sortIndex=_e,e(u,Y),S||y||(S=!0,z||(z=!0,F()))),Y},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(Y){var ae=g;return function(){var pe=g;g=ae;try{return Y.apply(this,arguments)}finally{g=pe}}}})(Vw)),Vw}var qM;function kX(){return qM||(qM=1,qw.exports=DX()),qw.exports}var Fw={exports:{}},dn={};var VM;function LX(){if(VM)return dn;VM=1;var t=dh();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(u,d,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:u,containerInfo:d,implementation:h}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,dn.createPortal=function(u,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return s(u,d,null,h)},dn.flushSync=function(u){var d=a.T,h=n.p;try{if(a.T=null,n.p=2,u)return u()}finally{a.T=d,n.p=h,n.d.f()}},dn.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,n.d.C(u,d))},dn.prefetchDNS=function(u){typeof u=="string"&&n.d.D(u)},dn.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var h=d.as,p=c(h,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?n.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:y}):h==="script"&&n.d.X(u,{crossOrigin:p,integrity:g,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},dn.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=c(d.as,d.crossOrigin);n.d.M(u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&n.d.M(u)},dn.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,p=c(h,d.crossOrigin);n.d.L(u,h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},dn.preloadModule=function(u,d){if(typeof u=="string")if(d){var h=c(d.as,d.crossOrigin);n.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else n.d.m(u)},dn.requestFormReset=function(u){n.d.r(u)},dn.unstable_batchedUpdates=function(u,d){return u(d)},dn.useFormState=function(u,d,h){return a.H.useFormState(u,d,h)},dn.useFormStatus=function(){return a.H.useHostTransitionStatus()},dn.version="19.2.0",dn}var FM;function aB(){if(FM)return Fw.exports;FM=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Fw.exports=LX(),Fw.exports}var HM;function zX(){if(HM)return kf;HM=1;var t=kX(),e=dh(),r=aB();function n(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var l=o,f=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(f=l.return),o=l.return;while(o)}return l.tag===3?f:null}function a(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function c(o){if(o.tag===31){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function u(o){if(s(o)!==o)throw Error(n(188))}function d(o){var l=o.alternate;if(!l){if(l=s(o),l===null)throw Error(n(188));return l!==o?null:o}for(var f=o,v=l;;){var C=f.return;if(C===null)break;var _=C.alternate;if(_===null){if(v=C.return,v!==null){f=v;continue}break}if(C.child===_.child){for(_=C.child;_;){if(_===f)return u(C),o;if(_===v)return u(C),l;_=_.sibling}throw Error(n(188))}if(f.return!==v.return)f=C,v=_;else{for(var I=!1,k=C.child;k;){if(k===f){I=!0,f=C,v=_;break}if(k===v){I=!0,v=C,f=_;break}k=k.sibling}if(!I){for(k=_.child;k;){if(k===f){I=!0,f=_,v=C;break}if(k===v){I=!0,v=_,f=C;break}k=k.sibling}if(!I)throw Error(n(189))}}if(f.alternate!==v)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?o:l}function h(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=h(o),l!==null)return l;o=o.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),T=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function F(o){return o===null||typeof o!="object"?null:(o=U&&o[U]||o["@@iterator"],typeof o=="function"?o:null)}var q=Symbol.for("react.client.reference");function ve(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===q?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case x:return"Fragment";case E:return"Profiler";case w:return"StrictMode";case D:return"Suspense";case z:return"SuspenseList";case L:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case S:return"Portal";case T:return o.displayName||"Context";case R:return(o._context.displayName||"Context")+".Consumer";case M:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case j:return l=o.displayName||null,l!==null?l:ve(o.type)||"Memo";case O:l=o._payload,o=o._init;try{return ve(o(l))}catch{}}return null}var Ae=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},me=[],_e=-1;function H(o){return{current:o}}function G(o){0>_e||(o.current=me[_e],me[_e]=null,_e--)}function le(o,l){_e++,me[_e]=o.current,o.current=l}var X=H(null),ge=H(null),be=H(null),we=H(null);function Ke(o,l){switch(le(be,l),le(ge,o),le(X,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?sM(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=sM(l),o=aM(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}G(X),le(X,o)}function se(){G(X),G(ge),G(be)}function je(o){o.memoizedState!==null&&le(we,o);var l=X.current,f=aM(l,o.type);l!==f&&(le(ge,o),le(X,f))}function Ue(o){ge.current===o&&(G(X),G(ge)),we.current===o&&(G(we),Nf._currentValue=pe)}var fe,Pt;function Ge(o){if(fe===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);fe=l&&l[1]||"",Pt=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fe+o+Pt}var yt=!1;function Dt(o,l){if(!o||yt)return"";yt=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(l){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(ne){var ee=ne}Reflect.construct(o,[],de)}else{try{de.call()}catch(ne){ee=ne}o.call(de.prototype)}}else{try{throw Error()}catch(ne){ee=ne}(de=o())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(ne){if(ne&&ee&&typeof ne.stack=="string")return[ne.stack,ee.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=v.DetermineComponentFrameRoot(),I=_[0],k=_[1];if(I&&k){var W=I.split(`
`),Z=k.split(`
`);for(C=v=0;v<W.length&&!W[v].includes("DetermineComponentFrameRoot");)v++;for(;C<Z.length&&!Z[C].includes("DetermineComponentFrameRoot");)C++;if(v===W.length||C===Z.length)for(v=W.length-1,C=Z.length-1;1<=v&&0<=C&&W[v]!==Z[C];)C--;for(;1<=v&&0<=C;v--,C--)if(W[v]!==Z[C]){if(v!==1||C!==1)do if(v--,C--,0>C||W[v]!==Z[C]){var oe=`
`+W[v].replace(" at new "," at ");return o.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",o.displayName)),oe}while(1<=v&&0<=C);break}}}finally{yt=!1,Error.prepareStackTrace=f}return(f=o?o.displayName||o.name:"")?Ge(f):""}function vt(o,l){switch(o.tag){case 26:case 27:case 5:return Ge(o.type);case 16:return Ge("Lazy");case 13:return o.child!==l&&l!==null?Ge("Suspense Fallback"):Ge("Suspense");case 19:return Ge("SuspenseList");case 0:case 15:return Dt(o.type,!1);case 11:return Dt(o.type.render,!1);case 1:return Dt(o.type,!0);case 31:return Ge("Activity");default:return""}}function Ci(o){try{var l="",f=null;do l+=vt(o,f),f=o,o=o.return;while(o);return l}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}var Bt=Object.prototype.hasOwnProperty,Gt=t.unstable_scheduleCallback,xi=t.unstable_cancelCallback,Yc=t.unstable_shouldYield,Eo=t.unstable_requestPaint,Rr=t.unstable_now,ye=t.unstable_getCurrentPriorityLevel,ut=t.unstable_ImmediatePriority,kt=t.unstable_UserBlockingPriority,Pr=t.unstable_NormalPriority,Xc=t.unstable_LowPriority,Lu=t.unstable_IdlePriority,zu=t.log,Uu=t.unstable_setDisableYieldValue,Xn=null,Ir=null;function On(o){if(typeof zu=="function"&&Uu(o),Ir&&typeof Ir.setStrictMode=="function")try{Ir.setStrictMode(Xn,o)}catch{}}var $t=Math.clz32?Math.clz32:qu,Bu=Math.log,Ao=Math.LN2;function qu(o){return o>>>=0,o===0?32:31-(Bu(o)/Ao|0)|0}var wi=256,As=262144,Zt=4194304;function _i(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Ei(o,l,f){var v=o.pendingLanes;if(v===0)return 0;var C=0,_=o.suspendedLanes,I=o.pingedLanes;o=o.warmLanes;var k=v&134217727;return k!==0?(v=k&~_,v!==0?C=_i(v):(I&=k,I!==0?C=_i(I):f||(f=k&~o,f!==0&&(C=_i(f))))):(k=v&~_,k!==0?C=_i(k):I!==0?C=_i(I):f||(f=v&~o,f!==0&&(C=_i(f)))),C===0?0:l!==0&&l!==C&&(l&_)===0&&(_=C&-C,f=l&-l,_>=f||_===32&&(f&4194048)!==0)?l:C}function Ji(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function Vx(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cy(){var o=Zt;return Zt<<=1,(Zt&62914560)===0&&(Zt=4194304),o}function Ts(o){for(var l=[],f=0;31>f;f++)l.push(o);return l}function Qc(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Fx(o,l,f,v,C,_){var I=o.pendingLanes;o.pendingLanes=f,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=f,o.entangledLanes&=f,o.errorRecoveryDisabledLanes&=f,o.shellSuspendCounter=0;var k=o.entanglements,W=o.expirationTimes,Z=o.hiddenUpdates;for(f=I&~f;0<f;){var oe=31-$t(f),de=1<<oe;k[oe]=0,W[oe]=-1;var ee=Z[oe];if(ee!==null)for(Z[oe]=null,oe=0;oe<ee.length;oe++){var ne=ee[oe];ne!==null&&(ne.lane&=-536870913)}f&=~de}v!==0&&Jc(o,v,0),_!==0&&C===0&&o.tag!==0&&(o.suspendedLanes|=_&~(I&~l))}function Jc(o,l,f){o.pendingLanes|=l,o.suspendedLanes&=~l;var v=31-$t(l);o.entangledLanes|=l,o.entanglements[v]=o.entanglements[v]|1073741824|f&261930}function Dh(o,l){var f=o.entangledLanes|=l;for(o=o.entanglements;f;){var v=31-$t(f),C=1<<v;C&l|o[v]&l&&(o[v]|=l),f&=~C}}function kh(o,l){var f=l&-l;return f=(f&42)!==0?1:Zc(f),(f&(o.suspendedLanes|l))!==0?0:f}function Zc(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Sa(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function xy(){var o=ae.p;return o!==0?o:(o=window.event,o===void 0?32:PM(o.type))}function Zi(o,l){var f=ae.p;try{return ae.p=o,l()}finally{ae.p=f}}var es=Math.random().toString(36).slice(2),fr="__reactFiber$"+es,Ur="__reactProps$"+es,Rs="__reactContainer$"+es,Vu="__reactEvents$"+es,Hx="__reactListeners$"+es,wy="__reactHandles$"+es,_y="__reactResources$"+es,Ps="__reactMarker$"+es;function Fu(o){delete o[fr],delete o[Ur],delete o[Vu],delete o[Hx],delete o[wy]}function Is(o){var l=o[fr];if(l)return l;for(var f=o.parentNode;f;){if(l=f[Rs]||f[fr]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(o=fM(o);o!==null;){if(f=o[fr])return f;o=fM(o)}return l}o=f,f=o.parentNode}return null}function Ai(o){if(o=o[fr]||o[Rs]){var l=o.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return o}return null}function Qn(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(n(33))}function Ns(o){var l=o[_y];return l||(l=o[_y]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function pr(o){o[Ps]=!0}var Lh=new Set,zh={};function Os(o,l){js(o,l),js(o+"Capture",l)}function js(o,l){for(zh[o]=l,o=0;o<l.length;o++)Lh.add(l[o])}var Uh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bh={},qh={};function Ey(o){return Bt.call(qh,o)?!0:Bt.call(Bh,o)?!1:Uh.test(o)?qh[o]=!0:(Bh[o]=!0,!1)}function Hu(o,l,f){if(Ey(l))if(f===null)o.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var v=l.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+f)}}function Jn(o,l,f){if(f===null)o.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+f)}}function mr(o,l,f,v){if(v===null)o.removeAttribute(f);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(f);return}o.setAttributeNS(l,f,""+v)}}function Br(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function To(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Vh(o,l,f){var v=Object.getOwnPropertyDescriptor(o.constructor.prototype,l);if(!o.hasOwnProperty(l)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var C=v.get,_=v.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return C.call(this)},set:function(I){f=""+I,_.call(this,I)}}),Object.defineProperty(o,l,{enumerable:v.enumerable}),{getValue:function(){return f},setValue:function(I){f=""+I},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function bt(o){if(!o._valueTracker){var l=To(o)?"checked":"value";o._valueTracker=Vh(o,l,""+o[l])}}function el(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var f=l.getValue(),v="";return o&&(v=To(o)?o.checked?"true":"false":o.value),o=v,o!==f?(l.setValue(o),!0):!1}function Ms(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var tl=/[\n"\\]/g;function jn(o){return o.replace(tl,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Wu(o,l,f,v,C,_,I,k){o.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?o.type=I:o.removeAttribute("type"),l!=null?I==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+Br(l)):o.value!==""+Br(l)&&(o.value=""+Br(l)):I!=="submit"&&I!=="reset"||o.removeAttribute("value"),l!=null?Fh(o,I,Br(l)):f!=null?Fh(o,I,Br(f)):v!=null&&o.removeAttribute("value"),C==null&&_!=null&&(o.defaultChecked=!!_),C!=null&&(o.checked=C&&typeof C!="function"&&typeof C!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?o.name=""+Br(k):o.removeAttribute("name")}function Ay(o,l,f,v,C,_,I,k){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(o.type=_),l!=null||f!=null){if(!(_!=="submit"&&_!=="reset"||l!=null)){bt(o);return}f=f!=null?""+Br(f):"",l=l!=null?""+Br(l):f,k||l===o.value||(o.value=l),o.defaultValue=l}v=v??C,v=typeof v!="function"&&typeof v!="symbol"&&!!v,o.checked=k?o.checked:!!v,o.defaultChecked=!!v,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(o.name=I),bt(o)}function Fh(o,l,f){l==="number"&&Ms(o.ownerDocument)===o||o.defaultValue===""+f||(o.defaultValue=""+f)}function Ro(o,l,f,v){if(o=o.options,l){l={};for(var C=0;C<f.length;C++)l["$"+f[C]]=!0;for(f=0;f<o.length;f++)C=l.hasOwnProperty("$"+o[f].value),o[f].selected!==C&&(o[f].selected=C),C&&v&&(o[f].defaultSelected=!0)}else{for(f=""+Br(f),l=null,C=0;C<o.length;C++){if(o[C].value===f){o[C].selected=!0,v&&(o[C].defaultSelected=!0);return}l!==null||o[C].disabled||(l=o[C])}l!==null&&(l.selected=!0)}}function Ty(o,l,f){if(l!=null&&(l=""+Br(l),l!==o.value&&(o.value=l),f==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=f!=null?""+Br(f):""}function Po(o,l,f,v){if(l==null){if(v!=null){if(f!=null)throw Error(n(92));if(Ae(v)){if(1<v.length)throw Error(n(93));v=v[0]}f=v}f==null&&(f=""),l=f}f=Br(l),o.defaultValue=f,v=o.textContent,v===f&&v!==""&&v!==null&&(o.value=v),bt(o)}function Mn(o,l){if(l){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=l;return}}o.textContent=l}var Ry=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hh(o,l,f){var v=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?v?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":v?o.setProperty(l,f):typeof f!="number"||f===0||Ry.has(l)?l==="float"?o.cssFloat=f:o[l]=(""+f).trim():o[l]=f+"px"}function Wh(o,l,f){if(l!=null&&typeof l!="object")throw Error(n(62));if(o=o.style,f!=null){for(var v in f)!f.hasOwnProperty(v)||l!=null&&l.hasOwnProperty(v)||(v.indexOf("--")===0?o.setProperty(v,""):v==="float"?o.cssFloat="":o[v]="");for(var C in l)v=l[C],l.hasOwnProperty(C)&&f[C]!==v&&Hh(o,C,v)}else for(var _ in l)l.hasOwnProperty(_)&&Hh(o,_,l[_])}function Ku(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Py=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Io=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gu(o){return Io.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function ts(){}var Kh=null;function Ti(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var No=null,Ds=null;function rl(o){var l=Ai(o);if(l&&(o=l.stateNode)){var f=o[Ur]||null;e:switch(o=l.stateNode,l.type){case"input":if(Wu(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+jn(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var v=f[l];if(v!==o&&v.form===o.form){var C=v[Ur]||null;if(!C)throw Error(n(90));Wu(v,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(l=0;l<f.length;l++)v=f[l],v.form===o.form&&el(v)}break e;case"textarea":Ty(o,f.value,f.defaultValue);break e;case"select":l=f.value,l!=null&&Ro(o,!!f.multiple,l,!1)}}}var $u=!1;function Oo(o,l,f){if($u)return o(l,f);$u=!0;try{var v=o(l);return v}finally{if($u=!1,(No!==null||Ds!==null)&&(x0(),No&&(l=No,o=Ds,Ds=No=null,rl(l),o)))for(l=0;l<o.length;l++)rl(o[l])}}function rs(o,l){var f=o.stateNode;if(f===null)return null;var v=f[Ur]||null;if(v===null)return null;f=v[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(o=o.type,v=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!v;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(n(231,l,typeof f));return f}var Ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nl=!1;if(Ri)try{var _t={};Object.defineProperty(_t,"passive",{get:function(){nl=!0}}),window.addEventListener("test",_t,_t),window.removeEventListener("test",_t,_t)}catch{nl=!1}var ks=null,Gh=null,il=null;function $h(){if(il)return il;var o,l=Gh,f=l.length,v,C="value"in ks?ks.value:ks.textContent,_=C.length;for(o=0;o<f&&l[o]===C[o];o++);var I=f-o;for(v=1;v<=I&&l[f-v]===C[_-v];v++);return il=C.slice(o,1<v?1-v:void 0)}function sl(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Ca(){return!0}function ns(){return!1}function Xr(o){function l(f,v,C,_,I){this._reactName=f,this._targetInst=C,this.type=v,this.nativeEvent=_,this.target=I,this.currentTarget=null;for(var k in o)o.hasOwnProperty(k)&&(f=o[k],this[k]=f?f(_):_[k]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Ca:ns,this.isPropagationStopped=ns,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Ca)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Ca)},persist:function(){},isPersistent:Ca}),l}var xa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ls=Xr(xa),jo=p({},xa,{view:0,detail:0}),Yh=Xr(jo),Mo,Yu,zs,Xu=p({},jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Do,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==zs&&(zs&&o.type==="mousemove"?(Mo=o.screenX-zs.screenX,Yu=o.screenY-zs.screenY):Yu=Mo=0,zs=o),Mo)},movementY:function(o){return"movementY"in o?o.movementY:Yu}}),Xh=Xr(Xu),al=p({},Xu,{dataTransfer:0}),Iy=Xr(al),Ny=p({},jo,{relatedTarget:0}),ol=Xr(Ny),Qh=p({},xa,{animationName:0,elapsedTime:0,pseudoElement:0}),Oy=Xr(Qh),Qu=p({},xa,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),jy=Xr(Qu),My=p({},xa,{data:0}),Us=Xr(My),Dy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ky={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ly={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zy(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=Ly[o])?!!l[o]:!1}function Do(){return zy}var _n=p({},jo,{key:function(o){if(o.key){var l=Dy[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=sl(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?ky[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Do,charCode:function(o){return o.type==="keypress"?sl(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?sl(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Uy=Xr(_n),By=p({},Xu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wa=Xr(By),b=p({},jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Do}),P=Xr(b),N=p({},xa,{propertyName:0,elapsedTime:0,pseudoElement:0}),B=Xr(N),Q=p({},Xu,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),te=Xr(Q),Se=p({},xa,{newState:0,oldState:0}),$e=Xr(Se),cr=[9,13,27,32],pt=Ri&&"CompositionEvent"in window,qt=null;Ri&&"documentMode"in document&&(qt=document.documentMode);var Pi=Ri&&"TextEvent"in window&&!qt,Bs=Ri&&(!pt||qt&&8<qt&&11>=qt),is=" ",ss=!1;function cl(o,l){switch(o){case"keyup":return cr.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ju(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Zu=!1;function Z$(o,l){switch(o){case"compositionend":return Ju(l);case"keypress":return l.which!==32?null:(ss=!0,is);case"textInput":return o=l.data,o===is&&ss?null:o;default:return null}}function eY(o,l){if(Zu)return o==="compositionend"||!pt&&cl(o,l)?(o=$h(),il=Gh=ks=null,Zu=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Bs&&l.locale!=="ko"?null:l.data;default:return null}}var tY={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vN(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!tY[o.type]:l==="textarea"}function gN(o,l,f,v){No?Ds?Ds.push(v):Ds=[v]:No=v,l=P0(l,"onChange"),0<l.length&&(f=new Ls("onChange","change",null,f,v),o.push({event:f,listeners:l}))}var Jh=null,Zh=null;function rY(o){Zj(o,0)}function qy(o){var l=Qn(o);if(el(l))return o}function yN(o,l){if(o==="change")return l}var bN=!1;if(Ri){var Wx;if(Ri){var Kx="oninput"in document;if(!Kx){var SN=document.createElement("div");SN.setAttribute("oninput","return;"),Kx=typeof SN.oninput=="function"}Wx=Kx}else Wx=!1;bN=Wx&&(!document.documentMode||9<document.documentMode)}function CN(){Jh&&(Jh.detachEvent("onpropertychange",xN),Zh=Jh=null)}function xN(o){if(o.propertyName==="value"&&qy(Zh)){var l=[];gN(l,Zh,o,Ti(o)),Oo(rY,l)}}function nY(o,l,f){o==="focusin"?(CN(),Jh=l,Zh=f,Jh.attachEvent("onpropertychange",xN)):o==="focusout"&&CN()}function iY(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return qy(Zh)}function sY(o,l){if(o==="click")return qy(l)}function aY(o,l){if(o==="input"||o==="change")return qy(l)}function oY(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Zn=typeof Object.is=="function"?Object.is:oY;function ef(o,l){if(Zn(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var f=Object.keys(o),v=Object.keys(l);if(f.length!==v.length)return!1;for(v=0;v<f.length;v++){var C=f[v];if(!Bt.call(l,C)||!Zn(o[C],l[C]))return!1}return!0}function wN(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function _N(o,l){var f=wN(o);o=0;for(var v;f;){if(f.nodeType===3){if(v=o+f.textContent.length,o<=l&&v>=l)return{node:f,offset:l-o};o=v}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=wN(f)}}function EN(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?EN(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function AN(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=Ms(o.document);l instanceof o.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)o=l.contentWindow;else break;l=Ms(o.document)}return l}function Gx(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var cY=Ri&&"documentMode"in document&&11>=document.documentMode,ed=null,$x=null,tf=null,Yx=!1;function TN(o,l,f){var v=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Yx||ed==null||ed!==Ms(v)||(v=ed,"selectionStart"in v&&Gx(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),tf&&ef(tf,v)||(tf=v,v=P0($x,"onSelect"),0<v.length&&(l=new Ls("onSelect","select",null,l,f),o.push({event:l,listeners:v}),l.target=ed)))}function ll(o,l){var f={};return f[o.toLowerCase()]=l.toLowerCase(),f["Webkit"+o]="webkit"+l,f["Moz"+o]="moz"+l,f}var td={animationend:ll("Animation","AnimationEnd"),animationiteration:ll("Animation","AnimationIteration"),animationstart:ll("Animation","AnimationStart"),transitionrun:ll("Transition","TransitionRun"),transitionstart:ll("Transition","TransitionStart"),transitioncancel:ll("Transition","TransitionCancel"),transitionend:ll("Transition","TransitionEnd")},Xx={},RN={};Ri&&(RN=document.createElement("div").style,"AnimationEvent"in window||(delete td.animationend.animation,delete td.animationiteration.animation,delete td.animationstart.animation),"TransitionEvent"in window||delete td.transitionend.transition);function ul(o){if(Xx[o])return Xx[o];if(!td[o])return o;var l=td[o],f;for(f in l)if(l.hasOwnProperty(f)&&f in RN)return Xx[o]=l[f];return o}var PN=ul("animationend"),IN=ul("animationiteration"),NN=ul("animationstart"),lY=ul("transitionrun"),uY=ul("transitionstart"),dY=ul("transitioncancel"),ON=ul("transitionend"),jN=new Map,Qx="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qx.push("scrollEnd");function as(o,l){jN.set(o,l),Os(l,[o])}var Vy=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Ii=[],rd=0,Jx=0;function Fy(){for(var o=rd,l=Jx=rd=0;l<o;){var f=Ii[l];Ii[l++]=null;var v=Ii[l];Ii[l++]=null;var C=Ii[l];Ii[l++]=null;var _=Ii[l];if(Ii[l++]=null,v!==null&&C!==null){var I=v.pending;I===null?C.next=C:(C.next=I.next,I.next=C),v.pending=C}_!==0&&MN(f,C,_)}}function Hy(o,l,f,v){Ii[rd++]=o,Ii[rd++]=l,Ii[rd++]=f,Ii[rd++]=v,Jx|=v,o.lanes|=v,o=o.alternate,o!==null&&(o.lanes|=v)}function Zx(o,l,f,v){return Hy(o,l,f,v),Wy(o)}function dl(o,l){return Hy(o,null,null,l),Wy(o)}function MN(o,l,f){o.lanes|=f;var v=o.alternate;v!==null&&(v.lanes|=f);for(var C=!1,_=o.return;_!==null;)_.childLanes|=f,v=_.alternate,v!==null&&(v.childLanes|=f),_.tag===22&&(o=_.stateNode,o===null||o._visibility&1||(C=!0)),o=_,_=_.return;return o.tag===3?(_=o.stateNode,C&&l!==null&&(C=31-$t(f),o=_.hiddenUpdates,v=o[C],v===null?o[C]=[l]:v.push(l),l.lane=f|536870912),_):null}function Wy(o){if(50<_f)throw _f=0,cw=null,Error(n(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var nd={};function hY(o,l,f,v){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ei(o,l,f,v){return new hY(o,l,f,v)}function e1(o){return o=o.prototype,!(!o||!o.isReactComponent)}function _a(o,l){var f=o.alternate;return f===null?(f=ei(o.tag,l,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=l,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&65011712,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,l=o.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f.refCleanup=o.refCleanup,f}function DN(o,l){o.flags&=65011714;var f=o.alternate;return f===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=f.childLanes,o.lanes=f.lanes,o.child=f.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=f.memoizedProps,o.memoizedState=f.memoizedState,o.updateQueue=f.updateQueue,o.type=f.type,l=f.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function Ky(o,l,f,v,C,_){var I=0;if(v=o,typeof o=="function")e1(o)&&(I=1);else if(typeof o=="string")I=gX(o,f,X.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case L:return o=ei(31,f,l,C),o.elementType=L,o.lanes=_,o;case x:return hl(f.children,C,_,l);case w:I=8,C|=24;break;case E:return o=ei(12,f,l,C|2),o.elementType=E,o.lanes=_,o;case D:return o=ei(13,f,l,C),o.elementType=D,o.lanes=_,o;case z:return o=ei(19,f,l,C),o.elementType=z,o.lanes=_,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case T:I=10;break e;case R:I=9;break e;case M:I=11;break e;case j:I=14;break e;case O:I=16,v=null;break e}I=29,f=Error(n(130,o===null?"null":typeof o,"")),v=null}return l=ei(I,f,l,C),l.elementType=o,l.type=v,l.lanes=_,l}function hl(o,l,f,v){return o=ei(7,o,v,l),o.lanes=f,o}function t1(o,l,f){return o=ei(6,o,null,l),o.lanes=f,o}function kN(o){var l=ei(18,null,null,0);return l.stateNode=o,l}function r1(o,l,f){return l=ei(4,o.children!==null?o.children:[],o.key,l),l.lanes=f,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var LN=new WeakMap;function Ni(o,l){if(typeof o=="object"&&o!==null){var f=LN.get(o);return f!==void 0?f:(l={value:o,source:l,stack:Ci(l)},LN.set(o,l),l)}return{value:o,source:l,stack:Ci(l)}}var id=[],sd=0,Gy=null,rf=0,Oi=[],ji=0,ko=null,qs=1,Vs="";function Ea(o,l){id[sd++]=rf,id[sd++]=Gy,Gy=o,rf=l}function zN(o,l,f){Oi[ji++]=qs,Oi[ji++]=Vs,Oi[ji++]=ko,ko=o;var v=qs;o=Vs;var C=32-$t(v)-1;v&=~(1<<C),f+=1;var _=32-$t(l)+C;if(30<_){var I=C-C%5;_=(v&(1<<I)-1).toString(32),v>>=I,C-=I,qs=1<<32-$t(l)+C|f<<C|v,Vs=_+o}else qs=1<<_|f<<C|v,Vs=o}function n1(o){o.return!==null&&(Ea(o,1),zN(o,1,0))}function i1(o){for(;o===Gy;)Gy=id[--sd],id[sd]=null,rf=id[--sd],id[sd]=null;for(;o===ko;)ko=Oi[--ji],Oi[ji]=null,Vs=Oi[--ji],Oi[ji]=null,qs=Oi[--ji],Oi[ji]=null}function UN(o,l){Oi[ji++]=qs,Oi[ji++]=Vs,Oi[ji++]=ko,qs=l.id,Vs=l.overflow,ko=o}var Qr=null,Lt=null,ot=!1,Lo=null,Mi=!1,s1=Error(n(519));function zo(o){var l=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw nf(Ni(l,o)),s1}function BN(o){var l=o.stateNode,f=o.type,v=o.memoizedProps;switch(l[fr]=o,l[Ur]=v,f){case"dialog":Ze("cancel",l),Ze("close",l);break;case"iframe":case"object":case"embed":Ze("load",l);break;case"video":case"audio":for(f=0;f<Af.length;f++)Ze(Af[f],l);break;case"source":Ze("error",l);break;case"img":case"image":case"link":Ze("error",l),Ze("load",l);break;case"details":Ze("toggle",l);break;case"input":Ze("invalid",l),Ay(l,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0);break;case"select":Ze("invalid",l);break;case"textarea":Ze("invalid",l),Po(l,v.value,v.defaultValue,v.children)}f=v.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||v.suppressHydrationWarning===!0||nM(l.textContent,f)?(v.popover!=null&&(Ze("beforetoggle",l),Ze("toggle",l)),v.onScroll!=null&&Ze("scroll",l),v.onScrollEnd!=null&&Ze("scrollend",l),v.onClick!=null&&(l.onclick=ts),l=!0):l=!1,l||zo(o,!0)}function qN(o){for(Qr=o.return;Qr;)switch(Qr.tag){case 5:case 31:case 13:Mi=!1;return;case 27:case 3:Mi=!0;return;default:Qr=Qr.return}}function ad(o){if(o!==Qr)return!1;if(!ot)return qN(o),ot=!0,!1;var l=o.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=o.type,f=!(f!=="form"&&f!=="button")||ww(o.type,o.memoizedProps)),f=!f),f&&Lt&&zo(o),qN(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));Lt=hM(o)}else if(l===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));Lt=hM(o)}else l===27?(l=Lt,Jo(o.type)?(o=Rw,Rw=null,Lt=o):Lt=l):Lt=Qr?ki(o.stateNode.nextSibling):null;return!0}function fl(){Lt=Qr=null,ot=!1}function a1(){var o=Lo;return o!==null&&(zn===null?zn=o:zn.push.apply(zn,o),Lo=null),o}function nf(o){Lo===null?Lo=[o]:Lo.push(o)}var o1=H(null),pl=null,Aa=null;function Uo(o,l,f){le(o1,l._currentValue),l._currentValue=f}function Ta(o){o._currentValue=o1.current,G(o1)}function c1(o,l,f){for(;o!==null;){var v=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,v!==null&&(v.childLanes|=l)):v!==null&&(v.childLanes&l)!==l&&(v.childLanes|=l),o===f)break;o=o.return}}function l1(o,l,f,v){var C=o.child;for(C!==null&&(C.return=o);C!==null;){var _=C.dependencies;if(_!==null){var I=C.child;_=_.firstContext;e:for(;_!==null;){var k=_;_=C;for(var W=0;W<l.length;W++)if(k.context===l[W]){_.lanes|=f,k=_.alternate,k!==null&&(k.lanes|=f),c1(_.return,f,o),v||(I=null);break e}_=k.next}}else if(C.tag===18){if(I=C.return,I===null)throw Error(n(341));I.lanes|=f,_=I.alternate,_!==null&&(_.lanes|=f),c1(I,f,o),I=null}else I=C.child;if(I!==null)I.return=C;else for(I=C;I!==null;){if(I===o){I=null;break}if(C=I.sibling,C!==null){C.return=I.return,I=C;break}I=I.return}C=I}}function od(o,l,f,v){o=null;for(var C=l,_=!1;C!==null;){if(!_){if((C.flags&524288)!==0)_=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var I=C.alternate;if(I===null)throw Error(n(387));if(I=I.memoizedProps,I!==null){var k=C.type;Zn(C.pendingProps.value,I.value)||(o!==null?o.push(k):o=[k])}}else if(C===we.current){if(I=C.alternate,I===null)throw Error(n(387));I.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(o!==null?o.push(Nf):o=[Nf])}C=C.return}o!==null&&l1(l,o,f,v),l.flags|=262144}function $y(o){for(o=o.firstContext;o!==null;){if(!Zn(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function ml(o){pl=o,Aa=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Jr(o){return VN(pl,o)}function Yy(o,l){return pl===null&&ml(o),VN(o,l)}function VN(o,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},Aa===null){if(o===null)throw Error(n(308));Aa=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else Aa=Aa.next=l;return f}var fY=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(f,v){o.push(v)}};this.abort=function(){l.aborted=!0,o.forEach(function(f){return f()})}},pY=t.unstable_scheduleCallback,mY=t.unstable_NormalPriority,vr={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function u1(){return{controller:new fY,data:new Map,refCount:0}}function sf(o){o.refCount--,o.refCount===0&&pY(mY,function(){o.controller.abort()})}var af=null,d1=0,cd=0,ld=null;function vY(o,l){if(af===null){var f=af=[];d1=0,cd=pw(),ld={status:"pending",value:void 0,then:function(v){f.push(v)}}}return d1++,l.then(FN,FN),l}function FN(){if(--d1===0&&af!==null){ld!==null&&(ld.status="fulfilled");var o=af;af=null,cd=0,ld=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function gY(o,l){var f=[],v={status:"pending",value:null,reason:null,then:function(C){f.push(C)}};return o.then(function(){v.status="fulfilled",v.value=l;for(var C=0;C<f.length;C++)(0,f[C])(l)},function(C){for(v.status="rejected",v.reason=C,C=0;C<f.length;C++)(0,f[C])(void 0)}),v}var HN=Y.S;Y.S=function(o,l){Tj=Rr(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&vY(o,l),HN!==null&&HN(o,l)};var vl=H(null);function h1(){var o=vl.current;return o!==null?o:It.pooledCache}function Xy(o,l){l===null?le(vl,vl.current):le(vl,l.pool)}function WN(){var o=h1();return o===null?null:{parent:vr._currentValue,pool:o}}var ud=Error(n(460)),f1=Error(n(474)),Qy=Error(n(542)),Jy={then:function(){}};function KN(o){return o=o.status,o==="fulfilled"||o==="rejected"}function GN(o,l,f){switch(f=o[f],f===void 0?o.push(l):f!==l&&(l.then(ts,ts),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,YN(o),o;default:if(typeof l.status=="string")l.then(ts,ts);else{if(o=It,o!==null&&100<o.shellSuspendCounter)throw Error(n(482));o=l,o.status="pending",o.then(function(v){if(l.status==="pending"){var C=l;C.status="fulfilled",C.value=v}},function(v){if(l.status==="pending"){var C=l;C.status="rejected",C.reason=v}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,YN(o),o}throw yl=l,ud}}function gl(o){try{var l=o._init;return l(o._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(yl=f,ud):f}}var yl=null;function $N(){if(yl===null)throw Error(n(459));var o=yl;return yl=null,o}function YN(o){if(o===ud||o===Qy)throw Error(n(483))}var dd=null,of=0;function Zy(o){var l=of;return of+=1,dd===null&&(dd=[]),GN(dd,o,l)}function cf(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function e0(o,l){throw l.$$typeof===g?Error(n(525)):(o=Object.prototype.toString.call(l),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function XN(o){function l($,K){if(o){var J=$.deletions;J===null?($.deletions=[K],$.flags|=16):J.push(K)}}function f($,K){if(!o)return null;for(;K!==null;)l($,K),K=K.sibling;return null}function v($){for(var K=new Map;$!==null;)$.key!==null?K.set($.key,$):K.set($.index,$),$=$.sibling;return K}function C($,K){return $=_a($,K),$.index=0,$.sibling=null,$}function _($,K,J){return $.index=J,o?(J=$.alternate,J!==null?(J=J.index,J<K?($.flags|=67108866,K):J):($.flags|=67108866,K)):($.flags|=1048576,K)}function I($){return o&&$.alternate===null&&($.flags|=67108866),$}function k($,K,J,ce){return K===null||K.tag!==6?(K=t1(J,$.mode,ce),K.return=$,K):(K=C(K,J),K.return=$,K)}function W($,K,J,ce){var Me=J.type;return Me===x?oe($,K,J.props.children,ce,J.key):K!==null&&(K.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===O&&gl(Me)===K.type)?(K=C(K,J.props),cf(K,J),K.return=$,K):(K=Ky(J.type,J.key,J.props,null,$.mode,ce),cf(K,J),K.return=$,K)}function Z($,K,J,ce){return K===null||K.tag!==4||K.stateNode.containerInfo!==J.containerInfo||K.stateNode.implementation!==J.implementation?(K=r1(J,$.mode,ce),K.return=$,K):(K=C(K,J.children||[]),K.return=$,K)}function oe($,K,J,ce,Me){return K===null||K.tag!==7?(K=hl(J,$.mode,ce,Me),K.return=$,K):(K=C(K,J),K.return=$,K)}function de($,K,J){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=t1(""+K,$.mode,J),K.return=$,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case y:return J=Ky(K.type,K.key,K.props,null,$.mode,J),cf(J,K),J.return=$,J;case S:return K=r1(K,$.mode,J),K.return=$,K;case O:return K=gl(K),de($,K,J)}if(Ae(K)||F(K))return K=hl(K,$.mode,J,null),K.return=$,K;if(typeof K.then=="function")return de($,Zy(K),J);if(K.$$typeof===T)return de($,Yy($,K),J);e0($,K)}return null}function ee($,K,J,ce){var Me=K!==null?K.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Me!==null?null:k($,K,""+J,ce);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case y:return J.key===Me?W($,K,J,ce):null;case S:return J.key===Me?Z($,K,J,ce):null;case O:return J=gl(J),ee($,K,J,ce)}if(Ae(J)||F(J))return Me!==null?null:oe($,K,J,ce,null);if(typeof J.then=="function")return ee($,K,Zy(J),ce);if(J.$$typeof===T)return ee($,K,Yy($,J),ce);e0($,J)}return null}function ne($,K,J,ce,Me){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return $=$.get(J)||null,k(K,$,""+ce,Me);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case y:return $=$.get(ce.key===null?J:ce.key)||null,W(K,$,ce,Me);case S:return $=$.get(ce.key===null?J:ce.key)||null,Z(K,$,ce,Me);case O:return ce=gl(ce),ne($,K,J,ce,Me)}if(Ae(ce)||F(ce))return $=$.get(J)||null,oe(K,$,ce,Me,null);if(typeof ce.then=="function")return ne($,K,J,Zy(ce),Me);if(ce.$$typeof===T)return ne($,K,J,Yy(K,ce),Me);e0(K,ce)}return null}function Pe($,K,J,ce){for(var Me=null,dt=null,Ie=K,Qe=K=0,nt=null;Ie!==null&&Qe<J.length;Qe++){Ie.index>Qe?(nt=Ie,Ie=null):nt=Ie.sibling;var ht=ee($,Ie,J[Qe],ce);if(ht===null){Ie===null&&(Ie=nt);break}o&&Ie&&ht.alternate===null&&l($,Ie),K=_(ht,K,Qe),dt===null?Me=ht:dt.sibling=ht,dt=ht,Ie=nt}if(Qe===J.length)return f($,Ie),ot&&Ea($,Qe),Me;if(Ie===null){for(;Qe<J.length;Qe++)Ie=de($,J[Qe],ce),Ie!==null&&(K=_(Ie,K,Qe),dt===null?Me=Ie:dt.sibling=Ie,dt=Ie);return ot&&Ea($,Qe),Me}for(Ie=v(Ie);Qe<J.length;Qe++)nt=ne(Ie,$,Qe,J[Qe],ce),nt!==null&&(o&&nt.alternate!==null&&Ie.delete(nt.key===null?Qe:nt.key),K=_(nt,K,Qe),dt===null?Me=nt:dt.sibling=nt,dt=nt);return o&&Ie.forEach(function(nc){return l($,nc)}),ot&&Ea($,Qe),Me}function ze($,K,J,ce){if(J==null)throw Error(n(151));for(var Me=null,dt=null,Ie=K,Qe=K=0,nt=null,ht=J.next();Ie!==null&&!ht.done;Qe++,ht=J.next()){Ie.index>Qe?(nt=Ie,Ie=null):nt=Ie.sibling;var nc=ee($,Ie,ht.value,ce);if(nc===null){Ie===null&&(Ie=nt);break}o&&Ie&&nc.alternate===null&&l($,Ie),K=_(nc,K,Qe),dt===null?Me=nc:dt.sibling=nc,dt=nc,Ie=nt}if(ht.done)return f($,Ie),ot&&Ea($,Qe),Me;if(Ie===null){for(;!ht.done;Qe++,ht=J.next())ht=de($,ht.value,ce),ht!==null&&(K=_(ht,K,Qe),dt===null?Me=ht:dt.sibling=ht,dt=ht);return ot&&Ea($,Qe),Me}for(Ie=v(Ie);!ht.done;Qe++,ht=J.next())ht=ne(Ie,$,Qe,ht.value,ce),ht!==null&&(o&&ht.alternate!==null&&Ie.delete(ht.key===null?Qe:ht.key),K=_(ht,K,Qe),dt===null?Me=ht:dt.sibling=ht,dt=ht);return o&&Ie.forEach(function(RX){return l($,RX)}),ot&&Ea($,Qe),Me}function Tt($,K,J,ce){if(typeof J=="object"&&J!==null&&J.type===x&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case y:e:{for(var Me=J.key;K!==null;){if(K.key===Me){if(Me=J.type,Me===x){if(K.tag===7){f($,K.sibling),ce=C(K,J.props.children),ce.return=$,$=ce;break e}}else if(K.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===O&&gl(Me)===K.type){f($,K.sibling),ce=C(K,J.props),cf(ce,J),ce.return=$,$=ce;break e}f($,K);break}else l($,K);K=K.sibling}J.type===x?(ce=hl(J.props.children,$.mode,ce,J.key),ce.return=$,$=ce):(ce=Ky(J.type,J.key,J.props,null,$.mode,ce),cf(ce,J),ce.return=$,$=ce)}return I($);case S:e:{for(Me=J.key;K!==null;){if(K.key===Me)if(K.tag===4&&K.stateNode.containerInfo===J.containerInfo&&K.stateNode.implementation===J.implementation){f($,K.sibling),ce=C(K,J.children||[]),ce.return=$,$=ce;break e}else{f($,K);break}else l($,K);K=K.sibling}ce=r1(J,$.mode,ce),ce.return=$,$=ce}return I($);case O:return J=gl(J),Tt($,K,J,ce)}if(Ae(J))return Pe($,K,J,ce);if(F(J)){if(Me=F(J),typeof Me!="function")throw Error(n(150));return J=Me.call(J),ze($,K,J,ce)}if(typeof J.then=="function")return Tt($,K,Zy(J),ce);if(J.$$typeof===T)return Tt($,K,Yy($,J),ce);e0($,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,K!==null&&K.tag===6?(f($,K.sibling),ce=C(K,J),ce.return=$,$=ce):(f($,K),ce=t1(J,$.mode,ce),ce.return=$,$=ce),I($)):f($,K)}return function($,K,J,ce){try{of=0;var Me=Tt($,K,J,ce);return dd=null,Me}catch(Ie){if(Ie===ud||Ie===Qy)throw Ie;var dt=ei(29,Ie,null,$.mode);return dt.lanes=ce,dt.return=$,dt}finally{}}}var bl=XN(!0),QN=XN(!1),Bo=!1;function p1(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function m1(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function qo(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Vo(o,l,f){var v=o.updateQueue;if(v===null)return null;if(v=v.shared,(mt&2)!==0){var C=v.pending;return C===null?l.next=l:(l.next=C.next,C.next=l),v.pending=l,l=Wy(o),MN(o,null,f),l}return Hy(o,v,l,f),Wy(o)}function lf(o,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var v=l.lanes;v&=o.pendingLanes,f|=v,l.lanes=f,Dh(o,f)}}function v1(o,l){var f=o.updateQueue,v=o.alternate;if(v!==null&&(v=v.updateQueue,f===v)){var C=null,_=null;if(f=f.firstBaseUpdate,f!==null){do{var I={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};_===null?C=_=I:_=_.next=I,f=f.next}while(f!==null);_===null?C=_=l:_=_.next=l}else C=_=l;f={baseState:v.baseState,firstBaseUpdate:C,lastBaseUpdate:_,shared:v.shared,callbacks:v.callbacks},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=l:o.next=l,f.lastBaseUpdate=l}var g1=!1;function uf(){if(g1){var o=ld;if(o!==null)throw o}}function df(o,l,f,v){g1=!1;var C=o.updateQueue;Bo=!1;var _=C.firstBaseUpdate,I=C.lastBaseUpdate,k=C.shared.pending;if(k!==null){C.shared.pending=null;var W=k,Z=W.next;W.next=null,I===null?_=Z:I.next=Z,I=W;var oe=o.alternate;oe!==null&&(oe=oe.updateQueue,k=oe.lastBaseUpdate,k!==I&&(k===null?oe.firstBaseUpdate=Z:k.next=Z,oe.lastBaseUpdate=W))}if(_!==null){var de=C.baseState;I=0,oe=Z=W=null,k=_;do{var ee=k.lane&-536870913,ne=ee!==k.lane;if(ne?(rt&ee)===ee:(v&ee)===ee){ee!==0&&ee===cd&&(g1=!0),oe!==null&&(oe=oe.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Pe=o,ze=k;ee=l;var Tt=f;switch(ze.tag){case 1:if(Pe=ze.payload,typeof Pe=="function"){de=Pe.call(Tt,de,ee);break e}de=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=ze.payload,ee=typeof Pe=="function"?Pe.call(Tt,de,ee):Pe,ee==null)break e;de=p({},de,ee);break e;case 2:Bo=!0}}ee=k.callback,ee!==null&&(o.flags|=64,ne&&(o.flags|=8192),ne=C.callbacks,ne===null?C.callbacks=[ee]:ne.push(ee))}else ne={lane:ee,tag:k.tag,payload:k.payload,callback:k.callback,next:null},oe===null?(Z=oe=ne,W=de):oe=oe.next=ne,I|=ee;if(k=k.next,k===null){if(k=C.shared.pending,k===null)break;ne=k,k=ne.next,ne.next=null,C.lastBaseUpdate=ne,C.shared.pending=null}}while(!0);oe===null&&(W=de),C.baseState=W,C.firstBaseUpdate=Z,C.lastBaseUpdate=oe,_===null&&(C.shared.lanes=0),Go|=I,o.lanes=I,o.memoizedState=de}}function JN(o,l){if(typeof o!="function")throw Error(n(191,o));o.call(l)}function ZN(o,l){var f=o.callbacks;if(f!==null)for(o.callbacks=null,o=0;o<f.length;o++)JN(f[o],l)}var hd=H(null),t0=H(0);function eO(o,l){o=ka,le(t0,o),le(hd,l),ka=o|l.baseLanes}function y1(){le(t0,ka),le(hd,hd.current)}function b1(){ka=t0.current,G(hd),G(t0)}var ti=H(null),Di=null;function Fo(o){var l=o.alternate;le(lr,lr.current&1),le(ti,o),Di===null&&(l===null||hd.current!==null||l.memoizedState!==null)&&(Di=o)}function S1(o){le(lr,lr.current),le(ti,o),Di===null&&(Di=o)}function tO(o){o.tag===22?(le(lr,lr.current),le(ti,o),Di===null&&(Di=o)):Ho()}function Ho(){le(lr,lr.current),le(ti,ti.current)}function ri(o){G(ti),Di===o&&(Di=null),G(lr)}var lr=H(0);function r0(o){for(var l=o;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||Aw(f)||Tw(f)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Ra=0,Ye=null,Et=null,gr=null,n0=!1,fd=!1,Sl=!1,i0=0,hf=0,pd=null,yY=0;function er(){throw Error(n(321))}function C1(o,l){if(l===null)return!1;for(var f=0;f<l.length&&f<o.length;f++)if(!Zn(o[f],l[f]))return!1;return!0}function x1(o,l,f,v,C,_){return Ra=_,Ye=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Y.H=o===null||o.memoizedState===null?zO:L1,Sl=!1,_=f(v,C),Sl=!1,fd&&(_=nO(l,f,v,C)),rO(o),_}function rO(o){Y.H=mf;var l=Et!==null&&Et.next!==null;if(Ra=0,gr=Et=Ye=null,n0=!1,hf=0,pd=null,l)throw Error(n(300));o===null||yr||(o=o.dependencies,o!==null&&$y(o)&&(yr=!0))}function nO(o,l,f,v){Ye=o;var C=0;do{if(fd&&(pd=null),hf=0,fd=!1,25<=C)throw Error(n(301));if(C+=1,gr=Et=null,o.updateQueue!=null){var _=o.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}Y.H=UO,_=l(f,v)}while(fd);return _}function bY(){var o=Y.H,l=o.useState()[0];return l=typeof l.then=="function"?ff(l):l,o=o.useState()[0],(Et!==null?Et.memoizedState:null)!==o&&(Ye.flags|=1024),l}function w1(){var o=i0!==0;return i0=0,o}function _1(o,l,f){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~f}function E1(o){if(n0){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}n0=!1}Ra=0,gr=Et=Ye=null,fd=!1,hf=i0=0,pd=null}function En(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gr===null?Ye.memoizedState=gr=o:gr=gr.next=o,gr}function ur(){if(Et===null){var o=Ye.alternate;o=o!==null?o.memoizedState:null}else o=Et.next;var l=gr===null?Ye.memoizedState:gr.next;if(l!==null)gr=l,Et=o;else{if(o===null)throw Ye.alternate===null?Error(n(467)):Error(n(310));Et=o,o={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},gr===null?Ye.memoizedState=gr=o:gr=gr.next=o}return gr}function s0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ff(o){var l=hf;return hf+=1,pd===null&&(pd=[]),o=GN(pd,o,l),l=Ye,(gr===null?l.memoizedState:gr.next)===null&&(l=l.alternate,Y.H=l===null||l.memoizedState===null?zO:L1),o}function a0(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return ff(o);if(o.$$typeof===T)return Jr(o)}throw Error(n(438,String(o)))}function A1(o){var l=null,f=Ye.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var v=Ye.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(l={data:v.data.map(function(C){return C.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=s0(),Ye.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(o),v=0;v<o;v++)f[v]=V;return l.index++,f}function Pa(o,l){return typeof l=="function"?l(o):l}function o0(o){var l=ur();return T1(l,Et,o)}function T1(o,l,f){var v=o.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=f;var C=o.baseQueue,_=v.pending;if(_!==null){if(C!==null){var I=C.next;C.next=_.next,_.next=I}l.baseQueue=C=_,v.pending=null}if(_=o.baseState,C===null)o.memoizedState=_;else{l=C.next;var k=I=null,W=null,Z=l,oe=!1;do{var de=Z.lane&-536870913;if(de!==Z.lane?(rt&de)===de:(Ra&de)===de){var ee=Z.revertLane;if(ee===0)W!==null&&(W=W.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),de===cd&&(oe=!0);else if((Ra&ee)===ee){Z=Z.next,ee===cd&&(oe=!0);continue}else de={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},W===null?(k=W=de,I=_):W=W.next=de,Ye.lanes|=ee,Go|=ee;de=Z.action,Sl&&f(_,de),_=Z.hasEagerState?Z.eagerState:f(_,de)}else ee={lane:de,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},W===null?(k=W=ee,I=_):W=W.next=ee,Ye.lanes|=de,Go|=de;Z=Z.next}while(Z!==null&&Z!==l);if(W===null?I=_:W.next=k,!Zn(_,o.memoizedState)&&(yr=!0,oe&&(f=ld,f!==null)))throw f;o.memoizedState=_,o.baseState=I,o.baseQueue=W,v.lastRenderedState=_}return C===null&&(v.lanes=0),[o.memoizedState,v.dispatch]}function R1(o){var l=ur(),f=l.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=o;var v=f.dispatch,C=f.pending,_=l.memoizedState;if(C!==null){f.pending=null;var I=C=C.next;do _=o(_,I.action),I=I.next;while(I!==C);Zn(_,l.memoizedState)||(yr=!0),l.memoizedState=_,l.baseQueue===null&&(l.baseState=_),f.lastRenderedState=_}return[_,v]}function iO(o,l,f){var v=Ye,C=ur(),_=ot;if(_){if(f===void 0)throw Error(n(407));f=f()}else f=l();var I=!Zn((Et||C).memoizedState,f);if(I&&(C.memoizedState=f,yr=!0),C=C.queue,N1(oO.bind(null,v,C,o),[o]),C.getSnapshot!==l||I||gr!==null&&gr.memoizedState.tag&1){if(v.flags|=2048,md(9,{destroy:void 0},aO.bind(null,v,C,f,l),null),It===null)throw Error(n(349));_||(Ra&127)!==0||sO(v,l,f)}return f}function sO(o,l,f){o.flags|=16384,o={getSnapshot:l,value:f},l=Ye.updateQueue,l===null?(l=s0(),Ye.updateQueue=l,l.stores=[o]):(f=l.stores,f===null?l.stores=[o]:f.push(o))}function aO(o,l,f,v){l.value=f,l.getSnapshot=v,cO(l)&&lO(o)}function oO(o,l,f){return f(function(){cO(l)&&lO(o)})}function cO(o){var l=o.getSnapshot;o=o.value;try{var f=l();return!Zn(o,f)}catch{return!0}}function lO(o){var l=dl(o,2);l!==null&&Un(l,o,2)}function P1(o){var l=En();if(typeof o=="function"){var f=o;if(o=f(),Sl){On(!0);try{f()}finally{On(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:o},l}function uO(o,l,f,v){return o.baseState=f,T1(o,Et,typeof v=="function"?v:Pa)}function SY(o,l,f,v,C){if(u0(o))throw Error(n(485));if(o=l.action,o!==null){var _={payload:C,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){_.listeners.push(I)}};Y.T!==null?f(!0):_.isTransition=!1,v(_),f=l.pending,f===null?(_.next=l.pending=_,dO(l,_)):(_.next=f.next,l.pending=f.next=_)}}function dO(o,l){var f=l.action,v=l.payload,C=o.state;if(l.isTransition){var _=Y.T,I={};Y.T=I;try{var k=f(C,v),W=Y.S;W!==null&&W(I,k),hO(o,l,k)}catch(Z){I1(o,l,Z)}finally{_!==null&&I.types!==null&&(_.types=I.types),Y.T=_}}else try{_=f(C,v),hO(o,l,_)}catch(Z){I1(o,l,Z)}}function hO(o,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(v){fO(o,l,v)},function(v){return I1(o,l,v)}):fO(o,l,f)}function fO(o,l,f){l.status="fulfilled",l.value=f,pO(l),o.state=f,l=o.pending,l!==null&&(f=l.next,f===l?o.pending=null:(f=f.next,l.next=f,dO(o,f)))}function I1(o,l,f){var v=o.pending;if(o.pending=null,v!==null){v=v.next;do l.status="rejected",l.reason=f,pO(l),l=l.next;while(l!==v)}o.action=null}function pO(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function mO(o,l){return l}function vO(o,l){if(ot){var f=It.formState;if(f!==null){e:{var v=Ye;if(ot){if(Lt){t:{for(var C=Lt,_=Mi;C.nodeType!==8;){if(!_){C=null;break t}if(C=ki(C.nextSibling),C===null){C=null;break t}}_=C.data,C=_==="F!"||_==="F"?C:null}if(C){Lt=ki(C.nextSibling),v=C.data==="F!";break e}}zo(v)}v=!1}v&&(l=f[0])}}return f=En(),f.memoizedState=f.baseState=l,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mO,lastRenderedState:l},f.queue=v,f=DO.bind(null,Ye,v),v.dispatch=f,v=P1(!1),_=k1.bind(null,Ye,!1,v.queue),v=En(),C={state:l,dispatch:null,action:o,pending:null},v.queue=C,f=SY.bind(null,Ye,C,_,f),C.dispatch=f,v.memoizedState=o,[l,f,!1]}function gO(o){var l=ur();return yO(l,Et,o)}function yO(o,l,f){if(l=T1(o,l,mO)[0],o=o0(Pa)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var v=ff(l)}catch(I){throw I===ud?Qy:I}else v=l;l=ur();var C=l.queue,_=C.dispatch;return f!==l.memoizedState&&(Ye.flags|=2048,md(9,{destroy:void 0},CY.bind(null,C,f),null)),[v,_,o]}function CY(o,l){o.action=l}function bO(o){var l=ur(),f=Et;if(f!==null)return yO(l,f,o);ur(),l=l.memoizedState,f=ur();var v=f.queue.dispatch;return f.memoizedState=o,[l,v,!1]}function md(o,l,f,v){return o={tag:o,create:f,deps:v,inst:l,next:null},l=Ye.updateQueue,l===null&&(l=s0(),Ye.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=o.next=o:(v=f.next,f.next=o,o.next=v,l.lastEffect=o),o}function SO(){return ur().memoizedState}function c0(o,l,f,v){var C=En();Ye.flags|=o,C.memoizedState=md(1|l,{destroy:void 0},f,v===void 0?null:v)}function l0(o,l,f,v){var C=ur();v=v===void 0?null:v;var _=C.memoizedState.inst;Et!==null&&v!==null&&C1(v,Et.memoizedState.deps)?C.memoizedState=md(l,_,f,v):(Ye.flags|=o,C.memoizedState=md(1|l,_,f,v))}function CO(o,l){c0(8390656,8,o,l)}function N1(o,l){l0(2048,8,o,l)}function xY(o){Ye.flags|=4;var l=Ye.updateQueue;if(l===null)l=s0(),Ye.updateQueue=l,l.events=[o];else{var f=l.events;f===null?l.events=[o]:f.push(o)}}function xO(o){var l=ur().memoizedState;return xY({ref:l,nextImpl:o}),function(){if((mt&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}function wO(o,l){return l0(4,2,o,l)}function _O(o,l){return l0(4,4,o,l)}function EO(o,l){if(typeof l=="function"){o=o();var f=l(o);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function AO(o,l,f){f=f!=null?f.concat([o]):null,l0(4,4,EO.bind(null,l,o),f)}function O1(){}function TO(o,l){var f=ur();l=l===void 0?null:l;var v=f.memoizedState;return l!==null&&C1(l,v[1])?v[0]:(f.memoizedState=[o,l],o)}function RO(o,l){var f=ur();l=l===void 0?null:l;var v=f.memoizedState;if(l!==null&&C1(l,v[1]))return v[0];if(v=o(),Sl){On(!0);try{o()}finally{On(!1)}}return f.memoizedState=[v,l],v}function j1(o,l,f){return f===void 0||(Ra&1073741824)!==0&&(rt&261930)===0?o.memoizedState=l:(o.memoizedState=f,o=Pj(),Ye.lanes|=o,Go|=o,f)}function PO(o,l,f,v){return Zn(f,l)?f:hd.current!==null?(o=j1(o,f,v),Zn(o,l)||(yr=!0),o):(Ra&42)===0||(Ra&1073741824)!==0&&(rt&261930)===0?(yr=!0,o.memoizedState=f):(o=Pj(),Ye.lanes|=o,Go|=o,l)}function IO(o,l,f,v,C){var _=ae.p;ae.p=_!==0&&8>_?_:8;var I=Y.T,k={};Y.T=k,k1(o,!1,l,f);try{var W=C(),Z=Y.S;if(Z!==null&&Z(k,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var oe=gY(W,v);pf(o,l,oe,si(o))}else pf(o,l,v,si(o))}catch(de){pf(o,l,{then:function(){},status:"rejected",reason:de},si())}finally{ae.p=_,I!==null&&k.types!==null&&(I.types=k.types),Y.T=I}}function wY(){}function M1(o,l,f,v){if(o.tag!==5)throw Error(n(476));var C=NO(o).queue;IO(o,C,l,pe,f===null?wY:function(){return OO(o),f(v)})}function NO(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:pe},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:f},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function OO(o){var l=NO(o);l.next===null&&(l=o.alternate.memoizedState),pf(o,l.next.queue,{},si())}function D1(){return Jr(Nf)}function jO(){return ur().memoizedState}function MO(){return ur().memoizedState}function _Y(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var f=si();o=qo(f);var v=Vo(l,o,f);v!==null&&(Un(v,l,f),lf(v,l,f)),l={cache:u1()},o.payload=l;return}l=l.return}}function EY(o,l,f){var v=si();f={lane:v,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},u0(o)?kO(l,f):(f=Zx(o,l,f,v),f!==null&&(Un(f,o,v),LO(f,l,v)))}function DO(o,l,f){var v=si();pf(o,l,f,v)}function pf(o,l,f,v){var C={lane:v,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(u0(o))kO(l,C);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=l.lastRenderedReducer,_!==null))try{var I=l.lastRenderedState,k=_(I,f);if(C.hasEagerState=!0,C.eagerState=k,Zn(k,I))return Hy(o,l,C,0),It===null&&Fy(),!1}catch{}finally{}if(f=Zx(o,l,C,v),f!==null)return Un(f,o,v),LO(f,l,v),!0}return!1}function k1(o,l,f,v){if(v={lane:2,revertLane:pw(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},u0(o)){if(l)throw Error(n(479))}else l=Zx(o,f,v,2),l!==null&&Un(l,o,2)}function u0(o){var l=o.alternate;return o===Ye||l!==null&&l===Ye}function kO(o,l){fd=n0=!0;var f=o.pending;f===null?l.next=l:(l.next=f.next,f.next=l),o.pending=l}function LO(o,l,f){if((f&4194048)!==0){var v=l.lanes;v&=o.pendingLanes,f|=v,l.lanes=f,Dh(o,f)}}var mf={readContext:Jr,use:a0,useCallback:er,useContext:er,useEffect:er,useImperativeHandle:er,useLayoutEffect:er,useInsertionEffect:er,useMemo:er,useReducer:er,useRef:er,useState:er,useDebugValue:er,useDeferredValue:er,useTransition:er,useSyncExternalStore:er,useId:er,useHostTransitionStatus:er,useFormState:er,useActionState:er,useOptimistic:er,useMemoCache:er,useCacheRefresh:er};mf.useEffectEvent=er;var zO={readContext:Jr,use:a0,useCallback:function(o,l){return En().memoizedState=[o,l===void 0?null:l],o},useContext:Jr,useEffect:CO,useImperativeHandle:function(o,l,f){f=f!=null?f.concat([o]):null,c0(4194308,4,EO.bind(null,l,o),f)},useLayoutEffect:function(o,l){return c0(4194308,4,o,l)},useInsertionEffect:function(o,l){c0(4,2,o,l)},useMemo:function(o,l){var f=En();l=l===void 0?null:l;var v=o();if(Sl){On(!0);try{o()}finally{On(!1)}}return f.memoizedState=[v,l],v},useReducer:function(o,l,f){var v=En();if(f!==void 0){var C=f(l);if(Sl){On(!0);try{f(l)}finally{On(!1)}}}else C=l;return v.memoizedState=v.baseState=C,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:C},v.queue=o,o=o.dispatch=EY.bind(null,Ye,o),[v.memoizedState,o]},useRef:function(o){var l=En();return o={current:o},l.memoizedState=o},useState:function(o){o=P1(o);var l=o.queue,f=DO.bind(null,Ye,l);return l.dispatch=f,[o.memoizedState,f]},useDebugValue:O1,useDeferredValue:function(o,l){var f=En();return j1(f,o,l)},useTransition:function(){var o=P1(!1);return o=IO.bind(null,Ye,o.queue,!0,!1),En().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,f){var v=Ye,C=En();if(ot){if(f===void 0)throw Error(n(407));f=f()}else{if(f=l(),It===null)throw Error(n(349));(rt&127)!==0||sO(v,l,f)}C.memoizedState=f;var _={value:f,getSnapshot:l};return C.queue=_,CO(oO.bind(null,v,_,o),[o]),v.flags|=2048,md(9,{destroy:void 0},aO.bind(null,v,_,f,l),null),f},useId:function(){var o=En(),l=It.identifierPrefix;if(ot){var f=Vs,v=qs;f=(v&~(1<<32-$t(v)-1)).toString(32)+f,l="_"+l+"R_"+f,f=i0++,0<f&&(l+="H"+f.toString(32)),l+="_"}else f=yY++,l="_"+l+"r_"+f.toString(32)+"_";return o.memoizedState=l},useHostTransitionStatus:D1,useFormState:vO,useActionState:vO,useOptimistic:function(o){var l=En();l.memoizedState=l.baseState=o;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=k1.bind(null,Ye,!0,f),f.dispatch=l,[o,l]},useMemoCache:A1,useCacheRefresh:function(){return En().memoizedState=_Y.bind(null,Ye)},useEffectEvent:function(o){var l=En(),f={impl:o};return l.memoizedState=f,function(){if((mt&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}},L1={readContext:Jr,use:a0,useCallback:TO,useContext:Jr,useEffect:N1,useImperativeHandle:AO,useInsertionEffect:wO,useLayoutEffect:_O,useMemo:RO,useReducer:o0,useRef:SO,useState:function(){return o0(Pa)},useDebugValue:O1,useDeferredValue:function(o,l){var f=ur();return PO(f,Et.memoizedState,o,l)},useTransition:function(){var o=o0(Pa)[0],l=ur().memoizedState;return[typeof o=="boolean"?o:ff(o),l]},useSyncExternalStore:iO,useId:jO,useHostTransitionStatus:D1,useFormState:gO,useActionState:gO,useOptimistic:function(o,l){var f=ur();return uO(f,Et,o,l)},useMemoCache:A1,useCacheRefresh:MO};L1.useEffectEvent=xO;var UO={readContext:Jr,use:a0,useCallback:TO,useContext:Jr,useEffect:N1,useImperativeHandle:AO,useInsertionEffect:wO,useLayoutEffect:_O,useMemo:RO,useReducer:R1,useRef:SO,useState:function(){return R1(Pa)},useDebugValue:O1,useDeferredValue:function(o,l){var f=ur();return Et===null?j1(f,o,l):PO(f,Et.memoizedState,o,l)},useTransition:function(){var o=R1(Pa)[0],l=ur().memoizedState;return[typeof o=="boolean"?o:ff(o),l]},useSyncExternalStore:iO,useId:jO,useHostTransitionStatus:D1,useFormState:bO,useActionState:bO,useOptimistic:function(o,l){var f=ur();return Et!==null?uO(f,Et,o,l):(f.baseState=o,[o,f.queue.dispatch])},useMemoCache:A1,useCacheRefresh:MO};UO.useEffectEvent=xO;function z1(o,l,f,v){l=o.memoizedState,f=f(v,l),f=f==null?l:p({},l,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var U1={enqueueSetState:function(o,l,f){o=o._reactInternals;var v=si(),C=qo(v);C.payload=l,f!=null&&(C.callback=f),l=Vo(o,C,v),l!==null&&(Un(l,o,v),lf(l,o,v))},enqueueReplaceState:function(o,l,f){o=o._reactInternals;var v=si(),C=qo(v);C.tag=1,C.payload=l,f!=null&&(C.callback=f),l=Vo(o,C,v),l!==null&&(Un(l,o,v),lf(l,o,v))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var f=si(),v=qo(f);v.tag=2,l!=null&&(v.callback=l),l=Vo(o,v,f),l!==null&&(Un(l,o,f),lf(l,o,f))}};function BO(o,l,f,v,C,_,I){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(v,_,I):l.prototype&&l.prototype.isPureReactComponent?!ef(f,v)||!ef(C,_):!0}function qO(o,l,f,v){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,v),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,v),l.state!==o&&U1.enqueueReplaceState(l,l.state,null)}function Cl(o,l){var f=l;if("ref"in l){f={};for(var v in l)v!=="ref"&&(f[v]=l[v])}if(o=o.defaultProps){f===l&&(f=p({},f));for(var C in o)f[C]===void 0&&(f[C]=o[C])}return f}function VO(o){Vy(o)}function FO(o){console.error(o)}function HO(o){Vy(o)}function d0(o,l){try{var f=o.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(v){setTimeout(function(){throw v})}}function WO(o,l,f){try{var v=o.onCaughtError;v(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function B1(o,l,f){return f=qo(f),f.tag=3,f.payload={element:null},f.callback=function(){d0(o,l)},f}function KO(o){return o=qo(o),o.tag=3,o}function GO(o,l,f,v){var C=f.type.getDerivedStateFromError;if(typeof C=="function"){var _=v.value;o.payload=function(){return C(_)},o.callback=function(){WO(l,f,v)}}var I=f.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(o.callback=function(){WO(l,f,v),typeof C!="function"&&($o===null?$o=new Set([this]):$o.add(this));var k=v.stack;this.componentDidCatch(v.value,{componentStack:k!==null?k:""})})}function AY(o,l,f,v,C){if(f.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(l=f.alternate,l!==null&&od(l,f,C,!0),f=ti.current,f!==null){switch(f.tag){case 31:case 13:return Di===null?w0():f.alternate===null&&tr===0&&(tr=3),f.flags&=-257,f.flags|=65536,f.lanes=C,v===Jy?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([v]):l.add(v),dw(o,v,C)),!1;case 22:return f.flags|=65536,v===Jy?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([v])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([v]):f.add(v)),dw(o,v,C)),!1}throw Error(n(435,f.tag))}return dw(o,v,C),w0(),!1}if(ot)return l=ti.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=C,v!==s1&&(o=Error(n(422),{cause:v}),nf(Ni(o,f)))):(v!==s1&&(l=Error(n(423),{cause:v}),nf(Ni(l,f))),o=o.current.alternate,o.flags|=65536,C&=-C,o.lanes|=C,v=Ni(v,f),C=B1(o.stateNode,v,C),v1(o,C),tr!==4&&(tr=2)),!1;var _=Error(n(520),{cause:v});if(_=Ni(_,f),wf===null?wf=[_]:wf.push(_),tr!==4&&(tr=2),l===null)return!0;v=Ni(v,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,o=C&-C,f.lanes|=o,o=B1(f.stateNode,v,o),v1(f,o),!1;case 1:if(l=f.type,_=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&($o===null||!$o.has(_))))return f.flags|=65536,C&=-C,f.lanes|=C,C=KO(C),GO(C,o,f,v),v1(f,C),!1}f=f.return}while(f!==null);return!1}var q1=Error(n(461)),yr=!1;function Zr(o,l,f,v){l.child=o===null?QN(l,null,f,v):bl(l,o.child,f,v)}function $O(o,l,f,v,C){f=f.render;var _=l.ref;if("ref"in v){var I={};for(var k in v)k!=="ref"&&(I[k]=v[k])}else I=v;return ml(l),v=x1(o,l,f,I,_,C),k=w1(),o!==null&&!yr?(_1(o,l,C),Ia(o,l,C)):(ot&&k&&n1(l),l.flags|=1,Zr(o,l,v,C),l.child)}function YO(o,l,f,v,C){if(o===null){var _=f.type;return typeof _=="function"&&!e1(_)&&_.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=_,XO(o,l,_,v,C)):(o=Ky(f.type,null,v,l,l.mode,C),o.ref=l.ref,o.return=l,l.child=o)}if(_=o.child,!Y1(o,C)){var I=_.memoizedProps;if(f=f.compare,f=f!==null?f:ef,f(I,v)&&o.ref===l.ref)return Ia(o,l,C)}return l.flags|=1,o=_a(_,v),o.ref=l.ref,o.return=l,l.child=o}function XO(o,l,f,v,C){if(o!==null){var _=o.memoizedProps;if(ef(_,v)&&o.ref===l.ref)if(yr=!1,l.pendingProps=v=_,Y1(o,C))(o.flags&131072)!==0&&(yr=!0);else return l.lanes=o.lanes,Ia(o,l,C)}return V1(o,l,f,v,C)}function QO(o,l,f,v){var C=v.children,_=o!==null?o.memoizedState:null;if(o===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((l.flags&128)!==0){if(_=_!==null?_.baseLanes|f:f,o!==null){for(v=l.child=o.child,C=0;v!==null;)C=C|v.lanes|v.childLanes,v=v.sibling;v=C&~_}else v=0,l.child=null;return JO(o,l,_,f,v)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&Xy(l,_!==null?_.cachePool:null),_!==null?eO(l,_):y1(),tO(l);else return v=l.lanes=536870912,JO(o,l,_!==null?_.baseLanes|f:f,f,v)}else _!==null?(Xy(l,_.cachePool),eO(l,_),Ho(),l.memoizedState=null):(o!==null&&Xy(l,null),y1(),Ho());return Zr(o,l,C,f),l.child}function vf(o,l){return o!==null&&o.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function JO(o,l,f,v,C){var _=h1();return _=_===null?null:{parent:vr._currentValue,pool:_},l.memoizedState={baseLanes:f,cachePool:_},o!==null&&Xy(l,null),y1(),tO(l),o!==null&&od(o,l,v,!0),l.childLanes=C,null}function h0(o,l){return l=p0({mode:l.mode,children:l.children},o.mode),l.ref=o.ref,o.child=l,l.return=o,l}function ZO(o,l,f){return bl(l,o.child,null,f),o=h0(l,l.pendingProps),o.flags|=2,ri(l),l.memoizedState=null,o}function TY(o,l,f){var v=l.pendingProps,C=(l.flags&128)!==0;if(l.flags&=-129,o===null){if(ot){if(v.mode==="hidden")return o=h0(l,v),l.lanes=536870912,vf(null,o);if(S1(l),(o=Lt)?(o=dM(o,Mi),o=o!==null&&o.data==="&"?o:null,o!==null&&(l.memoizedState={dehydrated:o,treeContext:ko!==null?{id:qs,overflow:Vs}:null,retryLane:536870912,hydrationErrors:null},f=kN(o),f.return=l,l.child=f,Qr=l,Lt=null)):o=null,o===null)throw zo(l);return l.lanes=536870912,null}return h0(l,v)}var _=o.memoizedState;if(_!==null){var I=_.dehydrated;if(S1(l),C)if(l.flags&256)l.flags&=-257,l=ZO(o,l,f);else if(l.memoizedState!==null)l.child=o.child,l.flags|=128,l=null;else throw Error(n(558));else if(yr||od(o,l,f,!1),C=(f&o.childLanes)!==0,yr||C){if(v=It,v!==null&&(I=kh(v,f),I!==0&&I!==_.retryLane))throw _.retryLane=I,dl(o,I),Un(v,o,I),q1;w0(),l=ZO(o,l,f)}else o=_.treeContext,Lt=ki(I.nextSibling),Qr=l,ot=!0,Lo=null,Mi=!1,o!==null&&UN(l,o),l=h0(l,v),l.flags|=4096;return l}return o=_a(o.child,{mode:v.mode,children:v.children}),o.ref=l.ref,l.child=o,o.return=l,o}function f0(o,l){var f=l.ref;if(f===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(o===null||o.ref!==f)&&(l.flags|=4194816)}}function V1(o,l,f,v,C){return ml(l),f=x1(o,l,f,v,void 0,C),v=w1(),o!==null&&!yr?(_1(o,l,C),Ia(o,l,C)):(ot&&v&&n1(l),l.flags|=1,Zr(o,l,f,C),l.child)}function ej(o,l,f,v,C,_){return ml(l),l.updateQueue=null,f=nO(l,v,f,C),rO(o),v=w1(),o!==null&&!yr?(_1(o,l,_),Ia(o,l,_)):(ot&&v&&n1(l),l.flags|=1,Zr(o,l,f,_),l.child)}function tj(o,l,f,v,C){if(ml(l),l.stateNode===null){var _=nd,I=f.contextType;typeof I=="object"&&I!==null&&(_=Jr(I)),_=new f(v,_),l.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=U1,l.stateNode=_,_._reactInternals=l,_=l.stateNode,_.props=v,_.state=l.memoizedState,_.refs={},p1(l),I=f.contextType,_.context=typeof I=="object"&&I!==null?Jr(I):nd,_.state=l.memoizedState,I=f.getDerivedStateFromProps,typeof I=="function"&&(z1(l,f,I,v),_.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(I=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),I!==_.state&&U1.enqueueReplaceState(_,_.state,null),df(l,v,_,C),uf(),_.state=l.memoizedState),typeof _.componentDidMount=="function"&&(l.flags|=4194308),v=!0}else if(o===null){_=l.stateNode;var k=l.memoizedProps,W=Cl(f,k);_.props=W;var Z=_.context,oe=f.contextType;I=nd,typeof oe=="object"&&oe!==null&&(I=Jr(oe));var de=f.getDerivedStateFromProps;oe=typeof de=="function"||typeof _.getSnapshotBeforeUpdate=="function",k=l.pendingProps!==k,oe||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(k||Z!==I)&&qO(l,_,v,I),Bo=!1;var ee=l.memoizedState;_.state=ee,df(l,v,_,C),uf(),Z=l.memoizedState,k||ee!==Z||Bo?(typeof de=="function"&&(z1(l,f,de,v),Z=l.memoizedState),(W=Bo||BO(l,f,W,v,ee,Z,I))?(oe||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(l.flags|=4194308)):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=v,l.memoizedState=Z),_.props=v,_.state=Z,_.context=I,v=W):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),v=!1)}else{_=l.stateNode,m1(o,l),I=l.memoizedProps,oe=Cl(f,I),_.props=oe,de=l.pendingProps,ee=_.context,Z=f.contextType,W=nd,typeof Z=="object"&&Z!==null&&(W=Jr(Z)),k=f.getDerivedStateFromProps,(Z=typeof k=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I!==de||ee!==W)&&qO(l,_,v,W),Bo=!1,ee=l.memoizedState,_.state=ee,df(l,v,_,C),uf();var ne=l.memoizedState;I!==de||ee!==ne||Bo||o!==null&&o.dependencies!==null&&$y(o.dependencies)?(typeof k=="function"&&(z1(l,f,k,v),ne=l.memoizedState),(oe=Bo||BO(l,f,oe,v,ee,ne,W)||o!==null&&o.dependencies!==null&&$y(o.dependencies))?(Z||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(v,ne,W),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(v,ne,W)),typeof _.componentDidUpdate=="function"&&(l.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof _.componentDidUpdate!="function"||I===o.memoizedProps&&ee===o.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||I===o.memoizedProps&&ee===o.memoizedState||(l.flags|=1024),l.memoizedProps=v,l.memoizedState=ne),_.props=v,_.state=ne,_.context=W,v=oe):(typeof _.componentDidUpdate!="function"||I===o.memoizedProps&&ee===o.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||I===o.memoizedProps&&ee===o.memoizedState||(l.flags|=1024),v=!1)}return _=v,f0(o,l),v=(l.flags&128)!==0,_||v?(_=l.stateNode,f=v&&typeof f.getDerivedStateFromError!="function"?null:_.render(),l.flags|=1,o!==null&&v?(l.child=bl(l,o.child,null,C),l.child=bl(l,null,f,C)):Zr(o,l,f,C),l.memoizedState=_.state,o=l.child):o=Ia(o,l,C),o}function rj(o,l,f,v){return fl(),l.flags|=256,Zr(o,l,f,v),l.child}var F1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function H1(o){return{baseLanes:o,cachePool:WN()}}function W1(o,l,f){return o=o!==null?o.childLanes&~f:0,l&&(o|=ii),o}function nj(o,l,f){var v=l.pendingProps,C=!1,_=(l.flags&128)!==0,I;if((I=_)||(I=o!==null&&o.memoizedState===null?!1:(lr.current&2)!==0),I&&(C=!0,l.flags&=-129),I=(l.flags&32)!==0,l.flags&=-33,o===null){if(ot){if(C?Fo(l):Ho(),(o=Lt)?(o=dM(o,Mi),o=o!==null&&o.data!=="&"?o:null,o!==null&&(l.memoizedState={dehydrated:o,treeContext:ko!==null?{id:qs,overflow:Vs}:null,retryLane:536870912,hydrationErrors:null},f=kN(o),f.return=l,l.child=f,Qr=l,Lt=null)):o=null,o===null)throw zo(l);return Tw(o)?l.lanes=32:l.lanes=536870912,null}var k=v.children;return v=v.fallback,C?(Ho(),C=l.mode,k=p0({mode:"hidden",children:k},C),v=hl(v,C,f,null),k.return=l,v.return=l,k.sibling=v,l.child=k,v=l.child,v.memoizedState=H1(f),v.childLanes=W1(o,I,f),l.memoizedState=F1,vf(null,v)):(Fo(l),K1(l,k))}var W=o.memoizedState;if(W!==null&&(k=W.dehydrated,k!==null)){if(_)l.flags&256?(Fo(l),l.flags&=-257,l=G1(o,l,f)):l.memoizedState!==null?(Ho(),l.child=o.child,l.flags|=128,l=null):(Ho(),k=v.fallback,C=l.mode,v=p0({mode:"visible",children:v.children},C),k=hl(k,C,f,null),k.flags|=2,v.return=l,k.return=l,v.sibling=k,l.child=v,bl(l,o.child,null,f),v=l.child,v.memoizedState=H1(f),v.childLanes=W1(o,I,f),l.memoizedState=F1,l=vf(null,v));else if(Fo(l),Tw(k)){if(I=k.nextSibling&&k.nextSibling.dataset,I)var Z=I.dgst;I=Z,v=Error(n(419)),v.stack="",v.digest=I,nf({value:v,source:null,stack:null}),l=G1(o,l,f)}else if(yr||od(o,l,f,!1),I=(f&o.childLanes)!==0,yr||I){if(I=It,I!==null&&(v=kh(I,f),v!==0&&v!==W.retryLane))throw W.retryLane=v,dl(o,v),Un(I,o,v),q1;Aw(k)||w0(),l=G1(o,l,f)}else Aw(k)?(l.flags|=192,l.child=o.child,l=null):(o=W.treeContext,Lt=ki(k.nextSibling),Qr=l,ot=!0,Lo=null,Mi=!1,o!==null&&UN(l,o),l=K1(l,v.children),l.flags|=4096);return l}return C?(Ho(),k=v.fallback,C=l.mode,W=o.child,Z=W.sibling,v=_a(W,{mode:"hidden",children:v.children}),v.subtreeFlags=W.subtreeFlags&65011712,Z!==null?k=_a(Z,k):(k=hl(k,C,f,null),k.flags|=2),k.return=l,v.return=l,v.sibling=k,l.child=v,vf(null,v),v=l.child,k=o.child.memoizedState,k===null?k=H1(f):(C=k.cachePool,C!==null?(W=vr._currentValue,C=C.parent!==W?{parent:W,pool:W}:C):C=WN(),k={baseLanes:k.baseLanes|f,cachePool:C}),v.memoizedState=k,v.childLanes=W1(o,I,f),l.memoizedState=F1,vf(o.child,v)):(Fo(l),f=o.child,o=f.sibling,f=_a(f,{mode:"visible",children:v.children}),f.return=l,f.sibling=null,o!==null&&(I=l.deletions,I===null?(l.deletions=[o],l.flags|=16):I.push(o)),l.child=f,l.memoizedState=null,f)}function K1(o,l){return l=p0({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function p0(o,l){return o=ei(22,o,null,l),o.lanes=0,o}function G1(o,l,f){return bl(l,o.child,null,f),o=K1(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function ij(o,l,f){o.lanes|=l;var v=o.alternate;v!==null&&(v.lanes|=l),c1(o.return,l,f)}function $1(o,l,f,v,C,_){var I=o.memoizedState;I===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:v,tail:f,tailMode:C,treeForkCount:_}:(I.isBackwards=l,I.rendering=null,I.renderingStartTime=0,I.last=v,I.tail=f,I.tailMode=C,I.treeForkCount=_)}function sj(o,l,f){var v=l.pendingProps,C=v.revealOrder,_=v.tail;v=v.children;var I=lr.current,k=(I&2)!==0;if(k?(I=I&1|2,l.flags|=128):I&=1,le(lr,I),Zr(o,l,v,f),v=ot?rf:0,!k&&o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&ij(o,f,l);else if(o.tag===19)ij(o,f,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(C){case"forwards":for(f=l.child,C=null;f!==null;)o=f.alternate,o!==null&&r0(o)===null&&(C=f),f=f.sibling;f=C,f===null?(C=l.child,l.child=null):(C=f.sibling,f.sibling=null),$1(l,!1,C,f,_,v);break;case"backwards":case"unstable_legacy-backwards":for(f=null,C=l.child,l.child=null;C!==null;){if(o=C.alternate,o!==null&&r0(o)===null){l.child=C;break}o=C.sibling,C.sibling=f,f=C,C=o}$1(l,!0,f,null,_,v);break;case"together":$1(l,!1,null,null,void 0,v);break;default:l.memoizedState=null}return l.child}function Ia(o,l,f){if(o!==null&&(l.dependencies=o.dependencies),Go|=l.lanes,(f&l.childLanes)===0)if(o!==null){if(od(o,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(n(153));if(l.child!==null){for(o=l.child,f=_a(o,o.pendingProps),l.child=f,f.return=l;o.sibling!==null;)o=o.sibling,f=f.sibling=_a(o,o.pendingProps),f.return=l;f.sibling=null}return l.child}function Y1(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&$y(o)))}function RY(o,l,f){switch(l.tag){case 3:Ke(l,l.stateNode.containerInfo),Uo(l,vr,o.memoizedState.cache),fl();break;case 27:case 5:je(l);break;case 4:Ke(l,l.stateNode.containerInfo);break;case 10:Uo(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,S1(l),null;break;case 13:var v=l.memoizedState;if(v!==null)return v.dehydrated!==null?(Fo(l),l.flags|=128,null):(f&l.child.childLanes)!==0?nj(o,l,f):(Fo(l),o=Ia(o,l,f),o!==null?o.sibling:null);Fo(l);break;case 19:var C=(o.flags&128)!==0;if(v=(f&l.childLanes)!==0,v||(od(o,l,f,!1),v=(f&l.childLanes)!==0),C){if(v)return sj(o,l,f);l.flags|=128}if(C=l.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),le(lr,lr.current),v)break;return null;case 22:return l.lanes=0,QO(o,l,f,l.pendingProps);case 24:Uo(l,vr,o.memoizedState.cache)}return Ia(o,l,f)}function aj(o,l,f){if(o!==null)if(o.memoizedProps!==l.pendingProps)yr=!0;else{if(!Y1(o,f)&&(l.flags&128)===0)return yr=!1,RY(o,l,f);yr=(o.flags&131072)!==0}else yr=!1,ot&&(l.flags&1048576)!==0&&zN(l,rf,l.index);switch(l.lanes=0,l.tag){case 16:e:{var v=l.pendingProps;if(o=gl(l.elementType),l.type=o,typeof o=="function")e1(o)?(v=Cl(o,v),l.tag=1,l=tj(null,l,o,v,f)):(l.tag=0,l=V1(null,l,o,v,f));else{if(o!=null){var C=o.$$typeof;if(C===M){l.tag=11,l=$O(null,l,o,v,f);break e}else if(C===j){l.tag=14,l=YO(null,l,o,v,f);break e}}throw l=ve(o)||o,Error(n(306,l,""))}}return l;case 0:return V1(o,l,l.type,l.pendingProps,f);case 1:return v=l.type,C=Cl(v,l.pendingProps),tj(o,l,v,C,f);case 3:e:{if(Ke(l,l.stateNode.containerInfo),o===null)throw Error(n(387));v=l.pendingProps;var _=l.memoizedState;C=_.element,m1(o,l),df(l,v,null,f);var I=l.memoizedState;if(v=I.cache,Uo(l,vr,v),v!==_.cache&&l1(l,[vr],f,!0),uf(),v=I.element,_.isDehydrated)if(_={element:v,isDehydrated:!1,cache:I.cache},l.updateQueue.baseState=_,l.memoizedState=_,l.flags&256){l=rj(o,l,v,f);break e}else if(v!==C){C=Ni(Error(n(424)),l),nf(C),l=rj(o,l,v,f);break e}else{switch(o=l.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Lt=ki(o.firstChild),Qr=l,ot=!0,Lo=null,Mi=!0,f=QN(l,null,v,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(fl(),v===C){l=Ia(o,l,f);break e}Zr(o,l,v,f)}l=l.child}return l;case 26:return f0(o,l),o===null?(f=gM(l.type,null,l.pendingProps,null))?l.memoizedState=f:ot||(f=l.type,o=l.pendingProps,v=I0(be.current).createElement(f),v[fr]=l,v[Ur]=o,en(v,f,o),pr(v),l.stateNode=v):l.memoizedState=gM(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return je(l),o===null&&ot&&(v=l.stateNode=pM(l.type,l.pendingProps,be.current),Qr=l,Mi=!0,C=Lt,Jo(l.type)?(Rw=C,Lt=ki(v.firstChild)):Lt=C),Zr(o,l,l.pendingProps.children,f),f0(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&ot&&((C=v=Lt)&&(v=iX(v,l.type,l.pendingProps,Mi),v!==null?(l.stateNode=v,Qr=l,Lt=ki(v.firstChild),Mi=!1,C=!0):C=!1),C||zo(l)),je(l),C=l.type,_=l.pendingProps,I=o!==null?o.memoizedProps:null,v=_.children,ww(C,_)?v=null:I!==null&&ww(C,I)&&(l.flags|=32),l.memoizedState!==null&&(C=x1(o,l,bY,null,null,f),Nf._currentValue=C),f0(o,l),Zr(o,l,v,f),l.child;case 6:return o===null&&ot&&((o=f=Lt)&&(f=sX(f,l.pendingProps,Mi),f!==null?(l.stateNode=f,Qr=l,Lt=null,o=!0):o=!1),o||zo(l)),null;case 13:return nj(o,l,f);case 4:return Ke(l,l.stateNode.containerInfo),v=l.pendingProps,o===null?l.child=bl(l,null,v,f):Zr(o,l,v,f),l.child;case 11:return $O(o,l,l.type,l.pendingProps,f);case 7:return Zr(o,l,l.pendingProps,f),l.child;case 8:return Zr(o,l,l.pendingProps.children,f),l.child;case 12:return Zr(o,l,l.pendingProps.children,f),l.child;case 10:return v=l.pendingProps,Uo(l,l.type,v.value),Zr(o,l,v.children,f),l.child;case 9:return C=l.type._context,v=l.pendingProps.children,ml(l),C=Jr(C),v=v(C),l.flags|=1,Zr(o,l,v,f),l.child;case 14:return YO(o,l,l.type,l.pendingProps,f);case 15:return XO(o,l,l.type,l.pendingProps,f);case 19:return sj(o,l,f);case 31:return TY(o,l,f);case 22:return QO(o,l,f,l.pendingProps);case 24:return ml(l),v=Jr(vr),o===null?(C=h1(),C===null&&(C=It,_=u1(),C.pooledCache=_,_.refCount++,_!==null&&(C.pooledCacheLanes|=f),C=_),l.memoizedState={parent:v,cache:C},p1(l),Uo(l,vr,C)):((o.lanes&f)!==0&&(m1(o,l),df(l,null,null,f),uf()),C=o.memoizedState,_=l.memoizedState,C.parent!==v?(C={parent:v,cache:v},l.memoizedState=C,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=C),Uo(l,vr,v)):(v=_.cache,Uo(l,vr,v),v!==C.cache&&l1(l,[vr],f,!0))),Zr(o,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(n(156,l.tag))}function Na(o){o.flags|=4}function X1(o,l,f,v,C){if((l=(o.mode&32)!==0)&&(l=!1),l){if(o.flags|=16777216,(C&335544128)===C)if(o.stateNode.complete)o.flags|=8192;else if(jj())o.flags|=8192;else throw yl=Jy,f1}else o.flags&=-16777217}function oj(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!xM(l))if(jj())o.flags|=8192;else throw yl=Jy,f1}function m0(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?Cy():536870912,o.lanes|=l,bd|=l)}function gf(o,l){if(!ot)switch(o.tailMode){case"hidden":l=o.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var v=null;f!==null;)f.alternate!==null&&(v=f),f=f.sibling;v===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:v.sibling=null}}function zt(o){var l=o.alternate!==null&&o.alternate.child===o.child,f=0,v=0;if(l)for(var C=o.child;C!==null;)f|=C.lanes|C.childLanes,v|=C.subtreeFlags&65011712,v|=C.flags&65011712,C.return=o,C=C.sibling;else for(C=o.child;C!==null;)f|=C.lanes|C.childLanes,v|=C.subtreeFlags,v|=C.flags,C.return=o,C=C.sibling;return o.subtreeFlags|=v,o.childLanes=f,l}function PY(o,l,f){var v=l.pendingProps;switch(i1(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(l),null;case 1:return zt(l),null;case 3:return f=l.stateNode,v=null,o!==null&&(v=o.memoizedState.cache),l.memoizedState.cache!==v&&(l.flags|=2048),Ta(vr),se(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(o===null||o.child===null)&&(ad(l)?Na(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,a1())),zt(l),null;case 26:var C=l.type,_=l.memoizedState;return o===null?(Na(l),_!==null?(zt(l),oj(l,_)):(zt(l),X1(l,C,null,v,f))):_?_!==o.memoizedState?(Na(l),zt(l),oj(l,_)):(zt(l),l.flags&=-16777217):(o=o.memoizedProps,o!==v&&Na(l),zt(l),X1(l,C,o,v,f)),null;case 27:if(Ue(l),f=be.current,C=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==v&&Na(l);else{if(!v){if(l.stateNode===null)throw Error(n(166));return zt(l),null}o=X.current,ad(l)?BN(l):(o=pM(C,v,f),l.stateNode=o,Na(l))}return zt(l),null;case 5:if(Ue(l),C=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==v&&Na(l);else{if(!v){if(l.stateNode===null)throw Error(n(166));return zt(l),null}if(_=X.current,ad(l))BN(l);else{var I=I0(be.current);switch(_){case 1:_=I.createElementNS("http://www.w3.org/2000/svg",C);break;case 2:_=I.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;default:switch(C){case"svg":_=I.createElementNS("http://www.w3.org/2000/svg",C);break;case"math":_=I.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;case"script":_=I.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof v.is=="string"?I.createElement("select",{is:v.is}):I.createElement("select"),v.multiple?_.multiple=!0:v.size&&(_.size=v.size);break;default:_=typeof v.is=="string"?I.createElement(C,{is:v.is}):I.createElement(C)}}_[fr]=l,_[Ur]=v;e:for(I=l.child;I!==null;){if(I.tag===5||I.tag===6)_.appendChild(I.stateNode);else if(I.tag!==4&&I.tag!==27&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===l)break e;for(;I.sibling===null;){if(I.return===null||I.return===l)break e;I=I.return}I.sibling.return=I.return,I=I.sibling}l.stateNode=_;e:switch(en(_,C,v),C){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}v&&Na(l)}}return zt(l),X1(l,l.type,o===null?null:o.memoizedProps,l.pendingProps,f),null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==v&&Na(l);else{if(typeof v!="string"&&l.stateNode===null)throw Error(n(166));if(o=be.current,ad(l)){if(o=l.stateNode,f=l.memoizedProps,v=null,C=Qr,C!==null)switch(C.tag){case 27:case 5:v=C.memoizedProps}o[fr]=l,o=!!(o.nodeValue===f||v!==null&&v.suppressHydrationWarning===!0||nM(o.nodeValue,f)),o||zo(l,!0)}else o=I0(o).createTextNode(v),o[fr]=l,l.stateNode=o}return zt(l),null;case 31:if(f=l.memoizedState,o===null||o.memoizedState!==null){if(v=ad(l),f!==null){if(o===null){if(!v)throw Error(n(318));if(o=l.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(557));o[fr]=l}else fl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;zt(l),o=!1}else f=a1(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=f),o=!0;if(!o)return l.flags&256?(ri(l),l):(ri(l),null);if((l.flags&128)!==0)throw Error(n(558))}return zt(l),null;case 13:if(v=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(C=ad(l),v!==null&&v.dehydrated!==null){if(o===null){if(!C)throw Error(n(318));if(C=l.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(n(317));C[fr]=l}else fl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;zt(l),C=!1}else C=a1(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=C),C=!0;if(!C)return l.flags&256?(ri(l),l):(ri(l),null)}return ri(l),(l.flags&128)!==0?(l.lanes=f,l):(f=v!==null,o=o!==null&&o.memoizedState!==null,f&&(v=l.child,C=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(C=v.alternate.memoizedState.cachePool.pool),_=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(_=v.memoizedState.cachePool.pool),_!==C&&(v.flags|=2048)),f!==o&&f&&(l.child.flags|=8192),m0(l,l.updateQueue),zt(l),null);case 4:return se(),o===null&&yw(l.stateNode.containerInfo),zt(l),null;case 10:return Ta(l.type),zt(l),null;case 19:if(G(lr),v=l.memoizedState,v===null)return zt(l),null;if(C=(l.flags&128)!==0,_=v.rendering,_===null)if(C)gf(v,!1);else{if(tr!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(_=r0(o),_!==null){for(l.flags|=128,gf(v,!1),o=_.updateQueue,l.updateQueue=o,m0(l,o),l.subtreeFlags=0,o=f,f=l.child;f!==null;)DN(f,o),f=f.sibling;return le(lr,lr.current&1|2),ot&&Ea(l,v.treeForkCount),l.child}o=o.sibling}v.tail!==null&&Rr()>S0&&(l.flags|=128,C=!0,gf(v,!1),l.lanes=4194304)}else{if(!C)if(o=r0(_),o!==null){if(l.flags|=128,C=!0,o=o.updateQueue,l.updateQueue=o,m0(l,o),gf(v,!0),v.tail===null&&v.tailMode==="hidden"&&!_.alternate&&!ot)return zt(l),null}else 2*Rr()-v.renderingStartTime>S0&&f!==536870912&&(l.flags|=128,C=!0,gf(v,!1),l.lanes=4194304);v.isBackwards?(_.sibling=l.child,l.child=_):(o=v.last,o!==null?o.sibling=_:l.child=_,v.last=_)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=Rr(),o.sibling=null,f=lr.current,le(lr,C?f&1|2:f&1),ot&&Ea(l,v.treeForkCount),o):(zt(l),null);case 22:case 23:return ri(l),b1(),v=l.memoizedState!==null,o!==null?o.memoizedState!==null!==v&&(l.flags|=8192):v&&(l.flags|=8192),v?(f&536870912)!==0&&(l.flags&128)===0&&(zt(l),l.subtreeFlags&6&&(l.flags|=8192)):zt(l),f=l.updateQueue,f!==null&&m0(l,f.retryQueue),f=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),v=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(v=l.memoizedState.cachePool.pool),v!==f&&(l.flags|=2048),o!==null&&G(vl),null;case 24:return f=null,o!==null&&(f=o.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),Ta(vr),zt(l),null;case 25:return null;case 30:return null}throw Error(n(156,l.tag))}function IY(o,l){switch(i1(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Ta(vr),se(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return Ue(l),null;case 31:if(l.memoizedState!==null){if(ri(l),l.alternate===null)throw Error(n(340));fl()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 13:if(ri(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(n(340));fl()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return G(lr),null;case 4:return se(),null;case 10:return Ta(l.type),null;case 22:case 23:return ri(l),b1(),o!==null&&G(vl),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return Ta(vr),null;case 25:return null;default:return null}}function cj(o,l){switch(i1(l),l.tag){case 3:Ta(vr),se();break;case 26:case 27:case 5:Ue(l);break;case 4:se();break;case 31:l.memoizedState!==null&&ri(l);break;case 13:ri(l);break;case 19:G(lr);break;case 10:Ta(l.type);break;case 22:case 23:ri(l),b1(),o!==null&&G(vl);break;case 24:Ta(vr)}}function yf(o,l){try{var f=l.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var C=v.next;f=C;do{if((f.tag&o)===o){v=void 0;var _=f.create,I=f.inst;v=_(),I.destroy=v}f=f.next}while(f!==C)}}catch(k){Ct(l,l.return,k)}}function Wo(o,l,f){try{var v=l.updateQueue,C=v!==null?v.lastEffect:null;if(C!==null){var _=C.next;v=_;do{if((v.tag&o)===o){var I=v.inst,k=I.destroy;if(k!==void 0){I.destroy=void 0,C=l;var W=f,Z=k;try{Z()}catch(oe){Ct(C,W,oe)}}}v=v.next}while(v!==_)}}catch(oe){Ct(l,l.return,oe)}}function lj(o){var l=o.updateQueue;if(l!==null){var f=o.stateNode;try{ZN(l,f)}catch(v){Ct(o,o.return,v)}}}function uj(o,l,f){f.props=Cl(o.type,o.memoizedProps),f.state=o.memoizedState;try{f.componentWillUnmount()}catch(v){Ct(o,l,v)}}function bf(o,l){try{var f=o.ref;if(f!==null){switch(o.tag){case 26:case 27:case 5:var v=o.stateNode;break;case 30:v=o.stateNode;break;default:v=o.stateNode}typeof f=="function"?o.refCleanup=f(v):f.current=v}}catch(C){Ct(o,l,C)}}function Fs(o,l){var f=o.ref,v=o.refCleanup;if(f!==null)if(typeof v=="function")try{v()}catch(C){Ct(o,l,C)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(C){Ct(o,l,C)}else f.current=null}function dj(o){var l=o.type,f=o.memoizedProps,v=o.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&v.focus();break e;case"img":f.src?v.src=f.src:f.srcSet&&(v.srcset=f.srcSet)}}catch(C){Ct(o,o.return,C)}}function Q1(o,l,f){try{var v=o.stateNode;JY(v,o.type,f,l),v[Ur]=l}catch(C){Ct(o,o.return,C)}}function hj(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Jo(o.type)||o.tag===4}function J1(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||hj(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Jo(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Z1(o,l,f){var v=o.tag;if(v===5||v===6)o=o.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(o,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(o),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=ts));else if(v!==4&&(v===27&&Jo(o.type)&&(f=o.stateNode,l=null),o=o.child,o!==null))for(Z1(o,l,f),o=o.sibling;o!==null;)Z1(o,l,f),o=o.sibling}function v0(o,l,f){var v=o.tag;if(v===5||v===6)o=o.stateNode,l?f.insertBefore(o,l):f.appendChild(o);else if(v!==4&&(v===27&&Jo(o.type)&&(f=o.stateNode),o=o.child,o!==null))for(v0(o,l,f),o=o.sibling;o!==null;)v0(o,l,f),o=o.sibling}function fj(o){var l=o.stateNode,f=o.memoizedProps;try{for(var v=o.type,C=l.attributes;C.length;)l.removeAttributeNode(C[0]);en(l,v,f),l[fr]=o,l[Ur]=f}catch(_){Ct(o,o.return,_)}}var Oa=!1,br=!1,ew=!1,pj=typeof WeakSet=="function"?WeakSet:Set,qr=null;function NY(o,l){if(o=o.containerInfo,Cw=L0,o=AN(o),Gx(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var v=f.getSelection&&f.getSelection();if(v&&v.rangeCount!==0){f=v.anchorNode;var C=v.anchorOffset,_=v.focusNode;v=v.focusOffset;try{f.nodeType,_.nodeType}catch{f=null;break e}var I=0,k=-1,W=-1,Z=0,oe=0,de=o,ee=null;t:for(;;){for(var ne;de!==f||C!==0&&de.nodeType!==3||(k=I+C),de!==_||v!==0&&de.nodeType!==3||(W=I+v),de.nodeType===3&&(I+=de.nodeValue.length),(ne=de.firstChild)!==null;)ee=de,de=ne;for(;;){if(de===o)break t;if(ee===f&&++Z===C&&(k=I),ee===_&&++oe===v&&(W=I),(ne=de.nextSibling)!==null)break;de=ee,ee=de.parentNode}de=ne}f=k===-1||W===-1?null:{start:k,end:W}}else f=null}f=f||{start:0,end:0}}else f=null;for(xw={focusedElem:o,selectionRange:f},L0=!1,qr=l;qr!==null;)if(l=qr,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,qr=o;else for(;qr!==null;){switch(l=qr,_=l.alternate,o=l.flags,l.tag){case 0:if((o&4)!==0&&(o=l.updateQueue,o=o!==null?o.events:null,o!==null))for(f=0;f<o.length;f++)C=o[f],C.ref.impl=C.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&_!==null){o=void 0,f=l,C=_.memoizedProps,_=_.memoizedState,v=f.stateNode;try{var Pe=Cl(f.type,C);o=v.getSnapshotBeforeUpdate(Pe,_),v.__reactInternalSnapshotBeforeUpdate=o}catch(ze){Ct(f,f.return,ze)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,f=o.nodeType,f===9)Ew(o);else if(f===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Ew(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(n(163))}if(o=l.sibling,o!==null){o.return=l.return,qr=o;break}qr=l.return}}function mj(o,l,f){var v=f.flags;switch(f.tag){case 0:case 11:case 15:Ma(o,f),v&4&&yf(5,f);break;case 1:if(Ma(o,f),v&4)if(o=f.stateNode,l===null)try{o.componentDidMount()}catch(I){Ct(f,f.return,I)}else{var C=Cl(f.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(C,l,o.__reactInternalSnapshotBeforeUpdate)}catch(I){Ct(f,f.return,I)}}v&64&&lj(f),v&512&&bf(f,f.return);break;case 3:if(Ma(o,f),v&64&&(o=f.updateQueue,o!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{ZN(o,l)}catch(I){Ct(f,f.return,I)}}break;case 27:l===null&&v&4&&fj(f);case 26:case 5:Ma(o,f),l===null&&v&4&&dj(f),v&512&&bf(f,f.return);break;case 12:Ma(o,f);break;case 31:Ma(o,f),v&4&&yj(o,f);break;case 13:Ma(o,f),v&4&&bj(o,f),v&64&&(o=f.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(f=BY.bind(null,f),aX(o,f))));break;case 22:if(v=f.memoizedState!==null||Oa,!v){l=l!==null&&l.memoizedState!==null||br,C=Oa;var _=br;Oa=v,(br=l)&&!_?Da(o,f,(f.subtreeFlags&8772)!==0):Ma(o,f),Oa=C,br=_}break;case 30:break;default:Ma(o,f)}}function vj(o){var l=o.alternate;l!==null&&(o.alternate=null,vj(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&Fu(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Vt=null,Dn=!1;function ja(o,l,f){for(f=f.child;f!==null;)gj(o,l,f),f=f.sibling}function gj(o,l,f){if(Ir&&typeof Ir.onCommitFiberUnmount=="function")try{Ir.onCommitFiberUnmount(Xn,f)}catch{}switch(f.tag){case 26:br||Fs(f,l),ja(o,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:br||Fs(f,l);var v=Vt,C=Dn;Jo(f.type)&&(Vt=f.stateNode,Dn=!1),ja(o,l,f),Rf(f.stateNode),Vt=v,Dn=C;break;case 5:br||Fs(f,l);case 6:if(v=Vt,C=Dn,Vt=null,ja(o,l,f),Vt=v,Dn=C,Vt!==null)if(Dn)try{(Vt.nodeType===9?Vt.body:Vt.nodeName==="HTML"?Vt.ownerDocument.body:Vt).removeChild(f.stateNode)}catch(_){Ct(f,l,_)}else try{Vt.removeChild(f.stateNode)}catch(_){Ct(f,l,_)}break;case 18:Vt!==null&&(Dn?(o=Vt,lM(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,f.stateNode),Td(o)):lM(Vt,f.stateNode));break;case 4:v=Vt,C=Dn,Vt=f.stateNode.containerInfo,Dn=!0,ja(o,l,f),Vt=v,Dn=C;break;case 0:case 11:case 14:case 15:Wo(2,f,l),br||Wo(4,f,l),ja(o,l,f);break;case 1:br||(Fs(f,l),v=f.stateNode,typeof v.componentWillUnmount=="function"&&uj(f,l,v)),ja(o,l,f);break;case 21:ja(o,l,f);break;case 22:br=(v=br)||f.memoizedState!==null,ja(o,l,f),br=v;break;default:ja(o,l,f)}}function yj(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Td(o)}catch(f){Ct(l,l.return,f)}}}function bj(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Td(o)}catch(f){Ct(l,l.return,f)}}function OY(o){switch(o.tag){case 31:case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new pj),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new pj),l;default:throw Error(n(435,o.tag))}}function g0(o,l){var f=OY(o);l.forEach(function(v){if(!f.has(v)){f.add(v);var C=qY.bind(null,o,v);v.then(C,C)}})}function kn(o,l){var f=l.deletions;if(f!==null)for(var v=0;v<f.length;v++){var C=f[v],_=o,I=l,k=I;e:for(;k!==null;){switch(k.tag){case 27:if(Jo(k.type)){Vt=k.stateNode,Dn=!1;break e}break;case 5:Vt=k.stateNode,Dn=!1;break e;case 3:case 4:Vt=k.stateNode.containerInfo,Dn=!0;break e}k=k.return}if(Vt===null)throw Error(n(160));gj(_,I,C),Vt=null,Dn=!1,_=C.alternate,_!==null&&(_.return=null),C.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)Sj(l,o),l=l.sibling}var os=null;function Sj(o,l){var f=o.alternate,v=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:kn(l,o),Ln(o),v&4&&(Wo(3,o,o.return),yf(3,o),Wo(5,o,o.return));break;case 1:kn(l,o),Ln(o),v&512&&(br||f===null||Fs(f,f.return)),v&64&&Oa&&(o=o.updateQueue,o!==null&&(v=o.callbacks,v!==null&&(f=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=f===null?v:f.concat(v))));break;case 26:var C=os;if(kn(l,o),Ln(o),v&512&&(br||f===null||Fs(f,f.return)),v&4){var _=f!==null?f.memoizedState:null;if(v=o.memoizedState,f===null)if(v===null)if(o.stateNode===null){e:{v=o.type,f=o.memoizedProps,C=C.ownerDocument||C;t:switch(v){case"title":_=C.getElementsByTagName("title")[0],(!_||_[Ps]||_[fr]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=C.createElement(v),C.head.insertBefore(_,C.querySelector("head > title"))),en(_,v,f),_[fr]=o,pr(_),v=_;break e;case"link":var I=SM("link","href",C).get(v+(f.href||""));if(I){for(var k=0;k<I.length;k++)if(_=I[k],_.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&_.getAttribute("rel")===(f.rel==null?null:f.rel)&&_.getAttribute("title")===(f.title==null?null:f.title)&&_.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){I.splice(k,1);break t}}_=C.createElement(v),en(_,v,f),C.head.appendChild(_);break;case"meta":if(I=SM("meta","content",C).get(v+(f.content||""))){for(k=0;k<I.length;k++)if(_=I[k],_.getAttribute("content")===(f.content==null?null:""+f.content)&&_.getAttribute("name")===(f.name==null?null:f.name)&&_.getAttribute("property")===(f.property==null?null:f.property)&&_.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&_.getAttribute("charset")===(f.charSet==null?null:f.charSet)){I.splice(k,1);break t}}_=C.createElement(v),en(_,v,f),C.head.appendChild(_);break;default:throw Error(n(468,v))}_[fr]=o,pr(_),v=_}o.stateNode=v}else CM(C,o.type,o.stateNode);else o.stateNode=bM(C,v,o.memoizedProps);else _!==v?(_===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):_.count--,v===null?CM(C,o.type,o.stateNode):bM(C,v,o.memoizedProps)):v===null&&o.stateNode!==null&&Q1(o,o.memoizedProps,f.memoizedProps)}break;case 27:kn(l,o),Ln(o),v&512&&(br||f===null||Fs(f,f.return)),f!==null&&v&4&&Q1(o,o.memoizedProps,f.memoizedProps);break;case 5:if(kn(l,o),Ln(o),v&512&&(br||f===null||Fs(f,f.return)),o.flags&32){C=o.stateNode;try{Mn(C,"")}catch(Pe){Ct(o,o.return,Pe)}}v&4&&o.stateNode!=null&&(C=o.memoizedProps,Q1(o,C,f!==null?f.memoizedProps:C)),v&1024&&(ew=!0);break;case 6:if(kn(l,o),Ln(o),v&4){if(o.stateNode===null)throw Error(n(162));v=o.memoizedProps,f=o.stateNode;try{f.nodeValue=v}catch(Pe){Ct(o,o.return,Pe)}}break;case 3:if(j0=null,C=os,os=N0(l.containerInfo),kn(l,o),os=C,Ln(o),v&4&&f!==null&&f.memoizedState.isDehydrated)try{Td(l.containerInfo)}catch(Pe){Ct(o,o.return,Pe)}ew&&(ew=!1,Cj(o));break;case 4:v=os,os=N0(o.stateNode.containerInfo),kn(l,o),Ln(o),os=v;break;case 12:kn(l,o),Ln(o);break;case 31:kn(l,o),Ln(o),v&4&&(v=o.updateQueue,v!==null&&(o.updateQueue=null,g0(o,v)));break;case 13:kn(l,o),Ln(o),o.child.flags&8192&&o.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(b0=Rr()),v&4&&(v=o.updateQueue,v!==null&&(o.updateQueue=null,g0(o,v)));break;case 22:C=o.memoizedState!==null;var W=f!==null&&f.memoizedState!==null,Z=Oa,oe=br;if(Oa=Z||C,br=oe||W,kn(l,o),br=oe,Oa=Z,Ln(o),v&8192)e:for(l=o.stateNode,l._visibility=C?l._visibility&-2:l._visibility|1,C&&(f===null||W||Oa||br||xl(o)),f=null,l=o;;){if(l.tag===5||l.tag===26){if(f===null){W=f=l;try{if(_=W.stateNode,C)I=_.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{k=W.stateNode;var de=W.memoizedProps.style,ee=de!=null&&de.hasOwnProperty("display")?de.display:null;k.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(Pe){Ct(W,W.return,Pe)}}}else if(l.tag===6){if(f===null){W=l;try{W.stateNode.nodeValue=C?"":W.memoizedProps}catch(Pe){Ct(W,W.return,Pe)}}}else if(l.tag===18){if(f===null){W=l;try{var ne=W.stateNode;C?uM(ne,!0):uM(W.stateNode,!1)}catch(Pe){Ct(W,W.return,Pe)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}v&4&&(v=o.updateQueue,v!==null&&(f=v.retryQueue,f!==null&&(v.retryQueue=null,g0(o,f))));break;case 19:kn(l,o),Ln(o),v&4&&(v=o.updateQueue,v!==null&&(o.updateQueue=null,g0(o,v)));break;case 30:break;case 21:break;default:kn(l,o),Ln(o)}}function Ln(o){var l=o.flags;if(l&2){try{for(var f,v=o.return;v!==null;){if(hj(v)){f=v;break}v=v.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var C=f.stateNode,_=J1(o);v0(o,_,C);break;case 5:var I=f.stateNode;f.flags&32&&(Mn(I,""),f.flags&=-33);var k=J1(o);v0(o,k,I);break;case 3:case 4:var W=f.stateNode.containerInfo,Z=J1(o);Z1(o,Z,W);break;default:throw Error(n(161))}}catch(oe){Ct(o,o.return,oe)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function Cj(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;Cj(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function Ma(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)mj(o,l.alternate,l),l=l.sibling}function xl(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:Wo(4,l,l.return),xl(l);break;case 1:Fs(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&uj(l,l.return,f),xl(l);break;case 27:Rf(l.stateNode);case 26:case 5:Fs(l,l.return),xl(l);break;case 22:l.memoizedState===null&&xl(l);break;case 30:xl(l);break;default:xl(l)}o=o.sibling}}function Da(o,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var v=l.alternate,C=o,_=l,I=_.flags;switch(_.tag){case 0:case 11:case 15:Da(C,_,f),yf(4,_);break;case 1:if(Da(C,_,f),v=_,C=v.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(Z){Ct(v,v.return,Z)}if(v=_,C=v.updateQueue,C!==null){var k=v.stateNode;try{var W=C.shared.hiddenCallbacks;if(W!==null)for(C.shared.hiddenCallbacks=null,C=0;C<W.length;C++)JN(W[C],k)}catch(Z){Ct(v,v.return,Z)}}f&&I&64&&lj(_),bf(_,_.return);break;case 27:fj(_);case 26:case 5:Da(C,_,f),f&&v===null&&I&4&&dj(_),bf(_,_.return);break;case 12:Da(C,_,f);break;case 31:Da(C,_,f),f&&I&4&&yj(C,_);break;case 13:Da(C,_,f),f&&I&4&&bj(C,_);break;case 22:_.memoizedState===null&&Da(C,_,f),bf(_,_.return);break;case 30:break;default:Da(C,_,f)}l=l.sibling}}function tw(o,l){var f=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==f&&(o!=null&&o.refCount++,f!=null&&sf(f))}function rw(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&sf(o))}function cs(o,l,f,v){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)xj(o,l,f,v),l=l.sibling}function xj(o,l,f,v){var C=l.flags;switch(l.tag){case 0:case 11:case 15:cs(o,l,f,v),C&2048&&yf(9,l);break;case 1:cs(o,l,f,v);break;case 3:cs(o,l,f,v),C&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&sf(o)));break;case 12:if(C&2048){cs(o,l,f,v),o=l.stateNode;try{var _=l.memoizedProps,I=_.id,k=_.onPostCommit;typeof k=="function"&&k(I,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(W){Ct(l,l.return,W)}}else cs(o,l,f,v);break;case 31:cs(o,l,f,v);break;case 13:cs(o,l,f,v);break;case 23:break;case 22:_=l.stateNode,I=l.alternate,l.memoizedState!==null?_._visibility&2?cs(o,l,f,v):Sf(o,l):_._visibility&2?cs(o,l,f,v):(_._visibility|=2,vd(o,l,f,v,(l.subtreeFlags&10256)!==0||!1)),C&2048&&tw(I,l);break;case 24:cs(o,l,f,v),C&2048&&rw(l.alternate,l);break;default:cs(o,l,f,v)}}function vd(o,l,f,v,C){for(C=C&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var _=o,I=l,k=f,W=v,Z=I.flags;switch(I.tag){case 0:case 11:case 15:vd(_,I,k,W,C),yf(8,I);break;case 23:break;case 22:var oe=I.stateNode;I.memoizedState!==null?oe._visibility&2?vd(_,I,k,W,C):Sf(_,I):(oe._visibility|=2,vd(_,I,k,W,C)),C&&Z&2048&&tw(I.alternate,I);break;case 24:vd(_,I,k,W,C),C&&Z&2048&&rw(I.alternate,I);break;default:vd(_,I,k,W,C)}l=l.sibling}}function Sf(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=o,v=l,C=v.flags;switch(v.tag){case 22:Sf(f,v),C&2048&&tw(v.alternate,v);break;case 24:Sf(f,v),C&2048&&rw(v.alternate,v);break;default:Sf(f,v)}l=l.sibling}}var Cf=8192;function gd(o,l,f){if(o.subtreeFlags&Cf)for(o=o.child;o!==null;)wj(o,l,f),o=o.sibling}function wj(o,l,f){switch(o.tag){case 26:gd(o,l,f),o.flags&Cf&&o.memoizedState!==null&&yX(f,os,o.memoizedState,o.memoizedProps);break;case 5:gd(o,l,f);break;case 3:case 4:var v=os;os=N0(o.stateNode.containerInfo),gd(o,l,f),os=v;break;case 22:o.memoizedState===null&&(v=o.alternate,v!==null&&v.memoizedState!==null?(v=Cf,Cf=16777216,gd(o,l,f),Cf=v):gd(o,l,f));break;default:gd(o,l,f)}}function _j(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function xf(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var v=l[f];qr=v,Aj(v,o)}_j(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Ej(o),o=o.sibling}function Ej(o){switch(o.tag){case 0:case 11:case 15:xf(o),o.flags&2048&&Wo(9,o,o.return);break;case 3:xf(o);break;case 12:xf(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,y0(o)):xf(o);break;default:xf(o)}}function y0(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var v=l[f];qr=v,Aj(v,o)}_j(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:Wo(8,l,l.return),y0(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,y0(l));break;default:y0(l)}o=o.sibling}}function Aj(o,l){for(;qr!==null;){var f=qr;switch(f.tag){case 0:case 11:case 15:Wo(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var v=f.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:sf(f.memoizedState.cache)}if(v=f.child,v!==null)v.return=f,qr=v;else e:for(f=o;qr!==null;){v=qr;var C=v.sibling,_=v.return;if(vj(v),v===f){qr=null;break e}if(C!==null){C.return=_,qr=C;break e}qr=_}}}var jY={getCacheForType:function(o){var l=Jr(vr),f=l.data.get(o);return f===void 0&&(f=o(),l.data.set(o,f)),f},cacheSignal:function(){return Jr(vr).controller.signal}},MY=typeof WeakMap=="function"?WeakMap:Map,mt=0,It=null,Je=null,rt=0,St=0,ni=null,Ko=!1,yd=!1,nw=!1,ka=0,tr=0,Go=0,wl=0,iw=0,ii=0,bd=0,wf=null,zn=null,sw=!1,b0=0,Tj=0,S0=1/0,C0=null,$o=null,Nr=0,Yo=null,Sd=null,La=0,aw=0,ow=null,Rj=null,_f=0,cw=null;function si(){return(mt&2)!==0&&rt!==0?rt&-rt:Y.T!==null?pw():xy()}function Pj(){if(ii===0)if((rt&536870912)===0||ot){var o=As;As<<=1,(As&3932160)===0&&(As=262144),ii=o}else ii=536870912;return o=ti.current,o!==null&&(o.flags|=32),ii}function Un(o,l,f){(o===It&&(St===2||St===9)||o.cancelPendingCommit!==null)&&(Cd(o,0),Xo(o,rt,ii,!1)),Qc(o,f),((mt&2)===0||o!==It)&&(o===It&&((mt&2)===0&&(wl|=f),tr===4&&Xo(o,rt,ii,!1)),Hs(o))}function Ij(o,l,f){if((mt&6)!==0)throw Error(n(327));var v=!f&&(l&127)===0&&(l&o.expiredLanes)===0||Ji(o,l),C=v?LY(o,l):uw(o,l,!0),_=v;do{if(C===0){yd&&!v&&Xo(o,l,0,!1);break}else{if(f=o.current.alternate,_&&!DY(f)){C=uw(o,l,!1),_=!1;continue}if(C===2){if(_=l,o.errorRecoveryDisabledLanes&_)var I=0;else I=o.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){l=I;e:{var k=o;C=wf;var W=k.current.memoizedState.isDehydrated;if(W&&(Cd(k,I).flags|=256),I=uw(k,I,!1),I!==2){if(nw&&!W){k.errorRecoveryDisabledLanes|=_,wl|=_,C=4;break e}_=zn,zn=C,_!==null&&(zn===null?zn=_:zn.push.apply(zn,_))}C=I}if(_=!1,C!==2)continue}}if(C===1){Cd(o,0),Xo(o,l,0,!0);break}e:{switch(v=o,_=C,_){case 0:case 1:throw Error(n(345));case 4:if((l&4194048)!==l)break;case 6:Xo(v,l,ii,!Ko);break e;case 2:zn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((l&62914560)===l&&(C=b0+300-Rr(),10<C)){if(Xo(v,l,ii,!Ko),Ei(v,0,!0)!==0)break e;La=l,v.timeoutHandle=oM(Nj.bind(null,v,f,zn,C0,sw,l,ii,wl,bd,Ko,_,"Throttled",-0,0),C);break e}Nj(v,f,zn,C0,sw,l,ii,wl,bd,Ko,_,null,-0,0)}}break}while(!0);Hs(o)}function Nj(o,l,f,v,C,_,I,k,W,Z,oe,de,ee,ne){if(o.timeoutHandle=-1,de=l.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ts},wj(l,_,de);var Pe=(_&62914560)===_?b0-Rr():(_&4194048)===_?Tj-Rr():0;if(Pe=bX(de,Pe),Pe!==null){La=_,o.cancelPendingCommit=Pe(Uj.bind(null,o,l,_,f,v,C,I,k,W,oe,de,null,ee,ne)),Xo(o,_,I,!Z);return}}Uj(o,l,_,f,v,C,I,k,W)}function DY(o){for(var l=o;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var v=0;v<f.length;v++){var C=f[v],_=C.getSnapshot;C=C.value;try{if(!Zn(_(),C))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Xo(o,l,f,v){l&=~iw,l&=~wl,o.suspendedLanes|=l,o.pingedLanes&=~l,v&&(o.warmLanes|=l),v=o.expirationTimes;for(var C=l;0<C;){var _=31-$t(C),I=1<<_;v[_]=-1,C&=~I}f!==0&&Jc(o,f,l)}function x0(){return(mt&6)===0?(Ef(0),!1):!0}function lw(){if(Je!==null){if(St===0)var o=Je.return;else o=Je,Aa=pl=null,E1(o),dd=null,of=0,o=Je;for(;o!==null;)cj(o.alternate,o),o=o.return;Je=null}}function Cd(o,l){var f=o.timeoutHandle;f!==-1&&(o.timeoutHandle=-1,tX(f)),f=o.cancelPendingCommit,f!==null&&(o.cancelPendingCommit=null,f()),La=0,lw(),It=o,Je=f=_a(o.current,null),rt=l,St=0,ni=null,Ko=!1,yd=Ji(o,l),nw=!1,bd=ii=iw=wl=Go=tr=0,zn=wf=null,sw=!1,(l&8)!==0&&(l|=l&32);var v=o.entangledLanes;if(v!==0)for(o=o.entanglements,v&=l;0<v;){var C=31-$t(v),_=1<<C;l|=o[C],v&=~_}return ka=l,Fy(),f}function Oj(o,l){Ye=null,Y.H=mf,l===ud||l===Qy?(l=$N(),St=3):l===f1?(l=$N(),St=4):St=l===q1?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,ni=l,Je===null&&(tr=1,d0(o,Ni(l,o.current)))}function jj(){var o=ti.current;return o===null?!0:(rt&4194048)===rt?Di===null:(rt&62914560)===rt||(rt&536870912)!==0?o===Di:!1}function Mj(){var o=Y.H;return Y.H=mf,o===null?mf:o}function Dj(){var o=Y.A;return Y.A=jY,o}function w0(){tr=4,Ko||(rt&4194048)!==rt&&ti.current!==null||(yd=!0),(Go&134217727)===0&&(wl&134217727)===0||It===null||Xo(It,rt,ii,!1)}function uw(o,l,f){var v=mt;mt|=2;var C=Mj(),_=Dj();(It!==o||rt!==l)&&(C0=null,Cd(o,l)),l=!1;var I=tr;e:do try{if(St!==0&&Je!==null){var k=Je,W=ni;switch(St){case 8:lw(),I=6;break e;case 3:case 2:case 9:case 6:ti.current===null&&(l=!0);var Z=St;if(St=0,ni=null,xd(o,k,W,Z),f&&yd){I=0;break e}break;default:Z=St,St=0,ni=null,xd(o,k,W,Z)}}kY(),I=tr;break}catch(oe){Oj(o,oe)}while(!0);return l&&o.shellSuspendCounter++,Aa=pl=null,mt=v,Y.H=C,Y.A=_,Je===null&&(It=null,rt=0,Fy()),I}function kY(){for(;Je!==null;)kj(Je)}function LY(o,l){var f=mt;mt|=2;var v=Mj(),C=Dj();It!==o||rt!==l?(C0=null,S0=Rr()+500,Cd(o,l)):yd=Ji(o,l);e:do try{if(St!==0&&Je!==null){l=Je;var _=ni;t:switch(St){case 1:St=0,ni=null,xd(o,l,_,1);break;case 2:case 9:if(KN(_)){St=0,ni=null,Lj(l);break}l=function(){St!==2&&St!==9||It!==o||(St=7),Hs(o)},_.then(l,l);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:KN(_)?(St=0,ni=null,Lj(l)):(St=0,ni=null,xd(o,l,_,7));break;case 5:var I=null;switch(Je.tag){case 26:I=Je.memoizedState;case 5:case 27:var k=Je;if(I?xM(I):k.stateNode.complete){St=0,ni=null;var W=k.sibling;if(W!==null)Je=W;else{var Z=k.return;Z!==null?(Je=Z,_0(Z)):Je=null}break t}}St=0,ni=null,xd(o,l,_,5);break;case 6:St=0,ni=null,xd(o,l,_,6);break;case 8:lw(),tr=6;break e;default:throw Error(n(462))}}zY();break}catch(oe){Oj(o,oe)}while(!0);return Aa=pl=null,Y.H=v,Y.A=C,mt=f,Je!==null?0:(It=null,rt=0,Fy(),tr)}function zY(){for(;Je!==null&&!Yc();)kj(Je)}function kj(o){var l=aj(o.alternate,o,ka);o.memoizedProps=o.pendingProps,l===null?_0(o):Je=l}function Lj(o){var l=o,f=l.alternate;switch(l.tag){case 15:case 0:l=ej(f,l,l.pendingProps,l.type,void 0,rt);break;case 11:l=ej(f,l,l.pendingProps,l.type.render,l.ref,rt);break;case 5:E1(l);default:cj(f,l),l=Je=DN(l,ka),l=aj(f,l,ka)}o.memoizedProps=o.pendingProps,l===null?_0(o):Je=l}function xd(o,l,f,v){Aa=pl=null,E1(l),dd=null,of=0;var C=l.return;try{if(AY(o,C,l,f,rt)){tr=1,d0(o,Ni(f,o.current)),Je=null;return}}catch(_){if(C!==null)throw Je=C,_;tr=1,d0(o,Ni(f,o.current)),Je=null;return}l.flags&32768?(ot||v===1?o=!0:yd||(rt&536870912)!==0?o=!1:(Ko=o=!0,(v===2||v===9||v===3||v===6)&&(v=ti.current,v!==null&&v.tag===13&&(v.flags|=16384))),zj(l,o)):_0(l)}function _0(o){var l=o;do{if((l.flags&32768)!==0){zj(l,Ko);return}o=l.return;var f=PY(l.alternate,l,ka);if(f!==null){Je=f;return}if(l=l.sibling,l!==null){Je=l;return}Je=l=o}while(l!==null);tr===0&&(tr=5)}function zj(o,l){do{var f=IY(o.alternate,o);if(f!==null){f.flags&=32767,Je=f;return}if(f=o.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(o=o.sibling,o!==null)){Je=o;return}Je=o=f}while(o!==null);tr=6,Je=null}function Uj(o,l,f,v,C,_,I,k,W){o.cancelPendingCommit=null;do E0();while(Nr!==0);if((mt&6)!==0)throw Error(n(327));if(l!==null){if(l===o.current)throw Error(n(177));if(_=l.lanes|l.childLanes,_|=Jx,Fx(o,f,_,I,k,W),o===It&&(Je=It=null,rt=0),Sd=l,Yo=o,La=f,aw=_,ow=C,Rj=v,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,VY(Pr,function(){return Hj(),null})):(o.callbackNode=null,o.callbackPriority=0),v=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||v){v=Y.T,Y.T=null,C=ae.p,ae.p=2,I=mt,mt|=4;try{NY(o,l,f)}finally{mt=I,ae.p=C,Y.T=v}}Nr=1,Bj(),qj(),Vj()}}function Bj(){if(Nr===1){Nr=0;var o=Yo,l=Sd,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=Y.T,Y.T=null;var v=ae.p;ae.p=2;var C=mt;mt|=4;try{Sj(l,o);var _=xw,I=AN(o.containerInfo),k=_.focusedElem,W=_.selectionRange;if(I!==k&&k&&k.ownerDocument&&EN(k.ownerDocument.documentElement,k)){if(W!==null&&Gx(k)){var Z=W.start,oe=W.end;if(oe===void 0&&(oe=Z),"selectionStart"in k)k.selectionStart=Z,k.selectionEnd=Math.min(oe,k.value.length);else{var de=k.ownerDocument||document,ee=de&&de.defaultView||window;if(ee.getSelection){var ne=ee.getSelection(),Pe=k.textContent.length,ze=Math.min(W.start,Pe),Tt=W.end===void 0?ze:Math.min(W.end,Pe);!ne.extend&&ze>Tt&&(I=Tt,Tt=ze,ze=I);var $=_N(k,ze),K=_N(k,Tt);if($&&K&&(ne.rangeCount!==1||ne.anchorNode!==$.node||ne.anchorOffset!==$.offset||ne.focusNode!==K.node||ne.focusOffset!==K.offset)){var J=de.createRange();J.setStart($.node,$.offset),ne.removeAllRanges(),ze>Tt?(ne.addRange(J),ne.extend(K.node,K.offset)):(J.setEnd(K.node,K.offset),ne.addRange(J))}}}}for(de=[],ne=k;ne=ne.parentNode;)ne.nodeType===1&&de.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<de.length;k++){var ce=de[k];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}L0=!!Cw,xw=Cw=null}finally{mt=C,ae.p=v,Y.T=f}}o.current=l,Nr=2}}function qj(){if(Nr===2){Nr=0;var o=Yo,l=Sd,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=Y.T,Y.T=null;var v=ae.p;ae.p=2;var C=mt;mt|=4;try{mj(o,l.alternate,l)}finally{mt=C,ae.p=v,Y.T=f}}Nr=3}}function Vj(){if(Nr===4||Nr===3){Nr=0,Eo();var o=Yo,l=Sd,f=La,v=Rj;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Nr=5:(Nr=0,Sd=Yo=null,Fj(o,o.pendingLanes));var C=o.pendingLanes;if(C===0&&($o=null),Sa(f),l=l.stateNode,Ir&&typeof Ir.onCommitFiberRoot=="function")try{Ir.onCommitFiberRoot(Xn,l,void 0,(l.current.flags&128)===128)}catch{}if(v!==null){l=Y.T,C=ae.p,ae.p=2,Y.T=null;try{for(var _=o.onRecoverableError,I=0;I<v.length;I++){var k=v[I];_(k.value,{componentStack:k.stack})}}finally{Y.T=l,ae.p=C}}(La&3)!==0&&E0(),Hs(o),C=o.pendingLanes,(f&261930)!==0&&(C&42)!==0?o===cw?_f++:(_f=0,cw=o):_f=0,Ef(0)}}function Fj(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,sf(l)))}function E0(){return Bj(),qj(),Vj(),Hj()}function Hj(){if(Nr!==5)return!1;var o=Yo,l=aw;aw=0;var f=Sa(La),v=Y.T,C=ae.p;try{ae.p=32>f?32:f,Y.T=null,f=ow,ow=null;var _=Yo,I=La;if(Nr=0,Sd=Yo=null,La=0,(mt&6)!==0)throw Error(n(331));var k=mt;if(mt|=4,Ej(_.current),xj(_,_.current,I,f),mt=k,Ef(0,!1),Ir&&typeof Ir.onPostCommitFiberRoot=="function")try{Ir.onPostCommitFiberRoot(Xn,_)}catch{}return!0}finally{ae.p=C,Y.T=v,Fj(o,l)}}function Wj(o,l,f){l=Ni(f,l),l=B1(o.stateNode,l,2),o=Vo(o,l,2),o!==null&&(Qc(o,2),Hs(o))}function Ct(o,l,f){if(o.tag===3)Wj(o,o,f);else for(;l!==null;){if(l.tag===3){Wj(l,o,f);break}else if(l.tag===1){var v=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&($o===null||!$o.has(v))){o=Ni(f,o),f=KO(2),v=Vo(l,f,2),v!==null&&(GO(f,v,l,o),Qc(v,2),Hs(v));break}}l=l.return}}function dw(o,l,f){var v=o.pingCache;if(v===null){v=o.pingCache=new MY;var C=new Set;v.set(l,C)}else C=v.get(l),C===void 0&&(C=new Set,v.set(l,C));C.has(f)||(nw=!0,C.add(f),o=UY.bind(null,o,l,f),l.then(o,o))}function UY(o,l,f){var v=o.pingCache;v!==null&&v.delete(l),o.pingedLanes|=o.suspendedLanes&f,o.warmLanes&=~f,It===o&&(rt&f)===f&&(tr===4||tr===3&&(rt&62914560)===rt&&300>Rr()-b0?(mt&2)===0&&Cd(o,0):iw|=f,bd===rt&&(bd=0)),Hs(o)}function Kj(o,l){l===0&&(l=Cy()),o=dl(o,l),o!==null&&(Qc(o,l),Hs(o))}function BY(o){var l=o.memoizedState,f=0;l!==null&&(f=l.retryLane),Kj(o,f)}function qY(o,l){var f=0;switch(o.tag){case 31:case 13:var v=o.stateNode,C=o.memoizedState;C!==null&&(f=C.retryLane);break;case 19:v=o.stateNode;break;case 22:v=o.stateNode._retryCache;break;default:throw Error(n(314))}v!==null&&v.delete(l),Kj(o,f)}function VY(o,l){return Gt(o,l)}var A0=null,wd=null,hw=!1,T0=!1,fw=!1,Qo=0;function Hs(o){o!==wd&&o.next===null&&(wd===null?A0=wd=o:wd=wd.next=o),T0=!0,hw||(hw=!0,HY())}function Ef(o,l){if(!fw&&T0){fw=!0;do for(var f=!1,v=A0;v!==null;){if(o!==0){var C=v.pendingLanes;if(C===0)var _=0;else{var I=v.suspendedLanes,k=v.pingedLanes;_=(1<<31-$t(42|o)+1)-1,_&=C&~(I&~k),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(f=!0,Xj(v,_))}else _=rt,_=Ei(v,v===It?_:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(_&3)===0||Ji(v,_)||(f=!0,Xj(v,_));v=v.next}while(f);fw=!1}}function FY(){Gj()}function Gj(){T0=hw=!1;var o=0;Qo!==0&&eX()&&(o=Qo);for(var l=Rr(),f=null,v=A0;v!==null;){var C=v.next,_=$j(v,l);_===0?(v.next=null,f===null?A0=C:f.next=C,C===null&&(wd=f)):(f=v,(o!==0||(_&3)!==0)&&(T0=!0)),v=C}Nr!==0&&Nr!==5||Ef(o),Qo!==0&&(Qo=0)}function $j(o,l){for(var f=o.suspendedLanes,v=o.pingedLanes,C=o.expirationTimes,_=o.pendingLanes&-62914561;0<_;){var I=31-$t(_),k=1<<I,W=C[I];W===-1?((k&f)===0||(k&v)!==0)&&(C[I]=Vx(k,l)):W<=l&&(o.expiredLanes|=k),_&=~k}if(l=It,f=rt,f=Ei(o,o===l?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),v=o.callbackNode,f===0||o===l&&(St===2||St===9)||o.cancelPendingCommit!==null)return v!==null&&v!==null&&xi(v),o.callbackNode=null,o.callbackPriority=0;if((f&3)===0||Ji(o,f)){if(l=f&-f,l===o.callbackPriority)return l;switch(v!==null&&xi(v),Sa(f)){case 2:case 8:f=kt;break;case 32:f=Pr;break;case 268435456:f=Lu;break;default:f=Pr}return v=Yj.bind(null,o),f=Gt(f,v),o.callbackPriority=l,o.callbackNode=f,l}return v!==null&&v!==null&&xi(v),o.callbackPriority=2,o.callbackNode=null,2}function Yj(o,l){if(Nr!==0&&Nr!==5)return o.callbackNode=null,o.callbackPriority=0,null;var f=o.callbackNode;if(E0()&&o.callbackNode!==f)return null;var v=rt;return v=Ei(o,o===It?v:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),v===0?null:(Ij(o,v,l),$j(o,Rr()),o.callbackNode!=null&&o.callbackNode===f?Yj.bind(null,o):null)}function Xj(o,l){if(E0())return null;Ij(o,l,!0)}function HY(){rX(function(){(mt&6)!==0?Gt(ut,FY):Gj()})}function pw(){if(Qo===0){var o=cd;o===0&&(o=wi,wi<<=1,(wi&261888)===0&&(wi=256)),Qo=o}return Qo}function Qj(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Gu(""+o)}function Jj(o,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,o.id&&f.setAttribute("form",o.id),l.parentNode.insertBefore(f,l),o=new FormData(o),f.parentNode.removeChild(f),o}function WY(o,l,f,v,C){if(l==="submit"&&f&&f.stateNode===C){var _=Qj((C[Ur]||null).action),I=v.submitter;I&&(l=(l=I[Ur]||null)?Qj(l.formAction):I.getAttribute("formAction"),l!==null&&(_=l,I=null));var k=new Ls("action","action",null,v,C);o.push({event:k,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(Qo!==0){var W=I?Jj(C,I):new FormData(C);M1(f,{pending:!0,data:W,method:C.method,action:_},null,W)}}else typeof _=="function"&&(k.preventDefault(),W=I?Jj(C,I):new FormData(C),M1(f,{pending:!0,data:W,method:C.method,action:_},_,W))},currentTarget:C}]})}}for(var mw=0;mw<Qx.length;mw++){var vw=Qx[mw],KY=vw.toLowerCase(),GY=vw[0].toUpperCase()+vw.slice(1);as(KY,"on"+GY)}as(PN,"onAnimationEnd"),as(IN,"onAnimationIteration"),as(NN,"onAnimationStart"),as("dblclick","onDoubleClick"),as("focusin","onFocus"),as("focusout","onBlur"),as(lY,"onTransitionRun"),as(uY,"onTransitionStart"),as(dY,"onTransitionCancel"),as(ON,"onTransitionEnd"),js("onMouseEnter",["mouseout","mouseover"]),js("onMouseLeave",["mouseout","mouseover"]),js("onPointerEnter",["pointerout","pointerover"]),js("onPointerLeave",["pointerout","pointerover"]),Os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Os("onBeforeInput",["compositionend","keypress","textInput","paste"]),Os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Af="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$Y=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Af));function Zj(o,l){l=(l&4)!==0;for(var f=0;f<o.length;f++){var v=o[f],C=v.event;v=v.listeners;e:{var _=void 0;if(l)for(var I=v.length-1;0<=I;I--){var k=v[I],W=k.instance,Z=k.currentTarget;if(k=k.listener,W!==_&&C.isPropagationStopped())break e;_=k,C.currentTarget=Z;try{_(C)}catch(oe){Vy(oe)}C.currentTarget=null,_=W}else for(I=0;I<v.length;I++){if(k=v[I],W=k.instance,Z=k.currentTarget,k=k.listener,W!==_&&C.isPropagationStopped())break e;_=k,C.currentTarget=Z;try{_(C)}catch(oe){Vy(oe)}C.currentTarget=null,_=W}}}}function Ze(o,l){var f=l[Vu];f===void 0&&(f=l[Vu]=new Set);var v=o+"__bubble";f.has(v)||(eM(l,o,2,!1),f.add(v))}function gw(o,l,f){var v=0;l&&(v|=4),eM(f,o,v,l)}var R0="_reactListening"+Math.random().toString(36).slice(2);function yw(o){if(!o[R0]){o[R0]=!0,Lh.forEach(function(f){f!=="selectionchange"&&($Y.has(f)||gw(f,!1,o),gw(f,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[R0]||(l[R0]=!0,gw("selectionchange",!1,l))}}function eM(o,l,f,v){switch(PM(l)){case 2:var C=xX;break;case 8:C=wX;break;default:C=jw}f=C.bind(null,l,f,o),C=void 0,!nl||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(C=!0),v?C!==void 0?o.addEventListener(l,f,{capture:!0,passive:C}):o.addEventListener(l,f,!0):C!==void 0?o.addEventListener(l,f,{passive:C}):o.addEventListener(l,f,!1)}function bw(o,l,f,v,C){var _=v;if((l&1)===0&&(l&2)===0&&v!==null)e:for(;;){if(v===null)return;var I=v.tag;if(I===3||I===4){var k=v.stateNode.containerInfo;if(k===C)break;if(I===4)for(I=v.return;I!==null;){var W=I.tag;if((W===3||W===4)&&I.stateNode.containerInfo===C)return;I=I.return}for(;k!==null;){if(I=Is(k),I===null)return;if(W=I.tag,W===5||W===6||W===26||W===27){v=_=I;continue e}k=k.parentNode}}v=v.return}Oo(function(){var Z=_,oe=Ti(f),de=[];e:{var ee=jN.get(o);if(ee!==void 0){var ne=Ls,Pe=o;switch(o){case"keypress":if(sl(f)===0)break e;case"keydown":case"keyup":ne=Uy;break;case"focusin":Pe="focus",ne=ol;break;case"focusout":Pe="blur",ne=ol;break;case"beforeblur":case"afterblur":ne=ol;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Xh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=Iy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=P;break;case PN:case IN:case NN:ne=Oy;break;case ON:ne=B;break;case"scroll":case"scrollend":ne=Yh;break;case"wheel":ne=te;break;case"copy":case"cut":case"paste":ne=jy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=wa;break;case"toggle":case"beforetoggle":ne=$e}var ze=(l&4)!==0,Tt=!ze&&(o==="scroll"||o==="scrollend"),$=ze?ee!==null?ee+"Capture":null:ee;ze=[];for(var K=Z,J;K!==null;){var ce=K;if(J=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||J===null||$===null||(ce=rs(K,$),ce!=null&&ze.push(Tf(K,ce,J))),Tt)break;K=K.return}0<ze.length&&(ee=new ne(ee,Pe,null,f,oe),de.push({event:ee,listeners:ze}))}}if((l&7)===0){e:{if(ee=o==="mouseover"||o==="pointerover",ne=o==="mouseout"||o==="pointerout",ee&&f!==Kh&&(Pe=f.relatedTarget||f.fromElement)&&(Is(Pe)||Pe[Rs]))break e;if((ne||ee)&&(ee=oe.window===oe?oe:(ee=oe.ownerDocument)?ee.defaultView||ee.parentWindow:window,ne?(Pe=f.relatedTarget||f.toElement,ne=Z,Pe=Pe?Is(Pe):null,Pe!==null&&(Tt=s(Pe),ze=Pe.tag,Pe!==Tt||ze!==5&&ze!==27&&ze!==6)&&(Pe=null)):(ne=null,Pe=Z),ne!==Pe)){if(ze=Xh,ce="onMouseLeave",$="onMouseEnter",K="mouse",(o==="pointerout"||o==="pointerover")&&(ze=wa,ce="onPointerLeave",$="onPointerEnter",K="pointer"),Tt=ne==null?ee:Qn(ne),J=Pe==null?ee:Qn(Pe),ee=new ze(ce,K+"leave",ne,f,oe),ee.target=Tt,ee.relatedTarget=J,ce=null,Is(oe)===Z&&(ze=new ze($,K+"enter",Pe,f,oe),ze.target=J,ze.relatedTarget=Tt,ce=ze),Tt=ce,ne&&Pe)t:{for(ze=YY,$=ne,K=Pe,J=0,ce=$;ce;ce=ze(ce))J++;ce=0;for(var Me=K;Me;Me=ze(Me))ce++;for(;0<J-ce;)$=ze($),J--;for(;0<ce-J;)K=ze(K),ce--;for(;J--;){if($===K||K!==null&&$===K.alternate){ze=$;break t}$=ze($),K=ze(K)}ze=null}else ze=null;ne!==null&&tM(de,ee,ne,ze,!1),Pe!==null&&Tt!==null&&tM(de,Tt,Pe,ze,!0)}}e:{if(ee=Z?Qn(Z):window,ne=ee.nodeName&&ee.nodeName.toLowerCase(),ne==="select"||ne==="input"&&ee.type==="file")var dt=yN;else if(vN(ee))if(bN)dt=aY;else{dt=iY;var Ie=nY}else ne=ee.nodeName,!ne||ne.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?Z&&Ku(Z.elementType)&&(dt=yN):dt=sY;if(dt&&(dt=dt(o,Z))){gN(de,dt,f,oe);break e}Ie&&Ie(o,ee,Z),o==="focusout"&&Z&&ee.type==="number"&&Z.memoizedProps.value!=null&&Fh(ee,"number",ee.value)}switch(Ie=Z?Qn(Z):window,o){case"focusin":(vN(Ie)||Ie.contentEditable==="true")&&(ed=Ie,$x=Z,tf=null);break;case"focusout":tf=$x=ed=null;break;case"mousedown":Yx=!0;break;case"contextmenu":case"mouseup":case"dragend":Yx=!1,TN(de,f,oe);break;case"selectionchange":if(cY)break;case"keydown":case"keyup":TN(de,f,oe)}var Qe;if(pt)e:{switch(o){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else Zu?cl(o,f)&&(nt="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(nt="onCompositionStart");nt&&(Bs&&f.locale!=="ko"&&(Zu||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&Zu&&(Qe=$h()):(ks=oe,Gh="value"in ks?ks.value:ks.textContent,Zu=!0)),Ie=P0(Z,nt),0<Ie.length&&(nt=new Us(nt,o,null,f,oe),de.push({event:nt,listeners:Ie}),Qe?nt.data=Qe:(Qe=Ju(f),Qe!==null&&(nt.data=Qe)))),(Qe=Pi?Z$(o,f):eY(o,f))&&(nt=P0(Z,"onBeforeInput"),0<nt.length&&(Ie=new Us("onBeforeInput","beforeinput",null,f,oe),de.push({event:Ie,listeners:nt}),Ie.data=Qe)),WY(de,o,Z,f,oe)}Zj(de,l)})}function Tf(o,l,f){return{instance:o,listener:l,currentTarget:f}}function P0(o,l){for(var f=l+"Capture",v=[];o!==null;){var C=o,_=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||_===null||(C=rs(o,f),C!=null&&v.unshift(Tf(o,C,_)),C=rs(o,l),C!=null&&v.push(Tf(o,C,_))),o.tag===3)return v;o=o.return}return[]}function YY(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function tM(o,l,f,v,C){for(var _=l._reactName,I=[];f!==null&&f!==v;){var k=f,W=k.alternate,Z=k.stateNode;if(k=k.tag,W!==null&&W===v)break;k!==5&&k!==26&&k!==27||Z===null||(W=Z,C?(Z=rs(f,_),Z!=null&&I.unshift(Tf(f,Z,W))):C||(Z=rs(f,_),Z!=null&&I.push(Tf(f,Z,W)))),f=f.return}I.length!==0&&o.push({event:l,listeners:I})}var XY=/\r\n?/g,QY=/\u0000|\uFFFD/g;function rM(o){return(typeof o=="string"?o:""+o).replace(XY,`
`).replace(QY,"")}function nM(o,l){return l=rM(l),rM(o)===l}function At(o,l,f,v,C,_){switch(f){case"children":typeof v=="string"?l==="body"||l==="textarea"&&v===""||Mn(o,v):(typeof v=="number"||typeof v=="bigint")&&l!=="body"&&Mn(o,""+v);break;case"className":Jn(o,"class",v);break;case"tabIndex":Jn(o,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Jn(o,f,v);break;case"style":Wh(o,v,_);break;case"data":if(l!=="object"){Jn(o,"data",v);break}case"src":case"href":if(v===""&&(l!=="a"||f!=="href")){o.removeAttribute(f);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){o.removeAttribute(f);break}v=Gu(""+v),o.setAttribute(f,v);break;case"action":case"formAction":if(typeof v=="function"){o.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(f==="formAction"?(l!=="input"&&At(o,l,"name",C.name,C,null),At(o,l,"formEncType",C.formEncType,C,null),At(o,l,"formMethod",C.formMethod,C,null),At(o,l,"formTarget",C.formTarget,C,null)):(At(o,l,"encType",C.encType,C,null),At(o,l,"method",C.method,C,null),At(o,l,"target",C.target,C,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){o.removeAttribute(f);break}v=Gu(""+v),o.setAttribute(f,v);break;case"onClick":v!=null&&(o.onclick=ts);break;case"onScroll":v!=null&&Ze("scroll",o);break;case"onScrollEnd":v!=null&&Ze("scrollend",o);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(f=v.__html,f!=null){if(C.children!=null)throw Error(n(60));o.innerHTML=f}}break;case"multiple":o.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":o.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){o.removeAttribute("xlink:href");break}f=Gu(""+v),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?o.setAttribute(f,""+v):o.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?o.setAttribute(f,""):o.removeAttribute(f);break;case"capture":case"download":v===!0?o.setAttribute(f,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?o.setAttribute(f,v):o.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?o.setAttribute(f,v):o.removeAttribute(f);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?o.removeAttribute(f):o.setAttribute(f,v);break;case"popover":Ze("beforetoggle",o),Ze("toggle",o),Hu(o,"popover",v);break;case"xlinkActuate":mr(o,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":mr(o,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":mr(o,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":mr(o,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":mr(o,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":mr(o,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":mr(o,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":mr(o,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":mr(o,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Hu(o,"is",v);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Py.get(f)||f,Hu(o,f,v))}}function Sw(o,l,f,v,C,_){switch(f){case"style":Wh(o,v,_);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(f=v.__html,f!=null){if(C.children!=null)throw Error(n(60));o.innerHTML=f}}break;case"children":typeof v=="string"?Mn(o,v):(typeof v=="number"||typeof v=="bigint")&&Mn(o,""+v);break;case"onScroll":v!=null&&Ze("scroll",o);break;case"onScrollEnd":v!=null&&Ze("scrollend",o);break;case"onClick":v!=null&&(o.onclick=ts);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zh.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(C=f.endsWith("Capture"),l=f.slice(2,C?f.length-7:void 0),_=o[Ur]||null,_=_!=null?_[f]:null,typeof _=="function"&&o.removeEventListener(l,_,C),typeof v=="function")){typeof _!="function"&&_!==null&&(f in o?o[f]=null:o.hasAttribute(f)&&o.removeAttribute(f)),o.addEventListener(l,v,C);break e}f in o?o[f]=v:v===!0?o.setAttribute(f,""):Hu(o,f,v)}}}function en(o,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ze("error",o),Ze("load",o);var v=!1,C=!1,_;for(_ in f)if(f.hasOwnProperty(_)){var I=f[_];if(I!=null)switch(_){case"src":v=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:At(o,l,_,I,f,null)}}C&&At(o,l,"srcSet",f.srcSet,f,null),v&&At(o,l,"src",f.src,f,null);return;case"input":Ze("invalid",o);var k=_=I=C=null,W=null,Z=null;for(v in f)if(f.hasOwnProperty(v)){var oe=f[v];if(oe!=null)switch(v){case"name":C=oe;break;case"type":I=oe;break;case"checked":W=oe;break;case"defaultChecked":Z=oe;break;case"value":_=oe;break;case"defaultValue":k=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(n(137,l));break;default:At(o,l,v,oe,f,null)}}Ay(o,_,k,W,Z,I,C,!1);return;case"select":Ze("invalid",o),v=I=_=null;for(C in f)if(f.hasOwnProperty(C)&&(k=f[C],k!=null))switch(C){case"value":_=k;break;case"defaultValue":I=k;break;case"multiple":v=k;default:At(o,l,C,k,f,null)}l=_,f=I,o.multiple=!!v,l!=null?Ro(o,!!v,l,!1):f!=null&&Ro(o,!!v,f,!0);return;case"textarea":Ze("invalid",o),_=C=v=null;for(I in f)if(f.hasOwnProperty(I)&&(k=f[I],k!=null))switch(I){case"value":v=k;break;case"defaultValue":C=k;break;case"children":_=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(n(91));break;default:At(o,l,I,k,f,null)}Po(o,v,C,_);return;case"option":for(W in f)if(f.hasOwnProperty(W)&&(v=f[W],v!=null))switch(W){case"selected":o.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:At(o,l,W,v,f,null)}return;case"dialog":Ze("beforetoggle",o),Ze("toggle",o),Ze("cancel",o),Ze("close",o);break;case"iframe":case"object":Ze("load",o);break;case"video":case"audio":for(v=0;v<Af.length;v++)Ze(Af[v],o);break;case"image":Ze("error",o),Ze("load",o);break;case"details":Ze("toggle",o);break;case"embed":case"source":case"link":Ze("error",o),Ze("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in f)if(f.hasOwnProperty(Z)&&(v=f[Z],v!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:At(o,l,Z,v,f,null)}return;default:if(Ku(l)){for(oe in f)f.hasOwnProperty(oe)&&(v=f[oe],v!==void 0&&Sw(o,l,oe,v,f,void 0));return}}for(k in f)f.hasOwnProperty(k)&&(v=f[k],v!=null&&At(o,l,k,v,f,null))}function JY(o,l,f,v){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,_=null,I=null,k=null,W=null,Z=null,oe=null;for(ne in f){var de=f[ne];if(f.hasOwnProperty(ne)&&de!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":W=de;default:v.hasOwnProperty(ne)||At(o,l,ne,null,v,de)}}for(var ee in v){var ne=v[ee];if(de=f[ee],v.hasOwnProperty(ee)&&(ne!=null||de!=null))switch(ee){case"type":_=ne;break;case"name":C=ne;break;case"checked":Z=ne;break;case"defaultChecked":oe=ne;break;case"value":I=ne;break;case"defaultValue":k=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(n(137,l));break;default:ne!==de&&At(o,l,ee,ne,v,de)}}Wu(o,I,k,W,Z,oe,_,C);return;case"select":ne=I=k=ee=null;for(_ in f)if(W=f[_],f.hasOwnProperty(_)&&W!=null)switch(_){case"value":break;case"multiple":ne=W;default:v.hasOwnProperty(_)||At(o,l,_,null,v,W)}for(C in v)if(_=v[C],W=f[C],v.hasOwnProperty(C)&&(_!=null||W!=null))switch(C){case"value":ee=_;break;case"defaultValue":k=_;break;case"multiple":I=_;default:_!==W&&At(o,l,C,_,v,W)}l=k,f=I,v=ne,ee!=null?Ro(o,!!f,ee,!1):!!v!=!!f&&(l!=null?Ro(o,!!f,l,!0):Ro(o,!!f,f?[]:"",!1));return;case"textarea":ne=ee=null;for(k in f)if(C=f[k],f.hasOwnProperty(k)&&C!=null&&!v.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:At(o,l,k,null,v,C)}for(I in v)if(C=v[I],_=f[I],v.hasOwnProperty(I)&&(C!=null||_!=null))switch(I){case"value":ee=C;break;case"defaultValue":ne=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(n(91));break;default:C!==_&&At(o,l,I,C,v,_)}Ty(o,ee,ne);return;case"option":for(var Pe in f)if(ee=f[Pe],f.hasOwnProperty(Pe)&&ee!=null&&!v.hasOwnProperty(Pe))switch(Pe){case"selected":o.selected=!1;break;default:At(o,l,Pe,null,v,ee)}for(W in v)if(ee=v[W],ne=f[W],v.hasOwnProperty(W)&&ee!==ne&&(ee!=null||ne!=null))switch(W){case"selected":o.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:At(o,l,W,ee,v,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in f)ee=f[ze],f.hasOwnProperty(ze)&&ee!=null&&!v.hasOwnProperty(ze)&&At(o,l,ze,null,v,ee);for(Z in v)if(ee=v[Z],ne=f[Z],v.hasOwnProperty(Z)&&ee!==ne&&(ee!=null||ne!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(n(137,l));break;default:At(o,l,Z,ee,v,ne)}return;default:if(Ku(l)){for(var Tt in f)ee=f[Tt],f.hasOwnProperty(Tt)&&ee!==void 0&&!v.hasOwnProperty(Tt)&&Sw(o,l,Tt,void 0,v,ee);for(oe in v)ee=v[oe],ne=f[oe],!v.hasOwnProperty(oe)||ee===ne||ee===void 0&&ne===void 0||Sw(o,l,oe,ee,v,ne);return}}for(var $ in f)ee=f[$],f.hasOwnProperty($)&&ee!=null&&!v.hasOwnProperty($)&&At(o,l,$,null,v,ee);for(de in v)ee=v[de],ne=f[de],!v.hasOwnProperty(de)||ee===ne||ee==null&&ne==null||At(o,l,de,ee,v,ne)}function iM(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ZY(){if(typeof performance.getEntriesByType=="function"){for(var o=0,l=0,f=performance.getEntriesByType("resource"),v=0;v<f.length;v++){var C=f[v],_=C.transferSize,I=C.initiatorType,k=C.duration;if(_&&k&&iM(I)){for(I=0,k=C.responseEnd,v+=1;v<f.length;v++){var W=f[v],Z=W.startTime;if(Z>k)break;var oe=W.transferSize,de=W.initiatorType;oe&&iM(de)&&(W=W.responseEnd,I+=oe*(W<k?1:(k-Z)/(W-Z)))}if(--v,l+=8*(_+I)/(C.duration/1e3),o++,10<o)break}}if(0<o)return l/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var Cw=null,xw=null;function I0(o){return o.nodeType===9?o:o.ownerDocument}function sM(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function aM(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function ww(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var _w=null;function eX(){var o=window.event;return o&&o.type==="popstate"?o===_w?!1:(_w=o,!0):(_w=null,!1)}var oM=typeof setTimeout=="function"?setTimeout:void 0,tX=typeof clearTimeout=="function"?clearTimeout:void 0,cM=typeof Promise=="function"?Promise:void 0,rX=typeof queueMicrotask=="function"?queueMicrotask:typeof cM<"u"?function(o){return cM.resolve(null).then(o).catch(nX)}:oM;function nX(o){setTimeout(function(){throw o})}function Jo(o){return o==="head"}function lM(o,l){var f=l,v=0;do{var C=f.nextSibling;if(o.removeChild(f),C&&C.nodeType===8)if(f=C.data,f==="/$"||f==="/&"){if(v===0){o.removeChild(C),Td(l);return}v--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")v++;else if(f==="html")Rf(o.ownerDocument.documentElement);else if(f==="head"){f=o.ownerDocument.head,Rf(f);for(var _=f.firstChild;_;){var I=_.nextSibling,k=_.nodeName;_[Ps]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&_.rel.toLowerCase()==="stylesheet"||f.removeChild(_),_=I}}else f==="body"&&Rf(o.ownerDocument.body);f=C}while(f);Td(l)}function uM(o,l){var f=o;o=0;do{var v=f.nextSibling;if(f.nodeType===1?l?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(l?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),v&&v.nodeType===8)if(f=v.data,f==="/$"){if(o===0)break;o--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||o++;f=v}while(f)}function Ew(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Ew(f),Fu(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}o.removeChild(f)}}function iX(o,l,f,v){for(;o.nodeType===1;){var C=f;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!v&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(v){if(!o[Ps])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(_=o.getAttribute("rel"),_==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(_!==C.rel||o.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||o.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||o.getAttribute("title")!==(C.title==null?null:C.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(_=o.getAttribute("src"),(_!==(C.src==null?null:C.src)||o.getAttribute("type")!==(C.type==null?null:C.type)||o.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&_&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var _=C.name==null?null:""+C.name;if(C.type==="hidden"&&o.getAttribute("name")===_)return o}else return o;if(o=ki(o.nextSibling),o===null)break}return null}function sX(o,l,f){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!f||(o=ki(o.nextSibling),o===null))return null;return o}function dM(o,l){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!l||(o=ki(o.nextSibling),o===null))return null;return o}function Aw(o){return o.data==="$?"||o.data==="$~"}function Tw(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function aX(o,l){var f=o.ownerDocument;if(o.data==="$~")o._reactRetry=l;else if(o.data!=="$?"||f.readyState!=="loading")l();else{var v=function(){l(),f.removeEventListener("DOMContentLoaded",v)};f.addEventListener("DOMContentLoaded",v),o._reactRetry=v}}function ki(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return o}var Rw=null;function hM(o){o=o.nextSibling;for(var l=0;o;){if(o.nodeType===8){var f=o.data;if(f==="/$"||f==="/&"){if(l===0)return ki(o.nextSibling);l--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||l++}o=o.nextSibling}return null}function fM(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(l===0)return o;l--}else f!=="/$"&&f!=="/&"||l++}o=o.previousSibling}return null}function pM(o,l,f){switch(l=I0(f),o){case"html":if(o=l.documentElement,!o)throw Error(n(452));return o;case"head":if(o=l.head,!o)throw Error(n(453));return o;case"body":if(o=l.body,!o)throw Error(n(454));return o;default:throw Error(n(451))}}function Rf(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);Fu(o)}var Li=new Map,mM=new Set;function N0(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var za=ae.d;ae.d={f:oX,r:cX,D:lX,C:uX,L:dX,m:hX,X:pX,S:fX,M:mX};function oX(){var o=za.f(),l=x0();return o||l}function cX(o){var l=Ai(o);l!==null&&l.tag===5&&l.type==="form"?OO(l):za.r(o)}var _d=typeof document>"u"?null:document;function vM(o,l,f){var v=_d;if(v&&typeof l=="string"&&l){var C=jn(l);C='link[rel="'+o+'"][href="'+C+'"]',typeof f=="string"&&(C+='[crossorigin="'+f+'"]'),mM.has(C)||(mM.add(C),o={rel:o,crossOrigin:f,href:l},v.querySelector(C)===null&&(l=v.createElement("link"),en(l,"link",o),pr(l),v.head.appendChild(l)))}}function lX(o){za.D(o),vM("dns-prefetch",o,null)}function uX(o,l){za.C(o,l),vM("preconnect",o,l)}function dX(o,l,f){za.L(o,l,f);var v=_d;if(v&&o&&l){var C='link[rel="preload"][as="'+jn(l)+'"]';l==="image"&&f&&f.imageSrcSet?(C+='[imagesrcset="'+jn(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(C+='[imagesizes="'+jn(f.imageSizes)+'"]')):C+='[href="'+jn(o)+'"]';var _=C;switch(l){case"style":_=Ed(o);break;case"script":_=Ad(o)}Li.has(_)||(o=p({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:o,as:l},f),Li.set(_,o),v.querySelector(C)!==null||l==="style"&&v.querySelector(Pf(_))||l==="script"&&v.querySelector(If(_))||(l=v.createElement("link"),en(l,"link",o),pr(l),v.head.appendChild(l)))}}function hX(o,l){za.m(o,l);var f=_d;if(f&&o){var v=l&&typeof l.as=="string"?l.as:"script",C='link[rel="modulepreload"][as="'+jn(v)+'"][href="'+jn(o)+'"]',_=C;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Ad(o)}if(!Li.has(_)&&(o=p({rel:"modulepreload",href:o},l),Li.set(_,o),f.querySelector(C)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(If(_)))return}v=f.createElement("link"),en(v,"link",o),pr(v),f.head.appendChild(v)}}}function fX(o,l,f){za.S(o,l,f);var v=_d;if(v&&o){var C=Ns(v).hoistableStyles,_=Ed(o);l=l||"default";var I=C.get(_);if(!I){var k={loading:0,preload:null};if(I=v.querySelector(Pf(_)))k.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":l},f),(f=Li.get(_))&&Pw(o,f);var W=I=v.createElement("link");pr(W),en(W,"link",o),W._p=new Promise(function(Z,oe){W.onload=Z,W.onerror=oe}),W.addEventListener("load",function(){k.loading|=1}),W.addEventListener("error",function(){k.loading|=2}),k.loading|=4,O0(I,l,v)}I={type:"stylesheet",instance:I,count:1,state:k},C.set(_,I)}}}function pX(o,l){za.X(o,l);var f=_d;if(f&&o){var v=Ns(f).hoistableScripts,C=Ad(o),_=v.get(C);_||(_=f.querySelector(If(C)),_||(o=p({src:o,async:!0},l),(l=Li.get(C))&&Iw(o,l),_=f.createElement("script"),pr(_),en(_,"link",o),f.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},v.set(C,_))}}function mX(o,l){za.M(o,l);var f=_d;if(f&&o){var v=Ns(f).hoistableScripts,C=Ad(o),_=v.get(C);_||(_=f.querySelector(If(C)),_||(o=p({src:o,async:!0,type:"module"},l),(l=Li.get(C))&&Iw(o,l),_=f.createElement("script"),pr(_),en(_,"link",o),f.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},v.set(C,_))}}function gM(o,l,f,v){var C=(C=be.current)?N0(C):null;if(!C)throw Error(n(446));switch(o){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=Ed(f.href),f=Ns(C).hoistableStyles,v=f.get(l),v||(v={type:"style",instance:null,count:0,state:null},f.set(l,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){o=Ed(f.href);var _=Ns(C).hoistableStyles,I=_.get(o);if(I||(C=C.ownerDocument||C,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(o,I),(_=C.querySelector(Pf(o)))&&!_._p&&(I.instance=_,I.state.loading=5),Li.has(o)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Li.set(o,f),_||vX(C,o,f,I.state))),l&&v===null)throw Error(n(528,""));return I}if(l&&v!==null)throw Error(n(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Ad(f),f=Ns(C).hoistableScripts,v=f.get(l),v||(v={type:"script",instance:null,count:0,state:null},f.set(l,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,o))}}function Ed(o){return'href="'+jn(o)+'"'}function Pf(o){return'link[rel="stylesheet"]['+o+"]"}function yM(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function vX(o,l,f,v){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?v.loading=1:(l=o.createElement("link"),v.preload=l,l.addEventListener("load",function(){return v.loading|=1}),l.addEventListener("error",function(){return v.loading|=2}),en(l,"link",f),pr(l),o.head.appendChild(l))}function Ad(o){return'[src="'+jn(o)+'"]'}function If(o){return"script[async]"+o}function bM(o,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var v=o.querySelector('style[data-href~="'+jn(f.href)+'"]');if(v)return l.instance=v,pr(v),v;var C=p({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return v=(o.ownerDocument||o).createElement("style"),pr(v),en(v,"style",C),O0(v,f.precedence,o),l.instance=v;case"stylesheet":C=Ed(f.href);var _=o.querySelector(Pf(C));if(_)return l.state.loading|=4,l.instance=_,pr(_),_;v=yM(f),(C=Li.get(C))&&Pw(v,C),_=(o.ownerDocument||o).createElement("link"),pr(_);var I=_;return I._p=new Promise(function(k,W){I.onload=k,I.onerror=W}),en(_,"link",v),l.state.loading|=4,O0(_,f.precedence,o),l.instance=_;case"script":return _=Ad(f.src),(C=o.querySelector(If(_)))?(l.instance=C,pr(C),C):(v=f,(C=Li.get(_))&&(v=p({},f),Iw(v,C)),o=o.ownerDocument||o,C=o.createElement("script"),pr(C),en(C,"link",v),o.head.appendChild(C),l.instance=C);case"void":return null;default:throw Error(n(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(v=l.instance,l.state.loading|=4,O0(v,f.precedence,o));return l.instance}function O0(o,l,f){for(var v=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=v.length?v[v.length-1]:null,_=C,I=0;I<v.length;I++){var k=v[I];if(k.dataset.precedence===l)_=k;else if(_!==C)break}_?_.parentNode.insertBefore(o,_.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(o,l.firstChild))}function Pw(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function Iw(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var j0=null;function SM(o,l,f){if(j0===null){var v=new Map,C=j0=new Map;C.set(f,v)}else C=j0,v=C.get(f),v||(v=new Map,C.set(f,v));if(v.has(o))return v;for(v.set(o,null),f=f.getElementsByTagName(o),C=0;C<f.length;C++){var _=f[C];if(!(_[Ps]||_[fr]||o==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var I=_.getAttribute(l)||"";I=o+I;var k=v.get(I);k?k.push(_):v.set(I,[_])}}return v}function CM(o,l,f){o=o.ownerDocument||o,o.head.insertBefore(f,l==="title"?o.querySelector("head > title"):null)}function gX(o,l,f){if(f===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function xM(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function yX(o,l,f,v){if(f.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var C=Ed(v.href),_=l.querySelector(Pf(C));if(_){l=_._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(o.count++,o=M0.bind(o),l.then(o,o)),f.state.loading|=4,f.instance=_,pr(_);return}_=l.ownerDocument||l,v=yM(v),(C=Li.get(C))&&Pw(v,C),_=_.createElement("link"),pr(_);var I=_;I._p=new Promise(function(k,W){I.onload=k,I.onerror=W}),en(_,"link",v),f.instance=_}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(f,l),(l=f.state.preload)&&(f.state.loading&3)===0&&(o.count++,f=M0.bind(o),l.addEventListener("load",f),l.addEventListener("error",f))}}var Nw=0;function bX(o,l){return o.stylesheets&&o.count===0&&k0(o,o.stylesheets),0<o.count||0<o.imgCount?function(f){var v=setTimeout(function(){if(o.stylesheets&&k0(o,o.stylesheets),o.unsuspend){var _=o.unsuspend;o.unsuspend=null,_()}},6e4+l);0<o.imgBytes&&Nw===0&&(Nw=62500*ZY());var C=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&k0(o,o.stylesheets),o.unsuspend)){var _=o.unsuspend;o.unsuspend=null,_()}},(o.imgBytes>Nw?50:800)+l);return o.unsuspend=f,function(){o.unsuspend=null,clearTimeout(v),clearTimeout(C)}}:null}function M0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)k0(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var D0=null;function k0(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,D0=new Map,l.forEach(SX,o),D0=null,M0.call(o))}function SX(o,l){if(!(l.state.loading&4)){var f=D0.get(o);if(f)var v=f.get(null);else{f=new Map,D0.set(o,f);for(var C=o.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<C.length;_++){var I=C[_];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(f.set(I.dataset.precedence,I),v=I)}v&&f.set(null,v)}C=l.instance,I=C.getAttribute("data-precedence"),_=f.get(I)||v,_===v&&f.set(null,C),f.set(I,C),this.count++,v=M0.bind(this),C.addEventListener("load",v),C.addEventListener("error",v),_?_.parentNode.insertBefore(C,_.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(C,o.firstChild)),l.state.loading|=4}}var Nf={$$typeof:T,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function CX(o,l,f,v,C,_,I,k,W){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ts(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ts(0),this.hiddenUpdates=Ts(null),this.identifierPrefix=v,this.onUncaughtError=C,this.onCaughtError=_,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=W,this.incompleteTransitions=new Map}function wM(o,l,f,v,C,_,I,k,W,Z,oe,de){return o=new CX(o,l,f,I,W,Z,oe,de,k),l=1,_===!0&&(l|=24),_=ei(3,null,null,l),o.current=_,_.stateNode=o,l=u1(),l.refCount++,o.pooledCache=l,l.refCount++,_.memoizedState={element:v,isDehydrated:f,cache:l},p1(_),o}function _M(o){return o?(o=nd,o):nd}function EM(o,l,f,v,C,_){C=_M(C),v.context===null?v.context=C:v.pendingContext=C,v=qo(l),v.payload={element:f},_=_===void 0?null:_,_!==null&&(v.callback=_),f=Vo(o,v,l),f!==null&&(Un(f,o,l),lf(f,o,l))}function AM(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<l?f:l}}function Ow(o,l){AM(o,l),(o=o.alternate)&&AM(o,l)}function TM(o){if(o.tag===13||o.tag===31){var l=dl(o,67108864);l!==null&&Un(l,o,67108864),Ow(o,67108864)}}function RM(o){if(o.tag===13||o.tag===31){var l=si();l=Zc(l);var f=dl(o,l);f!==null&&Un(f,o,l),Ow(o,l)}}var L0=!0;function xX(o,l,f,v){var C=Y.T;Y.T=null;var _=ae.p;try{ae.p=2,jw(o,l,f,v)}finally{ae.p=_,Y.T=C}}function wX(o,l,f,v){var C=Y.T;Y.T=null;var _=ae.p;try{ae.p=8,jw(o,l,f,v)}finally{ae.p=_,Y.T=C}}function jw(o,l,f,v){if(L0){var C=Mw(v);if(C===null)bw(o,l,v,z0,f),IM(o,v);else if(EX(C,o,l,f,v))v.stopPropagation();else if(IM(o,v),l&4&&-1<_X.indexOf(o)){for(;C!==null;){var _=Ai(C);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var I=_i(_.pendingLanes);if(I!==0){var k=_;for(k.pendingLanes|=2,k.entangledLanes|=2;I;){var W=1<<31-$t(I);k.entanglements[1]|=W,I&=~W}Hs(_),(mt&6)===0&&(S0=Rr()+500,Ef(0))}}break;case 31:case 13:k=dl(_,2),k!==null&&Un(k,_,2),x0(),Ow(_,2)}if(_=Mw(v),_===null&&bw(o,l,v,z0,f),_===C)break;C=_}C!==null&&v.stopPropagation()}else bw(o,l,v,null,f)}}function Mw(o){return o=Ti(o),Dw(o)}var z0=null;function Dw(o){if(z0=null,o=Is(o),o!==null){var l=s(o);if(l===null)o=null;else{var f=l.tag;if(f===13){if(o=a(l),o!==null)return o;o=null}else if(f===31){if(o=c(l),o!==null)return o;o=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return z0=o,null}function PM(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ye()){case ut:return 2;case kt:return 8;case Pr:case Xc:return 32;case Lu:return 268435456;default:return 32}default:return 32}}var kw=!1,Zo=null,ec=null,tc=null,Of=new Map,jf=new Map,rc=[],_X="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function IM(o,l){switch(o){case"focusin":case"focusout":Zo=null;break;case"dragenter":case"dragleave":ec=null;break;case"mouseover":case"mouseout":tc=null;break;case"pointerover":case"pointerout":Of.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":jf.delete(l.pointerId)}}function Mf(o,l,f,v,C,_){return o===null||o.nativeEvent!==_?(o={blockedOn:l,domEventName:f,eventSystemFlags:v,nativeEvent:_,targetContainers:[C]},l!==null&&(l=Ai(l),l!==null&&TM(l)),o):(o.eventSystemFlags|=v,l=o.targetContainers,C!==null&&l.indexOf(C)===-1&&l.push(C),o)}function EX(o,l,f,v,C){switch(l){case"focusin":return Zo=Mf(Zo,o,l,f,v,C),!0;case"dragenter":return ec=Mf(ec,o,l,f,v,C),!0;case"mouseover":return tc=Mf(tc,o,l,f,v,C),!0;case"pointerover":var _=C.pointerId;return Of.set(_,Mf(Of.get(_)||null,o,l,f,v,C)),!0;case"gotpointercapture":return _=C.pointerId,jf.set(_,Mf(jf.get(_)||null,o,l,f,v,C)),!0}return!1}function NM(o){var l=Is(o.target);if(l!==null){var f=s(l);if(f!==null){if(l=f.tag,l===13){if(l=a(f),l!==null){o.blockedOn=l,Zi(o.priority,function(){RM(f)});return}}else if(l===31){if(l=c(f),l!==null){o.blockedOn=l,Zi(o.priority,function(){RM(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function U0(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var f=Mw(o.nativeEvent);if(f===null){f=o.nativeEvent;var v=new f.constructor(f.type,f);Kh=v,f.target.dispatchEvent(v),Kh=null}else return l=Ai(f),l!==null&&TM(l),o.blockedOn=f,!1;l.shift()}return!0}function OM(o,l,f){U0(o)&&f.delete(l)}function AX(){kw=!1,Zo!==null&&U0(Zo)&&(Zo=null),ec!==null&&U0(ec)&&(ec=null),tc!==null&&U0(tc)&&(tc=null),Of.forEach(OM),jf.forEach(OM)}function B0(o,l){o.blockedOn===l&&(o.blockedOn=null,kw||(kw=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,AX)))}var q0=null;function jM(o){q0!==o&&(q0=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){q0===o&&(q0=null);for(var l=0;l<o.length;l+=3){var f=o[l],v=o[l+1],C=o[l+2];if(typeof v!="function"){if(Dw(v||f)===null)continue;break}var _=Ai(f);_!==null&&(o.splice(l,3),l-=3,M1(_,{pending:!0,data:C,method:f.method,action:v},v,C))}}))}function Td(o){function l(W){return B0(W,o)}Zo!==null&&B0(Zo,o),ec!==null&&B0(ec,o),tc!==null&&B0(tc,o),Of.forEach(l),jf.forEach(l);for(var f=0;f<rc.length;f++){var v=rc[f];v.blockedOn===o&&(v.blockedOn=null)}for(;0<rc.length&&(f=rc[0],f.blockedOn===null);)NM(f),f.blockedOn===null&&rc.shift();if(f=(o.ownerDocument||o).$$reactFormReplay,f!=null)for(v=0;v<f.length;v+=3){var C=f[v],_=f[v+1],I=C[Ur]||null;if(typeof _=="function")I||jM(f);else if(I){var k=null;if(_&&_.hasAttribute("formAction")){if(C=_,I=_[Ur]||null)k=I.formAction;else if(Dw(C)!==null)continue}else k=I.action;typeof k=="function"?f[v+1]=k:(f.splice(v,3),v-=3),jM(f)}}}function MM(){function o(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(I){return C=I})},focusReset:"manual",scroll:"manual"})}function l(){C!==null&&(C(),C=null),v||setTimeout(f,20)}function f(){if(!v&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var v=!1,C=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(f,100),function(){v=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),C!==null&&(C(),C=null)}}}function Lw(o){this._internalRoot=o}V0.prototype.render=Lw.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(n(409));var f=l.current,v=si();EM(f,v,o,l,null,null)},V0.prototype.unmount=Lw.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;EM(o.current,2,null,o,null,null),x0(),l[Rs]=null}};function V0(o){this._internalRoot=o}V0.prototype.unstable_scheduleHydration=function(o){if(o){var l=xy();o={blockedOn:null,target:o,priority:l};for(var f=0;f<rc.length&&l!==0&&l<rc[f].priority;f++);rc.splice(f,0,o),f===0&&NM(o)}};var DM=e.version;if(DM!=="19.2.0")throw Error(n(527,DM,"19.2.0"));ae.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=d(l),o=o!==null?h(o):null,o=o===null?null:o.stateNode,o};var TX={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var F0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!F0.isDisabled&&F0.supportsFiber)try{Xn=F0.inject(TX),Ir=F0}catch{}}return kf.createRoot=function(o,l){if(!i(o))throw Error(n(299));var f=!1,v="",C=VO,_=FO,I=HO;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(C=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError)),l=wM(o,1,!1,null,null,f,v,null,C,_,I,MM),o[Rs]=l.current,yw(o),new Lw(l)},kf.hydrateRoot=function(o,l,f){if(!i(o))throw Error(n(299));var v=!1,C="",_=VO,I=FO,k=HO,W=null;return f!=null&&(f.unstable_strictMode===!0&&(v=!0),f.identifierPrefix!==void 0&&(C=f.identifierPrefix),f.onUncaughtError!==void 0&&(_=f.onUncaughtError),f.onCaughtError!==void 0&&(I=f.onCaughtError),f.onRecoverableError!==void 0&&(k=f.onRecoverableError),f.formState!==void 0&&(W=f.formState)),l=wM(o,1,!0,l,f??null,v,C,W,_,I,k,MM),l.context=_M(null),f=l.current,v=si(),v=Zc(v),C=qo(v),C.callback=null,Vo(f,C,v),f=v,l.current.lanes=f,Qc(l,f),Hs(l),o[Rs]=l.current,yw(o),new V0(l)},kf.version="19.2.0",kf}var WM;function UX(){if(WM)return Bw.exports;WM=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Bw.exports=zX(),Bw.exports}var BX=UX();var KM="popstate";function qX(t={}){function e(n,i){let{pathname:s,search:a,hash:c}=n.location;return aT("",{pathname:s,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:eg(i)}return FX(e,r,null,t)}function Wt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function gi(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function VX(){return Math.random().toString(36).substring(2,10)}function GM(t,e){return{usr:t.state,key:t.key,idx:e}}function aT(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?hh(e):e,state:r,key:e&&e.key||n||VX()}}function eg({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function hh(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function FX(t,e,r,n={}){let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,c="POP",u=null,d=h();d==null&&(d=0,a.replaceState({...a.state,idx:d},""));function h(){return(a.state||{idx:null}).idx}function p(){c="POP";let w=h(),E=w==null?null:w-d;d=w,u&&u({action:c,location:x.location,delta:E})}function g(w,E){c="PUSH";let R=aT(x.location,w,E);d=h()+1;let T=GM(R,d),M=x.createHref(R);try{a.pushState(T,"",M)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(M)}s&&u&&u({action:c,location:x.location,delta:1})}function y(w,E){c="REPLACE";let R=aT(x.location,w,E);d=h();let T=GM(R,d),M=x.createHref(R);a.replaceState(T,"",M),s&&u&&u({action:c,location:x.location,delta:0})}function S(w){return HX(w)}let x={get action(){return c},get location(){return t(i,a)},listen(w){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(KM,p),u=w,()=>{i.removeEventListener(KM,p),u=null}},createHref(w){return e(i,w)},createURL:S,encodeLocation(w){let E=S(w);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:y,go(w){return a.go(w)}};return x}function HX(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Wt(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:eg(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function oB(t,e,r="/"){return WX(t,e,r,!1)}function WX(t,e,r,n){let i=typeof e=="string"?hh(e):e,s=no(i.pathname||"/",r);if(s==null)return null;let a=cB(t);KX(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=nQ(s);c=tQ(a[u],d,n)}return c}function cB(t,e=[],r=[],n="",i=!1){let s=(a,c,u=i,d)=>{let h={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(n)&&u)return;Wt(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length)}let p=Ja([n,h.relativePath]),g=r.concat(h);a.children&&a.children.length>0&&(Wt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),cB(a.children,e,g,p,u)),!(a.path==null&&!a.index)&&e.push({path:p,score:ZX(p,a.index),routesMeta:g})};return t.forEach((a,c)=>{if(a.path===""||!a.path?.includes("?"))s(a,c);else for(let u of lB(a.path))s(a,c,!0,u)}),e}function lB(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=lB(n.join("/")),c=[];return c.push(...a.map(u=>u===""?s:[s,u].join("/"))),i&&c.push(...a),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function KX(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:eQ(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var GX=/^:[\w-]+$/,$X=3,YX=2,XX=1,QX=10,JX=-2,$M=t=>t==="*";function ZX(t,e){let r=t.split("/"),n=r.length;return r.some($M)&&(n+=JX),e&&(n+=YX),r.filter(i=>!$M(i)).reduce((i,s)=>i+(GX.test(s)?$X:s===""?XX:QX),n)}function eQ(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function tQ(t,e,r=!1){let{routesMeta:n}=t,i={},s="/",a=[];for(let c=0;c<n.length;++c){let u=n[c],d=c===n.length-1,h=s==="/"?e:e.slice(s.length)||"/",p=Vb({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),g=u.route;if(!p&&d&&r&&!n[n.length-1].route.index&&(p=Vb({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!p)return null;Object.assign(i,p.params),a.push({params:i,pathname:Ja([s,p.pathname]),pathnameBase:cQ(Ja([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Ja([s,p.pathnameBase]))}return a}function Vb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=rQ(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:n.reduce((d,{paramName:h,isOptional:p},g)=>{if(h==="*"){let S=c[g]||"";a=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const y=c[g];return p&&!y?d[h]=void 0:d[h]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:a,pattern:t}}function rQ(t,e=!1,r=!0){gi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(n.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function nQ(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return gi(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function no(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}var iQ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sQ=t=>iQ.test(t);function aQ(t,e="/"){let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?hh(t):t,s;if(r)if(sQ(r))s=r;else{if(r.includes("//")){let a=r;r=r.replace(/\/\/+/g,"/"),gi(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${r}`)}r.startsWith("/")?s=YM(r.substring(1),"/"):s=YM(r,e)}else s=e;return{pathname:s,search:lQ(n),hash:uQ(i)}}function YM(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Hw(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function oQ(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function ZR(t){let e=oQ(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function eP(t,e,r,n=!1){let i;typeof t=="string"?i=hh(t):(i={...t},Wt(!i.pathname||!i.pathname.includes("?"),Hw("?","pathname","search",i)),Wt(!i.pathname||!i.pathname.includes("#"),Hw("#","pathname","hash",i)),Wt(!i.search||!i.search.includes("#"),Hw("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,c;if(a==null)c=r;else{let p=e.length-1;if(!n&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}c=p>=0?e[p]:"/"}let u=aQ(i,c),d=a&&a!=="/"&&a.endsWith("/"),h=(s||a===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var Ja=t=>t.join("/").replace(/\/\/+/g,"/"),cQ=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),lQ=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,uQ=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function dQ(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var uB=["POST","PUT","PATCH","DELETE"];new Set(uB);var hQ=["GET",...uB];new Set(hQ);var fh=A.createContext(null);fh.displayName="DataRouter";var cC=A.createContext(null);cC.displayName="DataRouterState";A.createContext(!1);var dB=A.createContext({isTransitioning:!1});dB.displayName="ViewTransition";var fQ=A.createContext(new Map);fQ.displayName="Fetchers";var pQ=A.createContext(null);pQ.displayName="Await";var xs=A.createContext(null);xs.displayName="Navigation";var Tg=A.createContext(null);Tg.displayName="Location";var pa=A.createContext({outlet:null,matches:[],isDataRoute:!1});pa.displayName="Route";var tP=A.createContext(null);tP.displayName="RouteError";function mQ(t,{relative:e}={}){Wt(ph(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=A.useContext(xs),{hash:i,pathname:s,search:a}=Rg(t,{relative:e}),c=s;return r!=="/"&&(c=s==="/"?r:Ja([r,s])),n.createHref({pathname:c,search:a,hash:i})}function ph(){return A.useContext(Tg)!=null}function ma(){return Wt(ph(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(Tg).location}var hB="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fB(t){A.useContext(xs).static||A.useLayoutEffect(t)}function Pu(){let{isDataRoute:t}=A.useContext(pa);return t?RQ():vQ()}function vQ(){Wt(ph(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(fh),{basename:e,navigator:r}=A.useContext(xs),{matches:n}=A.useContext(pa),{pathname:i}=ma(),s=JSON.stringify(ZR(n)),a=A.useRef(!1);return fB(()=>{a.current=!0}),A.useCallback((u,d={})=>{if(gi(a.current,hB),!a.current)return;if(typeof u=="number"){r.go(u);return}let h=eP(u,JSON.parse(s),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ja([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,s,i,t])}A.createContext(null);function Rg(t,{relative:e}={}){let{matches:r}=A.useContext(pa),{pathname:n}=ma(),i=JSON.stringify(ZR(r));return A.useMemo(()=>eP(t,JSON.parse(i),n,e==="path"),[t,i,n,e])}function gQ(t,e){return pB(t,e)}function pB(t,e,r,n,i){Wt(ph(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=A.useContext(xs),{matches:a}=A.useContext(pa),c=a[a.length-1],u=c?c.params:{},d=c?c.pathname:"/",h=c?c.pathnameBase:"/",p=c&&c.route;{let R=p&&p.path||"";mB(d,!p||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let g=ma(),y;if(e){let R=typeof e=="string"?hh(e):e;Wt(h==="/"||R.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${R.pathname}" was given in the \`location\` prop.`),y=R}else y=g;let S=y.pathname||"/",x=S;if(h!=="/"){let R=h.replace(/^\//,"").split("/");x="/"+S.replace(/^\//,"").split("/").slice(R.length).join("/")}let w=oB(t,{pathname:x});gi(p||w!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),gi(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=xQ(w&&w.map(R=>Object.assign({},R,{params:Object.assign({},u,R.params),pathname:Ja([h,s.encodeLocation?s.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?h:Ja([h,s.encodeLocation?s.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),a,r,n,i);return e&&E?A.createElement(Tg.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},E):E}function yQ(){let t=TQ(),e=dQ(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:s},"ErrorBoundary")," or"," ",A.createElement("code",{style:s},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),r?A.createElement("pre",{style:i},r):null,a)}var bQ=A.createElement(yQ,null),SQ=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?A.createElement(pa.Provider,{value:this.props.routeContext},A.createElement(tP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function CQ({routeContext:t,match:e,children:r}){let n=A.useContext(fh);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(pa.Provider,{value:t},r)}function xQ(t,e=[],r=null,n=null,i=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,a=r?.errors;if(a!=null){let h=s.findIndex(p=>p.route.id&&a?.[p.route.id]!==void 0);Wt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let c=!1,u=-1;if(r)for(let h=0;h<s.length;h++){let p=s[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=h),p.route.id){let{loaderData:g,errors:y}=r,S=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!y||y[p.route.id]===void 0);if(p.route.lazy||S){c=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}let d=r&&n?(h,p)=>{n(h,{location:r.location,params:r.matches?.[0]?.params??{},errorInfo:p})}:void 0;return s.reduceRight((h,p,g)=>{let y,S=!1,x=null,w=null;r&&(y=a&&p.route.id?a[p.route.id]:void 0,x=p.route.errorElement||bQ,c&&(u<0&&g===0?(mB("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,w=null):u===g&&(S=!0,w=p.route.hydrateFallbackElement||null)));let E=e.concat(s.slice(0,g+1)),R=()=>{let T;return y?T=x:S?T=w:p.route.Component?T=A.createElement(p.route.Component,null):p.route.element?T=p.route.element:T=h,A.createElement(CQ,{match:p,routeContext:{outlet:h,matches:E,isDataRoute:r!=null},children:T})};return r&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?A.createElement(SQ,{location:r.location,revalidation:r.revalidation,component:x,error:y,children:R(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:d}):R()},null)}function rP(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wQ(t){let e=A.useContext(fh);return Wt(e,rP(t)),e}function _Q(t){let e=A.useContext(cC);return Wt(e,rP(t)),e}function EQ(t){let e=A.useContext(pa);return Wt(e,rP(t)),e}function nP(t){let e=EQ(t),r=e.matches[e.matches.length-1];return Wt(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function AQ(){return nP("useRouteId")}function TQ(){let t=A.useContext(tP),e=_Q("useRouteError"),r=nP("useRouteError");return t!==void 0?t:e.errors?.[r]}function RQ(){let{router:t}=wQ("useNavigate"),e=nP("useNavigate"),r=A.useRef(!1);return fB(()=>{r.current=!0}),A.useCallback(async(i,s={})=>{gi(r.current,hB),r.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var XM={};function mB(t,e,r){!e&&!XM[t]&&(XM[t]=!0,gi(!1,r))}A.memo(PQ);function PQ({routes:t,future:e,state:r,unstable_onError:n}){return pB(t,void 0,r,n,e)}function Fb({to:t,replace:e,state:r,relative:n}){Wt(ph(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=A.useContext(xs);gi(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=A.useContext(pa),{pathname:a}=ma(),c=Pu(),u=eP(t,ZR(s),a,n==="path"),d=JSON.stringify(u);return A.useEffect(()=>{c(JSON.parse(d),{replace:e,state:r,relative:n})},[c,d,n,e,r]),null}function tn(t){Wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function IQ({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:i,static:s=!1}){Wt(!ph(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof r=="string"&&(r=hh(r));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:g="default"}=r,y=A.useMemo(()=>{let S=no(u,a);return S==null?null:{location:{pathname:S,search:d,hash:h,state:p,key:g},navigationType:n}},[a,u,d,h,p,g,n]);return gi(y!=null,`<Router basename="${a}"> is not able to match the URL "${u}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:A.createElement(xs.Provider,{value:c},A.createElement(Tg.Provider,{children:e,value:y}))}function NQ({children:t,location:e}){return gQ(oT(t),e)}function oT(t,e=[]){let r=[];return A.Children.forEach(t,(n,i)=>{if(!A.isValidElement(n))return;let s=[...e,i];if(n.type===A.Fragment){r.push.apply(r,oT(n.props.children,s));return}Wt(n.type===tn,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Wt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=oT(n.props.children,s)),r.push(a)}),r}var yb="get",bb="application/x-www-form-urlencoded";function lC(t){return t!=null&&typeof t.tagName=="string"}function OQ(t){return lC(t)&&t.tagName.toLowerCase()==="button"}function jQ(t){return lC(t)&&t.tagName.toLowerCase()==="form"}function MQ(t){return lC(t)&&t.tagName.toLowerCase()==="input"}function DQ(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function kQ(t,e){return t.button===0&&(!e||e==="_self")&&!DQ(t)}function cT(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function LQ(t,e){let r=cT(t);return e&&e.forEach((n,i)=>{r.has(i)||e.getAll(i).forEach(s=>{r.append(i,s)})}),r}var H0=null;function zQ(){if(H0===null)try{new FormData(document.createElement("form"),0),H0=!1}catch{H0=!0}return H0}var UQ=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ww(t){return t!=null&&!UQ.has(t)?(gi(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bb}"`),null):t}function BQ(t,e){let r,n,i,s,a;if(jQ(t)){let c=t.getAttribute("action");n=c?no(c,e):null,r=t.getAttribute("method")||yb,i=Ww(t.getAttribute("enctype"))||bb,s=new FormData(t)}else if(OQ(t)||MQ(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(n=u?no(u,e):null,r=t.getAttribute("formmethod")||c.getAttribute("method")||yb,i=Ww(t.getAttribute("formenctype"))||Ww(c.getAttribute("enctype"))||bb,s=new FormData(c,t),!zQ()){let{name:d,type:h,value:p}=t;if(h==="image"){let g=d?`${d}.`:"";s.append(`${g}x`,"0"),s.append(`${g}y`,"0")}else d&&s.append(d,p)}}else{if(lC(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=yb,n=null,i=bb,a=t}return s&&i==="text/plain"&&(a=s,s=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function iP(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function qQ(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&no(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function VQ(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function FQ(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function HQ(t,e,r){let n=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await VQ(s,r);return a.links?a.links():[]}return[]}));return $Q(n.flat(1).filter(FQ).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function QM(t,e,r,n,i,s){let a=(u,d)=>r[d]?u.route.id!==r[d].route.id:!0,c=(u,d)=>r[d].pathname!==u.pathname||r[d].route.path?.endsWith("*")&&r[d].params["*"]!==u.params["*"];return s==="assets"?e.filter((u,d)=>a(u,d)||c(u,d)):s==="data"?e.filter((u,d)=>{let h=n.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(a(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function WQ(t,e,{includeHydrateFallback:r}={}){return KQ(t.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function KQ(t){return[...new Set(t)]}function GQ(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function $Q(t,e){let r=new Set;return new Set(e),t.reduce((n,i)=>{let s=JSON.stringify(GQ(i));return r.has(s)||(r.add(s),n.push({key:s,link:i})),n},[])}function vB(){let t=A.useContext(fh);return iP(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function YQ(){let t=A.useContext(cC);return iP(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var sP=A.createContext(void 0);sP.displayName="FrameworkContext";function gB(){let t=A.useContext(sP);return iP(t,"You must render this element inside a <HydratedRouter> element"),t}function XQ(t,e){let r=A.useContext(sP),[n,i]=A.useState(!1),[s,a]=A.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:p}=e,g=A.useRef(null);A.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let x=E=>{E.forEach(R=>{a(R.isIntersecting)})},w=new IntersectionObserver(x,{threshold:.5});return g.current&&w.observe(g.current),()=>{w.disconnect()}}},[t]),A.useEffect(()=>{if(n){let x=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(x)}}},[n]);let y=()=>{i(!0)},S=()=>{i(!1),a(!1)};return r?t!=="intent"?[s,g,{}]:[s,g,{onFocus:Lf(c,y),onBlur:Lf(u,S),onMouseEnter:Lf(d,y),onMouseLeave:Lf(h,S),onTouchStart:Lf(p,y)}]:[!1,g,{}]}function Lf(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function QQ({page:t,...e}){let{router:r}=vB(),n=A.useMemo(()=>oB(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?A.createElement(ZQ,{page:t,matches:n,...e}):null}function JQ(t){let{manifest:e,routeModules:r}=gB(),[n,i]=A.useState([]);return A.useEffect(()=>{let s=!1;return HQ(t,e,r).then(a=>{s||i(a)}),()=>{s=!0}},[t,e,r]),n}function ZQ({page:t,matches:e,...r}){let n=ma(),{manifest:i,routeModules:s}=gB(),{basename:a}=vB(),{loaderData:c,matches:u}=YQ(),d=A.useMemo(()=>QM(t,e,u,i,n,"data"),[t,e,u,i,n]),h=A.useMemo(()=>QM(t,e,u,i,n,"assets"),[t,e,u,i,n]),p=A.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let S=new Set,x=!1;if(e.forEach(E=>{let R=i.routes[E.route.id];!R||!R.hasLoader||(!d.some(T=>T.route.id===E.route.id)&&E.route.id in c&&s[E.route.id]?.shouldRevalidate||R.hasClientLoader?x=!0:S.add(E.route.id))}),S.size===0)return[];let w=qQ(t,a,"data");return x&&S.size>0&&w.searchParams.set("_routes",e.filter(E=>S.has(E.route.id)).map(E=>E.route.id).join(",")),[w.pathname+w.search]},[a,c,n,i,d,e,t,s]),g=A.useMemo(()=>WQ(h,i),[h,i]),y=JQ(h);return A.createElement(A.Fragment,null,p.map(S=>A.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...r})),g.map(S=>A.createElement("link",{key:S,rel:"modulepreload",href:S,...r})),y.map(({key:S,link:x})=>A.createElement("link",{key:S,nonce:r.nonce,...x})))}function eJ(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var yB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yB&&(window.__reactRouterVersion="7.9.6")}catch{}function tJ({basename:t,children:e,window:r}){let n=A.useRef();n.current==null&&(n.current=qX({window:r,v5Compat:!0}));let i=n.current,[s,a]=A.useState({action:i.action,location:i.location}),c=A.useCallback(u=>{A.startTransition(()=>a(u))},[a]);return A.useLayoutEffect(()=>i.listen(c),[i,c]),A.createElement(IQ,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var bB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mh=A.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:i,reloadDocument:s,replace:a,state:c,target:u,to:d,preventScrollReset:h,viewTransition:p,...g},y){let{basename:S}=A.useContext(xs),x=typeof d=="string"&&bB.test(d),w,E=!1;if(typeof d=="string"&&x&&(w=d,yB))try{let L=new URL(window.location.href),V=d.startsWith("//")?new URL(L.protocol+d):new URL(d),U=no(V.pathname,S);V.origin===L.origin&&U!=null?d=U+V.search+V.hash:E=!0}catch{gi(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=mQ(d,{relative:i}),[T,M,D]=XQ(n,g),z=sJ(d,{replace:a,state:c,target:u,preventScrollReset:h,relative:i,viewTransition:p});function j(L){e&&e(L),L.defaultPrevented||z(L)}let O=A.createElement("a",{...g,...D,href:w||R,onClick:E||s?e:j,ref:eJ(y,M),target:u,"data-discover":!x&&r==="render"?"true":void 0});return T&&!x?A.createElement(A.Fragment,null,O,A.createElement(QQ,{page:R})):O});mh.displayName="Link";var rJ=A.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:i=!1,style:s,to:a,viewTransition:c,children:u,...d},h){let p=Rg(a,{relative:d.relative}),g=ma(),y=A.useContext(cC),{navigator:S,basename:x}=A.useContext(xs),w=y!=null&&dJ(p)&&c===!0,E=S.encodeLocation?S.encodeLocation(p).pathname:p.pathname,R=g.pathname,T=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;r||(R=R.toLowerCase(),T=T?T.toLowerCase():null,E=E.toLowerCase()),T&&x&&(T=no(T,x)||T);const M=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let D=R===E||!i&&R.startsWith(E)&&R.charAt(M)==="/",z=T!=null&&(T===E||!i&&T.startsWith(E)&&T.charAt(E.length)==="/"),j={isActive:D,isPending:z,isTransitioning:w},O=D?e:void 0,L;typeof n=="function"?L=n(j):L=[n,D?"active":null,z?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let V=typeof s=="function"?s(j):s;return A.createElement(mh,{...d,"aria-current":O,className:L,ref:h,style:V,to:a,viewTransition:c},typeof u=="function"?u(j):u)});rJ.displayName="NavLink";var nJ=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:i,state:s,method:a=yb,action:c,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:p,...g},y)=>{let S=lJ(),x=uJ(c,{relative:d}),w=a.toLowerCase()==="get"?"get":"post",E=typeof c=="string"&&bB.test(c),R=T=>{if(u&&u(T),T.defaultPrevented)return;T.preventDefault();let M=T.nativeEvent.submitter,D=M?.getAttribute("formmethod")||a;S(M||T.currentTarget,{fetcherKey:e,method:D,navigate:r,replace:i,state:s,relative:d,preventScrollReset:h,viewTransition:p})};return A.createElement("form",{ref:y,method:w,action:x,onSubmit:n?u:R,...g,"data-discover":!E&&t==="render"?"true":void 0})});nJ.displayName="Form";function iJ(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function SB(t){let e=A.useContext(fh);return Wt(e,iJ(t)),e}function sJ(t,{target:e,replace:r,state:n,preventScrollReset:i,relative:s,viewTransition:a}={}){let c=Pu(),u=ma(),d=Rg(t,{relative:s});return A.useCallback(h=>{if(kQ(h,e)){h.preventDefault();let p=r!==void 0?r:eg(u)===eg(d);c(t,{replace:p,state:n,preventScrollReset:i,relative:s,viewTransition:a})}},[u,c,d,r,n,e,t,i,s,a])}function aJ(t){gi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=A.useRef(cT(t)),r=A.useRef(!1),n=ma(),i=A.useMemo(()=>LQ(n.search,r.current?null:e.current),[n.search]),s=Pu(),a=A.useCallback((c,u)=>{const d=cT(typeof c=="function"?c(new URLSearchParams(i)):c);r.current=!0,s("?"+d,u)},[s,i]);return[i,a]}var oJ=0,cJ=()=>`__${String(++oJ)}__`;function lJ(){let{router:t}=SB("useSubmit"),{basename:e}=A.useContext(xs),r=AQ();return A.useCallback(async(n,i={})=>{let{action:s,method:a,encType:c,formData:u,body:d}=BQ(n,e);if(i.navigate===!1){let h=i.fetcherKey||cJ();await t.fetch(h,r,i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||a,formEncType:i.encType||c,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||a,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,r])}function uJ(t,{relative:e}={}){let{basename:r}=A.useContext(xs),n=A.useContext(pa);Wt(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),s={...Rg(t||".",{relative:e})},a=ma();if(t==null){s.search=a.search;let c=new URLSearchParams(s.search),u=c.getAll("index");if(u.some(h=>h==="")){c.delete("index"),u.filter(p=>p).forEach(p=>c.append("index",p));let h=c.toString();s.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:Ja([r,s.pathname])),eg(s)}function dJ(t,{relative:e}={}){let r=A.useContext(dB);Wt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=SB("useViewTransitionState"),i=Rg(t,{relative:e});if(!r.isTransitioning)return!1;let s=no(r.currentLocation.pathname,n)||r.currentLocation.pathname,a=no(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Vb(i.pathname,a)!=null||Vb(i.pathname,s)!=null}var uC=aB();const hJ=()=>{};var JM={};const CB=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},fJ=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[r++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[r++],a=t[r++],c=t[r++],u=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const s=t[r++],a=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},xB={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,c=a?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|c>>4;let g=(c&15)<<2|d>>6,y=d&63;u||(y=64,a||(g=64)),n.push(r[h],r[p],r[g],r[y])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(CB(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):fJ(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const s=r[t.charAt(i++)],c=i<t.length?r[t.charAt(i)]:0;++i;const d=i<t.length?r[t.charAt(i)]:64;++i;const p=i<t.length?r[t.charAt(i)]:64;if(++i,s==null||c==null||d==null||p==null)throw new pJ;const g=s<<2|c>>4;if(n.push(g),d!==64){const y=c<<4&240|d>>2;if(n.push(y),p!==64){const S=d<<6&192|p;n.push(S)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pJ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mJ=function(t){const e=CB(t);return xB.encodeByteArray(e,!0)},Hb=function(t){return mJ(t).replace(/\./g,"")},wB=function(t){try{return xB.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function vJ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const gJ=()=>vJ().__FIREBASE_DEFAULTS__,yJ=()=>{if(typeof process>"u"||typeof JM>"u")return;const t=JM.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},bJ=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&wB(t[1]);return e&&JSON.parse(e)},dC=()=>{try{return hJ()||gJ()||yJ()||bJ()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_B=t=>dC()?.emulatorHosts?.[t],EB=t=>{const e=_B(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},AB=()=>dC()?.config,TB=t=>dC()?.[`_${t}`];class SJ{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}function zc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function aP(t){return(await fetch(t,{credentials:"include"})).ok}function RB(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Hb(JSON.stringify(r)),Hb(JSON.stringify(a)),""].join(".")}const Wv={};function CJ(){const t={prod:[],emulator:[]};for(const e of Object.keys(Wv))Wv[e]?t.emulator.push(e):t.prod.push(e);return t}function xJ(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let ZM=!1;function oP(t,e){if(typeof window>"u"||typeof document>"u"||!zc(window.location.host)||Wv[t]===e||Wv[t]||ZM)return;Wv[t]=e;function r(g){return`__firebase__banner__${g}`}const n="__firebase__banner",s=CJ().prod.length>0;function a(){const g=document.getElementById(n);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{ZM=!0,a()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=xJ(n),y=r("text"),S=document.getElementById(y)||document.createElement("span"),x=r("learnmore"),w=document.getElementById(x)||document.createElement("a"),E=r("preprendIcon"),R=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const T=g.element;c(T),h(w,x);const M=d();u(R,E),T.append(R,S,w,M),document.body.appendChild(T)}s?(S.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wJ(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cn())}function _J(){const t=dC()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EJ(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function AJ(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function TJ(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RJ(){const t=Cn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function PJ(){return!_J()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IJ(){try{return typeof indexedDB=="object"}catch{return!1}}function NJ(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(r){e(r)}})}const OJ="FirebaseError";class va extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=OJ,Object.setPrototypeOf(this,va.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pg.prototype.create)}}class Pg{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?jJ(s,n):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new va(i,c,n)}}function jJ(t,e){return t.replace(MJ,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const MJ=/\{\$([^}]+)}/g;function DJ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function vu(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const s=t[i],a=e[i];if(eD(s)&&eD(a)){if(!vu(s,a))return!1}else if(s!==a)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function eD(t){return t!==null&&typeof t=="object"}function Ig(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function kv(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,s]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Lv(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function kJ(t,e){const r=new LJ(t,e);return r.subscribe.bind(r)}class LJ{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");zJ(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=Kw),i.error===void 0&&(i.error=Kw),i.complete===void 0&&(i.complete=Kw);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zJ(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Kw(){}function Kt(t){return t&&t._delegate?t._delegate:t}class Rc{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Yl="[DEFAULT]";let UJ=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new SJ;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qJ(e))try{this.getOrInitializeService({instanceIdentifier:Yl})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(e=Yl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yl){return this.instances.has(e)}getOptions(e=Yl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);n===c&&a.resolve(i)}return i}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const s=this.instances.get(n);return s&&e(s,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:BJ(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Yl){return this.component?this.component.multipleInstances?e:Yl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function BJ(t){return t===Yl?void 0:t}function qJ(t){return t.instantiationMode==="EAGER"}class VJ{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new UJ(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}var it;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(it||(it={}));const FJ={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},HJ=it.INFO,WJ={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},KJ=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=WJ[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cP{constructor(e){this.name=e,this._logLevel=HJ,this._logHandler=KJ,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?FJ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...e),this._logHandler(this,it.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...e),this._logHandler(this,it.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,it.INFO,...e),this._logHandler(this,it.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,it.WARN,...e),this._logHandler(this,it.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...e),this._logHandler(this,it.ERROR,...e)}}const GJ=(t,e)=>e.some(r=>t instanceof r);let tD,rD;function $J(){return tD||(tD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YJ(){return rD||(rD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PB=new WeakMap,lT=new WeakMap,IB=new WeakMap,Gw=new WeakMap,lP=new WeakMap;function XJ(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{r(xc(t.result)),i()},a=()=>{n(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&PB.set(r,t)}).catch(()=>{}),lP.set(e,t),e}function QJ(t){if(lT.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{r(),i()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});lT.set(t,e)}let uT={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return lT.get(t);if(e==="objectStoreNames")return t.objectStoreNames||IB.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return xc(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function JJ(t){uT=t(uT)}function ZJ(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call($w(this),e,...r);return IB.set(n,e.sort?e.sort():[e]),xc(n)}:YJ().includes(t)?function(...e){return t.apply($w(this),e),xc(PB.get(this))}:function(...e){return xc(t.apply($w(this),e))}}function eZ(t){return typeof t=="function"?ZJ(t):(t instanceof IDBTransaction&&QJ(t),GJ(t,$J())?new Proxy(t,uT):t)}function xc(t){if(t instanceof IDBRequest)return XJ(t);if(Gw.has(t))return Gw.get(t);const e=eZ(t);return e!==t&&(Gw.set(t,e),lP.set(e,t)),e}const $w=t=>lP.get(t);function tZ(t,e,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),c=xc(a);return n&&a.addEventListener("upgradeneeded",u=>{n(xc(a.result),u.oldVersion,u.newVersion,xc(a.transaction),u)}),r&&a.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const rZ=["get","getKey","getAll","getAllKeys","count"],nZ=["put","add","delete","clear"],Yw=new Map;function nD(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Yw.get(e))return Yw.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=nZ.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||rZ.includes(r)))return;const s=async function(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let d=u.store;return n&&(d=d.index(c.shift())),(await Promise.all([d[r](...c),i&&u.done]))[0]};return Yw.set(e,s),s}JJ(t=>({...t,get:(e,r,n)=>nD(e,r)||t.get(e,r,n),has:(e,r)=>!!nD(e,r)||t.has(e,r)}));class iZ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(sZ(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function sZ(t){return t.getComponent()?.type==="VERSION"}const dT="@firebase/app",iD="0.14.6";const io=new cP("@firebase/app"),aZ="@firebase/app-compat",oZ="@firebase/analytics-compat",cZ="@firebase/analytics",lZ="@firebase/app-check-compat",uZ="@firebase/app-check",dZ="@firebase/auth",hZ="@firebase/auth-compat",fZ="@firebase/database",pZ="@firebase/data-connect",mZ="@firebase/database-compat",vZ="@firebase/functions",gZ="@firebase/functions-compat",yZ="@firebase/installations",bZ="@firebase/installations-compat",SZ="@firebase/messaging",CZ="@firebase/messaging-compat",xZ="@firebase/performance",wZ="@firebase/performance-compat",_Z="@firebase/remote-config",EZ="@firebase/remote-config-compat",AZ="@firebase/storage",TZ="@firebase/storage-compat",RZ="@firebase/firestore",PZ="@firebase/ai",IZ="@firebase/firestore-compat",NZ="firebase",OZ="12.6.0";const hT="[DEFAULT]",jZ={[dT]:"fire-core",[aZ]:"fire-core-compat",[cZ]:"fire-analytics",[oZ]:"fire-analytics-compat",[uZ]:"fire-app-check",[lZ]:"fire-app-check-compat",[dZ]:"fire-auth",[hZ]:"fire-auth-compat",[fZ]:"fire-rtdb",[pZ]:"fire-data-connect",[mZ]:"fire-rtdb-compat",[vZ]:"fire-fn",[gZ]:"fire-fn-compat",[yZ]:"fire-iid",[bZ]:"fire-iid-compat",[SZ]:"fire-fcm",[CZ]:"fire-fcm-compat",[xZ]:"fire-perf",[wZ]:"fire-perf-compat",[_Z]:"fire-rc",[EZ]:"fire-rc-compat",[AZ]:"fire-gcs",[TZ]:"fire-gcs-compat",[RZ]:"fire-fst",[IZ]:"fire-fst-compat",[PZ]:"fire-vertex","fire-js":"fire-js",[NZ]:"fire-js-all"};const Wb=new Map,MZ=new Map,fT=new Map;function sD(t,e){try{t.container.addComponent(e)}catch(r){io.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function gu(t){const e=t.name;if(fT.has(e))return io.debug(`There were multiple attempts to register component ${e}.`),!1;fT.set(e,t);for(const r of Wb.values())sD(r,t);for(const r of MZ.values())sD(r,t);return!0}function hC(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Vn(t){return t==null?!1:t.settings!==void 0}const DZ={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wc=new Pg("app","Firebase",DZ);class kZ{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Rc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wc.create("app-deleted",{appName:this._name})}}const Iu=OZ;function NB(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:hT,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw wc.create("bad-app-name",{appName:String(i)});if(r||(r=AB()),!r)throw wc.create("no-options");const s=Wb.get(i);if(s){if(vu(r,s.options)&&vu(n,s.config))return s;throw wc.create("duplicate-app",{appName:i})}const a=new VJ(i);for(const u of fT.values())a.addComponent(u);const c=new kZ(r,n,a);return Wb.set(i,c),c}function uP(t=hT){const e=Wb.get(t);if(!e&&t===hT&&AB())return NB();if(!e)throw wc.create("no-app",{appName:t});return e}function ta(t,e,r){let n=jZ[t]??t;r&&(n+=`-${r}`);const i=n.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${n}" with version "${e}":`];i&&a.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),io.warn(a.join(" "));return}gu(new Rc(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}const LZ="firebase-heartbeat-database",zZ=1,tg="firebase-heartbeat-store";let Xw=null;function OB(){return Xw||(Xw=tZ(LZ,zZ,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(tg)}catch(r){console.warn(r)}}}}).catch(t=>{throw wc.create("idb-open",{originalErrorMessage:t.message})})),Xw}async function UZ(t){try{const r=(await OB()).transaction(tg),n=await r.objectStore(tg).get(jB(t));return await r.done,n}catch(e){if(e instanceof va)io.warn(e.message);else{const r=wc.create("idb-get",{originalErrorMessage:e?.message});io.warn(r.message)}}}async function aD(t,e){try{const n=(await OB()).transaction(tg,"readwrite");await n.objectStore(tg).put(e,jB(t)),await n.done}catch(r){if(r instanceof va)io.warn(r.message);else{const n=wc.create("idb-set",{originalErrorMessage:r?.message});io.warn(n.message)}}}function jB(t){return`${t.name}!${t.options.appId}`}const BZ=1024,qZ=30;class VZ{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new HZ(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=oD();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(i=>i.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats.length>qZ){const i=WZ(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){io.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=oD(),{heartbeatsToSend:r,unsentEntries:n}=FZ(this._heartbeatsCache.heartbeats),i=Hb(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return io.warn(e),""}}}function oD(){return new Date().toISOString().substring(0,10)}function FZ(t,e=BZ){const r=[];let n=t.slice();for(const i of t){const s=r.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),cD(r)>e){s.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),cD(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class HZ{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IJ()?NJ().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await UZ(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return aD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return aD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function cD(t){return Hb(JSON.stringify({version:2,heartbeats:t})).length}function WZ(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}function KZ(t){gu(new Rc("platform-logger",e=>new iZ(e),"PRIVATE")),gu(new Rc("heartbeat",e=>new VZ(e),"PRIVATE")),ta(dT,iD,t),ta(dT,iD,"esm2020"),ta("fire-js","")}KZ("");function MB(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GZ=MB,DB=new Pg("auth","Firebase",MB());const Kb=new cP("@firebase/auth");function $Z(t,...e){Kb.logLevel<=it.WARN&&Kb.warn(`Auth (${Iu}): ${t}`,...e)}function Sb(t,...e){Kb.logLevel<=it.ERROR&&Kb.error(`Auth (${Iu}): ${t}`,...e)}function Ki(t,...e){throw hP(t,...e)}function gs(t,...e){return hP(t,...e)}function dP(t,e,r){const n={...GZ(),[e]:r};return new Pg("auth","Firebase",n).create(e,{appName:t.name})}function Za(t){return dP(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function YZ(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&Ki(t,"argument-error"),dP(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hP(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return DB.create(t,...e)}function Be(t,e,...r){if(!t)throw hP(e,...r)}function Ga(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Sb(e),new Error(e)}function so(t,e){t||Ga(e)}function pT(){return typeof self<"u"&&self.location?.href||""}function XZ(){return lD()==="http:"||lD()==="https:"}function lD(){return typeof self<"u"&&self.location?.protocol||null}function QZ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XZ()||AJ()||"connection"in navigator)?navigator.onLine:!0}function JZ(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Ng{constructor(e,r){this.shortDelay=e,this.longDelay=r,so(r>e,"Short delay should be less than long delay!"),this.isMobile=wJ()||TJ()}get(){return QZ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function fP(t,e){so(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}class kB{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ga("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ga("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ga("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ZZ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const eee=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tee=new Ng(3e4,6e4);function Uc(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Bc(t,e,r,n,i={}){return LB(t,i,async()=>{let s={},a={};n&&(e==="GET"?a=n:s={body:JSON.stringify(n)});const c=Ig({key:t.config.apiKey,...a}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...s};return EJ()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&zc(t.emulatorConfig.host)&&(d.credentials="include"),kB.fetch()(await zB(t,t.config.apiHost,r,c),d)})}async function LB(t,e,r){t._canInitEmulator=!1;const n={...ZZ,...e};try{const i=new nee(t),s=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw W0(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const c=s.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw W0(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw W0(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw W0(t,"user-disabled",a);const h=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw dP(t,h,d);Ki(t,h)}}catch(i){if(i instanceof va)throw i;Ki(t,"network-request-failed",{message:String(i)})}}async function Og(t,e,r,n,i={}){const s=await Bc(t,e,r,n,i);return"mfaPendingCredential"in s&&Ki(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function zB(t,e,r,n){const i=`${e}${r}?${n}`,s=t,a=s.config.emulator?fP(t.config,i):`${t.config.apiScheme}://${i}`;return eee.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function ree(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nee{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(gs(this.auth,"network-request-failed")),tee.get())})}}function W0(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=gs(t,e,n);return i.customData._tokenResponse=r,i}function uD(t){return t!==void 0&&t.enterprise!==void 0}class iee{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return ree(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function see(t,e){return Bc(t,"GET","/v2/recaptchaConfig",Uc(t,e))}async function aee(t,e){return Bc(t,"POST","/v1/accounts:delete",e)}async function Gb(t,e){return Bc(t,"POST","/v1/accounts:lookup",e)}function Kv(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oee(t,e=!1){const r=Kt(t),n=await r.getIdToken(e),i=pP(n);Be(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:n,authTime:Kv(Qw(i.auth_time)),issuedAtTime:Kv(Qw(i.iat)),expirationTime:Kv(Qw(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function Qw(t){return Number(t)*1e3}function pP(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Sb("JWT malformed, contained fewer than 3 sections"),null;try{const i=wB(r);return i?JSON.parse(i):(Sb("Failed to decode base64 JWT payload"),null)}catch(i){return Sb("Caught error parsing JWT payload as JSON",i?.toString()),null}}function dD(t){const e=pP(t);return Be(e,"internal-error"),Be(typeof e.exp<"u","internal-error"),Be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function rg(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof va&&cee(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function cee({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class lee{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class mT{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kv(this.lastLoginAt),this.creationTime=Kv(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function $b(t){const e=t.auth,r=await t.getIdToken(),n=await rg(t,Gb(e,{idToken:r}));Be(n?.users.length,e,"internal-error");const i=n.users[0];t._notifyReloadListener(i);const s=i.providerUserInfo?.length?UB(i.providerUserInfo):[],a=dee(t.providerData,s),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!a?.length,d=c?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new mT(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function uee(t){const e=Kt(t);await $b(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dee(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function UB(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}async function hee(t,e){const r=await LB(t,{},async()=>{const n=Ig({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=await zB(t,i,"/v1/token",`key=${s}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:n};return t.emulatorConfig&&zc(t.emulatorConfig.host)&&(u.credentials="include"),kB.fetch()(a,u)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function fee(t,e){return Bc(t,"POST","/v2/accounts:revokeToken",Uc(t,e))}class Bd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Be(e.idToken,"internal-error"),Be(typeof e.idToken<"u","internal-error"),Be(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Be(e.length!==0,"internal-error");const r=dD(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:s}=await hee(e,r);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:s}=r,a=new Bd;return n&&(Be(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),i&&(Be(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Be(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bd,this.toJSON())}_performRefresh(){return Ga("not implemented")}}function ic(t,e){Be(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class vs{constructor({uid:e,auth:r,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new lee(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new mT(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await rg(this,this.stsTokenManager.getToken(this.auth,e));return Be(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return oee(this,e)}reload(){return uee(this)}_assign(e){this!==e&&(Be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new vs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){Be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await $b(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vn(this.auth.app))return Promise.reject(Za(this.auth));const e=await this.getIdToken();return await rg(this,aee(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,i=r.email??void 0,s=r.phoneNumber??void 0,a=r.photoURL??void 0,c=r.tenantId??void 0,u=r._redirectEventId??void 0,d=r.createdAt??void 0,h=r.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:y,providerData:S,stsTokenManager:x}=r;Be(p&&x,e,"internal-error");const w=Bd.fromJSON(this.name,x);Be(typeof p=="string",e,"internal-error"),ic(n,e.name),ic(i,e.name),Be(typeof g=="boolean",e,"internal-error"),Be(typeof y=="boolean",e,"internal-error"),ic(s,e.name),ic(a,e.name),ic(c,e.name),ic(u,e.name),ic(d,e.name),ic(h,e.name);const E=new vs({uid:p,auth:e,email:i,emailVerified:g,displayName:n,isAnonymous:y,photoURL:a,phoneNumber:s,tenantId:c,stsTokenManager:w,createdAt:d,lastLoginAt:h});return S&&Array.isArray(S)&&(E.providerData=S.map(R=>({...R}))),u&&(E._redirectEventId=u),E}static async _fromIdTokenResponse(e,r,n=!1){const i=new Bd;i.updateFromServerResponse(r);const s=new vs({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await $b(s),s}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];Be(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?UB(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,c=new Bd;c.updateFromIdToken(n);const u=new vs({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new mT(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,d),u}}const hD=new Map;function $a(t){so(t instanceof Function,"Expected a class definition");let e=hD.get(t);return e?(so(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,hD.set(t,e),e)}class BB{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}BB.type="NONE";const fD=BB;function Cb(t,e,r){return`firebase:${t}:${e}:${r}`}class qd{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=Cb(this.userKey,i.apiKey,s),this.fullPersistenceKey=Cb("persistence",i.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await Gb(this.auth,{idToken:e}).catch(()=>{});return r?vs._fromGetAccountInfoResponse(this.auth,r,e):null}return vs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new qd($a(fD),e,n);const i=(await Promise.all(r.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||$a(fD);const a=Cb(n,e.config.apiKey,e.name);let c=null;for(const d of r)try{const h=await d._get(a);if(h){let p;if(typeof h=="string"){const g=await Gb(e,{idToken:h}).catch(()=>{});if(!g)break;p=await vs._fromGetAccountInfoResponse(e,g,h)}else p=vs._fromJSON(e,h);d!==s&&(c=p),s=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new qd(s,e,n):(s=u[0],c&&await s._set(a,c.toJSON()),await Promise.all(r.map(async d=>{if(d!==s)try{await d._remove(a)}catch{}})),new qd(s,e,n))}}function pD(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HB(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qB(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(KB(e))return"Blackberry";if(GB(e))return"Webos";if(VB(e))return"Safari";if((e.includes("chrome/")||FB(e))&&!e.includes("edge/"))return"Chrome";if(WB(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if(n?.length===2)return n[1]}return"Other"}function qB(t=Cn()){return/firefox\//i.test(t)}function VB(t=Cn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function FB(t=Cn()){return/crios\//i.test(t)}function HB(t=Cn()){return/iemobile/i.test(t)}function WB(t=Cn()){return/android/i.test(t)}function KB(t=Cn()){return/blackberry/i.test(t)}function GB(t=Cn()){return/webos/i.test(t)}function mP(t=Cn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function pee(t=Cn()){return mP(t)&&!!window.navigator?.standalone}function mee(){return RJ()&&document.documentMode===10}function $B(t=Cn()){return mP(t)||WB(t)||GB(t)||KB(t)||/windows phone/i.test(t)||HB(t)}function YB(t,e=[]){let r;switch(t){case"Browser":r=pD(Cn());break;case"Worker":r=`${pD(Cn())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Iu}/${n}`}class vee{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((a,c)=>{try{const u=e(s);a(u)}catch(u){c(u)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}async function gee(t,e={}){return Bc(t,"GET","/v2/passwordPolicy",Uc(t,e))}const yee=6;class bee{constructor(e){const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??yee,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class See{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mD(this),this.idTokenSubscription=new mD(this),this.beforeStateQueue=new vee(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DB,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=$a(r)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await qd.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Gb(this,{idToken:e}),n=await vs._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Vn(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,a=n?._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(n=c.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(s){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await $b(e)}catch(r){if(r?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=JZ()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vn(this.app))return Promise.reject(Za(this));const r=e?Kt(e):null;return r&&Be(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vn(this.app)?Promise.reject(Za(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vn(this.app)?Promise.reject(Za(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($a(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gee(this),r=new bee(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pg("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await fee(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&$a(e)||this._popupRedirectResolver;Be(r,this,"argument-error"),this.redirectPersistenceManager=await qd.create(this,[$a(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Be(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,n,i);return()=>{a=!0,u()}}else{const u=e.addObserver(r);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YB(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(Vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&$Z(`Error while retrieving App Check token: ${e.error}`),e?.token}}function qc(t){return Kt(t)}class mD{constructor(e){this.auth=e,this.observer=null,this.addObserver=kJ(r=>this.observer=r)}get next(){return Be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let fC={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Cee(t){fC=t}function XB(t){return fC.loadJS(t)}function xee(){return fC.recaptchaEnterpriseScript}function wee(){return fC.gapiScript}function _ee(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Eee{constructor(){this.enterprise=new Aee}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class Aee{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const Tee="recaptcha-enterprise",QB="NO_RECAPTCHA";class Ree{constructor(e){this.type=Tee,this.auth=qc(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,c)=>{see(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new iee(u);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,a(d.siteKey)}}).catch(u=>{c(u)})})}function i(s,a,c){const u=window.grecaptcha;uD(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(d=>{a(d)}).catch(()=>{a(QB)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Eee().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{n(this.auth).then(c=>{if(!r&&uD(window.grecaptcha))i(c,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=xee();u.length!==0&&(u+=c),XB(u).then(()=>{i(c,s,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})}}async function vD(t,e,r,n=!1,i=!1){const s=new Ree(t);let a;if(i)a=QB;else try{a=await s.verify(r)}catch{a=await s.verify(r,!0)}const c={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return n?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function vT(t,e,r,n,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await vD(t,e,r,r==="getOobCode");return n(t,s)}else return n(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await vD(t,e,r,r==="getOobCode");return n(t,a)}else return Promise.reject(s)})}function Pee(t,e){const r=hC(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),s=r.getOptions();if(vu(s,e??{}))return i;Ki(i,"already-initialized")}return r.initialize({options:e})}function Iee(t,e){const r=e?.persistence||[],n=(Array.isArray(r)?r:[r]).map($a);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e?.popupRedirectResolver)}function Nee(t,e,r){const n=qc(t);Be(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,s=JB(e),{host:a,port:c}=Oee(e),u=c===null?"":`:${c}`,d={url:`${s}//${a}${u}/`},h=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){Be(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Be(vu(d,n.config.emulator)&&vu(h,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=d,n.emulatorConfig=h,n.settings.appVerificationDisabledForTesting=!0,zc(a)?(aP(`${s}//${a}${u}`),oP("Auth",!0)):jee()}function JB(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Oee(t){const e=JB(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const s=i[1];return{host:s,port:gD(n.substr(s.length+1))}}else{const[s,a]=n.split(":");return{host:s,port:gD(a)}}}function gD(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function jee(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class vP{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Ga("not implemented")}_getIdTokenResponse(e){return Ga("not implemented")}_linkToIdToken(e,r){return Ga("not implemented")}_getReauthenticationResolver(e){return Ga("not implemented")}}async function Mee(t,e){return Bc(t,"POST","/v1/accounts:signUp",e)}async function Dee(t,e){return Og(t,"POST","/v1/accounts:signInWithPassword",Uc(t,e))}async function kee(t,e){return Og(t,"POST","/v1/accounts:signInWithEmailLink",Uc(t,e))}async function Lee(t,e){return Og(t,"POST","/v1/accounts:signInWithEmailLink",Uc(t,e))}class ng extends vP{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new ng(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new ng(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r?.email&&r?.password){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vT(e,r,"signInWithPassword",Dee);case"emailLink":return kee(e,{email:this._email,oobCode:this._password});default:Ki(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vT(e,n,"signUpPassword",Mee);case"emailLink":return Lee(e,{idToken:r,email:this._email,oobCode:this._password});default:Ki(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Vd(t,e){return Og(t,"POST","/v1/accounts:signInWithIdp",Uc(t,e))}const zee="http://localhost";class yu extends vP{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new yu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Ki("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,...s}=r;if(!n||!i)return null;const a=new yu(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return Vd(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Vd(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Vd(e,r)}buildRequest(){const e={requestUri:zee,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Ig(r)}return e}}function Uee(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Bee(t){const e=kv(Lv(t)).link,r=e?kv(Lv(e)).deep_link_id:null,n=kv(Lv(t)).deep_link_id;return(n?kv(Lv(n)).link:null)||n||r||e||t}class gP{constructor(e){const r=kv(Lv(e)),n=r.apiKey??null,i=r.oobCode??null,s=Uee(r.mode??null);Be(n&&i&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=i,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=Bee(e);try{return new gP(r)}catch{return null}}}class vh{constructor(){this.providerId=vh.PROVIDER_ID}static credential(e,r){return ng._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=gP.parseLink(r);return Be(n,"argument-error"),ng._fromEmailAndCode(e,n.code,n.tenantId)}}vh.PROVIDER_ID="password";vh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";vh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class yP{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class jg extends yP{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class mc extends jg{constructor(){super("facebook.com")}static credential(e){return yu._fromParams({providerId:mc.PROVIDER_ID,signInMethod:mc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mc.credentialFromTaggedObject(e)}static credentialFromError(e){return mc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mc.credential(e.oauthAccessToken)}catch{return null}}}mc.FACEBOOK_SIGN_IN_METHOD="facebook.com";mc.PROVIDER_ID="facebook.com";class Ha extends jg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return yu._fromParams({providerId:Ha.PROVIDER_ID,signInMethod:Ha.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Ha.credentialFromTaggedObject(e)}static credentialFromError(e){return Ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Ha.credential(r,n)}catch{return null}}}Ha.GOOGLE_SIGN_IN_METHOD="google.com";Ha.PROVIDER_ID="google.com";class vc extends jg{constructor(){super("github.com")}static credential(e){return yu._fromParams({providerId:vc.PROVIDER_ID,signInMethod:vc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vc.credentialFromTaggedObject(e)}static credentialFromError(e){return vc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vc.credential(e.oauthAccessToken)}catch{return null}}}vc.GITHUB_SIGN_IN_METHOD="github.com";vc.PROVIDER_ID="github.com";class gc extends jg{constructor(){super("twitter.com")}static credential(e,r){return yu._fromParams({providerId:gc.PROVIDER_ID,signInMethod:gc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return gc.credentialFromTaggedObject(e)}static credentialFromError(e){return gc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return gc.credential(r,n)}catch{return null}}}gc.TWITTER_SIGN_IN_METHOD="twitter.com";gc.PROVIDER_ID="twitter.com";async function qee(t,e){return Og(t,"POST","/v1/accounts:signUp",Uc(t,e))}class bu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const s=await vs._fromIdTokenResponse(e,n,i),a=yD(n);return new bu({user:s,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=yD(n);return new bu({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function yD(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Yb extends va{constructor(e,r,n,i){super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Yb.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new Yb(e,r,n,i)}}function ZB(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Yb._fromErrorAndOperation(t,s,e,n):s})}async function Vee(t,e,r=!1){const n=await rg(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return bu._forOperation(t,"link",n)}async function Fee(t,e,r=!1){const{auth:n}=t;if(Vn(n.app))return Promise.reject(Za(n));const i="reauthenticate";try{const s=await rg(t,ZB(n,i,e,t),r);Be(s.idToken,n,"internal-error");const a=pP(s.idToken);Be(a,n,"internal-error");const{sub:c}=a;return Be(t.uid===c,n,"user-mismatch"),bu._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Ki(n,"user-mismatch"),s}}async function e7(t,e,r=!1){if(Vn(t.app))return Promise.reject(Za(t));const n="signIn",i=await ZB(t,n,e),s=await bu._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(s.user),s}async function Hee(t,e){return e7(qc(t),e)}async function t7(t){const e=qc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function r7(t,e,r){if(Vn(t.app))return Promise.reject(Za(t));const n=qc(t),a=await vT(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qee).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&t7(t),u}),c=await bu._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(c.user),c}function Wee(t,e,r){return Vn(t.app)?Promise.reject(Za(t)):Hee(Kt(t),vh.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&t7(t),n})}function Kee(t,e,r,n){return Kt(t).onIdTokenChanged(e,r,n)}function Gee(t,e,r){return Kt(t).beforeAuthStateChanged(e,r)}function $ee(t,e,r,n){return Kt(t).onAuthStateChanged(e,r,n)}function Jw(t){return Kt(t).signOut()}const Xb="__sak";class n7{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Xb,"1"),this.storage.removeItem(Xb),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Yee=1e3,Xee=10;class i7 extends n7{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$B(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},s=this.storage.getItem(n);mee()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Xee):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},Yee)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}i7.type="LOCAL";const Qee=i7;class s7 extends n7{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}s7.type="SESSION";const a7=s7;function Jee(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}class pC{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new pC(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:s}=r.data,a=this.handlersMap[i];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const c=Array.from(a).map(async d=>d(r.origin,s)),u=await Jee(c);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pC.receivers=[];function bP(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}class Zee{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((c,u)=>{const d=bP("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},n);a={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(g.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:r},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function ra(){return window}function ete(t){ra().location.href=t}function o7(){return typeof ra().WorkerGlobalScope<"u"&&typeof ra().importScripts=="function"}async function tte(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rte(){return navigator?.serviceWorker?.controller||null}function nte(){return o7()?self:null}const c7="firebaseLocalStorageDb",ite=1,Qb="firebaseLocalStorage",l7="fbase_key";class Mg{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function mC(t,e){return t.transaction([Qb],e?"readwrite":"readonly").objectStore(Qb)}function ste(){const t=indexedDB.deleteDatabase(c7);return new Mg(t).toPromise()}function gT(){const t=indexedDB.open(c7,ite);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Qb,{keyPath:l7})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Qb)?e(n):(n.close(),await ste(),e(await gT()))})})}async function bD(t,e,r){const n=mC(t,!0).put({[l7]:e,value:r});return new Mg(n).toPromise()}async function ate(t,e){const r=mC(t,!1).get(e),n=await new Mg(r).toPromise();return n===void 0?null:n.value}function SD(t,e){const r=mC(t,!0).delete(e);return new Mg(r).toPromise()}const ote=800,cte=3;class u7{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gT(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>cte)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return o7()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pC._getInstance(nte()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await tte(),!this.activeServiceWorker)return;this.sender=new Zee(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rte()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gT();return await bD(e,Xb,"1"),await SD(e,Xb),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>bD(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>ate(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>SD(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=mC(i,!1).getAll();return new Mg(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ote)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}u7.type="LOCAL";const lte=u7;new Ng(3e4,6e4);function d7(t,e){return e?$a(e):(Be(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class SP extends vP{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vd(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Vd(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Vd(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function ute(t){return e7(t.auth,new SP(t),t.bypassAuthState)}function dte(t){const{auth:e,user:r}=t;return Be(r,e,"internal-error"),Fee(r,new SP(t),t.bypassAuthState)}async function hte(t){const{auth:e,user:r}=t;return Be(r,e,"internal-error"),Vee(r,new SP(t),t.bypassAuthState)}class h7{constructor(e,r,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:s,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ute;case"linkViaPopup":case"linkViaRedirect":return hte;case"reauthViaPopup":case"reauthViaRedirect":return dte;default:Ki(this.auth,"internal-error")}}resolve(e){so(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){so(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const fte=new Ng(2e3,1e4);async function pte(t,e,r){if(Vn(t.app))return Promise.reject(gs(t,"operation-not-supported-in-this-environment"));const n=qc(t);YZ(t,e,yP);const i=d7(n,r);return new tu(n,"signInViaPopup",e,i).executeNotNull()}class tu extends h7{constructor(e,r,n,i,s){super(e,r,i,s),this.provider=n,this.authWindow=null,this.pollId=null,tu.currentPopupAction&&tu.currentPopupAction.cancel(),tu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Be(e,this.auth,"internal-error"),e}async onExecution(){so(this.filter.length===1,"Popup operations only handle one event");const e=bP();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(gs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(gs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,tu.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,fte.get())};e()}}tu.currentPopupAction=null;const mte="pendingRedirect",xb=new Map;class vte extends h7{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=xb.get(this.auth._key());if(!e){try{const n=await gte(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}xb.set(this.auth._key(),e)}return this.bypassAuthState||xb.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gte(t,e){const r=Ste(e),n=bte(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function yte(t,e){xb.set(t._key(),e)}function bte(t){return $a(t._redirectPersistence)}function Ste(t){return Cb(mte,t.config.apiKey,t.name)}async function Cte(t,e,r=!1){if(Vn(t.app))return Promise.reject(Za(t));const n=qc(t),i=d7(n,e),a=await new vte(n,i,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}const xte=600*1e3;class wte{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_te(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){if(e.error&&!f7(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";r.onError(gs(this.auth,n))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xte&&this.cachedEventUids.clear(),this.cachedEventUids.has(CD(e))}saveEventToCache(e){this.cachedEventUids.add(CD(e)),this.lastProcessedEventTime=Date.now()}}function CD(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function f7({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function _te(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return f7(t);default:return!1}}async function Ete(t,e={}){return Bc(t,"GET","/v1/projects",e)}const Ate=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Tte=/^https?/;async function Rte(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Ete(t);for(const r of e)try{if(Pte(r))return}catch{}Ki(t,"unauthorized-domain")}function Pte(t){const e=pT(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!Tte.test(r))return!1;if(Ate.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}const Ite=new Ng(3e4,6e4);function xD(){const t=ra().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function Nte(t){return new Promise((e,r)=>{function n(){xD(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xD(),r(gs(t,"network-request-failed"))},timeout:Ite.get()})}if(ra().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ra().gapi?.load)n();else{const i=_ee("iframefcb");return ra()[i]=()=>{gapi.load?n():r(gs(t,"network-request-failed"))},XB(`${wee()}?onload=${i}`).catch(s=>r(s))}}).catch(e=>{throw wb=null,e})}let wb=null;function Ote(t){return wb=wb||Nte(t),wb}const jte=new Ng(5e3,15e3),Mte="__/auth/iframe",Dte="emulator/auth/iframe",kte={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Lte=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zte(t){const e=t.config;Be(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?fP(e,Dte):`https://${t.config.authDomain}/${Mte}`,n={apiKey:e.apiKey,appName:t.name,v:Iu},i=Lte.get(t.config.apiHost);i&&(n.eid=i);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${Ig(n).slice(1)}`}async function Ute(t){const e=await Ote(t),r=ra().gapi;return Be(r,t,"internal-error"),e.open({where:document.body,url:zte(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kte,dontclear:!0},n=>new Promise(async(i,s)=>{await n.restyle({setHideOnLeave:!1});const a=gs(t,"network-request-failed"),c=ra().setTimeout(()=>{s(a)},jte.get());function u(){ra().clearTimeout(c),i(n)}n.ping(u).then(u,()=>{s(a)})}))}const Bte={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qte=500,Vte=600,Fte="_blank",Hte="http://localhost";class wD{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Wte(t,e,r,n=qte,i=Vte){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const u={...Bte,width:n.toString(),height:i.toString(),top:s,left:a},d=Cn().toLowerCase();r&&(c=FB(d)?Fte:r),qB(d)&&(e=e||Hte,u.scrollbars="yes");const h=Object.entries(u).reduce((g,[y,S])=>`${g}${y}=${S},`,"");if(pee(d)&&c!=="_self")return Kte(e||"",c),new wD(null);const p=window.open(e||"",c,h);Be(p,t,"popup-blocked");try{p.focus()}catch{}return new wD(p)}function Kte(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}const Gte="__/auth/handler",$te="emulator/auth/handler",Yte=encodeURIComponent("fac");async function _D(t,e,r,n,i,s){Be(t.config.authDomain,t,"auth-domain-config-required"),Be(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Iu,eventId:i};if(e instanceof yP){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",DJ(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))a[h]=p}if(e instanceof jg){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const u=await t._getAppCheckToken(),d=u?`#${Yte}=${encodeURIComponent(u)}`:"";return`${Xte(t)}?${Ig(c).slice(1)}${d}`}function Xte({config:t}){return t.emulator?fP(t,$te):`https://${t.authDomain}/${Gte}`}const Zw="webStorageSupport";class Qte{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=a7,this._completeRedirectFn=Cte,this._overrideRedirectResult=yte}async _openPopup(e,r,n,i){so(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await _D(e,r,n,pT(),i);return Wte(e,s,bP())}async _openRedirect(e,r,n,i){await this._originValidation(e);const s=await _D(e,r,n,pT(),i);return ete(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:s}=this.eventManagers[r];return i?Promise.resolve(i):(so(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await Ute(e),n=new wte(e);return r.register("authEvent",i=>(Be(i?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Zw,{type:Zw},i=>{const s=i?.[0]?.[Zw];s!==void 0&&r(!!s),Ki(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Rte(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return $B()||VB()||mP()}}const Jte=Qte;var ED="@firebase/auth",AD="1.11.1";class Zte{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ere(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tre(t){gu(new Rc("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=n.options;Be(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YB(t)},d=new See(n,i,s,u);return Iee(d,r),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),gu(new Rc("auth-internal",e=>{const r=qc(e.getProvider("auth").getImmediate());return(n=>new Zte(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),ta(ED,AD,ere(t)),ta(ED,AD,"esm2020")}const rre=300,nre=TB("authIdTokenMaxAge")||rre;let TD=null;const ire=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>nre)return;const i=r?.token;TD!==i&&(TD=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function sre(t=uP()){const e=hC(t,"auth");if(e.isInitialized())return e.getImmediate();const r=Pee(t,{popupRedirectResolver:Jte,persistence:[lte,Qee,a7]}),n=TB("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const a=ire(s.toString());Gee(r,a,()=>a(r.currentUser)),Kee(r,c=>a(c))}}const i=_B("auth");return i&&Nee(r,`http://${i}`),r}function are(){return document.getElementsByTagName("head")?.[0]??document}Cee({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const s=gs("internal-error");s.customData=i,r(s)},n.type="text/javascript",n.charset="UTF-8",are().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tre("Browser");var RD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var _c,p7;(function(){var t;function e(j,O){function L(){}L.prototype=O.prototype,j.F=O.prototype,j.prototype=new L,j.prototype.constructor=j,j.D=function(V,U,F){for(var q=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)q[ve-2]=arguments[ve];return O.prototype[U].apply(V,q)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,r),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(j,O,L){L||(L=0);const V=Array(16);if(typeof O=="string")for(var U=0;U<16;++U)V[U]=O.charCodeAt(L++)|O.charCodeAt(L++)<<8|O.charCodeAt(L++)<<16|O.charCodeAt(L++)<<24;else for(U=0;U<16;++U)V[U]=O[L++]|O[L++]<<8|O[L++]<<16|O[L++]<<24;O=j.g[0],L=j.g[1],U=j.g[2];let F=j.g[3],q;q=O+(F^L&(U^F))+V[0]+3614090360&4294967295,O=L+(q<<7&4294967295|q>>>25),q=F+(U^O&(L^U))+V[1]+3905402710&4294967295,F=O+(q<<12&4294967295|q>>>20),q=U+(L^F&(O^L))+V[2]+606105819&4294967295,U=F+(q<<17&4294967295|q>>>15),q=L+(O^U&(F^O))+V[3]+3250441966&4294967295,L=U+(q<<22&4294967295|q>>>10),q=O+(F^L&(U^F))+V[4]+4118548399&4294967295,O=L+(q<<7&4294967295|q>>>25),q=F+(U^O&(L^U))+V[5]+1200080426&4294967295,F=O+(q<<12&4294967295|q>>>20),q=U+(L^F&(O^L))+V[6]+2821735955&4294967295,U=F+(q<<17&4294967295|q>>>15),q=L+(O^U&(F^O))+V[7]+4249261313&4294967295,L=U+(q<<22&4294967295|q>>>10),q=O+(F^L&(U^F))+V[8]+1770035416&4294967295,O=L+(q<<7&4294967295|q>>>25),q=F+(U^O&(L^U))+V[9]+2336552879&4294967295,F=O+(q<<12&4294967295|q>>>20),q=U+(L^F&(O^L))+V[10]+4294925233&4294967295,U=F+(q<<17&4294967295|q>>>15),q=L+(O^U&(F^O))+V[11]+2304563134&4294967295,L=U+(q<<22&4294967295|q>>>10),q=O+(F^L&(U^F))+V[12]+1804603682&4294967295,O=L+(q<<7&4294967295|q>>>25),q=F+(U^O&(L^U))+V[13]+4254626195&4294967295,F=O+(q<<12&4294967295|q>>>20),q=U+(L^F&(O^L))+V[14]+2792965006&4294967295,U=F+(q<<17&4294967295|q>>>15),q=L+(O^U&(F^O))+V[15]+1236535329&4294967295,L=U+(q<<22&4294967295|q>>>10),q=O+(U^F&(L^U))+V[1]+4129170786&4294967295,O=L+(q<<5&4294967295|q>>>27),q=F+(L^U&(O^L))+V[6]+3225465664&4294967295,F=O+(q<<9&4294967295|q>>>23),q=U+(O^L&(F^O))+V[11]+643717713&4294967295,U=F+(q<<14&4294967295|q>>>18),q=L+(F^O&(U^F))+V[0]+3921069994&4294967295,L=U+(q<<20&4294967295|q>>>12),q=O+(U^F&(L^U))+V[5]+3593408605&4294967295,O=L+(q<<5&4294967295|q>>>27),q=F+(L^U&(O^L))+V[10]+38016083&4294967295,F=O+(q<<9&4294967295|q>>>23),q=U+(O^L&(F^O))+V[15]+3634488961&4294967295,U=F+(q<<14&4294967295|q>>>18),q=L+(F^O&(U^F))+V[4]+3889429448&4294967295,L=U+(q<<20&4294967295|q>>>12),q=O+(U^F&(L^U))+V[9]+568446438&4294967295,O=L+(q<<5&4294967295|q>>>27),q=F+(L^U&(O^L))+V[14]+3275163606&4294967295,F=O+(q<<9&4294967295|q>>>23),q=U+(O^L&(F^O))+V[3]+4107603335&4294967295,U=F+(q<<14&4294967295|q>>>18),q=L+(F^O&(U^F))+V[8]+1163531501&4294967295,L=U+(q<<20&4294967295|q>>>12),q=O+(U^F&(L^U))+V[13]+2850285829&4294967295,O=L+(q<<5&4294967295|q>>>27),q=F+(L^U&(O^L))+V[2]+4243563512&4294967295,F=O+(q<<9&4294967295|q>>>23),q=U+(O^L&(F^O))+V[7]+1735328473&4294967295,U=F+(q<<14&4294967295|q>>>18),q=L+(F^O&(U^F))+V[12]+2368359562&4294967295,L=U+(q<<20&4294967295|q>>>12),q=O+(L^U^F)+V[5]+4294588738&4294967295,O=L+(q<<4&4294967295|q>>>28),q=F+(O^L^U)+V[8]+2272392833&4294967295,F=O+(q<<11&4294967295|q>>>21),q=U+(F^O^L)+V[11]+1839030562&4294967295,U=F+(q<<16&4294967295|q>>>16),q=L+(U^F^O)+V[14]+4259657740&4294967295,L=U+(q<<23&4294967295|q>>>9),q=O+(L^U^F)+V[1]+2763975236&4294967295,O=L+(q<<4&4294967295|q>>>28),q=F+(O^L^U)+V[4]+1272893353&4294967295,F=O+(q<<11&4294967295|q>>>21),q=U+(F^O^L)+V[7]+4139469664&4294967295,U=F+(q<<16&4294967295|q>>>16),q=L+(U^F^O)+V[10]+3200236656&4294967295,L=U+(q<<23&4294967295|q>>>9),q=O+(L^U^F)+V[13]+681279174&4294967295,O=L+(q<<4&4294967295|q>>>28),q=F+(O^L^U)+V[0]+3936430074&4294967295,F=O+(q<<11&4294967295|q>>>21),q=U+(F^O^L)+V[3]+3572445317&4294967295,U=F+(q<<16&4294967295|q>>>16),q=L+(U^F^O)+V[6]+76029189&4294967295,L=U+(q<<23&4294967295|q>>>9),q=O+(L^U^F)+V[9]+3654602809&4294967295,O=L+(q<<4&4294967295|q>>>28),q=F+(O^L^U)+V[12]+3873151461&4294967295,F=O+(q<<11&4294967295|q>>>21),q=U+(F^O^L)+V[15]+530742520&4294967295,U=F+(q<<16&4294967295|q>>>16),q=L+(U^F^O)+V[2]+3299628645&4294967295,L=U+(q<<23&4294967295|q>>>9),q=O+(U^(L|~F))+V[0]+4096336452&4294967295,O=L+(q<<6&4294967295|q>>>26),q=F+(L^(O|~U))+V[7]+1126891415&4294967295,F=O+(q<<10&4294967295|q>>>22),q=U+(O^(F|~L))+V[14]+2878612391&4294967295,U=F+(q<<15&4294967295|q>>>17),q=L+(F^(U|~O))+V[5]+4237533241&4294967295,L=U+(q<<21&4294967295|q>>>11),q=O+(U^(L|~F))+V[12]+1700485571&4294967295,O=L+(q<<6&4294967295|q>>>26),q=F+(L^(O|~U))+V[3]+2399980690&4294967295,F=O+(q<<10&4294967295|q>>>22),q=U+(O^(F|~L))+V[10]+4293915773&4294967295,U=F+(q<<15&4294967295|q>>>17),q=L+(F^(U|~O))+V[1]+2240044497&4294967295,L=U+(q<<21&4294967295|q>>>11),q=O+(U^(L|~F))+V[8]+1873313359&4294967295,O=L+(q<<6&4294967295|q>>>26),q=F+(L^(O|~U))+V[15]+4264355552&4294967295,F=O+(q<<10&4294967295|q>>>22),q=U+(O^(F|~L))+V[6]+2734768916&4294967295,U=F+(q<<15&4294967295|q>>>17),q=L+(F^(U|~O))+V[13]+1309151649&4294967295,L=U+(q<<21&4294967295|q>>>11),q=O+(U^(L|~F))+V[4]+4149444226&4294967295,O=L+(q<<6&4294967295|q>>>26),q=F+(L^(O|~U))+V[11]+3174756917&4294967295,F=O+(q<<10&4294967295|q>>>22),q=U+(O^(F|~L))+V[2]+718787259&4294967295,U=F+(q<<15&4294967295|q>>>17),q=L+(F^(U|~O))+V[9]+3951481745&4294967295,j.g[0]=j.g[0]+O&4294967295,j.g[1]=j.g[1]+(U+(q<<21&4294967295|q>>>11))&4294967295,j.g[2]=j.g[2]+U&4294967295,j.g[3]=j.g[3]+F&4294967295}n.prototype.v=function(j,O){O===void 0&&(O=j.length);const L=O-this.blockSize,V=this.C;let U=this.h,F=0;for(;F<O;){if(U==0)for(;F<=L;)i(this,j,F),F+=this.blockSize;if(typeof j=="string"){for(;F<O;)if(V[U++]=j.charCodeAt(F++),U==this.blockSize){i(this,V),U=0;break}}else for(;F<O;)if(V[U++]=j[F++],U==this.blockSize){i(this,V),U=0;break}}this.h=U,this.o+=O},n.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var O=1;O<j.length-8;++O)j[O]=0;O=this.o*8;for(var L=j.length-8;L<j.length;++L)j[L]=O&255,O/=256;for(this.v(j),j=Array(16),O=0,L=0;L<4;++L)for(let V=0;V<32;V+=8)j[O++]=this.g[L]>>>V&255;return j};function s(j,O){var L=c;return Object.prototype.hasOwnProperty.call(L,j)?L[j]:L[j]=O(j)}function a(j,O){this.h=O;const L=[];let V=!0;for(let U=j.length-1;U>=0;U--){const F=j[U]|0;V&&F==O||(L[U]=F,V=!1)}this.g=L}var c={};function u(j){return-128<=j&&j<128?s(j,function(O){return new a([O|0],O<0?-1:0)}):new a([j|0],j<0?-1:0)}function d(j){if(isNaN(j)||!isFinite(j))return p;if(j<0)return w(d(-j));const O=[];let L=1;for(let V=0;j>=L;V++)O[V]=j/L|0,L*=4294967296;return new a(O,0)}function h(j,O){if(j.length==0)throw Error("number format error: empty string");if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(j.charAt(0)=="-")return w(h(j.substring(1),O));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const L=d(Math.pow(O,8));let V=p;for(let F=0;F<j.length;F+=8){var U=Math.min(8,j.length-F);const q=parseInt(j.substring(F,F+U),O);U<8?(U=d(Math.pow(O,U)),V=V.j(U).add(d(q))):(V=V.j(L),V=V.add(d(q)))}return V}var p=u(0),g=u(1),y=u(16777216);t=a.prototype,t.m=function(){if(x(this))return-w(this).m();let j=0,O=1;for(let L=0;L<this.g.length;L++){const V=this.i(L);j+=(V>=0?V:4294967296+V)*O,O*=4294967296}return j},t.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(S(this))return"0";if(x(this))return"-"+w(this).toString(j);const O=d(Math.pow(j,6));var L=this;let V="";for(;;){const U=M(L,O).g;L=E(L,U.j(O));let F=((L.g.length>0?L.g[0]:L.h)>>>0).toString(j);if(L=U,S(L))return F+V;for(;F.length<6;)F="0"+F;V=F+V}},t.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function S(j){if(j.h!=0)return!1;for(let O=0;O<j.g.length;O++)if(j.g[O]!=0)return!1;return!0}function x(j){return j.h==-1}t.l=function(j){return j=E(this,j),x(j)?-1:S(j)?0:1};function w(j){const O=j.g.length,L=[];for(let V=0;V<O;V++)L[V]=~j.g[V];return new a(L,~j.h).add(g)}t.abs=function(){return x(this)?w(this):this},t.add=function(j){const O=Math.max(this.g.length,j.g.length),L=[];let V=0;for(let U=0;U<=O;U++){let F=V+(this.i(U)&65535)+(j.i(U)&65535),q=(F>>>16)+(this.i(U)>>>16)+(j.i(U)>>>16);V=q>>>16,F&=65535,q&=65535,L[U]=q<<16|F}return new a(L,L[L.length-1]&-2147483648?-1:0)};function E(j,O){return j.add(w(O))}t.j=function(j){if(S(this)||S(j))return p;if(x(this))return x(j)?w(this).j(w(j)):w(w(this).j(j));if(x(j))return w(this.j(w(j)));if(this.l(y)<0&&j.l(y)<0)return d(this.m()*j.m());const O=this.g.length+j.g.length,L=[];for(var V=0;V<2*O;V++)L[V]=0;for(V=0;V<this.g.length;V++)for(let U=0;U<j.g.length;U++){const F=this.i(V)>>>16,q=this.i(V)&65535,ve=j.i(U)>>>16,Ae=j.i(U)&65535;L[2*V+2*U]+=q*Ae,R(L,2*V+2*U),L[2*V+2*U+1]+=F*Ae,R(L,2*V+2*U+1),L[2*V+2*U+1]+=q*ve,R(L,2*V+2*U+1),L[2*V+2*U+2]+=F*ve,R(L,2*V+2*U+2)}for(j=0;j<O;j++)L[j]=L[2*j+1]<<16|L[2*j];for(j=O;j<2*O;j++)L[j]=0;return new a(L,0)};function R(j,O){for(;(j[O]&65535)!=j[O];)j[O+1]+=j[O]>>>16,j[O]&=65535,O++}function T(j,O){this.g=j,this.h=O}function M(j,O){if(S(O))throw Error("division by zero");if(S(j))return new T(p,p);if(x(j))return O=M(w(j),O),new T(w(O.g),w(O.h));if(x(O))return O=M(j,w(O)),new T(w(O.g),O.h);if(j.g.length>30){if(x(j)||x(O))throw Error("slowDivide_ only works with positive integers.");for(var L=g,V=O;V.l(j)<=0;)L=D(L),V=D(V);var U=z(L,1),F=z(V,1);for(V=z(V,2),L=z(L,2);!S(V);){var q=F.add(V);q.l(j)<=0&&(U=U.add(L),F=q),V=z(V,1),L=z(L,1)}return O=E(j,U.j(O)),new T(U,O)}for(U=p;j.l(O)>=0;){for(L=Math.max(1,Math.floor(j.m()/O.m())),V=Math.ceil(Math.log(L)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),F=d(L),q=F.j(O);x(q)||q.l(j)>0;)L-=V,F=d(L),q=F.j(O);S(F)&&(F=g),U=U.add(F),j=E(j,q)}return new T(U,j)}t.B=function(j){return M(this,j).h},t.and=function(j){const O=Math.max(this.g.length,j.g.length),L=[];for(let V=0;V<O;V++)L[V]=this.i(V)&j.i(V);return new a(L,this.h&j.h)},t.or=function(j){const O=Math.max(this.g.length,j.g.length),L=[];for(let V=0;V<O;V++)L[V]=this.i(V)|j.i(V);return new a(L,this.h|j.h)},t.xor=function(j){const O=Math.max(this.g.length,j.g.length),L=[];for(let V=0;V<O;V++)L[V]=this.i(V)^j.i(V);return new a(L,this.h^j.h)};function D(j){const O=j.g.length+1,L=[];for(let V=0;V<O;V++)L[V]=j.i(V)<<1|j.i(V-1)>>>31;return new a(L,j.h)}function z(j,O){const L=O>>5;O%=32;const V=j.g.length-L,U=[];for(let F=0;F<V;F++)U[F]=O>0?j.i(F+L)>>>O|j.i(F+L+1)<<32-O:j.i(F+L);return new a(U,j.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,p7=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,_c=a}).apply(typeof RD<"u"?RD:typeof self<"u"?self:typeof window<"u"?window:{});var K0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var m7,zv,v7,_b,yT,g7,y7,b7;(function(){var t,e=Object.defineProperty;function r(b){b=[typeof globalThis=="object"&&globalThis,b,typeof window=="object"&&window,typeof self=="object"&&self,typeof K0=="object"&&K0];for(var P=0;P<b.length;++P){var N=b[P];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var n=r(this);function i(b,P){if(P)e:{var N=n;b=b.split(".");for(var B=0;B<b.length-1;B++){var Q=b[B];if(!(Q in N))break e;N=N[Q]}b=b[b.length-1],B=N[b],P=P(B),P!=B&&P!=null&&e(N,b,{configurable:!0,writable:!0,value:P})}}i("Symbol.dispose",function(b){return b||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(b){return b||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(b){return b||function(P){var N=[],B;for(B in P)Object.prototype.hasOwnProperty.call(P,B)&&N.push([B,P[B]]);return N}});var s=s||{},a=this||self;function c(b){var P=typeof b;return P=="object"&&b!=null||P=="function"}function u(b,P,N){return b.call.apply(b.bind,arguments)}function d(b,P,N){return d=u,d.apply(null,arguments)}function h(b,P){var N=Array.prototype.slice.call(arguments,1);return function(){var B=N.slice();return B.push.apply(B,arguments),b.apply(this,B)}}function p(b,P){function N(){}N.prototype=P.prototype,b.Z=P.prototype,b.prototype=new N,b.prototype.constructor=b,b.Ob=function(B,Q,te){for(var Se=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)Se[$e-2]=arguments[$e];return P.prototype[Q].apply(B,Se)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?b=>b&&AsyncContext.Snapshot.wrap(b):b=>b;function y(b){const P=b.length;if(P>0){const N=Array(P);for(let B=0;B<P;B++)N[B]=b[B];return N}return[]}function S(b,P){for(let B=1;B<arguments.length;B++){const Q=arguments[B];var N=typeof Q;if(N=N!="object"?N:Q?Array.isArray(Q)?"array":N:"null",N=="array"||N=="object"&&typeof Q.length=="number"){N=b.length||0;const te=Q.length||0;b.length=N+te;for(let Se=0;Se<te;Se++)b[N+Se]=Q[Se]}else b.push(Q)}}class x{constructor(P,N){this.i=P,this.j=N,this.h=0,this.g=null}get(){let P;return this.h>0?(this.h--,P=this.g,this.g=P.next,P.next=null):P=this.i(),P}}function w(b){a.setTimeout(()=>{throw b},0)}function E(){var b=j;let P=null;return b.g&&(P=b.g,b.g=b.g.next,b.g||(b.h=null),P.next=null),P}class R{constructor(){this.h=this.g=null}add(P,N){const B=T.get();B.set(P,N),this.h?this.h.next=B:this.g=B,this.h=B}}var T=new x(()=>new M,b=>b.reset());class M{constructor(){this.next=this.g=this.h=null}set(P,N){this.h=P,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let D,z=!1,j=new R,O=()=>{const b=Promise.resolve(void 0);D=()=>{b.then(L)}};function L(){for(var b;b=E();){try{b.h.call(b.g)}catch(N){w(N)}var P=T;P.j(b),P.h<100&&(P.h++,b.next=P.g,P.g=b)}z=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(b,P){this.type=b,this.g=this.target=P,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var b=!1,P=Object.defineProperty({},"passive",{get:function(){b=!0}});try{const N=()=>{};a.addEventListener("test",N,P),a.removeEventListener("test",N,P)}catch{}return b})();function q(b){return/^[\s\xa0]*$/.test(b)}function ve(b,P){U.call(this,b?b.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,b&&this.init(b,P)}p(ve,U),ve.prototype.init=function(b,P){const N=this.type=b.type,B=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:null;this.target=b.target||b.srcElement,this.g=P,P=b.relatedTarget,P||(N=="mouseover"?P=b.fromElement:N=="mouseout"&&(P=b.toElement)),this.relatedTarget=P,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0),this.button=b.button,this.key=b.key||"",this.ctrlKey=b.ctrlKey,this.altKey=b.altKey,this.shiftKey=b.shiftKey,this.metaKey=b.metaKey,this.pointerId=b.pointerId||0,this.pointerType=b.pointerType,this.state=b.state,this.i=b,b.defaultPrevented&&ve.Z.h.call(this)},ve.prototype.h=function(){ve.Z.h.call(this);const b=this.i;b.preventDefault?b.preventDefault():b.returnValue=!1};var Ae="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ae(b,P,N,B,Q){this.listener=b,this.proxy=null,this.src=P,this.type=N,this.capture=!!B,this.ha=Q,this.key=++Y,this.da=this.fa=!1}function pe(b){b.da=!0,b.listener=null,b.proxy=null,b.src=null,b.ha=null}function me(b,P,N){for(const B in b)P.call(N,b[B],B,b)}function _e(b,P){for(const N in b)P.call(void 0,b[N],N,b)}function H(b){const P={};for(const N in b)P[N]=b[N];return P}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(b,P){let N,B;for(let Q=1;Q<arguments.length;Q++){B=arguments[Q];for(N in B)b[N]=B[N];for(let te=0;te<G.length;te++)N=G[te],Object.prototype.hasOwnProperty.call(B,N)&&(b[N]=B[N])}}function X(b){this.src=b,this.g={},this.h=0}X.prototype.add=function(b,P,N,B,Q){const te=b.toString();b=this.g[te],b||(b=this.g[te]=[],this.h++);const Se=be(b,P,B,Q);return Se>-1?(P=b[Se],N||(P.fa=!1)):(P=new ae(P,this.src,te,!!B,Q),P.fa=N,b.push(P)),P};function ge(b,P){const N=P.type;if(N in b.g){var B=b.g[N],Q=Array.prototype.indexOf.call(B,P,void 0),te;(te=Q>=0)&&Array.prototype.splice.call(B,Q,1),te&&(pe(P),b.g[N].length==0&&(delete b.g[N],b.h--))}}function be(b,P,N,B){for(let Q=0;Q<b.length;++Q){const te=b[Q];if(!te.da&&te.listener==P&&te.capture==!!N&&te.ha==B)return Q}return-1}var we="closure_lm_"+(Math.random()*1e6|0),Ke={};function se(b,P,N,B,Q){if(Array.isArray(P)){for(let te=0;te<P.length;te++)se(b,P[te],N,B,Q);return null}return N=Ci(N),b&&b[Ae]?b.J(P,N,c(B)?!!B.capture:!1,Q):je(b,P,N,!1,B,Q)}function je(b,P,N,B,Q,te){if(!P)throw Error("Invalid event type");const Se=c(Q)?!!Q.capture:!!Q;let $e=Dt(b);if($e||(b[we]=$e=new X(b)),N=$e.add(P,N,B,Se,te),N.proxy)return N;if(B=Ue(),N.proxy=B,B.src=b,B.listener=N,b.addEventListener)F||(Q=Se),Q===void 0&&(Q=!1),b.addEventListener(P.toString(),B,Q);else if(b.attachEvent)b.attachEvent(Ge(P.toString()),B);else if(b.addListener&&b.removeListener)b.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return N}function Ue(){function b(N){return P.call(b.src,b.listener,N)}const P=yt;return b}function fe(b,P,N,B,Q){if(Array.isArray(P))for(var te=0;te<P.length;te++)fe(b,P[te],N,B,Q);else B=c(B)?!!B.capture:!!B,N=Ci(N),b&&b[Ae]?(b=b.i,te=String(P).toString(),te in b.g&&(P=b.g[te],N=be(P,N,B,Q),N>-1&&(pe(P[N]),Array.prototype.splice.call(P,N,1),P.length==0&&(delete b.g[te],b.h--)))):b&&(b=Dt(b))&&(P=b.g[P.toString()],b=-1,P&&(b=be(P,N,B,Q)),(N=b>-1?P[b]:null)&&Pt(N))}function Pt(b){if(typeof b!="number"&&b&&!b.da){var P=b.src;if(P&&P[Ae])ge(P.i,b);else{var N=b.type,B=b.proxy;P.removeEventListener?P.removeEventListener(N,B,b.capture):P.detachEvent?P.detachEvent(Ge(N),B):P.addListener&&P.removeListener&&P.removeListener(B),(N=Dt(P))?(ge(N,b),N.h==0&&(N.src=null,P[we]=null)):pe(b)}}}function Ge(b){return b in Ke?Ke[b]:Ke[b]="on"+b}function yt(b,P){if(b.da)b=!0;else{P=new ve(P,this);const N=b.listener,B=b.ha||b.src;b.fa&&Pt(b),b=N.call(B,P)}return b}function Dt(b){return b=b[we],b instanceof X?b:null}var vt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ci(b){return typeof b=="function"?b:(b[vt]||(b[vt]=function(P){return b.handleEvent(P)}),b[vt])}function Bt(){V.call(this),this.i=new X(this),this.M=this,this.G=null}p(Bt,V),Bt.prototype[Ae]=!0,Bt.prototype.removeEventListener=function(b,P,N,B){fe(this,b,P,N,B)};function Gt(b,P){var N,B=b.G;if(B)for(N=[];B;B=B.G)N.push(B);if(b=b.M,B=P.type||P,typeof P=="string")P=new U(P,b);else if(P instanceof U)P.target=P.target||b;else{var Q=P;P=new U(B,b),le(P,Q)}Q=!0;let te,Se;if(N)for(Se=N.length-1;Se>=0;Se--)te=P.g=N[Se],Q=xi(te,B,!0,P)&&Q;if(te=P.g=b,Q=xi(te,B,!0,P)&&Q,Q=xi(te,B,!1,P)&&Q,N)for(Se=0;Se<N.length;Se++)te=P.g=N[Se],Q=xi(te,B,!1,P)&&Q}Bt.prototype.N=function(){if(Bt.Z.N.call(this),this.i){var b=this.i;for(const P in b.g){const N=b.g[P];for(let B=0;B<N.length;B++)pe(N[B]);delete b.g[P],b.h--}}this.G=null},Bt.prototype.J=function(b,P,N,B){return this.i.add(String(b),P,!1,N,B)},Bt.prototype.K=function(b,P,N,B){return this.i.add(String(b),P,!0,N,B)};function xi(b,P,N,B){if(P=b.i.g[String(P)],!P)return!0;P=P.concat();let Q=!0;for(let te=0;te<P.length;++te){const Se=P[te];if(Se&&!Se.da&&Se.capture==N){const $e=Se.listener,cr=Se.ha||Se.src;Se.fa&&ge(b.i,Se),Q=$e.call(cr,B)!==!1&&Q}}return Q&&!B.defaultPrevented}function Yc(b,P){if(typeof b!="function")if(b&&typeof b.handleEvent=="function")b=d(b.handleEvent,b);else throw Error("Invalid listener argument");return Number(P)>2147483647?-1:a.setTimeout(b,P||0)}function Eo(b){b.g=Yc(()=>{b.g=null,b.i&&(b.i=!1,Eo(b))},b.l);const P=b.h;b.h=null,b.m.apply(null,P)}class Rr extends V{constructor(P,N){super(),this.m=P,this.l=N,this.h=null,this.i=!1,this.g=null}j(P){this.h=arguments,this.g?this.i=!0:Eo(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ye(b){V.call(this),this.h=b,this.g={}}p(ye,V);var ut=[];function kt(b){me(b.g,function(P,N){this.g.hasOwnProperty(N)&&Pt(P)},b),b.g={}}ye.prototype.N=function(){ye.Z.N.call(this),kt(this)},ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pr=a.JSON.stringify,Xc=a.JSON.parse,Lu=class{stringify(b){return a.JSON.stringify(b,void 0)}parse(b){return a.JSON.parse(b,void 0)}};function zu(){}function Uu(){}var Xn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ir(){U.call(this,"d")}p(Ir,U);function On(){U.call(this,"c")}p(On,U);var $t={},Bu=null;function Ao(){return Bu=Bu||new Bt}$t.Ia="serverreachability";function qu(b){U.call(this,$t.Ia,b)}p(qu,U);function wi(b){const P=Ao();Gt(P,new qu(P))}$t.STAT_EVENT="statevent";function As(b,P){U.call(this,$t.STAT_EVENT,b),this.stat=P}p(As,U);function Zt(b){const P=Ao();Gt(P,new As(P,b))}$t.Ja="timingevent";function _i(b,P){U.call(this,$t.Ja,b),this.size=P}p(_i,U);function Ei(b,P){if(typeof b!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){b()},P)}function Ji(){this.g=!0}Ji.prototype.ua=function(){this.g=!1};function Vx(b,P,N,B,Q,te){b.info(function(){if(b.g)if(te){var Se="",$e=te.split("&");for(let pt=0;pt<$e.length;pt++){var cr=$e[pt].split("=");if(cr.length>1){const qt=cr[0];cr=cr[1];const Pi=qt.split("_");Se=Pi.length>=2&&Pi[1]=="type"?Se+(qt+"="+cr+"&"):Se+(qt+"=redacted&")}}}else Se=null;else Se=te;return"XMLHTTP REQ ("+B+") [attempt "+Q+"]: "+P+`
`+N+`
`+Se})}function Cy(b,P,N,B,Q,te,Se){b.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+Q+"]: "+P+`
`+N+`
`+te+" "+Se})}function Ts(b,P,N,B){b.info(function(){return"XMLHTTP TEXT ("+P+"): "+Fx(b,N)+(B?" "+B:"")})}function Qc(b,P){b.info(function(){return"TIMEOUT: "+P})}Ji.prototype.info=function(){};function Fx(b,P){if(!b.g)return P;if(!P)return null;try{const te=JSON.parse(P);if(te){for(b=0;b<te.length;b++)if(Array.isArray(te[b])){var N=te[b];if(!(N.length<2)){var B=N[1];if(Array.isArray(B)&&!(B.length<1)){var Q=B[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let Se=1;Se<B.length;Se++)B[Se]=""}}}}return Pr(te)}catch{return P}}var Jc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Dh={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},kh;function Zc(){}p(Zc,zu),Zc.prototype.g=function(){return new XMLHttpRequest},kh=new Zc;function Sa(b){return encodeURIComponent(String(b))}function xy(b){var P=1;b=b.split(":");const N=[];for(;P>0&&b.length;)N.push(b.shift()),P--;return b.length&&N.push(b.join(":")),N}function Zi(b,P,N,B){this.j=b,this.i=P,this.l=N,this.S=B||1,this.V=new ye(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new es}function es(){this.i=null,this.g="",this.h=!1}var fr={},Ur={};function Rs(b,P,N){b.M=1,b.A=el(mr(P)),b.u=N,b.R=!0,Vu(b,null)}function Vu(b,P){b.F=Date.now(),Ps(b),b.B=mr(b.A);var N=b.B,B=b.S;Array.isArray(B)||(B=[String(B)]),Ku(N.i,"t",B),b.C=0,N=b.j.L,b.h=new es,b.g=Ly(b.j,N?P:null,!b.u),b.P>0&&(b.O=new Rr(d(b.Y,b,b.g),b.P)),P=b.V,N=b.g,B=b.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(ut[0]=Q.toString()),Q=ut);for(let te=0;te<Q.length;te++){const Se=se(N,Q[te],B||P.handleEvent,!1,P.h||P);if(!Se)break;P.g[Se.key]=Se}P=b.J?H(b.J):{},b.u?(b.v||(b.v="POST"),P["Content-Type"]="application/x-www-form-urlencoded",b.g.ea(b.B,b.v,b.u,P)):(b.v="GET",b.g.ea(b.B,b.v,null,P)),wi(),Vx(b.i,b.v,b.B,b.l,b.S,b.u)}Zi.prototype.ba=function(b){b=b.target;const P=this.O;P&&ns(b)==3?P.j():this.Y(b)},Zi.prototype.Y=function(b){try{if(b==this.g)e:{const $e=ns(this.g),cr=this.g.ya(),pt=this.g.ca();if(!($e<3)&&($e!=3||this.g&&(this.h.h||this.g.la()||Xr(this.g)))){this.K||$e!=4||cr==7||(cr==8||pt<=0?wi(3):wi(2)),Is(this);var P=this.g.ca();this.X=P;var N=Hx(this);if(this.o=P==200,Cy(this.i,this.v,this.B,this.l,this.S,$e,P),this.o){if(this.U&&!this.L){t:{if(this.g){var B,Q=this.g;if((B=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(B)){var te=B;break t}}te=null}if(b=te)Ts(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ns(this,b);else{this.o=!1,this.m=3,Zt(12),Qn(this),Ai(this);break e}}if(this.R){b=!0;let qt;for(;!this.K&&this.C<N.length;)if(qt=_y(this,N),qt==Ur){$e==4&&(this.m=4,Zt(14),b=!1),Ts(this.i,this.l,null,"[Incomplete Response]");break}else if(qt==fr){this.m=4,Zt(15),Ts(this.i,this.l,N,"[Invalid Chunk]"),b=!1;break}else Ts(this.i,this.l,qt,null),Ns(this,qt);if(wy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$e!=4||N.length!=0||this.h.h||(this.m=1,Zt(16),b=!1),this.o=this.o&&b,!b)Ts(this.i,this.l,N,"[Invalid Chunked Response]"),Qn(this),Ai(this);else if(N.length>0&&!this.W){this.W=!0;var Se=this.j;Se.g==this&&Se.aa&&!Se.P&&(Se.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),Qh(Se),Se.P=!0,Zt(11))}}else Ts(this.i,this.l,N,null),Ns(this,N);$e==4&&Qn(this),this.o&&!this.K&&($e==4?jy(this.j,this):(this.o=!1,Ps(this)))}else xa(this.g),P==400&&N.indexOf("Unknown SID")>0?(this.m=3,Zt(12)):(this.m=0,Zt(13)),Qn(this),Ai(this)}}}catch{}finally{}};function Hx(b){if(!wy(b))return b.g.la();const P=Xr(b.g);if(P==="")return"";let N="";const B=P.length,Q=ns(b.g)==4;if(!b.h.i){if(typeof TextDecoder>"u")return Qn(b),Ai(b),"";b.h.i=new a.TextDecoder}for(let te=0;te<B;te++)b.h.h=!0,N+=b.h.i.decode(P[te],{stream:!(Q&&te==B-1)});return P.length=0,b.h.g+=N,b.C=0,b.h.g}function wy(b){return b.g?b.v=="GET"&&b.M!=2&&b.j.Aa:!1}function _y(b,P){var N=b.C,B=P.indexOf(`
`,N);return B==-1?Ur:(N=Number(P.substring(N,B)),isNaN(N)?fr:(B+=1,B+N>P.length?Ur:(P=P.slice(B,B+N),b.C=B+N,P)))}Zi.prototype.cancel=function(){this.K=!0,Qn(this)};function Ps(b){b.T=Date.now()+b.H,Fu(b,b.H)}function Fu(b,P){if(b.D!=null)throw Error("WatchDog timer not null");b.D=Ei(d(b.aa,b),P)}function Is(b){b.D&&(a.clearTimeout(b.D),b.D=null)}Zi.prototype.aa=function(){this.D=null;const b=Date.now();b-this.T>=0?(Qc(this.i,this.B),this.M!=2&&(wi(),Zt(17)),Qn(this),this.m=2,Ai(this)):Fu(this,this.T-b)};function Ai(b){b.j.I==0||b.K||jy(b.j,b)}function Qn(b){Is(b);var P=b.O;P&&typeof P.dispose=="function"&&P.dispose(),b.O=null,kt(b.V),b.g&&(P=b.g,b.g=null,P.abort(),P.dispose())}function Ns(b,P){try{var N=b.j;if(N.I!=0&&(N.g==b||js(N.h,b))){if(!b.L&&js(N.h,b)&&N.I==3){try{var B=N.Ba.g.parse(P)}catch{B=null}if(Array.isArray(B)&&B.length==3){var Q=B;if(Q[0]==0){e:if(!N.v){if(N.g)if(N.g.F+3e3<b.F)Qu(N),Mo(N);else break e;ol(N),Zt(18)}}else N.xa=Q[1],0<N.xa-N.K&&Q[2]<37500&&N.F&&N.A==0&&!N.C&&(N.C=Ei(d(N.Va,N),6e3));Os(N.h)<=1&&N.ta&&(N.ta=void 0)}else Us(N,11)}else if((b.L||N.g==b)&&Qu(N),!q(P))for(Q=N.Ba.g.parse(P),P=0;P<Q.length;P++){let pt=Q[P];const qt=pt[0];if(!(qt<=N.K))if(N.K=qt,pt=pt[1],N.I==2)if(pt[0]=="c"){N.M=pt[1],N.ba=pt[2];const Pi=pt[3];Pi!=null&&(N.ka=Pi,N.j.info("VER="+N.ka));const Bs=pt[4];Bs!=null&&(N.za=Bs,N.j.info("SVER="+N.za));const is=pt[5];is!=null&&typeof is=="number"&&is>0&&(B=1.5*is,N.O=B,N.j.info("backChannelRequestTimeoutMs_="+B)),B=N;const ss=b.g;if(ss){const cl=ss.g?ss.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cl){var te=B.h;te.g||cl.indexOf("spdy")==-1&&cl.indexOf("quic")==-1&&cl.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(Uh(te,te.h),te.h=null))}if(B.G){const Ju=ss.g?ss.g.getResponseHeader("X-HTTP-Session-Id"):null;Ju&&(B.wa=Ju,bt(B.J,B.G,Ju))}}N.I=3,N.l&&N.l.ra(),N.aa&&(N.T=Date.now()-b.F,N.j.info("Handshake RTT: "+N.T+"ms")),B=N;var Se=b;if(B.na=ky(B,B.L?B.ba:null,B.W),Se.L){Bh(B.h,Se);var $e=Se,cr=B.O;cr&&($e.H=cr),$e.D&&(Is($e),Ps($e)),B.g=Se}else Ny(B);N.i.length>0&&zs(N)}else pt[0]!="stop"&&pt[0]!="close"||Us(N,7);else N.I==3&&(pt[0]=="stop"||pt[0]=="close"?pt[0]=="stop"?Us(N,7):Yh(N):pt[0]!="noop"&&N.l&&N.l.qa(pt),N.A=0)}}wi(4)}catch{}}var pr=class{constructor(b,P){this.g=b,this.map=P}};function Lh(b){this.l=b||10,a.PerformanceNavigationTiming?(b=a.performance.getEntriesByType("navigation"),b=b.length>0&&(b[0].nextHopProtocol=="hq"||b[0].nextHopProtocol=="h2")):b=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=b?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function zh(b){return b.h?!0:b.g?b.g.size>=b.j:!1}function Os(b){return b.h?1:b.g?b.g.size:0}function js(b,P){return b.h?b.h==P:b.g?b.g.has(P):!1}function Uh(b,P){b.g?b.g.add(P):b.h=P}function Bh(b,P){b.h&&b.h==P?b.h=null:b.g&&b.g.has(P)&&b.g.delete(P)}Lh.prototype.cancel=function(){if(this.i=qh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const b of this.g.values())b.cancel();this.g.clear()}};function qh(b){if(b.h!=null)return b.i.concat(b.h.G);if(b.g!=null&&b.g.size!==0){let P=b.i;for(const N of b.g.values())P=P.concat(N.G);return P}return y(b.i)}var Ey=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hu(b,P){if(b){b=b.split("&");for(let N=0;N<b.length;N++){const B=b[N].indexOf("=");let Q,te=null;B>=0?(Q=b[N].substring(0,B),te=b[N].substring(B+1)):Q=b[N],P(Q,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function Jn(b){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let P;b instanceof Jn?(this.l=b.l,Br(this,b.j),this.o=b.o,this.g=b.g,To(this,b.u),this.h=b.h,Vh(this,Py(b.i)),this.m=b.m):b&&(P=String(b).match(Ey))?(this.l=!1,Br(this,P[1]||"",!0),this.o=Ms(P[2]||""),this.g=Ms(P[3]||"",!0),To(this,P[4]),this.h=Ms(P[5]||"",!0),Vh(this,P[6]||"",!0),this.m=Ms(P[7]||"")):(this.l=!1,this.i=new Po(null,this.l))}Jn.prototype.toString=function(){const b=[];var P=this.j;P&&b.push(tl(P,Wu,!0),":");var N=this.g;return(N||P=="file")&&(b.push("//"),(P=this.o)&&b.push(tl(P,Wu,!0),"@"),b.push(Sa(N).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.u,N!=null&&b.push(":",String(N))),(N=this.h)&&(this.g&&N.charAt(0)!="/"&&b.push("/"),b.push(tl(N,N.charAt(0)=="/"?Fh:Ay,!0))),(N=this.i.toString())&&b.push("?",N),(N=this.m)&&b.push("#",tl(N,Ty)),b.join("")},Jn.prototype.resolve=function(b){const P=mr(this);let N=!!b.j;N?Br(P,b.j):N=!!b.o,N?P.o=b.o:N=!!b.g,N?P.g=b.g:N=b.u!=null;var B=b.h;if(N)To(P,b.u);else if(N=!!b.h){if(B.charAt(0)!="/")if(this.g&&!this.h)B="/"+B;else{var Q=P.h.lastIndexOf("/");Q!=-1&&(B=P.h.slice(0,Q+1)+B)}if(Q=B,Q==".."||Q==".")B="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){B=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const te=[];for(let Se=0;Se<Q.length;){const $e=Q[Se++];$e=="."?B&&Se==Q.length&&te.push(""):$e==".."?((te.length>1||te.length==1&&te[0]!="")&&te.pop(),B&&Se==Q.length&&te.push("")):(te.push($e),B=!0)}B=te.join("/")}else B=Q}return N?P.h=B:N=b.i.toString()!=="",N?Vh(P,Py(b.i)):N=!!b.m,N&&(P.m=b.m),P};function mr(b){return new Jn(b)}function Br(b,P,N){b.j=N?Ms(P,!0):P,b.j&&(b.j=b.j.replace(/:$/,""))}function To(b,P){if(P){if(P=Number(P),isNaN(P)||P<0)throw Error("Bad port number "+P);b.u=P}else b.u=null}function Vh(b,P,N){P instanceof Po?(b.i=P,Gu(b.i,b.l)):(N||(P=tl(P,Ro)),b.i=new Po(P,b.l))}function bt(b,P,N){b.i.set(P,N)}function el(b){return bt(b,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),b}function Ms(b,P){return b?P?decodeURI(b.replace(/%25/g,"%2525")):decodeURIComponent(b):""}function tl(b,P,N){return typeof b=="string"?(b=encodeURI(b).replace(P,jn),N&&(b=b.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b):null}function jn(b){return b=b.charCodeAt(0),"%"+(b>>4&15).toString(16)+(b&15).toString(16)}var Wu=/[#\/\?@]/g,Ay=/[#\?:]/g,Fh=/[#\?]/g,Ro=/[#\?@]/g,Ty=/#/g;function Po(b,P){this.h=this.g=null,this.i=b||null,this.j=!!P}function Mn(b){b.g||(b.g=new Map,b.h=0,b.i&&Hu(b.i,function(P,N){b.add(decodeURIComponent(P.replace(/\+/g," ")),N)}))}t=Po.prototype,t.add=function(b,P){Mn(this),this.i=null,b=Io(this,b);let N=this.g.get(b);return N||this.g.set(b,N=[]),N.push(P),this.h+=1,this};function Ry(b,P){Mn(b),P=Io(b,P),b.g.has(P)&&(b.i=null,b.h-=b.g.get(P).length,b.g.delete(P))}function Hh(b,P){return Mn(b),P=Io(b,P),b.g.has(P)}t.forEach=function(b,P){Mn(this),this.g.forEach(function(N,B){N.forEach(function(Q){b.call(P,Q,B,this)},this)},this)};function Wh(b,P){Mn(b);let N=[];if(typeof P=="string")Hh(b,P)&&(N=N.concat(b.g.get(Io(b,P))));else for(b=Array.from(b.g.values()),P=0;P<b.length;P++)N=N.concat(b[P]);return N}t.set=function(b,P){return Mn(this),this.i=null,b=Io(this,b),Hh(this,b)&&(this.h-=this.g.get(b).length),this.g.set(b,[P]),this.h+=1,this},t.get=function(b,P){return b?(b=Wh(this,b),b.length>0?String(b[0]):P):P};function Ku(b,P,N){Ry(b,P),N.length>0&&(b.i=null,b.g.set(Io(b,P),y(N)),b.h+=N.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const b=[],P=Array.from(this.g.keys());for(let B=0;B<P.length;B++){var N=P[B];const Q=Sa(N);N=Wh(this,N);for(let te=0;te<N.length;te++){let Se=Q;N[te]!==""&&(Se+="="+Sa(N[te])),b.push(Se)}}return this.i=b.join("&")};function Py(b){const P=new Po;return P.i=b.i,b.g&&(P.g=new Map(b.g),P.h=b.h),P}function Io(b,P){return P=String(P),b.j&&(P=P.toLowerCase()),P}function Gu(b,P){P&&!b.j&&(Mn(b),b.i=null,b.g.forEach(function(N,B){const Q=B.toLowerCase();B!=Q&&(Ry(this,B),Ku(this,Q,N))},b)),b.j=P}function ts(b,P){const N=new Ji;if(a.Image){const B=new Image;B.onload=h(Ti,N,"TestLoadImage: loaded",!0,P,B),B.onerror=h(Ti,N,"TestLoadImage: error",!1,P,B),B.onabort=h(Ti,N,"TestLoadImage: abort",!1,P,B),B.ontimeout=h(Ti,N,"TestLoadImage: timeout",!1,P,B),a.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=b}else P(!1)}function Kh(b,P){const N=new Ji,B=new AbortController,Q=setTimeout(()=>{B.abort(),Ti(N,"TestPingServer: timeout",!1,P)},1e4);fetch(b,{signal:B.signal}).then(te=>{clearTimeout(Q),te.ok?Ti(N,"TestPingServer: ok",!0,P):Ti(N,"TestPingServer: server error",!1,P)}).catch(()=>{clearTimeout(Q),Ti(N,"TestPingServer: error",!1,P)})}function Ti(b,P,N,B,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),B(N)}catch{}}function No(){this.g=new Lu}function Ds(b){this.i=b.Sb||null,this.h=b.ab||!1}p(Ds,zu),Ds.prototype.g=function(){return new rl(this.i,this.h)};function rl(b,P){Bt.call(this),this.H=b,this.o=P,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(rl,Bt),t=rl.prototype,t.open=function(b,P){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=b,this.D=P,this.readyState=1,rs(this)},t.send=function(b){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const P={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};b&&(P.body=b),(this.H||a).fetch(new Request(this.D,P)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Oo(this)),this.readyState=0},t.Pa=function(b){if(this.g&&(this.l=b,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=b.headers,this.readyState=2,rs(this)),this.g&&(this.readyState=3,rs(this),this.g)))if(this.responseType==="arraybuffer")b.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in b){if(this.j=b.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;$u(this)}else b.text().then(this.Oa.bind(this),this.ga.bind(this))};function $u(b){b.j.read().then(b.Ma.bind(b)).catch(b.ga.bind(b))}t.Ma=function(b){if(this.g){if(this.o&&b.value)this.response.push(b.value);else if(!this.o){var P=b.value?b.value:new Uint8Array(0);(P=this.B.decode(P,{stream:!b.done}))&&(this.response=this.responseText+=P)}b.done?Oo(this):rs(this),this.readyState==3&&$u(this)}},t.Oa=function(b){this.g&&(this.response=this.responseText=b,Oo(this))},t.Na=function(b){this.g&&(this.response=b,Oo(this))},t.ga=function(){this.g&&Oo(this)};function Oo(b){b.readyState=4,b.l=null,b.j=null,b.B=null,rs(b)}t.setRequestHeader=function(b,P){this.A.append(b,P)},t.getResponseHeader=function(b){return this.h&&this.h.get(b.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const b=[],P=this.h.entries();for(var N=P.next();!N.done;)N=N.value,b.push(N[0]+": "+N[1]),N=P.next();return b.join(`\r
`)};function rs(b){b.onreadystatechange&&b.onreadystatechange.call(b)}Object.defineProperty(rl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(b){this.m=b?"include":"same-origin"}});function Ri(b){let P="";return me(b,function(N,B){P+=B,P+=":",P+=N,P+=`\r
`}),P}function nl(b,P,N){e:{for(B in N){var B=!1;break e}B=!0}B||(N=Ri(N),typeof b=="string"?N!=null&&Sa(N):bt(b,P,N))}function _t(b){Bt.call(this),this.headers=new Map,this.L=b||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(_t,Bt);var ks=/^https?$/i,Gh=["POST","PUT"];t=_t.prototype,t.Fa=function(b){this.H=b},t.ea=function(b,P,N,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+b);P=P?P.toUpperCase():"GET",this.D=b,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():kh.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(P,String(b),!0),this.B=!1}catch(te){il(this,te);return}if(b=N||"",N=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var Q in B)N.set(Q,B[Q]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const te of B.keys())N.set(te,B.get(te));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(N.keys()).find(te=>te.toLowerCase()=="content-type"),Q=a.FormData&&b instanceof a.FormData,!(Array.prototype.indexOf.call(Gh,P,void 0)>=0)||B||Q||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,Se]of N)this.g.setRequestHeader(te,Se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(b),this.v=!1}catch(te){il(this,te)}};function il(b,P){b.h=!1,b.g&&(b.j=!0,b.g.abort(),b.j=!1),b.l=P,b.o=5,$h(b),Ca(b)}function $h(b){b.A||(b.A=!0,Gt(b,"complete"),Gt(b,"error"))}t.abort=function(b){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=b||7,Gt(this,"complete"),Gt(this,"abort"),Ca(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ca(this,!0)),_t.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?sl(this):this.Xa())},t.Xa=function(){sl(this)};function sl(b){if(b.h&&typeof s<"u"){if(b.v&&ns(b)==4)setTimeout(b.Ca.bind(b),0);else if(Gt(b,"readystatechange"),ns(b)==4){b.h=!1;try{const te=b.ca();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var P=!0;break e;default:P=!1}var N;if(!(N=P)){var B;if(B=te===0){let Se=String(b.D).match(Ey)[1]||null;!Se&&a.self&&a.self.location&&(Se=a.self.location.protocol.slice(0,-1)),B=!ks.test(Se?Se.toLowerCase():"")}N=B}if(N)Gt(b,"complete"),Gt(b,"success");else{b.o=6;try{var Q=ns(b)>2?b.g.statusText:""}catch{Q=""}b.l=Q+" ["+b.ca()+"]",$h(b)}}finally{Ca(b)}}}}function Ca(b,P){if(b.g){b.m&&(clearTimeout(b.m),b.m=null);const N=b.g;b.g=null,P||Gt(b,"ready");try{N.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ns(b){return b.g?b.g.readyState:0}t.ca=function(){try{return ns(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(b){if(this.g){var P=this.g.responseText;return b&&P.indexOf(b)==0&&(P=P.substring(b.length)),Xc(P)}};function Xr(b){try{if(!b.g)return null;if("response"in b.g)return b.g.response;switch(b.F){case"":case"text":return b.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in b.g)return b.g.mozResponseArrayBuffer}return null}catch{return null}}function xa(b){const P={};b=(b.g&&ns(b)>=2&&b.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<b.length;B++){if(q(b[B]))continue;var N=xy(b[B]);const Q=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const te=P[Q]||[];P[Q]=te,te.push(N)}_e(P,function(B){return B.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ls(b,P,N){return N&&N.internalChannelParams&&N.internalChannelParams[b]||P}function jo(b){this.za=0,this.i=[],this.j=new Ji,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ls("failFast",!1,b),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ls("baseRetryDelayMs",5e3,b),this.Za=Ls("retryDelaySeedMs",1e4,b),this.Ta=Ls("forwardChannelMaxRetries",2,b),this.va=Ls("forwardChannelRequestTimeoutMs",2e4,b),this.ma=b&&b.xmlHttpFactory||void 0,this.Ua=b&&b.Rb||void 0,this.Aa=b&&b.useFetchStreams||!1,this.O=void 0,this.L=b&&b.supportsCrossDomainXhr||!1,this.M="",this.h=new Lh(b&&b.concurrentRequestLimit),this.Ba=new No,this.S=b&&b.fastHandshake||!1,this.R=b&&b.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=b&&b.Pb||!1,b&&b.ua&&this.j.ua(),b&&b.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&b&&b.detectBufferingProxy||!1,this.ia=void 0,b&&b.longPollingTimeout&&b.longPollingTimeout>0&&(this.ia=b.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=jo.prototype,t.ka=8,t.I=1,t.connect=function(b,P,N,B){Zt(0),this.W=b,this.H=P||{},N&&B!==void 0&&(this.H.OSID=N,this.H.OAID=B),this.F=this.X,this.J=ky(this,null,this.W),zs(this)};function Yh(b){if(Yu(b),b.I==3){var P=b.V++,N=mr(b.J);if(bt(N,"SID",b.M),bt(N,"RID",P),bt(N,"TYPE","terminate"),al(b,N),P=new Zi(b,b.j,P),P.M=2,P.A=el(mr(N)),N=!1,a.navigator&&a.navigator.sendBeacon)try{N=a.navigator.sendBeacon(P.A.toString(),"")}catch{}!N&&a.Image&&(new Image().src=P.A,N=!0),N||(P.g=Ly(P.j,null),P.g.ea(P.A)),P.F=Date.now(),Ps(P)}Dy(b)}function Mo(b){b.g&&(Qh(b),b.g.cancel(),b.g=null)}function Yu(b){Mo(b),b.v&&(a.clearTimeout(b.v),b.v=null),Qu(b),b.h.cancel(),b.m&&(typeof b.m=="number"&&a.clearTimeout(b.m),b.m=null)}function zs(b){if(!zh(b.h)&&!b.m){b.m=!0;var P=b.Ea;D||O(),z||(D(),z=!0),j.add(P,b),b.D=0}}function Xu(b,P){return Os(b.h)>=b.h.j-(b.m?1:0)?!1:b.m?(b.i=P.G.concat(b.i),!0):b.I==1||b.I==2||b.D>=(b.Sa?0:b.Ta)?!1:(b.m=Ei(d(b.Ea,b,P),My(b,b.D)),b.D++,!0)}t.Ea=function(b){if(this.m)if(this.m=null,this.I==1){if(!b){this.V=Math.floor(Math.random()*1e5),b=this.V++;const Q=new Zi(this,this.j,b);let te=this.o;if(this.U&&(te?(te=H(te),le(te,this.U)):te=this.U),this.u!==null||this.R||(Q.J=te,te=null),this.S)e:{for(var P=0,N=0;N<this.i.length;N++){t:{var B=this.i[N];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(P+=B,P>4096){P=N;break e}if(P===4096||N===this.i.length-1){P=N+1;break e}}P=1e3}else P=1e3;P=Iy(this,Q,P),N=mr(this.J),bt(N,"RID",b),bt(N,"CVER",22),this.G&&bt(N,"X-HTTP-Session-Id",this.G),al(this,N),te&&(this.R?P="headers="+Sa(Ri(te))+"&"+P:this.u&&nl(N,this.u,te)),Uh(this.h,Q),this.Ra&&bt(N,"TYPE","init"),this.S?(bt(N,"$req",P),bt(N,"SID","null"),Q.U=!0,Rs(Q,N,null)):Rs(Q,N,P),this.I=2}}else this.I==3&&(b?Xh(this,b):this.i.length==0||zh(this.h)||Xh(this))};function Xh(b,P){var N;P?N=P.l:N=b.V++;const B=mr(b.J);bt(B,"SID",b.M),bt(B,"RID",N),bt(B,"AID",b.K),al(b,B),b.u&&b.o&&nl(B,b.u,b.o),N=new Zi(b,b.j,N,b.D+1),b.u===null&&(N.J=b.o),P&&(b.i=P.G.concat(b.i)),P=Iy(b,N,1e3),N.H=Math.round(b.va*.5)+Math.round(b.va*.5*Math.random()),Uh(b.h,N),Rs(N,B,P)}function al(b,P){b.H&&me(b.H,function(N,B){bt(P,B,N)}),b.l&&me({},function(N,B){bt(P,B,N)})}function Iy(b,P,N){N=Math.min(b.i.length,N);const B=b.l?d(b.l.Ka,b.l,b):null;e:{var Q=b.i;let $e=-1;for(;;){const cr=["count="+N];$e==-1?N>0?($e=Q[0].g,cr.push("ofs="+$e)):$e=0:cr.push("ofs="+$e);let pt=!0;for(let qt=0;qt<N;qt++){var te=Q[qt].g;const Pi=Q[qt].map;if(te-=$e,te<0)$e=Math.max(0,Q[qt].g-100),pt=!1;else try{te="req"+te+"_"||"";try{var Se=Pi instanceof Map?Pi:Object.entries(Pi);for(const[Bs,is]of Se){let ss=is;c(is)&&(ss=Pr(is)),cr.push(te+Bs+"="+encodeURIComponent(ss))}}catch(Bs){throw cr.push(te+"type="+encodeURIComponent("_badmap")),Bs}}catch{B&&B(Pi)}}if(pt){Se=cr.join("&");break e}}Se=void 0}return b=b.i.splice(0,N),P.G=b,Se}function Ny(b){if(!b.g&&!b.v){b.Y=1;var P=b.Da;D||O(),z||(D(),z=!0),j.add(P,b),b.A=0}}function ol(b){return b.g||b.v||b.A>=3?!1:(b.Y++,b.v=Ei(d(b.Da,b),My(b,b.A)),b.A++,!0)}t.Da=function(){if(this.v=null,Oy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var b=4*this.T;this.j.info("BP detection timer enabled: "+b),this.B=Ei(d(this.Wa,this),b)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Zt(10),Mo(this),Oy(this))};function Qh(b){b.B!=null&&(a.clearTimeout(b.B),b.B=null)}function Oy(b){b.g=new Zi(b,b.j,"rpc",b.Y),b.u===null&&(b.g.J=b.o),b.g.P=0;var P=mr(b.na);bt(P,"RID","rpc"),bt(P,"SID",b.M),bt(P,"AID",b.K),bt(P,"CI",b.F?"0":"1"),!b.F&&b.ia&&bt(P,"TO",b.ia),bt(P,"TYPE","xmlhttp"),al(b,P),b.u&&b.o&&nl(P,b.u,b.o),b.O&&(b.g.H=b.O);var N=b.g;b=b.ba,N.M=1,N.A=el(mr(P)),N.u=null,N.R=!0,Vu(N,b)}t.Va=function(){this.C!=null&&(this.C=null,Mo(this),ol(this),Zt(19))};function Qu(b){b.C!=null&&(a.clearTimeout(b.C),b.C=null)}function jy(b,P){var N=null;if(b.g==P){Qu(b),Qh(b),b.g=null;var B=2}else if(js(b.h,P))N=P.G,Bh(b.h,P),B=1;else return;if(b.I!=0){if(P.o)if(B==1){N=P.u?P.u.length:0,P=Date.now()-P.F;var Q=b.D;B=Ao(),Gt(B,new _i(B,N)),zs(b)}else Ny(b);else if(Q=P.m,Q==3||Q==0&&P.X>0||!(B==1&&Xu(b,P)||B==2&&ol(b)))switch(N&&N.length>0&&(P=b.h,P.i=P.i.concat(N)),Q){case 1:Us(b,5);break;case 4:Us(b,10);break;case 3:Us(b,6);break;default:Us(b,2)}}}function My(b,P){let N=b.Qa+Math.floor(Math.random()*b.Za);return b.isActive()||(N*=2),N*P}function Us(b,P){if(b.j.info("Error code "+P),P==2){var N=d(b.bb,b),B=b.Ua;const Q=!B;B=new Jn(B||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Br(B,"https"),el(B),Q?ts(B.toString(),N):Kh(B.toString(),N)}else Zt(2);b.I=0,b.l&&b.l.pa(P),Dy(b),Yu(b)}t.bb=function(b){b?(this.j.info("Successfully pinged google.com"),Zt(2)):(this.j.info("Failed to ping google.com"),Zt(1))};function Dy(b){if(b.I=0,b.ja=[],b.l){const P=qh(b.h);(P.length!=0||b.i.length!=0)&&(S(b.ja,P),S(b.ja,b.i),b.h.i.length=0,y(b.i),b.i.length=0),b.l.oa()}}function ky(b,P,N){var B=N instanceof Jn?mr(N):new Jn(N);if(B.g!="")P&&(B.g=P+"."+B.g),To(B,B.u);else{var Q=a.location;B=Q.protocol,P=P?P+"."+Q.hostname:Q.hostname,Q=+Q.port;const te=new Jn(null);B&&Br(te,B),P&&(te.g=P),Q&&To(te,Q),N&&(te.h=N),B=te}return N=b.G,P=b.wa,N&&P&&bt(B,N,P),bt(B,"VER",b.ka),al(b,B),B}function Ly(b,P,N){if(P&&!b.L)throw Error("Can't create secondary domain capable XhrIo object.");return P=b.Aa&&!b.ma?new _t(new Ds({ab:N})):new _t(b.ma),P.Fa(b.L),P}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function zy(){}t=zy.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Do(){}Do.prototype.g=function(b,P){return new _n(b,P)};function _n(b,P){Bt.call(this),this.g=new jo(P),this.l=b,this.h=P&&P.messageUrlParams||null,b=P&&P.messageHeaders||null,P&&P.clientProtocolHeaderRequired&&(b?b["X-Client-Protocol"]="webchannel":b={"X-Client-Protocol":"webchannel"}),this.g.o=b,b=P&&P.initMessageHeaders||null,P&&P.messageContentType&&(b?b["X-WebChannel-Content-Type"]=P.messageContentType:b={"X-WebChannel-Content-Type":P.messageContentType}),P&&P.sa&&(b?b["X-WebChannel-Client-Profile"]=P.sa:b={"X-WebChannel-Client-Profile":P.sa}),this.g.U=b,(b=P&&P.Qb)&&!q(b)&&(this.g.u=b),this.A=P&&P.supportsCrossDomainXhr||!1,this.v=P&&P.sendRawJson||!1,(P=P&&P.httpSessionIdParam)&&!q(P)&&(this.g.G=P,b=this.h,b!==null&&P in b&&(b=this.h,P in b&&delete b[P])),this.j=new wa(this)}p(_n,Bt),_n.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){Yh(this.g)},_n.prototype.o=function(b){var P=this.g;if(typeof b=="string"){var N={};N.__data__=b,b=N}else this.v&&(N={},N.__data__=Pr(b),b=N);P.i.push(new pr(P.Ya++,b)),P.I==3&&zs(P)},_n.prototype.N=function(){this.g.l=null,delete this.j,Yh(this.g),delete this.g,_n.Z.N.call(this)};function Uy(b){Ir.call(this),b.__headers__&&(this.headers=b.__headers__,this.statusCode=b.__status__,delete b.__headers__,delete b.__status__);var P=b.__sm__;if(P){e:{for(const N in P){b=N;break e}b=void 0}(this.i=b)&&(b=this.i,P=P!==null&&b in P?P[b]:void 0),this.data=P}else this.data=b}p(Uy,Ir);function By(){On.call(this),this.status=1}p(By,On);function wa(b){this.g=b}p(wa,zy),wa.prototype.ra=function(){Gt(this.g,"a")},wa.prototype.qa=function(b){Gt(this.g,new Uy(b))},wa.prototype.pa=function(b){Gt(this.g,new By)},wa.prototype.oa=function(){Gt(this.g,"b")},Do.prototype.createWebChannel=Do.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,b7=function(){return new Do},y7=function(){return Ao()},g7=$t,yT={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Jc.NO_ERROR=0,Jc.TIMEOUT=8,Jc.HTTP_ERROR=6,_b=Jc,Dh.COMPLETE="complete",v7=Dh,Uu.EventType=Xn,Xn.OPEN="a",Xn.CLOSE="b",Xn.ERROR="c",Xn.MESSAGE="d",Bt.prototype.listen=Bt.prototype.J,zv=Uu,_t.prototype.listenOnce=_t.prototype.K,_t.prototype.getLastError=_t.prototype.Ha,_t.prototype.getLastErrorCode=_t.prototype.ya,_t.prototype.getStatus=_t.prototype.ca,_t.prototype.getResponseJson=_t.prototype.La,_t.prototype.getResponseText=_t.prototype.la,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Fa,m7=_t}).apply(typeof K0<"u"?K0:typeof self<"u"?self:typeof window<"u"?window:{});const PD="@firebase/firestore",ID="4.9.2";class mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");let gh="12.3.0";const Su=new cP("@firebase/firestore");function Od(){return Su.logLevel}function Te(t,...e){if(Su.logLevel<=it.DEBUG){const r=e.map(CP);Su.debug(`Firestore (${gh}): ${t}`,...r)}}function ao(t,...e){if(Su.logLevel<=it.ERROR){const r=e.map(CP);Su.error(`Firestore (${gh}): ${t}`,...r)}}function Gd(t,...e){if(Su.logLevel<=it.WARN){const r=e.map(CP);Su.warn(`Firestore (${gh}): ${t}`,...r)}}function CP(t){if(typeof t=="string")return t;try{return(function(r){return JSON.stringify(r)})(t)}catch{return t}}function qe(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,S7(t,n,r)}function S7(t,e,r){let n=`FIRESTORE (${gh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw ao(n),new Error(n)}function gt(t,e,r,n){let i="Unexpected state";typeof r=="string"?i=r:n=r,t||S7(e,i,n)}function We(t,e){return t}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends va{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class eo{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}class C7{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ore{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(mn.UNAUTHENTICATED)))}shutdown(){}}class cre{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable((()=>r(this.token.user)))}shutdown(){this.changeListener=null}}class lre{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){gt(this.o===void 0,42304);let n=this.i;const i=u=>this.i!==n?(n=this.i,r(u)):Promise.resolve();let s=new eo;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new eo,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const u=s;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},c=u=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new eo)}}),0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(gt(typeof n.accessToken=="string",31837,{l:n}),new C7(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gt(e===null||typeof e=="string",2055,{h:e}),new mn(e)}}class ure{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class dre{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new ure(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable((()=>r(mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ND{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hre{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){gt(this.o===void 0,3512);const n=s=>{s.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Te("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>n(s)))};const i=s=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ND(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(gt(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new ND(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function fre(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}class xP{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=fre(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<r&&(n+=e.charAt(i[s]%62))}return n}}function st(t,e){return t<e?-1:t>e?1:0}function bT(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const i=t.charAt(n),s=e.charAt(n);if(i!==s)return e_(i)===e_(s)?st(i,s):e_(i)?1:-1}return st(t.length,e.length)}const pre=55296,mre=57343;function e_(t){const e=t.charCodeAt(0);return e>=pre&&e<=mre}function $d(t,e,r){return t.length===e.length&&t.every(((n,i)=>r(n,e[i])))}const OD="__name__";class Gs{constructor(e,r,n){r===void 0?r=0:r>e.length&&qe(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&qe(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Gs.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Gs?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const s=Gs.compareSegments(e.get(i),r.get(i));if(s!==0)return s}return st(e.length,r.length)}static compareSegments(e,r){const n=Gs.isNumericId(e),i=Gs.isNumericId(r);return n&&!i?-1:!n&&i?1:n&&i?Gs.extractNumericId(e).compare(Gs.extractNumericId(r)):bT(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _c.fromString(e.substring(4,e.length-2))}}class Mt extends Gs{construct(e,r,n){return new Mt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new xe(ue.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((i=>i.length>0)))}return new Mt(r)}static emptyPath(){return new Mt([])}}const vre=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends Gs{construct(e,r,n){return new on(e,r,n)}static isValidIdentifier(e){return vre.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===OD}static keyField(){return new on([OD])}static fromServerFormat(e){const r=[];let n="",i=0;const s=()=>{if(n.length===0)throw new xe(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new xe(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new xe(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(n+=c,i++):(s(),i++)}if(s(),a)throw new xe(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new on(r)}static emptyPath(){return new on([])}}class De{constructor(e){this.path=e}static fromPath(e){return new De(Mt.fromString(e))}static fromName(e){return new De(Mt.fromString(e).popFirst(5))}static empty(){return new De(Mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Mt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new De(new Mt(e.slice()))}}function x7(t,e,r){if(!r)throw new xe(ue.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gre(t,e,r,n){if(e===!0&&n===!0)throw new xe(ue.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function jD(t){if(!De.isDocumentKey(t))throw new xe(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function MD(t){if(De.isDocumentKey(t))throw new xe(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function w7(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function vC(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":qe(12329,{type:typeof t})}function Wn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xe(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=vC(t);throw new xe(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function yre(t,e){if(e<=0)throw new xe(ue.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function _r(t,e){const r={typeString:t};return e&&(r.value=e),r}function Dg(t,e){if(!w7(t))throw new xe(ue.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const i=e[n].typeString,s="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const a=t[n];if(i&&typeof a!==i){r=`JSON field '${n}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new xe(ue.INVALID_ARGUMENT,r);return!0}const DD=-62135596800,kD=1e6;class Ee{static now(){return Ee.fromMillis(Date.now())}static fromDate(e){return Ee.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*kD);return new Ee(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new xe(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new xe(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<DD)throw new xe(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kD}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ee._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dg(e,Ee._jsonSchema))return new Ee(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-DD;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ee._jsonSchemaVersion="firestore/timestamp/1.0",Ee._jsonSchema={type:_r("string",Ee._jsonSchemaVersion),seconds:_r("number"),nanoseconds:_r("number")};class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new Ee(0,0))}static max(){return new Fe(new Ee(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ig=-1;function bre(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=Fe.fromTimestamp(n===1e9?new Ee(r+1,0):new Ee(r,n));return new Pc(i,De.empty(),e)}function Sre(t){return new Pc(t.readTime,t.key,ig)}class Pc{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Pc(Fe.min(),De.empty(),ig)}static max(){return new Pc(Fe.max(),De.empty(),ig)}}function Cre(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=De.comparator(t.documentKey,e.documentKey),r!==0?r:st(t.largestBatchId,e.largestBatchId))}const xre="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wre{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function yh(t){if(t.code!==ue.FAILED_PRECONDITION||t.message!==xre)throw t;Te("LocalStore","Unexpectedly lost primary lease")}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&qe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new he(((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,i)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof he?r:he.resolve(r)}catch(r){return he.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):he.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):he.reject(r)}static resolve(e){return new he(((r,n)=>{r(e)}))}static reject(e){return new he(((r,n)=>{n(e)}))}static waitFor(e){return new he(((r,n)=>{let i=0,s=0,a=!1;e.forEach((c=>{++i,c.next((()=>{++s,a&&s===i&&r()}),(u=>n(u)))})),a=!0,s===i&&r()}))}static or(e){let r=he.resolve(!1);for(const n of e)r=r.next((i=>i?he.resolve(i):n()));return r}static forEach(e,r){const n=[];return e.forEach(((i,s)=>{n.push(r.call(this,i,s))})),this.waitFor(n)}static mapArray(e,r){return new he(((n,i)=>{const s=e.length,a=new Array(s);let c=0;for(let u=0;u<s;u++){const d=u;r(e[d]).next((h=>{a[d]=h,++c,c===s&&n(a)}),(h=>i(h)))}}))}static doWhile(e,r){return new he(((n,i)=>{const s=()=>{e()===!0?r().next((()=>{s()}),i):n()};s()}))}}function _re(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function bh(t){return t.name==="IndexedDbTransactionError"}class gC{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}gC.ce=-1;const wP=-1;function yC(t){return t==null}function Jb(t){return t===0&&1/t==-1/0}function Ere(t){return typeof t=="number"&&Number.isInteger(t)&&!Jb(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const _7="";function Are(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=LD(e)),e=Tre(t.get(r),e);return LD(e)}function Tre(t,e){let r=e;const n=t.length;for(let i=0;i<n;i++){const s=t.charAt(i);switch(s){case"\0":r+="";break;case _7:r+="";break;default:r+=s}}return r}function LD(t){return t+_7+""}function zD(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Vc(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function E7(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Jt{constructor(e,r){this.comparator=e,this.root=r||an.EMPTY}insert(e,r){return new Jt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,an.BLACK,null,null))}remove(e){return new Jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,an.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new G0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new G0(this.root,e,this.comparator,!1)}getReverseIterator(){return new G0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new G0(this.root,e,this.comparator,!0)}}class G0{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class an{constructor(e,r,n,i,s){this.key=e,this.value=r,this.color=n??an.RED,this.left=i??an.EMPTY,this.right=s??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,s){return new an(e??this.key,r??this.value,n??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,r,n),null):s===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return an.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw qe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw qe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw qe(27949);return e+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw qe(57766)}get value(){throw qe(16141)}get color(){throw qe(16727)}get left(){throw qe(29726)}get right(){throw qe(36894)}copy(e,r,n,i,s){return this}insert(e,r,n){return new an(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class jr{constructor(e){this.comparator=e,this.data=new Jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new UD(this.data.getIterator())}getIteratorFrom(e){return new UD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof jr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new jr(this.comparator);return r.data=e,r}}class UD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class fi{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new fi([])}unionWith(e){let r=new jr(on.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new fi(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return $d(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}class A7 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ln{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new A7("Invalid base64 string: "+s):s}})(e);return new ln(r)}static fromUint8Array(e){const r=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new ln(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const Rre=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ic(t){if(gt(!!t,39018),typeof t=="string"){let e=0;const r=Rre.exec(t);if(gt(!!r,46558,{timestamp:t}),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:hr(t.seconds),nanos:hr(t.nanos)}}function hr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Nc(t){return typeof t=="string"?ln.fromBase64String(t):ln.fromUint8Array(t)}const T7="server_timestamp",R7="__type__",P7="__previous_value__",I7="__local_write_time__";function _P(t){return(t?.mapValue?.fields||{})[R7]?.stringValue===T7}function bC(t){const e=t.mapValue.fields[P7];return _P(e)?bC(e):e}function sg(t){const e=Ic(t.mapValue.fields[I7].timestampValue);return new Ee(e.seconds,e.nanos)}class Pre{constructor(e,r,n,i,s,a,c,u,d,h){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const Zb="(default)";class ag{constructor(e,r){this.projectId=e,this.database=r||Zb}static empty(){return new ag("","")}get isDefaultDatabase(){return this.database===Zb}isEqual(e){return e instanceof ag&&e.projectId===this.projectId&&e.database===this.database}}const N7="__type__",Ire="__max__",$0={mapValue:{}},O7="__vector__",eS="value";function Oc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_P(t)?4:Ore(t)?9007199254740991:Nre(t)?10:11:qe(28295,{value:t})}function la(t,e){if(t===e)return!0;const r=Oc(t);if(r!==Oc(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return sg(t).isEqual(sg(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Ic(i.timestampValue),c=Ic(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,s){return Nc(i.bytesValue).isEqual(Nc(s.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,s){return hr(i.geoPointValue.latitude)===hr(s.geoPointValue.latitude)&&hr(i.geoPointValue.longitude)===hr(s.geoPointValue.longitude)})(t,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return hr(i.integerValue)===hr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=hr(i.doubleValue),c=hr(s.doubleValue);return a===c?Jb(a)===Jb(c):isNaN(a)&&isNaN(c)}return!1})(t,e);case 9:return $d(t.arrayValue.values||[],e.arrayValue.values||[],la);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},c=s.mapValue.fields||{};if(zD(a)!==zD(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!la(a[u],c[u])))return!1;return!0})(t,e);default:return qe(52216,{left:t})}}function og(t,e){return(t.values||[]).find((r=>la(r,e)))!==void 0}function Yd(t,e){if(t===e)return 0;const r=Oc(t),n=Oc(e);if(r!==n)return st(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return st(t.booleanValue,e.booleanValue);case 2:return(function(s,a){const c=hr(s.integerValue||s.doubleValue),u=hr(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(t,e);case 3:return BD(t.timestampValue,e.timestampValue);case 4:return BD(sg(t),sg(e));case 5:return bT(t.stringValue,e.stringValue);case 6:return(function(s,a){const c=Nc(s),u=Nc(a);return c.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(s,a){const c=s.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const h=st(c[d],u[d]);if(h!==0)return h}return st(c.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(s,a){const c=st(hr(s.latitude),hr(a.latitude));return c!==0?c:st(hr(s.longitude),hr(a.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return qD(t.arrayValue,e.arrayValue);case 10:return(function(s,a){const c=s.fields||{},u=a.fields||{},d=c[eS]?.arrayValue,h=u[eS]?.arrayValue,p=st(d?.values?.length||0,h?.values?.length||0);return p!==0?p:qD(d,h)})(t.mapValue,e.mapValue);case 11:return(function(s,a){if(s===$0.mapValue&&a===$0.mapValue)return 0;if(s===$0.mapValue)return 1;if(a===$0.mapValue)return-1;const c=s.fields||{},u=Object.keys(c),d=a.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const g=bT(u[p],h[p]);if(g!==0)return g;const y=Yd(c[u[p]],d[h[p]]);if(y!==0)return y}return st(u.length,h.length)})(t.mapValue,e.mapValue);default:throw qe(23264,{he:r})}}function BD(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return st(t,e);const r=Ic(t),n=Ic(e),i=st(r.seconds,n.seconds);return i!==0?i:st(r.nanos,n.nanos)}function qD(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const s=Yd(r[i],n[i]);if(s)return s}return st(r.length,n.length)}function Xd(t){return ST(t)}function ST(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=Ic(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return Nc(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return De.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",i=!0;for(const s of r.values||[])i?i=!1:n+=",",n+=ST(s);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let i="{",s=!0;for(const a of n)s?s=!1:i+=",",i+=`${a}:${ST(r.fields[a])}`;return i+"}"})(t.mapValue):qe(61005,{value:t})}function Eb(t){switch(Oc(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bC(t);return e?16+Eb(e):16;case 5:return 2*t.stringValue.length;case 6:return Nc(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((i,s)=>i+Eb(s)),0)})(t.arrayValue);case 10:case 11:return(function(n){let i=0;return Vc(n.fields,((s,a)=>{i+=s.length+Eb(a)})),i})(t.mapValue);default:throw qe(13486,{value:t})}}function VD(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function CT(t){return!!t&&"integerValue"in t}function EP(t){return!!t&&"arrayValue"in t}function FD(t){return!!t&&"nullValue"in t}function HD(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ab(t){return!!t&&"mapValue"in t}function Nre(t){return(t?.mapValue?.fields||{})[N7]?.stringValue===O7}function Gv(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Vc(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=Gv(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Gv(t.arrayValue.values[r]);return e}return{...t}}function Ore(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Ire}class Fn{constructor(e){this.value=e}static empty(){return new Fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Ab(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gv(r)}setAll(e){let r=on.emptyPath(),n={},i=[];e.forEach(((a,c)=>{if(!r.isImmediateParentOf(c)){const u=this.getFieldsMap(r);this.applyChanges(u,n,i),n={},i=[],r=c.popLast()}a?n[c.lastSegment()]=Gv(a):i.push(c.lastSegment())}));const s=this.getFieldsMap(r);this.applyChanges(s,n,i)}delete(e){const r=this.field(e.popLast());Ab(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return la(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];Ab(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){Vc(r,((i,s)=>e[i]=s));for(const i of n)delete e[i]}clone(){return new Fn(Gv(this.value))}}function j7(t){const e=[];return Vc(t.fields,((r,n)=>{const i=new on([r]);if(Ab(n)){const s=j7(n.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new fi(e)}class vn{constructor(e,r,n,i,s,a,c){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new vn(e,0,Fe.min(),Fe.min(),Fe.min(),Fn.empty(),0)}static newFoundDocument(e,r,n,i){return new vn(e,1,r,Fe.min(),n,i,0)}static newNoDocument(e,r){return new vn(e,2,r,Fe.min(),Fe.min(),Fn.empty(),0)}static newUnknownDocument(e,r){return new vn(e,3,r,Fe.min(),Fe.min(),Fn.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class tS{constructor(e,r){this.position=e,this.inclusive=r}}function WD(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?n=De.comparator(De.fromName(a.referenceValue),r.key):n=Yd(a,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function KD(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!la(t.position[r],e.position[r]))return!1;return!0}class cg{constructor(e,r="asc"){this.field=e,this.dir=r}}function jre(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class M7{}class wr extends M7{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new Dre(e,r,n):r==="array-contains"?new zre(e,n):r==="in"?new Ure(e,n):r==="not-in"?new Bre(e,n):r==="array-contains-any"?new qre(e,n):new wr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new kre(e,n):new Lre(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Yd(r,this.value)):r!==null&&Oc(this.value)===Oc(r)&&this.matchesComparison(Yd(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return qe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bs extends M7{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new bs(e,r)}matches(e){return D7(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function D7(t){return t.op==="and"}function k7(t){return Mre(t)&&D7(t)}function Mre(t){for(const e of t.filters)if(e instanceof bs)return!1;return!0}function xT(t){if(t instanceof wr)return t.field.canonicalString()+t.op.toString()+Xd(t.value);if(k7(t))return t.filters.map((e=>xT(e))).join(",");{const e=t.filters.map((r=>xT(r))).join(",");return`${t.op}(${e})`}}function L7(t,e){return t instanceof wr?(function(n,i){return i instanceof wr&&n.op===i.op&&n.field.isEqual(i.field)&&la(n.value,i.value)})(t,e):t instanceof bs?(function(n,i){return i instanceof bs&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce(((s,a,c)=>s&&L7(a,i.filters[c])),!0):!1})(t,e):void qe(19439)}function z7(t){return t instanceof wr?(function(r){return`${r.field.canonicalString()} ${r.op} ${Xd(r.value)}`})(t):t instanceof bs?(function(r){return r.op.toString()+" {"+r.getFilters().map(z7).join(" ,")+"}"})(t):"Filter"}class Dre extends wr{constructor(e,r,n){super(e,r,n),this.key=De.fromName(n.referenceValue)}matches(e){const r=De.comparator(e.key,this.key);return this.matchesComparison(r)}}class kre extends wr{constructor(e,r){super(e,"in",r),this.keys=U7("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class Lre extends wr{constructor(e,r){super(e,"not-in",r),this.keys=U7("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function U7(t,e){return(e.arrayValue?.values||[]).map((r=>De.fromName(r.referenceValue)))}class zre extends wr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return EP(r)&&og(r.arrayValue,this.value)}}class Ure extends wr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&og(this.value.arrayValue,r)}}class Bre extends wr{constructor(e,r){super(e,"not-in",r)}matches(e){if(og(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!og(this.value.arrayValue,r)}}class qre extends wr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!EP(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>og(this.value.arrayValue,n)))}}class Vre{constructor(e,r=null,n=[],i=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.Te=null}}function GD(t,e=null,r=[],n=[],i=null,s=null,a=null){return new Vre(t,e,r,n,i,s,a)}function AP(t){const e=We(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>xT(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(s){return s.field.canonicalString()+s.dir})(n))).join(","),yC(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>Xd(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>Xd(n))).join(",")),e.Te=r}return e.Te}function TP(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!jre(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!L7(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!KD(t.startAt,e.startAt)&&KD(t.endAt,e.endAt)}function wT(t){return De.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Sh{constructor(e,r=null,n=[],i=[],s=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Fre(t,e,r,n,i,s,a,c){return new Sh(t,e,r,n,i,s,a,c)}function SC(t){return new Sh(t)}function $D(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function B7(t){return t.collectionGroup!==null}function $v(t){const e=We(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new jr(on.comparator);return a.filters.forEach((u=>{u.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((s=>{r.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new cg(s,n))})),r.has(on.keyField().canonicalString())||e.Ie.push(new cg(on.keyField(),n))}return e.Ie}function na(t){const e=We(t);return e.Ee||(e.Ee=Hre(e,$v(t))),e.Ee}function Hre(t,e){if(t.limitType==="F")return GD(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new cg(i.field,s)}));const r=t.endAt?new tS(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new tS(t.startAt.position,t.startAt.inclusive):null;return GD(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function _T(t,e){const r=t.filters.concat([e]);return new Sh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function rS(t,e,r){return new Sh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function CC(t,e){return TP(na(t),na(e))&&t.limitType===e.limitType}function q7(t){return`${AP(na(t))}|lt:${t.limitType}`}function jd(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((i=>z7(i))).join(", ")}]`),yC(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((i=>Xd(i))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((i=>Xd(i))).join(",")),`Target(${n})`})(na(t))}; limitType=${t.limitType})`}function xC(t,e){return e.isFoundDocument()&&(function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):De.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)})(t,e)&&(function(n,i){for(const s of $v(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(t,e)&&(function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0})(t,e)&&(function(n,i){return!(n.startAt&&!(function(a,c,u){const d=WD(a,c,u);return a.inclusive?d<=0:d<0})(n.startAt,$v(n),i)||n.endAt&&!(function(a,c,u){const d=WD(a,c,u);return a.inclusive?d>=0:d>0})(n.endAt,$v(n),i))})(t,e)}function Wre(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function V7(t){return(e,r)=>{let n=!1;for(const i of $v(t)){const s=Kre(i,e,r);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function Kre(t,e,r){const n=t.field.isKeyField()?De.comparator(e.key,r.key):(function(s,a,c){const u=a.data.field(s),d=c.data.field(s);return u!==null&&d!==null?Yd(u,d):qe(42886)})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return qe(19790,{direction:t.dir})}}class Nu{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Vc(this.inner,((r,n)=>{for(const[i,s]of n)e(i,s)}))}isEmpty(){return E7(this.inner)}size(){return this.innerSize}}const Gre=new Jt(De.comparator);function oo(){return Gre}const F7=new Jt(De.comparator);function Uv(...t){let e=F7;for(const r of t)e=e.insert(r.key,r);return e}function H7(t){let e=F7;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function ru(){return Yv()}function W7(){return Yv()}function Yv(){return new Nu((t=>t.toString()),((t,e)=>t.isEqual(e)))}const $re=new Jt(De.comparator),Yre=new jr(De.comparator);function at(...t){let e=Yre;for(const r of t)e=e.add(r);return e}const Xre=new jr(st);function Qre(){return Xre}function RP(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jb(e)?"-0":e}}function K7(t){return{integerValue:""+t}}function Jre(t,e){return Ere(e)?K7(e):RP(t,e)}class wC{constructor(){this._=void 0}}function Zre(t,e,r){return t instanceof nS?(function(i,s){const a={fields:{[R7]:{stringValue:T7},[I7]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&_P(s)&&(s=bC(s)),s&&(a.fields[P7]=s),{mapValue:a}})(r,e):t instanceof lg?$7(t,e):t instanceof ug?Y7(t,e):(function(i,s){const a=G7(i,s),c=YD(a)+YD(i.Ae);return CT(a)&&CT(i.Ae)?K7(c):RP(i.serializer,c)})(t,e)}function ene(t,e,r){return t instanceof lg?$7(t,e):t instanceof ug?Y7(t,e):r}function G7(t,e){return t instanceof iS?(function(n){return CT(n)||(function(s){return!!s&&"doubleValue"in s})(n)})(e)?e:{integerValue:0}:null}class nS extends wC{}class lg extends wC{constructor(e){super(),this.elements=e}}function $7(t,e){const r=X7(e);for(const n of t.elements)r.some((i=>la(i,n)))||r.push(n);return{arrayValue:{values:r}}}class ug extends wC{constructor(e){super(),this.elements=e}}function Y7(t,e){let r=X7(e);for(const n of t.elements)r=r.filter((i=>!la(i,n)));return{arrayValue:{values:r}}}class iS extends wC{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function YD(t){return hr(t.integerValue||t.doubleValue)}function X7(t){return EP(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function tne(t,e){return t.field.isEqual(e.field)&&(function(n,i){return n instanceof lg&&i instanceof lg||n instanceof ug&&i instanceof ug?$d(n.elements,i.elements,la):n instanceof iS&&i instanceof iS?la(n.Ae,i.Ae):n instanceof nS&&i instanceof nS})(t.transform,e.transform)}class rne{constructor(e,r){this.version=e,this.transformResults=r}}class Wi{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Wi}static exists(e){return new Wi(void 0,e)}static updateTime(e){return new Wi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tb(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class _C{}function Q7(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new PP(t.key,Wi.none()):new kg(t.key,t.data,Wi.none());{const r=t.data,n=Fn.empty();let i=new jr(on.comparator);for(let s of e.fields)if(!i.has(s)){let a=r.field(s);a===null&&s.length>1&&(s=s.popLast(),a=r.field(s)),a===null?n.delete(s):n.set(s,a),i=i.add(s)}return new Fc(t.key,n,new fi(i.toArray()),Wi.none())}}function nne(t,e,r){t instanceof kg?(function(i,s,a){const c=i.value.clone(),u=QD(i.fieldTransforms,s,a.transformResults);c.setAll(u),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(t,e,r):t instanceof Fc?(function(i,s,a){if(!Tb(i.precondition,s))return void s.convertToUnknownDocument(a.version);const c=QD(i.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(J7(i)),u.setAll(c),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(t,e,r):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,r)}function Xv(t,e,r,n){return t instanceof kg?(function(s,a,c,u){if(!Tb(s.precondition,a))return c;const d=s.value.clone(),h=JD(s.fieldTransforms,u,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null})(t,e,r,n):t instanceof Fc?(function(s,a,c,u){if(!Tb(s.precondition,a))return c;const d=JD(s.fieldTransforms,u,a),h=a.data;return h.setAll(J7(s)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((p=>p.field)))})(t,e,r,n):(function(s,a,c){return Tb(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c})(t,e,r)}function ine(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),s=G7(n.transform,i||null);s!=null&&(r===null&&(r=Fn.empty()),r.set(n.field,s))}return r||null}function XD(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&$d(n,i,((s,a)=>tne(s,a)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class kg extends _C{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Fc extends _C{constructor(e,r,n,i,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function J7(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function QD(t,e,r){const n=new Map;gt(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let i=0;i<r.length;i++){const s=t[i],a=s.transform,c=e.data.field(s.field);n.set(s.field,ene(a,c,r[i]))}return n}function JD(t,e,r){const n=new Map;for(const i of t){const s=i.transform,a=r.data.field(i.field);n.set(i.field,Zre(s,a,e))}return n}class PP extends _C{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sne extends _C{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ane{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&nne(s,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Xv(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Xv(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=W7();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let c=this.applyToLocalView(a,s.mutatedFields);c=r.has(i.key)?null:c;const u=Q7(a,c);u!==null&&n.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(Fe.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),at())}isEqual(e){return this.batchId===e.batchId&&$d(this.mutations,e.mutations,((r,n)=>XD(r,n)))&&$d(this.baseMutations,e.baseMutations,((r,n)=>XD(r,n)))}}class IP{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){gt(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let i=(function(){return $re})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,n[a].version);return new IP(e,r,n,i)}}class one{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class cne{constructor(e,r){this.count=e,this.unchangedNames=r}}var Sr,ct;function lne(t){switch(t){case ue.OK:return qe(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return qe(15467,{code:t})}}function Z7(t){if(t===void 0)return ao("GRPC error has no .code"),ue.UNKNOWN;switch(t){case Sr.OK:return ue.OK;case Sr.CANCELLED:return ue.CANCELLED;case Sr.UNKNOWN:return ue.UNKNOWN;case Sr.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Sr.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Sr.INTERNAL:return ue.INTERNAL;case Sr.UNAVAILABLE:return ue.UNAVAILABLE;case Sr.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Sr.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Sr.NOT_FOUND:return ue.NOT_FOUND;case Sr.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Sr.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Sr.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Sr.ABORTED:return ue.ABORTED;case Sr.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Sr.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Sr.DATA_LOSS:return ue.DATA_LOSS;default:return qe(39323,{code:t})}}(ct=Sr||(Sr={}))[ct.OK=0]="OK",ct[ct.CANCELLED=1]="CANCELLED",ct[ct.UNKNOWN=2]="UNKNOWN",ct[ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ct[ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ct[ct.NOT_FOUND=5]="NOT_FOUND",ct[ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",ct[ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",ct[ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",ct[ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ct[ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ct[ct.ABORTED=10]="ABORTED",ct[ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",ct[ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",ct[ct.INTERNAL=13]="INTERNAL",ct[ct.UNAVAILABLE=14]="UNAVAILABLE",ct[ct.DATA_LOSS=15]="DATA_LOSS";function une(){return new TextEncoder}const dne=new _c([4294967295,4294967295],0);function ZD(t){const e=une().encode(t),r=new p7;return r.update(e),new Uint8Array(r.digest())}function e4(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new _c([r,n],0),new _c([i,s],0)]}class NP{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Bv(`Invalid padding: ${r}`);if(n<0)throw new Bv(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Bv(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Bv(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=_c.fromNumber(this.ge)}ye(e,r,n){let i=e.add(r.multiply(_c.fromNumber(n)));return i.compare(dne)===1&&(i=new _c([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=ZD(e),[n,i]=e4(r);for(let s=0;s<this.hashCount;s++){const a=this.ye(n,i,s);if(!this.we(a))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new NP(s,i,r);return n.forEach((c=>a.insert(c))),a}insert(e){if(this.ge===0)return;const r=ZD(e),[n,i]=e4(r);for(let s=0;s<this.hashCount;s++){const a=this.ye(n,i,s);this.Se(a)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Bv extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class EC{constructor(e,r,n,i,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,Lg.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new EC(Fe.min(),i,new Jt(st),oo(),at())}}class Lg{constructor(e,r,n,i,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Lg(n,r,at(),at(),at())}}class Rb{constructor(e,r,n,i){this.be=e,this.removedTargetIds=r,this.key=n,this.De=i}}class eq{constructor(e,r){this.targetId=e,this.Ce=r}}class tq{constructor(e,r,n=ln.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class t4{constructor(){this.ve=0,this.Fe=r4(),this.Me=ln.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=at(),r=at(),n=at();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:qe(38017,{changeType:s})}})),new Lg(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=r4()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,gt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class hne{constructor(e){this.Ge=e,this.ze=new Map,this.je=oo(),this.Je=Y0(),this.He=Y0(),this.Ye=new Jt(st)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,(r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:qe(56790,{state:e.state})}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach(((n,i)=>{this.rt(i)&&r(i)}))}st(e){const r=e.targetId,n=e.Ce.count,i=this.ot(r);if(i){const s=i.target;if(wT(s))if(n===0){const a=new De(s.path);this.et(r,a,vn.newNoDocument(a,Fe.min()))}else gt(n===1,20013,{expectedCount:n});else{const a=this._t(r);if(a!==n){const c=this.ut(e),u=c?this.ct(c,e,a):1;if(u!==0){this.it(r);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,d)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=r;let a,c;try{a=Nc(n).toUint8Array()}catch(u){if(u instanceof A7)return Gd("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new NP(a,i,s)}catch(u){return Gd(u instanceof Bv?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let i=0;return n.forEach((s=>{const a=this.Ge.ht(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.et(r,s,null),i++)})),i}Tt(e){const r=new Map;this.ze.forEach(((s,a)=>{const c=this.ot(a);if(c){if(s.current&&wT(c.target)){const u=new De(c.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,vn.newNoDocument(u,e))}s.Be&&(r.set(a,s.ke()),s.qe())}}));let n=at();this.He.forEach(((s,a)=>{let c=!0;a.forEachWhile((u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(n=n.add(s))})),this.je.forEach(((s,a)=>a.setReadTime(e)));const i=new EC(e,r,this.Ye,this.je,n);return this.je=oo(),this.Je=Y0(),this.He=Y0(),this.Ye=new Jt(st),i}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,r)?i.Qe(r,1):i.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new t4,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new jr(st),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new jr(st),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||Te("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new t4),this.Ge.getRemoteKeysForTarget(e).forEach((r=>{this.et(e,r,null)}))}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function Y0(){return new Jt(De.comparator)}function r4(){return new Jt(De.comparator)}const fne={asc:"ASCENDING",desc:"DESCENDING"},pne={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mne={and:"AND",or:"OR"};class vne{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function ET(t,e){return t.useProto3Json||yC(e)?e:{value:e}}function sS(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rq(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function gne(t,e){return sS(t,e.toTimestamp())}function ia(t){return gt(!!t,49232),Fe.fromTimestamp((function(r){const n=Ic(r);return new Ee(n.seconds,n.nanos)})(t))}function OP(t,e){return AT(t,e).canonicalString()}function AT(t,e){const r=(function(i){return new Mt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?r:r.child(e)}function nq(t){const e=Mt.fromString(t);return gt(cq(e),10190,{key:e.toString()}),e}function TT(t,e){return OP(t.databaseId,e.path)}function t_(t,e){const r=nq(e);if(r.get(1)!==t.databaseId.projectId)throw new xe(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new xe(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new De(sq(r))}function iq(t,e){return OP(t.databaseId,e)}function yne(t){const e=nq(t);return e.length===4?Mt.emptyPath():sq(e)}function RT(t){return new Mt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sq(t){return gt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function n4(t,e,r){return{name:TT(t,e),fields:r.value.mapValue.fields}}function bne(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:qe(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,h){return d.useProto3Json?(gt(h===void 0||typeof h=="string",58123),ln.fromBase64String(h||"")):(gt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ln.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&(function(d){const h=d.code===void 0?ue.UNKNOWN:Z7(d.code);return new xe(h,d.message||"")})(a);r=new tq(n,i,s,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=t_(t,n.document.name),s=ia(n.document.updateTime),a=n.document.createTime?ia(n.document.createTime):Fe.min(),c=new Fn({mapValue:{fields:n.document.fields}}),u=vn.newFoundDocument(i,s,a,c),d=n.targetIds||[],h=n.removedTargetIds||[];r=new Rb(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=t_(t,n.document),s=n.readTime?ia(n.readTime):Fe.min(),a=vn.newNoDocument(i,s),c=n.removedTargetIds||[];r=new Rb([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=t_(t,n.document),s=n.removedTargetIds||[];r=new Rb([],s,i,null)}else{if(!("filter"in e))return qe(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:s}=n,a=new cne(i,s),c=n.targetId;r=new eq(c,a)}}return r}function Sne(t,e){let r;if(e instanceof kg)r={update:n4(t,e.key,e.value)};else if(e instanceof PP)r={delete:TT(t,e.key)};else if(e instanceof Fc)r={update:n4(t,e.key,e.data),updateMask:Pne(e.fieldMask)};else{if(!(e instanceof sne))return qe(16599,{Vt:e.type});r={verify:TT(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(s,a){const c=a.transform;if(c instanceof nS)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof lg)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ug)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof iS)return{fieldPath:a.field.canonicalString(),increment:c.Ae};throw qe(20930,{transform:a.transform})})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:gne(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:qe(27497)})(t,e.precondition)),r}function Cne(t,e){return t&&t.length>0?(gt(e!==void 0,14353),t.map((r=>(function(i,s){let a=i.updateTime?ia(i.updateTime):ia(s);return a.isEqual(Fe.min())&&(a=ia(s)),new rne(a,i.transformResults||[])})(r,e)))):[]}function xne(t,e){return{documents:[iq(t,e.path)]}}function wne(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=iq(t,i);const s=(function(d){if(d.length!==0)return oq(bs.create(d,"and"))})(e.filters);s&&(r.structuredQuery.where=s);const a=(function(d){if(d.length!==0)return d.map((h=>(function(g){return{field:Md(g.field),direction:Ane(g.dir)}})(h)))})(e.orderBy);a&&(r.structuredQuery.orderBy=a);const c=ET(t,e.limit);return c!==null&&(r.structuredQuery.limit=c),e.startAt&&(r.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:r,parent:i}}function _ne(t){let e=yne(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){gt(n===1,65062);const h=r.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];r.where&&(s=(function(p){const g=aq(p);return g instanceof bs&&k7(g)?g.getFilters():[g]})(r.where));let a=[];r.orderBy&&(a=(function(p){return p.map((g=>(function(S){return new cg(Dd(S.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(g)))})(r.orderBy));let c=null;r.limit&&(c=(function(p){let g;return g=typeof p=="object"?p.value:p,yC(g)?null:g})(r.limit));let u=null;r.startAt&&(u=(function(p){const g=!!p.before,y=p.values||[];return new tS(y,g)})(r.startAt));let d=null;return r.endAt&&(d=(function(p){const g=!p.before,y=p.values||[];return new tS(y,g)})(r.endAt)),Fre(e,i,a,s,c,"F",u,d)}function Ene(t,e){const r=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qe(28987,{purpose:i})}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function aq(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Dd(r.unaryFilter.field);return wr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Dd(r.unaryFilter.field);return wr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Dd(r.unaryFilter.field);return wr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Dd(r.unaryFilter.field);return wr.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return qe(61313);default:return qe(60726)}})(t):t.fieldFilter!==void 0?(function(r){return wr.create(Dd(r.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return qe(58110);default:return qe(50506)}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return bs.create(r.compositeFilter.filters.map((n=>aq(n))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return qe(1026)}})(r.compositeFilter.op))})(t):qe(30097,{filter:t})}function Ane(t){return fne[t]}function Tne(t){return pne[t]}function Rne(t){return mne[t]}function Md(t){return{fieldPath:t.canonicalString()}}function Dd(t){return on.fromServerFormat(t.fieldPath)}function oq(t){return t instanceof wr?(function(r){if(r.op==="=="){if(HD(r.value))return{unaryFilter:{field:Md(r.field),op:"IS_NAN"}};if(FD(r.value))return{unaryFilter:{field:Md(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(HD(r.value))return{unaryFilter:{field:Md(r.field),op:"IS_NOT_NAN"}};if(FD(r.value))return{unaryFilter:{field:Md(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Md(r.field),op:Tne(r.op),value:r.value}}})(t):t instanceof bs?(function(r){const n=r.getFilters().map((i=>oq(i)));return n.length===1?n[0]:{compositeFilter:{op:Rne(r.op),filters:n}}})(t):qe(54877,{filter:t})}function Pne(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function cq(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class Sc{constructor(e,r,n,i,s=Fe.min(),a=Fe.min(),c=ln.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Sc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Sc(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ine{constructor(e){this.yt=e}}function Nne(t){const e=_ne({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?rS(e,e.limit,"L"):e}class One{constructor(){this.Cn=new jne}addToCollectionParentIndex(e,r){return this.Cn.add(r),he.resolve()}getCollectionParents(e,r){return he.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return he.resolve()}deleteFieldIndex(e,r){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,r){return he.resolve()}getDocumentsMatchingTarget(e,r){return he.resolve(null)}getIndexType(e,r){return he.resolve(0)}getFieldIndexes(e,r){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,r){return he.resolve(Pc.min())}getMinOffsetFromCollectionGroup(e,r){return he.resolve(Pc.min())}updateCollectionGroup(e,r,n){return he.resolve()}updateIndexEntries(e,r){return he.resolve()}}class jne{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new jr(Mt.comparator),s=!i.has(n);return this.index[r]=i.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new jr(Mt.comparator)).toArray()}}const i4={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lq=41943040;class qn{static withCacheSize(e){return new qn(e,qn.DEFAULT_COLLECTION_PERCENTILE,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}qn.DEFAULT_COLLECTION_PERCENTILE=10,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qn.DEFAULT=new qn(lq,qn.DEFAULT_COLLECTION_PERCENTILE,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qn.DISABLED=new qn(-1,0,0);class Qd{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Qd(0)}static cr(){return new Qd(-1)}}const s4="LruGarbageCollector",Mne=1048576;function a4([t,e],[r,n]){const i=st(t,r);return i===0?st(e,n):i}class Dne{constructor(e){this.Ir=e,this.buffer=new jr(a4),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();a4(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class kne{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Te(s4,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){bh(r)?Te(s4,"Ignoring IndexedDB error during garbage collection: ",r):await yh(r)}await this.Vr(3e5)}))}}class Lne{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next((n=>Math.floor(r/100*n)))}nthSequenceNumber(e,r){if(r===0)return he.resolve(gC.ce);const n=new Dne(r);return this.mr.forEachTarget(e,(i=>n.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>n.Ar(i))))).next((()=>n.maxValue))}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(i4)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),i4):this.yr(e,r)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,i,s,a,c,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,a=Date.now(),this.nthSequenceNumber(e,i)))).next((p=>(n=p,c=Date.now(),this.removeTargets(e,n,r)))).next((p=>(s=p,u=Date.now(),this.removeOrphanedDocuments(e,n)))).next((p=>(d=Date.now(),Od()<=it.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${i} in `+(c-a)+`ms
	Removed ${s} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p}))))}}function zne(t,e){return new Lne(t,e)}class Une{constructor(){this.changes=new Nu((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?he.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Bne{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}class qne{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,r)))).next((i=>(n!==null&&Xv(n.mutation,i,fi.empty(),Ee.now()),i)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,at()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=at()){const i=ru();return this.populateOverlays(e,i,r).next((()=>this.computeViews(e,r,i,n).next((s=>{let a=Uv();return s.forEach(((c,u)=>{a=a.insert(c,u.overlayedDocument)})),a}))))}getOverlayedDocuments(e,r){const n=ru();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,at())))}populateOverlays(e,r,n){const i=[];return n.forEach((s=>{r.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,c)=>{r.set(a,c)}))}))}computeViews(e,r,n,i){let s=oo();const a=Yv(),c=(function(){return Yv()})();return r.forEach(((u,d)=>{const h=n.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Fc)?s=s.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),Xv(h.mutation,d,h.mutation.getFieldMask(),Ee.now())):a.set(d.key,fi.empty())})),this.recalculateAndSaveOverlays(e,s).next((u=>(u.forEach(((d,h)=>a.set(d,h))),r.forEach(((d,h)=>c.set(d,new Bne(h,a.get(d)??null)))),c)))}recalculateAndSaveOverlays(e,r){const n=Yv();let i=new Jt(((a,c)=>a-c)),s=at();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((a=>{for(const c of a)c.keys().forEach((u=>{const d=r.get(u);if(d===null)return;let h=n.get(u)||fi.empty();h=c.applyToLocalView(d,h),n.set(u,h);const p=(i.get(c.batchId)||at()).add(u);i=i.insert(c.batchId,p)}))})).next((()=>{const a=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,h=u.value,p=W7();h.forEach((g=>{if(!s.has(g)){const y=Q7(r.get(g),n.get(g));y!==null&&p.set(g,y),s=s.add(g)}})),a.push(this.documentOverlayCache.saveOverlays(e,d,p))}return he.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,i){return(function(a){return De.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):B7(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-s.size):he.resolve(ru());let c=ig,u=s;return a.next((d=>he.forEach(d,((h,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),s.get(h)?he.resolve():this.remoteDocumentCache.getEntry(e,h).next((g=>{u=u.insert(h,g)}))))).next((()=>this.populateOverlays(e,d,s))).next((()=>this.computeViews(e,u,d,at()))).next((h=>({batchId:c,changes:H7(h)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new De(r)).next((n=>{let i=Uv();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const s=r.collectionGroup;let a=Uv();return this.indexManager.getCollectionParents(e,s).next((c=>he.forEach(c,(u=>{const d=(function(p,g){return new Sh(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(r,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,n,i).next((h=>{h.forEach(((p,g)=>{a=a.insert(p,g)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,r,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,i)))).next((a=>{s.forEach(((u,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,vn.newInvalidDocument(h)))}));let c=Uv();return a.forEach(((u,d)=>{const h=s.get(u);h!==void 0&&Xv(h.mutation,d,fi.empty(),Ee.now()),xC(r,d)&&(c=c.insert(u,d))})),c}))}}class Vne{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return he.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,(function(i){return{id:i.id,version:i.version,createTime:ia(i.createTime)}})(r)),he.resolve()}getNamedQuery(e,r){return he.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,(function(i){return{name:i.name,query:Nne(i.bundledQuery),readTime:ia(i.readTime)}})(r)),he.resolve()}}class Fne{constructor(){this.overlays=new Jt(De.comparator),this.qr=new Map}getOverlay(e,r){return he.resolve(this.overlays.get(r))}getOverlays(e,r){const n=ru();return he.forEach(r,(i=>this.getOverlay(e,i).next((s=>{s!==null&&n.set(i,s)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((i,s)=>{this.St(e,r,s)})),he.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(n)),he.resolve()}getOverlaysForCollection(e,r,n){const i=ru(),s=r.length+1,a=new De(r.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!r.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>n&&i.set(u.getKey(),u)}return he.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let s=new Jt(((d,h)=>d-h));const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===r&&d.largestBatchId>n){let h=s.get(d.largestBatchId);h===null&&(h=ru(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const c=ru(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((d,h)=>c.set(d,h))),!(c.size()>=i)););return he.resolve(c)}St(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new one(r,n));let s=this.qr.get(r);s===void 0&&(s=at(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}class Hne{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,he.resolve()}}class jP{constructor(){this.Qr=new jr(Hr.$r),this.Ur=new jr(Hr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new Hr(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Gr(new Hr(e,r))}zr(e,r){e.forEach((n=>this.removeReference(n,r)))}jr(e){const r=new De(new Mt([])),n=new Hr(r,e),i=new Hr(r,e+1),s=[];return this.Ur.forEachInRange([n,i],(a=>{this.Gr(a),s.push(a.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new De(new Mt([])),n=new Hr(r,e),i=new Hr(r,e+1);let s=at();return this.Ur.forEachInRange([n,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const r=new Hr(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Hr{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return De.comparator(e.key,r.key)||st(e.Yr,r.Yr)}static Kr(e,r){return st(e.Yr,r.Yr)||De.comparator(e.key,r.key)}}class Wne{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new jr(Hr.$r)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new ane(s,r,n,i);this.mutationQueue.push(a);for(const c of i)this.Zr=this.Zr.add(new Hr(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return he.resolve(a)}lookupMutationBatch(e,r){return he.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.ei(n),s=i<0?0:i;return he.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?wP:this.tr-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Hr(r,0),i=new Hr(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,i],(a=>{const c=this.Xr(a.Yr);s.push(c)})),he.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new jr(st);return r.forEach((i=>{const s=new Hr(i,0),a=new Hr(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],(c=>{n=n.add(c.Yr)}))})),he.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let s=n;De.isDocumentKey(s)||(s=s.child(""));const a=new Hr(new De(s),0);let c=new jr(st);return this.Zr.forEachWhile((u=>{const d=u.key.path;return!!n.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Yr)),!0)}),a),he.resolve(this.ti(c))}ti(e){const r=[];return e.forEach((n=>{const i=this.Xr(n);i!==null&&r.push(i)})),r}removeMutationBatch(e,r){gt(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return he.forEach(r.mutations,(i=>{const s=new Hr(i.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,r){const n=new Hr(r,0),i=this.Zr.firstAfterOrEqual(n);return he.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class Kne{constructor(e){this.ri=e,this.docs=(function(){return new Jt(De.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),s=i?i.size:0,a=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return he.resolve(n?n.document.mutableCopy():vn.newInvalidDocument(r))}getEntries(e,r){let n=oo();return r.forEach((i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():vn.newInvalidDocument(i))})),he.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let s=oo();const a=r.path,c=new De(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||Cre(Sre(h),n)<=0||(i.has(h.key)||xC(r,h))&&(s=s.insert(h.key,h.mutableCopy()))}return he.resolve(s)}getAllFromCollectionGroup(e,r,n,i){qe(9500)}ii(e,r){return he.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new Gne(this)}getSize(e){return he.resolve(this.size)}}class Gne extends Une{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?r.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)})),he.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}class $ne{constructor(e){this.persistence=e,this.si=new Nu((r=>AP(r)),TP),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.oi=0,this._i=new jP,this.targetCount=0,this.ai=Qd.ur()}forEachTarget(e,r){return this.si.forEach(((n,i)=>r(i))),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),he.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new Qd(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,he.resolve()}updateTargetData(e,r){return this.Pr(r),he.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,r,n){let i=0;const s=[];return this.si.forEach(((a,c)=>{c.sequenceNumber<=r&&n.get(c.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),he.waitFor(s).next((()=>i))}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return he.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),he.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const i=this.persistence.referenceDelegate,s=[];return i&&r.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),he.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),he.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return he.resolve(n)}containsKey(e,r){return he.resolve(this._i.containsKey(r))}}class uq{constructor(e,r){this.ui={},this.overlays={},this.ci=new gC(0),this.li=!1,this.li=!0,this.hi=new Hne,this.referenceDelegate=e(this),this.Pi=new $ne(this),this.indexManager=new One,this.remoteDocumentCache=(function(i){return new Kne(i)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new Ine(r),this.Ii=new Vne(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new Fne,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new Wne(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){Te("MemoryPersistence","Starting transaction:",e);const i=new Yne(this.ci.next());return this.referenceDelegate.Ei(),n(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,r){return he.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,r))))}}class Yne extends wre{constructor(e){super(),this.currentSequenceNumber=e}}class MP{constructor(e){this.persistence=e,this.Ri=new jP,this.Vi=null}static mi(e){return new MP(e)}get fi(){if(this.Vi)return this.Vi;throw qe(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),he.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),he.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),he.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach((i=>this.fi.add(i.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>n.removeTargetData(e,r)))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.fi,(n=>{const i=De.fromPath(n);return this.gi(e,i).next((s=>{s||r.removeEntry(i,Fe.min())}))})).next((()=>(this.Vi=null,r.apply(e))))}updateLimboDocument(e,r){return this.gi(e,r).next((n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())}))}Ti(e){return 0}gi(e,r){return he.or([()=>he.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class aS{constructor(e,r){this.persistence=e,this.pi=new Nu((n=>Are(n.path)),((n,i)=>n.isEqual(i))),this.garbageCollector=zne(this,r)}static mi(e,r){return new aS(e,r)}Ei(){}di(e){return he.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>r.next((i=>n+i))))}wr(e){let r=0;return this.pr(e,(n=>{r++})).next((()=>r))}pr(e,r){return he.forEach(this.pi,((n,i)=>this.br(e,n,i).next((s=>s?he.resolve():r(i)))))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(a=>this.br(e,a,r).next((c=>{c||(n++,s.removeEntry(a,Fe.min()))})))).next((()=>s.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),he.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),he.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),he.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Eb(e.data.value)),r}br(e,r,n){return he.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const i=this.pi.get(r);return he.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class DP{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=i}static As(e,r){let n=at(),i=at();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new DP(e,r.fromCache,n,i)}}class Xne{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Qne{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return PJ()?8:_re(Cn())>0?6:4})()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,i){const s={result:null};return this.ys(e,r).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ws(e,r,i,n).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new Xne;return this.Ss(e,r,a).next((c=>{if(s.result=c,this.Vs)return this.bs(e,r,a,c.size)}))})).next((()=>s.result))}bs(e,r,n,i){return n.documentReadCount<this.fs?(Od()<=it.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",jd(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),he.resolve()):(Od()<=it.DEBUG&&Te("QueryEngine","Query:",jd(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(Od()<=it.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",jd(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,na(r))):he.resolve())}ys(e,r){if($D(r))return he.resolve(null);let n=na(r);return this.indexManager.getIndexType(e,n).next((i=>i===0?null:(r.limit!==null&&i===1&&(r=rS(r,null,"F"),n=na(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((s=>{const a=at(...s);return this.ps.getDocuments(e,a).next((c=>this.indexManager.getMinOffset(e,n).next((u=>{const d=this.Ds(r,c);return this.Cs(r,d,a,u.readTime)?this.ys(e,rS(r,null,"F")):this.vs(e,d,r,u)}))))})))))}ws(e,r,n,i){return $D(r)||i.isEqual(Fe.min())?he.resolve(null):this.ps.getDocuments(e,n).next((s=>{const a=this.Ds(r,s);return this.Cs(r,a,n,i)?he.resolve(null):(Od()<=it.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),jd(r)),this.vs(e,a,r,bre(i,ig)).next((c=>c)))}))}Ds(e,r){let n=new jr(V7(e));return r.forEach(((i,s)=>{xC(e,s)&&(n=n.add(s))})),n}Cs(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,r,n){return Od()<=it.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",jd(r)),this.ps.getDocumentsMatchingQuery(e,r,Pc.min(),n)}vs(e,r,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next((s=>(r.forEach((a=>{s=s.insert(a.key,a)})),s)))}}const kP="LocalStore",Jne=3e8;class Zne{constructor(e,r,n,i){this.persistence=e,this.Fs=r,this.serializer=i,this.Ms=new Jt(st),this.xs=new Nu((s=>AP(s)),TP),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qne(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.Ms)))}}function eie(t,e,r,n){return new Zne(t,e,r,n)}async function dq(t,e){const r=We(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next((s=>(i=s,r.Bs(e),r.mutationQueue.getAllMutationBatches(n)))).next((s=>{const a=[],c=[];let u=at();for(const d of i){a.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of s){c.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return r.localDocuments.getDocuments(n,u).next((d=>({Ls:d,removedBatchIds:a,addedBatchIds:c})))}))}))}function tie(t,e){const r=We(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const i=e.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,d,h){const p=d.batch,g=p.keys();let y=he.resolve();return g.forEach((S=>{y=y.next((()=>h.getEntry(u,S))).next((x=>{const w=d.docVersions.get(S);gt(w!==null,48541),x.version.compareTo(w)<0&&(p.applyToRemoteDocument(x,d),x.isValidDocument()&&(x.setReadTime(d.commitVersion),h.addEntry(x)))}))})),y.next((()=>c.mutationQueue.removeMutationBatch(u,p)))})(r,n,e,s).next((()=>s.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(c){let u=at();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u})(e)))).next((()=>r.localDocuments.getDocuments(n,i)))}))}function hq(t){const e=We(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Pi.getLastRemoteSnapshotVersion(r)))}function rie(t,e){const r=We(t),n=e.snapshotVersion;let i=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=r.Ns.newChangeBuffer({trackRemovals:!0});i=r.Ms;const c=[];e.targetChanges.forEach(((h,p)=>{const g=i.get(p);if(!g)return;c.push(r.Pi.removeMatchingKeys(s,h.removedDocuments,p).next((()=>r.Pi.addMatchingKeys(s,h.addedDocuments,p))));let y=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(ln.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,n)),i=i.insert(p,y),(function(x,w,E){return x.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=Jne?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0})(g,y,h)&&c.push(r.Pi.updateTargetData(s,y))}));let u=oo(),d=at();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(s,h))})),c.push(nie(s,a,e.documentUpdates).next((h=>{u=h.ks,d=h.qs}))),!n.isEqual(Fe.min())){const h=r.Pi.getLastRemoteSnapshotVersion(s).next((p=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n)));c.push(h)}return he.waitFor(c).next((()=>a.apply(s))).next((()=>r.localDocuments.getLocalViewOfDocuments(s,u,d))).next((()=>u))})).then((s=>(r.Ms=i,s)))}function nie(t,e,r){let n=at(),i=at();return r.forEach((s=>n=n.add(s))),e.getEntries(t,n).next((s=>{let a=oo();return r.forEach(((c,u)=>{const d=s.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Fe.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):Te(kP,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)})),{ks:a,qs:i}}))}function iie(t,e){const r=We(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=wP),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function sie(t,e){const r=We(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let i;return r.Pi.getTargetData(n,e).next((s=>s?(i=s,he.resolve(i)):r.Pi.allocateTargetId(n).next((a=>(i=new Sc(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,i).next((()=>i)))))))})).then((n=>{const i=r.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n}))}async function PT(t,e,r){const n=We(t),i=n.Ms.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,(a=>n.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!bh(a))throw a;Te(kP,`Failed to update sequence numbers for target ${e}: ${a}`)}n.Ms=n.Ms.remove(e),n.xs.delete(i.target)}function o4(t,e,r){const n=We(t);let i=Fe.min(),s=at();return n.persistence.runTransaction("Execute query","readwrite",(a=>(function(u,d,h){const p=We(u),g=p.xs.get(h);return g!==void 0?he.resolve(p.Ms.get(g)):p.Pi.getTargetData(d,h)})(n,a,na(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(a,c.targetId).next((u=>{s=u}))})).next((()=>n.Fs.getDocumentsMatchingQuery(a,e,r?i:Fe.min(),r?s:at()))).next((c=>(aie(n,Wre(e),c),{documents:c,Qs:s})))))}function aie(t,e,r){let n=t.Os.get(e)||Fe.min();r.forEach(((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)})),t.Os.set(e,n)}class c4{constructor(){this.activeTargetIds=Qre()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oie{constructor(){this.Mo=new c4,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new c4,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class cie{Oo(e){}shutdown(){}}const l4="ConnectivityMonitor";class u4{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Te(l4,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Te(l4,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let X0=null;function IT(){return X0===null?X0=(function(){return 268435456+Math.round(2147483648*Math.random())})():X0++,"0x"+X0.toString(16)}const r_="RestConnection",lie={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class uie{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===Zb?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(e,r,n,i,s){const a=IT(),c=this.zo(e,r.toUriEncodedString());Te(r_,`Sending RPC '${e}' ${a}:`,c,n);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,s);const{host:d}=new URL(c),h=zc(d);return this.Jo(e,c,u,n,h).then((p=>(Te(r_,`Received RPC '${e}' ${a}: `,p),p)),(p=>{throw Gd(r_,`RPC '${e}' ${a} failed with error: `,p,"url: ",c,"request:",n),p}))}Ho(e,r,n,i,s,a){return this.Go(e,r,n,i,s)}jo(e,r,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+gh})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((i,s)=>e[s]=i)),n&&n.headers.forEach(((i,s)=>e[s]=i))}zo(e,r){const n=lie[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}class die{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const hn="WebChannelConnection";class hie extends uie{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,i,s){const a=IT();return new Promise(((c,u)=>{const d=new m7;d.setWithCredentials(!0),d.listenOnce(v7.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case _b.NO_ERROR:const p=d.getResponseJson();Te(hn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(p)),c(p);break;case _b.TIMEOUT:Te(hn,`RPC '${e}' ${a} timed out`),u(new xe(ue.DEADLINE_EXCEEDED,"Request time out"));break;case _b.HTTP_ERROR:const g=d.getStatus();if(Te(hn,`RPC '${e}' ${a} failed with status:`,g,"response text:",d.getResponseText()),g>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const S=y?.error;if(S&&S.status&&S.message){const x=(function(E){const R=E.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(R)>=0?R:ue.UNKNOWN})(S.status);u(new xe(x,S.message))}else u(new xe(ue.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new xe(ue.UNAVAILABLE,"Connection failed."));break;default:qe(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Te(hn,`RPC '${e}' ${a} completed.`)}}));const h=JSON.stringify(i);Te(hn,`RPC '${e}' ${a} sending request:`,i),d.send(r,"POST",h,n,15)}))}T_(e,r,n){const i=IT(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=b7(),c=y7(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,r,n),u.encodeInitMessageHeaders=!0;const h=s.join("");Te(hn,`Creating RPC '${e}' stream ${i}: ${h}`,u);const p=a.createWebChannel(h,u);this.I_(p);let g=!1,y=!1;const S=new die({Yo:w=>{y?Te(hn,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(g||(Te(hn,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),Te(hn,`RPC '${e}' stream ${i} sending:`,w),p.send(w))},Zo:()=>p.close()}),x=(w,E,R)=>{w.listen(E,(T=>{try{R(T)}catch(M){setTimeout((()=>{throw M}),0)}}))};return x(p,zv.EventType.OPEN,(()=>{y||(Te(hn,`RPC '${e}' stream ${i} transport opened.`),S.o_())})),x(p,zv.EventType.CLOSE,(()=>{y||(y=!0,Te(hn,`RPC '${e}' stream ${i} transport closed`),S.a_(),this.E_(p))})),x(p,zv.EventType.ERROR,(w=>{y||(y=!0,Gd(hn,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),S.a_(new xe(ue.UNAVAILABLE,"The operation could not be completed")))})),x(p,zv.EventType.MESSAGE,(w=>{if(!y){const E=w.data[0];gt(!!E,16349);const R=E,T=R?.error||R[0]?.error;if(T){Te(hn,`RPC '${e}' stream ${i} received error:`,T);const M=T.status;let D=(function(O){const L=Sr[O];if(L!==void 0)return Z7(L)})(M),z=T.message;D===void 0&&(D=ue.INTERNAL,z="Unknown error status: "+M+" with message "+T.message),y=!0,S.a_(new xe(D,z)),p.close()}else Te(hn,`RPC '${e}' stream ${i} received:`,E),S.u_(E)}})),x(c,g7.STAT_EVENT,(w=>{w.stat===yT.PROXY?Te(hn,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===yT.NOPROXY&&Te(hn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{S.__()}),0),S}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((r=>r===e))}}function n_(){return typeof document<"u"?document:null}function AC(t){return new vne(t,!0)}class fq{constructor(e,r,n=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,r-n);i>0&&Te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const d4="PersistentStream";class pq{constructor(e,r,n,i,s,a,c,u){this.Mi=e,this.S_=n,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new fq(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===ue.RESOURCE_EXHAUSTED?(ao(r.toString()),ao("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,i])=>{this.D_===r&&this.G_(n,i)}),(n=>{e((()=>{const i=new xe(ue.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)}))}))}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{n((()=>this.z_(i)))})),this.stream.onMessage((i=>{n((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Te(d4,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget((()=>this.D_===e?r():(Te(d4,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class fie extends pq{constructor(e,r,n,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,a),this.serializer=s}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=bne(this.serializer,e),n=(function(s){if(!("targetChange"in s))return Fe.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Fe.min():a.readTime?ia(a.readTime):Fe.min()})(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=RT(this.serializer),r.addTarget=(function(s,a){let c;const u=a.target;if(c=wT(u)?{documents:xne(s,u)}:{query:wne(s,u).ft},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=rq(s,a.resumeToken);const d=ET(s,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(Fe.min())>0){c.readTime=sS(s,a.snapshotVersion.toTimestamp());const d=ET(s,a.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);const n=Ene(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=RT(this.serializer),r.removeTarget=e,this.q_(r)}}class pie extends pq{constructor(e,r,n,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return gt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,gt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){gt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=Cne(e.writeResults,e.commitTime),n=ia(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=RT(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>Sne(this.serializer,n)))};this.q_(r)}}class mie{}class vie extends mie{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new xe(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Go(e,AT(r,n),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new xe(ue.UNKNOWN,s.toString())}))}Ho(e,r,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Ho(e,AT(r,n),i,a,c,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new xe(ue.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class gie{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ao(r),this.aa=!1):Te("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Cu="RemoteStore";class yie{constructor(e,r,n,i,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((a=>{n.enqueueAndForget((async()=>{Ou(this)&&(Te(Cu,"Restarting streams for network reachability change."),await(async function(u){const d=We(u);d.Ea.add(4),await zg(d),d.Ra.set("Unknown"),d.Ea.delete(4),await TC(d)})(this))}))})),this.Ra=new gie(n,i)}}async function TC(t){if(Ou(t))for(const e of t.da)await e(!0)}async function zg(t){for(const e of t.da)await e(!1)}function mq(t,e){const r=We(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),BP(r)?UP(r):Ch(r).O_()&&zP(r,e))}function LP(t,e){const r=We(t),n=Ch(r);r.Ia.delete(e),n.O_()&&vq(r,e),r.Ia.size===0&&(n.O_()?n.L_():Ou(r)&&r.Ra.set("Unknown"))}function zP(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Ch(t).Y_(e)}function vq(t,e){t.Va.Ue(e),Ch(t).Z_(e)}function UP(t){t.Va=new hne({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ch(t).start(),t.Ra.ua()}function BP(t){return Ou(t)&&!Ch(t).x_()&&t.Ia.size>0}function Ou(t){return We(t).Ea.size===0}function gq(t){t.Va=void 0}async function bie(t){t.Ra.set("Online")}async function Sie(t){t.Ia.forEach(((e,r)=>{zP(t,e)}))}async function Cie(t,e){gq(t),BP(t)?(t.Ra.ha(e),UP(t)):t.Ra.set("Unknown")}async function xie(t,e,r){if(t.Ra.set("Online"),e instanceof tq&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const c of s.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,a),i.Ia.delete(c),i.Va.removeTarget(c))})(t,e)}catch(n){Te(Cu,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await oS(t,n)}else if(e instanceof Rb?t.Va.Ze(e):e instanceof eq?t.Va.st(e):t.Va.tt(e),!r.isEqual(Fe.min()))try{const n=await hq(t.localStore);r.compareTo(n)>=0&&await(function(s,a){const c=s.Va.Tt(a);return c.targetChanges.forEach(((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.Ia.get(d);h&&s.Ia.set(d,h.withResumeToken(u.resumeToken,a))}})),c.targetMismatches.forEach(((u,d)=>{const h=s.Ia.get(u);if(!h)return;s.Ia.set(u,h.withResumeToken(ln.EMPTY_BYTE_STRING,h.snapshotVersion)),vq(s,u);const p=new Sc(h.target,u,d,h.sequenceNumber);zP(s,p)})),s.remoteSyncer.applyRemoteEvent(c)})(t,r)}catch(n){Te(Cu,"Failed to raise snapshot:",n),await oS(t,n)}}async function oS(t,e,r){if(!bh(e))throw e;t.Ea.add(1),await zg(t),t.Ra.set("Offline"),r||(r=()=>hq(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Te(Cu,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await TC(t)}))}function yq(t,e){return e().catch((r=>oS(t,r,e)))}async function RC(t){const e=We(t),r=jc(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wP;for(;wie(e);)try{const i=await iie(e.localStore,n);if(i===null){e.Ta.length===0&&r.L_();break}n=i.batchId,_ie(e,i)}catch(i){await oS(e,i)}bq(e)&&Sq(e)}function wie(t){return Ou(t)&&t.Ta.length<10}function _ie(t,e){t.Ta.push(e);const r=jc(t);r.O_()&&r.X_&&r.ea(e.mutations)}function bq(t){return Ou(t)&&!jc(t).x_()&&t.Ta.length>0}function Sq(t){jc(t).start()}async function Eie(t){jc(t).ra()}async function Aie(t){const e=jc(t);for(const r of t.Ta)e.ea(r.mutations)}async function Tie(t,e,r){const n=t.Ta.shift(),i=IP.from(n,e,r);await yq(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await RC(t)}async function Rie(t,e){e&&jc(t).X_&&await(async function(n,i){if((function(a){return lne(a)&&a!==ue.ABORTED})(i.code)){const s=n.Ta.shift();jc(n).B_(),await yq(n,(()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i))),await RC(n)}})(t,e),bq(t)&&Sq(t)}async function h4(t,e){const r=We(t);r.asyncQueue.verifyOperationInProgress(),Te(Cu,"RemoteStore received new credentials");const n=Ou(r);r.Ea.add(3),await zg(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await TC(r)}async function Pie(t,e){const r=We(t);e?(r.Ea.delete(2),await TC(r)):e||(r.Ea.add(2),await zg(r),r.Ra.set("Unknown"))}function Ch(t){return t.ma||(t.ma=(function(r,n,i){const s=We(r);return s.sa(),new fie(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Xo:bie.bind(null,t),t_:Sie.bind(null,t),r_:Cie.bind(null,t),H_:xie.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),BP(t)?UP(t):t.Ra.set("Unknown")):(await t.ma.stop(),gq(t))}))),t.ma}function jc(t){return t.fa||(t.fa=(function(r,n,i){const s=We(r);return s.sa(),new pie(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Eie.bind(null,t),r_:Rie.bind(null,t),ta:Aie.bind(null,t),na:Tie.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await RC(t)):(await t.fa.stop(),t.Ta.length>0&&(Te(Cu,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class qP{constructor(e,r,n,i,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new eo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,s){const a=Date.now()+n,c=new qP(e,r,a,i,s);return c.start(n),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function VP(t,e){if(ao("AsyncQueue",`${e}: ${t}`),bh(t))return new xe(ue.UNAVAILABLE,`${e}: ${t}`);throw t}class Fd{static emptySet(e){return new Fd(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||De.comparator(r.key,n.key):(r,n)=>De.comparator(r.key,n.key),this.keyedMap=Uv(),this.sortedSet=new Jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Fd)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Fd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}class f4{constructor(){this.ga=new Jt(De.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):qe(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal(((r,n)=>{e.push(n)})),e}}class Jd{constructor(e,r,n,i,s,a,c,u,d){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,r,n,i,s){const a=[];return r.forEach((c=>{a.push({type:0,doc:c})})),new Jd(e,r,Fd.emptySet(r),a,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&CC(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}class Iie{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Nie{constructor(){this.queries=p4(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const i=We(r),s=i.queries;i.queries=p4(),s.forEach(((a,c)=>{for(const u of c.Sa)u.onError(n)}))})(this,new xe(ue.ABORTED,"Firestore shutting down"))}}function p4(){return new Nu((t=>q7(t)),CC)}async function FP(t,e){const r=We(t);let n=3;const i=e.query;let s=r.queries.get(i);s?!s.ba()&&e.Da()&&(n=2):(s=new Iie,n=e.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(i,!0);break;case 1:s.wa=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(a){const c=VP(a,`Initialization of query '${jd(e.query)}' failed`);return void e.onError(c)}r.queries.set(i,s),s.Sa.push(e),e.va(r.onlineState),s.wa&&e.Fa(s.wa)&&WP(r)}async function HP(t,e){const r=We(t),n=e.query;let i=3;const s=r.queries.get(n);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function Oie(t,e){const r=We(t);let n=!1;for(const i of e){const s=i.query,a=r.queries.get(s);if(a){for(const c of a.Sa)c.Fa(i)&&(n=!0);a.wa=i}}n&&WP(r)}function jie(t,e,r){const n=We(t),i=n.queries.get(e);if(i)for(const s of i.Sa)s.onError(r);n.queries.delete(e)}function WP(t){t.Ca.forEach((e=>{e.next()}))}var NT,m4;(m4=NT||(NT={})).Ma="default",m4.Cache="cache";class KP{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Jd(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=Jd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==NT.Cache}}class Cq{constructor(e){this.key=e}}class xq{constructor(e){this.key=e}}class Mie{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=at(),this.mutatedKeys=at(),this.eu=V7(e),this.tu=new Fd(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new f4,i=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,a=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((h,p)=>{const g=i.get(h),y=xC(this.query,p)?p:null,S=!!g&&this.mutatedKeys.has(g.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let w=!1;g&&y?g.data.isEqual(y.data)?S!==x&&(n.track({type:3,doc:y}),w=!0):this.su(g,y)||(n.track({type:2,doc:y}),w=!0,(u&&this.eu(y,u)>0||d&&this.eu(y,d)<0)&&(c=!0)):!g&&y?(n.track({type:0,doc:y}),w=!0):g&&!y&&(n.track({type:1,doc:g}),w=!0,(u||d)&&(c=!0)),w&&(y?(a=a.add(y),s=x?s.add(h):s.delete(h)):(a=a.delete(h),s=s.delete(h)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),n.track({type:1,doc:h})}return{tu:a,iu:n,Cs:c,mutatedKeys:s}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((h,p)=>(function(y,S){const x=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qe(20277,{Rt:w})}};return x(y)-x(S)})(h.type,p.type)||this.eu(h.doc,p.doc))),this.ou(n),i=i??!1;const c=r&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,a.length!==0||d?{snapshot:new Jd(this.query,e.tu,s,a,e.mutatedKeys,u===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new f4,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((r=>this.Ya=this.Ya.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ya=this.Ya.delete(r))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=at(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const r=[];return e.forEach((n=>{this.Xa.has(n)||r.push(new xq(n))})),this.Xa.forEach((n=>{e.has(n)||r.push(new Cq(n))})),r}cu(e){this.Ya=e.Qs,this.Xa=at();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return Jd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const GP="SyncEngine";class Die{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class kie{constructor(e){this.key=e,this.hu=!1}}class Lie{constructor(e,r,n,i,s,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Nu((c=>q7(c)),CC),this.Iu=new Map,this.Eu=new Set,this.du=new Jt(De.comparator),this.Au=new Map,this.Ru=new jP,this.Vu={},this.mu=new Map,this.fu=Qd.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function zie(t,e,r=!0){const n=Rq(t);let i;const s=n.Tu.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await wq(n,e,r,!0),i}async function Uie(t,e){const r=Rq(t);await wq(r,e,!0,!1)}async function wq(t,e,r,n){const i=await sie(t.localStore,na(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,r);let c;return n&&(c=await Bie(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&r&&mq(t.remoteStore,i),c}async function Bie(t,e,r,n,i){t.pu=(p,g,y)=>(async function(x,w,E,R){let T=w.view.ru(E);T.Cs&&(T=await o4(x.localStore,w.query,!1).then((({documents:j})=>w.view.ru(j,T))));const M=R&&R.targetChanges.get(w.targetId),D=R&&R.targetMismatches.get(w.targetId)!=null,z=w.view.applyChanges(T,x.isPrimaryClient,M,D);return g4(x,w.targetId,z.au),z.snapshot})(t,p,g,y);const s=await o4(t.localStore,e,!0),a=new Mie(e,s.Qs),c=a.ru(s.documents),u=Lg.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),d=a.applyChanges(c,t.isPrimaryClient,u);g4(t,r,d.au);const h=new Die(e,r,a);return t.Tu.set(e,h),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),d.snapshot}async function qie(t,e,r){const n=We(t),i=n.Tu.get(e),s=n.Iu.get(i.targetId);if(s.length>1)return n.Iu.set(i.targetId,s.filter((a=>!CC(a,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await PT(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),r&&LP(n.remoteStore,i.targetId),OT(n,i.targetId)})).catch(yh)):(OT(n,i.targetId),await PT(n.localStore,i.targetId,!0))}async function Vie(t,e){const r=We(t),n=r.Tu.get(e),i=r.Iu.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),LP(r.remoteStore,n.targetId))}async function Fie(t,e,r){const n=Xie(t);try{const i=await(function(a,c){const u=We(a),d=Ee.now(),h=c.reduce(((y,S)=>y.add(S.key)),at());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",(y=>{let S=oo(),x=at();return u.Ns.getEntries(y,h).next((w=>{S=w,S.forEach(((E,R)=>{R.isValidDocument()||(x=x.add(E))}))})).next((()=>u.localDocuments.getOverlayedDocuments(y,S))).next((w=>{p=w;const E=[];for(const R of c){const T=ine(R,p.get(R.key).overlayedDocument);T!=null&&E.push(new Fc(R.key,T,j7(T.value.mapValue),Wi.exists(!0)))}return u.mutationQueue.addMutationBatch(y,d,E,c)})).next((w=>{g=w;const E=w.applyToLocalDocumentSet(p,x);return u.documentOverlayCache.saveOverlays(y,w.batchId,E)}))})).then((()=>({batchId:g.batchId,changes:H7(p)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),(function(a,c,u){let d=a.Vu[a.currentUser.toKey()];d||(d=new Jt(st)),d=d.insert(c,u),a.Vu[a.currentUser.toKey()]=d})(n,i.batchId,r),await Ug(n,i.changes),await RC(n.remoteStore)}catch(i){const s=VP(i,"Failed to persist write");r.reject(s)}}async function _q(t,e){const r=We(t);try{const n=await rie(r.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=r.Au.get(s);a&&(gt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?gt(a.hu,14607):i.removedDocuments.size>0&&(gt(a.hu,42227),a.hu=!1))})),await Ug(r,n,e)}catch(n){await yh(n)}}function v4(t,e,r){const n=We(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Tu.forEach(((s,a)=>{const c=a.view.va(e);c.snapshot&&i.push(c.snapshot)})),(function(a,c){const u=We(a);u.onlineState=c;let d=!1;u.queries.forEach(((h,p)=>{for(const g of p.Sa)g.va(c)&&(d=!0)})),d&&WP(u)})(n.eventManager,e),i.length&&n.Pu.H_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function Hie(t,e,r){const n=We(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Au.get(e),s=i&&i.key;if(s){let a=new Jt(De.comparator);a=a.insert(s,vn.newNoDocument(s,Fe.min()));const c=at().add(s),u=new EC(Fe.min(),new Map,new Jt(st),a,c);await _q(n,u),n.du=n.du.remove(s),n.Au.delete(e),$P(n)}else await PT(n.localStore,e,!1).then((()=>OT(n,e,r))).catch(yh)}async function Wie(t,e){const r=We(t),n=e.batch.batchId;try{const i=await tie(r.localStore,e);Aq(r,n,null),Eq(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Ug(r,i)}catch(i){await yh(i)}}async function Kie(t,e,r){const n=We(t);try{const i=await(function(a,c){const u=We(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let h;return u.mutationQueue.lookupMutationBatch(d,c).next((p=>(gt(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(d,p)))).next((()=>u.mutationQueue.performConsistencyCheck(d))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,c))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h))).next((()=>u.localDocuments.getDocuments(d,h)))}))})(n.localStore,e);Aq(n,e,r),Eq(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Ug(n,i)}catch(i){await yh(i)}}function Eq(t,e){(t.mu.get(e)||[]).forEach((r=>{r.resolve()})),t.mu.delete(e)}function Aq(t,e,r){const n=We(t);let i=n.Vu[n.currentUser.toKey()];if(i){const s=i.get(e);s&&(r?s.reject(r):s.resolve(),i=i.remove(e)),n.Vu[n.currentUser.toKey()]=i}}function OT(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((n=>{t.Ru.containsKey(n)||Tq(t,n)}))}function Tq(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(LP(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),$P(t))}function g4(t,e,r){for(const n of r)n instanceof Cq?(t.Ru.addReference(n.key,e),Gie(t,n)):n instanceof xq?(Te(GP,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||Tq(t,n.key)):qe(19791,{wu:n})}function Gie(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(Te(GP,"New document in limbo: "+r),t.Eu.add(n),$P(t))}function $P(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new De(Mt.fromString(e)),n=t.fu.next();t.Au.set(n,new kie(r)),t.du=t.du.insert(r,n),mq(t.remoteStore,new Sc(na(SC(r.path)),n,"TargetPurposeLimboResolution",gC.ce))}}async function Ug(t,e,r){const n=We(t),i=[],s=[],a=[];n.Tu.isEmpty()||(n.Tu.forEach(((c,u)=>{a.push(n.pu(u,e,r).then((d=>{if((d||r)&&n.isPrimaryClient){const h=d?!d.fromCache:r?.targetChanges.get(u.targetId)?.current;n.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(d){i.push(d);const h=DP.As(u.targetId,d);s.push(h)}})))})),await Promise.all(a),n.Pu.H_(i),await(async function(u,d){const h=We(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>he.forEach(d,(g=>he.forEach(g.Es,(y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y))).next((()=>he.forEach(g.ds,(y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))))))}catch(p){if(!bh(p))throw p;Te(kP,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const y=h.Ms.get(g),S=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(S);h.Ms=h.Ms.insert(g,x)}}})(n.localStore,s))}async function $ie(t,e){const r=We(t);if(!r.currentUser.isEqual(e)){Te(GP,"User change. New user:",e.toKey());const n=await dq(r.localStore,e);r.currentUser=e,(function(s,a){s.mu.forEach((c=>{c.forEach((u=>{u.reject(new xe(ue.CANCELLED,a))}))})),s.mu.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Ug(r,n.Ls)}}function Yie(t,e){const r=We(t),n=r.Au.get(e);if(n&&n.hu)return at().add(n.key);{let i=at();const s=r.Iu.get(e);if(!s)return i;for(const a of s){const c=r.Tu.get(a);i=i.unionWith(c.view.nu)}return i}}function Rq(t){const e=We(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_q.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yie.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Hie.bind(null,e),e.Pu.H_=Oie.bind(null,e.eventManager),e.Pu.yu=jie.bind(null,e.eventManager),e}function Xie(t){const e=We(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Wie.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Kie.bind(null,e),e}class cS{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=AC(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return eie(this.persistence,new Qne,e.initialUser,this.serializer)}Cu(e){return new uq(MP.mi,this.serializer)}Du(e){return new oie}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cS.provider={build:()=>new cS};class Qie extends cS{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){gt(this.persistence.referenceDelegate instanceof aS,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new kne(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?qn.withCacheSize(this.cacheSizeBytes):qn.DEFAULT;return new uq((n=>aS.mi(n,r)),this.serializer)}}class jT{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>v4(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=$ie.bind(null,this.syncEngine),await Pie(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Nie})()}createDatastore(e){const r=AC(e.databaseInfo.databaseId),n=(function(s){return new hie(s)})(e.databaseInfo);return(function(s,a,c,u){return new vie(s,a,c,u)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,i,s,a,c){return new yie(n,i,s,a,c)})(this.localStore,this.datastore,e.asyncQueue,(r=>v4(this.syncEngine,r,0)),(function(){return u4.v()?new u4:new cie})())}createSyncEngine(e,r){return(function(i,s,a,c,u,d,h){const p=new Lie(i,s,a,c,u,d);return h&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){const n=We(r);Te(Cu,"RemoteStore shutting down."),n.Ea.add(5),await zg(n),n.Aa.shutdown(),n.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}jT.provider={build:()=>new jT};class YP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ao("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}const Mc="FirestoreClient";class Jie{constructor(e,r,n,i,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=mn.UNAUTHENTICATED,this.clientId=xP.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,(async a=>{Te(Mc,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(n,(a=>(Te(Mc,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new eo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=VP(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function i_(t,e){t.asyncQueue.verifyOperationInProgress(),Te(Mc,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async i=>{n.isEqual(i)||(await dq(e.localStore,i),n=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function y4(t,e){t.asyncQueue.verifyOperationInProgress();const r=await Zie(t);Te(Mc,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>h4(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,i)=>h4(e.remoteStore,i))),t._onlineComponents=e}async function Zie(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Te(Mc,"Using user provided OfflineComponentProvider");try{await i_(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ue.FAILED_PRECONDITION||i.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(r))throw r;Gd("Error using user provided cache. Falling back to memory cache: "+r),await i_(t,new cS)}}else Te(Mc,"Using default OfflineComponentProvider"),await i_(t,new Qie(void 0));return t._offlineComponents}async function Pq(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Te(Mc,"Using user provided OnlineComponentProvider"),await y4(t,t._uninitializedComponentsProvider._online)):(Te(Mc,"Using default OnlineComponentProvider"),await y4(t,new jT))),t._onlineComponents}function ese(t){return Pq(t).then((e=>e.syncEngine))}async function lS(t){const e=await Pq(t),r=e.eventManager;return r.onListen=zie.bind(null,e.syncEngine),r.onUnlisten=qie.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=Uie.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=Vie.bind(null,e.syncEngine),r}function tse(t,e,r={}){const n=new eo;return t.asyncQueue.enqueueAndForget((async()=>(function(s,a,c,u,d){const h=new YP({next:g=>{h.Nu(),a.enqueueAndForget((()=>HP(s,p)));const y=g.docs.has(c);!y&&g.fromCache?d.reject(new xe(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?d.reject(new xe(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new KP(SC(c.path),h,{includeMetadataChanges:!0,qa:!0});return FP(s,p)})(await lS(t),t.asyncQueue,e,r,n))),n.promise}function rse(t,e,r={}){const n=new eo;return t.asyncQueue.enqueueAndForget((async()=>(function(s,a,c,u,d){const h=new YP({next:g=>{h.Nu(),a.enqueueAndForget((()=>HP(s,p))),g.fromCache&&u.source==="server"?d.reject(new xe(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new KP(c,h,{includeMetadataChanges:!0,qa:!0});return FP(s,p)})(await lS(t),t.asyncQueue,e,r,n))),n.promise}function Iq(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const b4=new Map;const Nq="firestore.googleapis.com",S4=!0;class C4{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new xe(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Nq,this.ssl=S4}else this.host=e.host,this.ssl=e.ssl??S4;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lq;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Mne)throw new xe(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gre("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Iq(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new xe(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new xe(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new xe(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class PC{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new C4({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new C4(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new ore;switch(n.type){case"firstParty":return new dre(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new xe(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=b4.get(r);n&&(Te("ComponentProvider","Removing Datastore"),b4.delete(r),n.terminate())})(this),Promise.resolve()}}function nse(t,e,r,n={}){t=Wn(t,PC);const i=zc(e),s=t._getSettings(),a={...s,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${r}`;i&&(aP(`https://${c}`),oP("Firestore",!0)),s.host!==Nq&&s.host!==c&&Gd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:c,ssl:i,emulatorOptions:n};if(!vu(u,a)&&(t._setSettings(u),n.mockUserToken)){let d,h;if(typeof n.mockUserToken=="string")d=n.mockUserToken,h=mn.MOCK_USER;else{d=RB(n.mockUserToken,t._app?.options.projectId);const p=n.mockUserToken.sub||n.mockUserToken.user_id;if(!p)throw new xe(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new mn(p)}t._authCredentials=new cre(new C7(d,h))}}class go{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new go(this.firestore,e,this._query)}}class nr{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ec(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nr(this.firestore,e,this._key)}toJSON(){return{type:nr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(Dg(r,nr._jsonSchema))return new nr(e,n||null,new De(Mt.fromString(r.referencePath)))}}nr._jsonSchemaVersion="firestore/documentReference/1.0",nr._jsonSchema={type:_r("string",nr._jsonSchemaVersion),referencePath:_r("string")};class Ec extends go{constructor(e,r,n){super(e,r,SC(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nr(this.firestore,null,new De(e))}withConverter(e){return new Ec(this.firestore,e,this._path)}}function di(t,e,...r){if(t=Kt(t),x7("collection","path",e),t instanceof PC){const n=Mt.fromString(e,...r);return MD(n),new Ec(t,null,n)}{if(!(t instanceof nr||t instanceof Ec))throw new xe(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Mt.fromString(e,...r));return MD(n),new Ec(t.firestore,null,n)}}function rr(t,e,...r){if(t=Kt(t),arguments.length===1&&(e=xP.newId()),x7("doc","path",e),t instanceof PC){const n=Mt.fromString(e,...r);return jD(n),new nr(t,null,new De(n))}{if(!(t instanceof nr||t instanceof Ec))throw new xe(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Mt.fromString(e,...r));return jD(n),new nr(t.firestore,t instanceof Ec?t.converter:null,new De(n))}}const x4="AsyncQueue";class w4{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new fq(this,"async_queue_retry"),this._c=()=>{const n=n_();n&&Te(x4,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=n_();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=n_();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const r=new eo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!bh(e))throw e;Te(x4,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const r=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,ao("INTERNAL UNHANDLED ERROR: ",_4(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const i=qP.createAndSchedule(this,e,r,n,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&qe(47125,{Pc:_4(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function _4(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function E4(t){return(function(r,n){if(typeof r!="object"||r===null)return!1;const i=r;for(const s of n)if(s in i&&typeof i[s]=="function")return!0;return!1})(t,["next","error","complete"])}class co extends PC{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new w4,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new w4(e),this._firestoreClient=void 0,await e}}}function ise(t,e){const r=typeof t=="object"?t:uP(),n=typeof t=="string"?t:Zb,i=hC(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const s=EB("firestore");s&&nse(i,...s)}return i}function IC(t){if(t._terminated)throw new xe(ue.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||sse(t),t._firestoreClient}function sse(t){const e=t._freezeSettings(),r=(function(i,s,a,c){return new Pre(i,s,a,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Iq(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Jie(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(t._componentsProvider))}class Vi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vi(ln.fromBase64String(e))}catch(r){throw new xe(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Vi(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dg(e,Vi._jsonSchema))return Vi.fromBase64String(e.bytes)}}Vi._jsonSchemaVersion="firestore/bytes/1.0",Vi._jsonSchema={type:_r("string",Vi._jsonSchemaVersion),bytes:_r("string")};class NC{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new xe(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class XP{constructor(e){this._methodName=e}}class sa{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new xe(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new xe(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:sa._jsonSchemaVersion}}static fromJSON(e){if(Dg(e,sa._jsonSchema))return new sa(e.latitude,e.longitude)}}sa._jsonSchemaVersion="firestore/geoPoint/1.0",sa._jsonSchema={type:_r("string",sa._jsonSchemaVersion),latitude:_r("number"),longitude:_r("number")};class aa{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,i){if(n.length!==i.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:aa._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dg(e,aa._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((r=>typeof r=="number")))return new aa(e.vectorValues);throw new xe(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}aa._jsonSchemaVersion="firestore/vectorValue/1.0",aa._jsonSchema={type:_r("string",aa._jsonSchemaVersion),vectorValues:_r("object")};const ase=/^__.*__$/;class ose{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Fc(e,this.data,this.fieldMask,r,this.fieldTransforms):new kg(e,this.data,r,this.fieldTransforms)}}class Oq{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Fc(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function jq(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qe(40011,{Ac:t})}}class QP{constructor(e,r,n,i,s,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new QP({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const r=this.path?.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){const r=this.path?.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return uS(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(jq(this.Ac)&&ase.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class cse{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||AC(e)}Cc(e,r,n,i=!1){return new QP({Ac:e,methodName:r,Dc:n,path:on.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function OC(t){const e=t._freezeSettings(),r=AC(t._databaseId);return new cse(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Mq(t,e,r,n,i,s={}){const a=t.Cc(s.merge||s.mergeFields?2:0,e,r,i);JP("Data must be an object, but it was:",a,n);const c=Dq(n,a);let u,d;if(s.merge)u=new fi(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){const h=[];for(const p of s.mergeFields){const g=MT(e,p,r);if(!a.contains(g))throw new xe(ue.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Lq(h,g)||h.push(g)}u=new fi(h),d=a.fieldTransforms.filter((p=>u.covers(p.field)))}else u=null,d=a.fieldTransforms;return new ose(new Fn(c),u,d)}class jC extends XP{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jC}}function lse(t,e,r,n){const i=t.Cc(1,e,r);JP("Data must be an object, but it was:",i,n);const s=[],a=Fn.empty();Vc(n,((u,d)=>{const h=ZP(e,u,r);d=Kt(d);const p=i.yc(h);if(d instanceof jC)s.push(h);else{const g=Bg(d,p);g!=null&&(s.push(h),a.set(h,g))}}));const c=new fi(s);return new Oq(a,c,i.fieldTransforms)}function use(t,e,r,n,i,s){const a=t.Cc(1,e,r),c=[MT(e,n,r)],u=[i];if(s.length%2!=0)throw new xe(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)c.push(MT(e,s[g])),u.push(s[g+1]);const d=[],h=Fn.empty();for(let g=c.length-1;g>=0;--g)if(!Lq(d,c[g])){const y=c[g];let S=u[g];S=Kt(S);const x=a.yc(y);if(S instanceof jC)d.push(y);else{const w=Bg(S,x);w!=null&&(d.push(y),h.set(y,w))}}const p=new fi(d);return new Oq(h,p,a.fieldTransforms)}function dse(t,e,r,n=!1){return Bg(r,t.Cc(n?4:3,e))}function Bg(t,e){if(kq(t=Kt(t)))return JP("Unsupported field value:",e,t),Dq(t,e);if(t instanceof XP)return(function(n,i){if(!jq(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,i){const s=[];let a=0;for(const c of n){let u=Bg(c,i.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}})(t,e)}return(function(n,i){if((n=Kt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Jre(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Ee.fromDate(n);return{timestampValue:sS(i.serializer,s)}}if(n instanceof Ee){const s=new Ee(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:sS(i.serializer,s)}}if(n instanceof sa)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Vi)return{bytesValue:rq(i.serializer,n._byteString)};if(n instanceof nr){const s=i.databaseId,a=n.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:OP(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof aa)return(function(a,c){return{mapValue:{fields:{[N7]:{stringValue:O7},[eS]:{arrayValue:{values:a.toArray().map((d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return RP(c.serializer,d)}))}}}}}})(n,i);throw i.Sc(`Unsupported field value: ${vC(n)}`)})(t,e)}function Dq(t,e){const r={};return E7(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vc(t,((n,i)=>{const s=Bg(i,e.mc(n));s!=null&&(r[n]=s)})),{mapValue:{fields:r}}}function kq(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ee||t instanceof sa||t instanceof Vi||t instanceof nr||t instanceof XP||t instanceof aa)}function JP(t,e,r){if(!kq(r)||!w7(r)){const n=vC(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function MT(t,e,r){if((e=Kt(e))instanceof NC)return e._internalPath;if(typeof e=="string")return ZP(t,e);throw uS("Field path arguments must be of type string or ",t,!1,void 0,r)}const hse=new RegExp("[~\\*/\\[\\]]");function ZP(t,e,r){if(e.search(hse)>=0)throw uS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new NC(...e.split("."))._internalPath}catch{throw uS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function uS(t,e,r,n,i){const s=n&&!n.isEmpty(),a=i!==void 0;let c=`Function ${e}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${n}`),a&&(u+=` in document ${i}`),u+=")"),new xe(ue.INVALID_ARGUMENT,c+t+u)}function Lq(t,e){return t.some((r=>r.isEqual(e)))}class zq{constructor(e,r,n,i,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new nr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fse(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(MC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class fse extends zq{data(){return super.data()}}function MC(t,e){return typeof e=="string"?ZP(t,e):e instanceof NC?e._internalPath:e._delegate._internalPath}function Uq(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new xe(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class e2{}class t2 extends e2{}function Ya(t,e,...r){let n=[];e instanceof e2&&n.push(e),n=n.concat(r),(function(s){const a=s.filter((u=>u instanceof r2)).length,c=s.filter((u=>u instanceof DC)).length;if(a>1||a>0&&c>0)throw new xe(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const i of n)t=i._apply(t);return t}class DC extends t2{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new DC(e,r,n)}_apply(e){const r=this._parse(e);return Bq(e._query,r),new go(e.firestore,e.converter,_T(e._query,r))}_parse(e){const r=OC(e.firestore);return(function(s,a,c,u,d,h,p){let g;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new xe(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){T4(p,h);const S=[];for(const x of p)S.push(A4(u,s,x));g={arrayValue:{values:S}}}else g=A4(u,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||T4(p,h),g=dse(c,a,p,h==="in"||h==="not-in");return wr.create(d,h,g)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function sn(t,e,r){const n=e,i=MC("where",t);return DC._create(i,n,r)}class r2 extends e2{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new r2(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:bs.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(i,s){let a=i;const c=s.getFlattenedFilters();for(const u of c)Bq(a,u),a=_T(a,u)})(e._query,r),new go(e.firestore,e.converter,_T(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class n2 extends t2{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new n2(e,r)}_apply(e){const r=(function(i,s,a){if(i.startAt!==null)throw new xe(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new xe(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cg(s,a)})(e._query,this._field,this._direction);return new go(e.firestore,e.converter,(function(i,s){const a=i.explicitOrderBy.concat([s]);return new Sh(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,r))}}function Pb(t,e="asc"){const r=e,n=MC("orderBy",t);return n2._create(n,r)}class i2 extends t2{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new i2(e,r,n)}_apply(e){return new go(e.firestore,e.converter,rS(e._query,this._limit,this._limitType))}}function pse(t){return yre("limit",t),i2._create("limit",t,"F")}function A4(t,e,r){if(typeof(r=Kt(r))=="string"){if(r==="")throw new xe(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!B7(e)&&r.indexOf("/")!==-1)throw new xe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Mt.fromString(r));if(!De.isDocumentKey(n))throw new xe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return VD(t,new De(n))}if(r instanceof nr)return VD(t,r._key);throw new xe(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vC(r)}.`)}function T4(t,e){if(!Array.isArray(t)||t.length===0)throw new xe(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Bq(t,e){const r=(function(i,s){for(const a of i)for(const c of a.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new xe(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class mse{convertValue(e,r="none"){switch(Oc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Nc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw qe(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Vc(e,((i,s)=>{n[i]=this.convertValue(s,r)})),n}convertVectorValue(e){const r=e.fields?.[eS].arrayValue?.values?.map((n=>hr(n.doubleValue)));return new aa(r)}convertGeoPoint(e){return new sa(hr(e.latitude),hr(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=bC(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(sg(e));default:return null}}convertTimestamp(e){const r=Ic(e);return new Ee(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Mt.fromString(e);gt(cq(n),9688,{name:e});const i=new ag(n.get(1),n.get(3)),s=new De(n.popFirst(5));return i.isEqual(r)||ao(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}function qq(t,e,r){let n;return n=t?t.toFirestore(e):e,n}class qv{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ou extends zq{constructor(e,r,n,i,s,a){super(e,r,n,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Ib(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(MC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=ou._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}ou._jsonSchemaVersion="firestore/documentSnapshot/1.0",ou._jsonSchema={type:_r("string",ou._jsonSchemaVersion),bundleSource:_r("string","DocumentSnapshot"),bundleName:_r("string"),bundle:_r("string")};class Ib extends ou{data(e={}){return super.data(e)}}class cu{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new qv(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new Ib(this._firestore,this._userDataWriter,n.key,n,new qv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new xe(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((c=>{const u=new Ib(i._firestore,i._userDataWriter,c.doc.key,c.doc,new qv(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>s||c.type!==3)).map((c=>{const u=new Ib(i._firestore,i._userDataWriter,c.doc.key,c.doc,new qv(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),h=a.indexOf(c.doc.key)),{type:vse(c.type),doc:u,oldIndex:d,newIndex:h}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=cu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xP.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function vse(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qe(61501,{type:t})}}function kC(t){t=Wn(t,nr);const e=Wn(t.firestore,co);return tse(IC(e),t._key).then((r=>Vq(e,t,r)))}cu._jsonSchemaVersion="firestore/querySnapshot/1.0",cu._jsonSchema={type:_r("string",cu._jsonSchemaVersion),bundleSource:_r("string","QuerySnapshot"),bundleName:_r("string"),bundle:_r("string")};class s2 extends mse{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vi(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new nr(this.firestore,null,r)}}function Ac(t){t=Wn(t,go);const e=Wn(t.firestore,co),r=IC(e),n=new s2(e);return Uq(t._query),rse(r,t._query).then((i=>new cu(e,n,t,i)))}function Zd(t,e,r){t=Wn(t,nr);const n=Wn(t.firestore,co),i=qq(t.converter,e);return LC(n,[Mq(OC(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,Wi.none())])}function Cc(t,e,r,...n){t=Wn(t,nr);const i=Wn(t.firestore,co),s=OC(i);let a;return a=typeof(e=Kt(e))=="string"||e instanceof NC?use(s,"updateDoc",t._key,e,r,n):lse(s,"updateDoc",t._key,e),LC(i,[a.toMutation(t._key,Wi.exists(!0))])}function a2(t){return LC(Wn(t.firestore,co),[new PP(t._key,Wi.none())])}function dS(t,e){const r=Wn(t.firestore,co),n=rr(t),i=qq(t.converter,e);return LC(r,[Mq(OC(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,Wi.exists(!1))]).then((()=>n))}function gse(t,...e){t=Kt(t);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||E4(e[n])||(r=e[n++]);const i={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(E4(e[n])){const u=e[n];e[n]=u.next?.bind(u),e[n+1]=u.error?.bind(u),e[n+2]=u.complete?.bind(u)}let s,a,c;if(t instanceof nr)a=Wn(t.firestore,co),c=SC(t._key.path),s={next:u=>{e[n]&&e[n](Vq(a,t,u))},error:e[n+1],complete:e[n+2]};else{const u=Wn(t,go);a=Wn(u.firestore,co),c=u._query;const d=new s2(a);s={next:h=>{e[n]&&e[n](new cu(a,d,u,h))},error:e[n+1],complete:e[n+2]},Uq(t._query)}return(function(d,h,p,g){const y=new YP(g),S=new KP(h,y,p);return d.asyncQueue.enqueueAndForget((async()=>FP(await lS(d),S))),()=>{y.Nu(),d.asyncQueue.enqueueAndForget((async()=>HP(await lS(d),S)))}})(IC(a),c,i,s)}function LC(t,e){return(function(n,i){const s=new eo;return n.asyncQueue.enqueueAndForget((async()=>Fie(await ese(n),i,s))),s.promise})(IC(t),e)}function Vq(t,e,r){const n=r.docs.get(e._key),i=new s2(t);return new ou(t,i,e._key,n,new qv(r.hasPendingWrites,r.fromCache),e.converter)}(function(e,r=!0){(function(i){gh=i})(Iu),gu(new Rc("firestore",((n,{instanceIdentifier:i,options:s})=>{const a=n.getProvider("app").getImmediate(),c=new co(new lre(n.getProvider("auth-internal")),new hre(a,n.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new xe(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ag(d.options.projectId,h)})(a,i),a);return s={useFetchStreams:r,...s},c._setSettings(s),c}),"PUBLIC").setMultipleInstances(!0)),ta(PD,ID,e),ta(PD,ID,"esm2020")})();var yse="firebase",bse="12.6.0";ta(yse,bse,"app");const Fq="firebasestorage.googleapis.com",Hq="storageBucket",Sse=120*1e3,Cse=600*1e3;class or extends va{constructor(e,r,n=0){super(s_(e),`Firebase Storage: ${r} (${s_(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,or.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return s_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var sr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(sr||(sr={}));function s_(t){return"storage/"+t}function o2(){const t="An unknown error occurred, please check the error payload for server response.";return new or(sr.UNKNOWN,t)}function xse(t){return new or(sr.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function wse(t){return new or(sr.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function _se(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new or(sr.UNAUTHENTICATED,t)}function Ese(){return new or(sr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Ase(t){return new or(sr.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Tse(){return new or(sr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Rse(){return new or(sr.CANCELED,"User canceled the upload/download.")}function Pse(t){return new or(sr.INVALID_URL,"Invalid URL '"+t+"'.")}function Ise(t){return new or(sr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Nse(){return new or(sr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Hq+"' property when initializing the app?")}function Ose(){return new or(sr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function jse(){return new or(sr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Mse(t){return new or(sr.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function DT(t){return new or(sr.INVALID_ARGUMENT,t)}function Wq(){return new or(sr.APP_DELETED,"The Firebase app was deleted.")}function Dse(t){return new or(sr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Qv(t,e){return new or(sr.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function zf(t){throw new or(sr.INTERNAL_ERROR,"Internal error: "+t)}class pi{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=pi.makeFromUrl(e,r)}catch{return new pi(e,"")}if(n.path==="")return n;throw Ise(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function s(M){M.path.charAt(M.path.length-1)==="/"&&(M.path_=M.path_.slice(0,-1))}const a="(/(.*))?$",c=new RegExp("^gs://"+i+a,"i"),u={bucket:1,path:3};function d(M){M.path_=decodeURIComponent(M.path)}const h="v[A-Za-z0-9_]+",p=r.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",y=new RegExp(`^https?://${p}/${h}/b/${i}/o${g}`,"i"),S={bucket:1,path:3},x=r===Fq?"(?:storage.googleapis.com|storage.cloud.google.com)":r,w="([^?#]*)",E=new RegExp(`^https?://${x}/${i}/${w}`,"i"),T=[{regex:c,indices:u,postModify:s},{regex:y,indices:S,postModify:d},{regex:E,indices:{bucket:1,path:2},postModify:d}];for(let M=0;M<T.length;M++){const D=T[M],z=D.regex.exec(e);if(z){const j=z[D.indices.bucket];let O=z[D.indices.path];O||(O=""),n=new pi(j,O),D.postModify(n);break}}if(n==null)throw Pse(e);return n}}class kse{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Lse(t,e,r){let n=1,i=null,s=null,a=!1,c=0;function u(){return c===2}let d=!1;function h(...w){d||(d=!0,e.apply(null,w))}function p(w){i=setTimeout(()=>{i=null,t(y,u())},w)}function g(){s&&clearTimeout(s)}function y(w,...E){if(d){g();return}if(w){g(),h.call(null,w,...E);return}if(u()||a){g(),h.call(null,w,...E);return}n<64&&(n*=2);let T;c===1?(c=2,T=0):T=(n+Math.random())*1e3,p(T)}let S=!1;function x(w){S||(S=!0,g(),!d&&(i!==null?(w||(c=2),clearTimeout(i),p(0)):w||(c=1)))}return p(0),s=setTimeout(()=>{a=!0,x(!0)},r),x}function zse(t){t(!1)}function Use(t){return t!==void 0}function Bse(t){return typeof t=="object"&&!Array.isArray(t)}function c2(t){return typeof t=="string"||t instanceof String}function R4(t){return l2()&&t instanceof Blob}function l2(){return typeof Blob<"u"}function P4(t,e,r,n){if(n<e)throw DT(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw DT(`Invalid value for '${t}'. Expected ${r} or less.`)}function zC(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function Kq(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}var lu;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(lu||(lu={}));function qse(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return r||i||s}class Vse{constructor(e,r,n,i,s,a,c,u,d,h,p,g=!0,y=!1){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=p,this.retry=g,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,x)=>{this.resolve_=S,this.reject_=x,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new Q0(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const c=s.getErrorCode()===lu.NO_ERROR,u=s.getStatus();if(!c||qse(u,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===lu.ABORT;n(!1,new Q0(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;n(!0,new Q0(d,s))})},r=(n,i)=>{const s=this.resolve_,a=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());Use(u)?s(u):s()}catch(u){a(u)}else if(c!==null){const u=o2();u.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,u)):a(u)}else if(i.canceled){const u=this.appDelete_?Wq():Rse();a(u)}else{const u=Tse();a(u)}};this.canceled_?r(!1,new Q0(!1,null,!0)):this.backoffId_=Lse(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&zse(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Q0{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function Fse(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Hse(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Wse(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Kse(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Gse(t,e,r,n,i,s,a=!0,c=!1){const u=Kq(t.urlParams),d=t.url+u,h=Object.assign({},t.headers);return Wse(h,e),Fse(h,r),Hse(h,s),Kse(h,n),new Vse(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a,c)}function $se(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Yse(...t){const e=$se();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(l2())return new Blob(t);throw new or(sr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Xse(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}function Qse(t){if(typeof atob>"u")throw Mse("base-64");return atob(t)}const Js={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class a_{constructor(e,r){this.data=e,this.contentType=r||null}}function Jse(t,e){switch(t){case Js.RAW:return new a_(Gq(e));case Js.BASE64:case Js.BASE64URL:return new a_($q(t,e));case Js.DATA_URL:return new a_(eae(e),tae(e))}throw o2()}function Gq(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const s=n,a=t.charCodeAt(++r);n=65536|(s&1023)<<10|a&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function Zse(t){let e;try{e=decodeURIComponent(t)}catch{throw Qv(Js.DATA_URL,"Malformed data URL.")}return Gq(e)}function $q(t,e){switch(t){case Js.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Qv(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Js.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Qv(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=Qse(e)}catch(i){throw i.message.includes("polyfill")?i:Qv(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}class Yq{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Qv(Js.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=rae(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function eae(t){const e=new Yq(t);return e.base64?$q(Js.BASE64,e.rest):Zse(e.rest)}function tae(t){return new Yq(t).contentType}function rae(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}class yc{constructor(e,r){let n=0,i="";R4(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,r){if(R4(this.data_)){const n=this.data_,i=Xse(n,e,r);return i===null?null:new yc(i)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new yc(n,!0)}}static getBlob(...e){if(l2()){const r=e.map(n=>n instanceof yc?n.data_:n);return new yc(Yse.apply(null,r))}else{const r=e.map(a=>c2(a)?Jse(Js.RAW,a).data:a.data_);let n=0;r.forEach(a=>{n+=a.byteLength});const i=new Uint8Array(n);let s=0;return r.forEach(a=>{for(let c=0;c<a.length;c++)i[s++]=a[c]}),new yc(i,!0)}}uploadData(){return this.data_}}function Xq(t){let e;try{e=JSON.parse(t)}catch{return null}return Bse(e)?e:null}function nae(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function iae(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function Qq(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function sae(t,e){return e}class An{constructor(e,r,n,i){this.server=e,this.local=r||e,this.writable=!!n,this.xform=i||sae}}let J0=null;function aae(t){return!c2(t)||t.length<2?t:Qq(t)}function Jq(){if(J0)return J0;const t=[];t.push(new An("bucket")),t.push(new An("generation")),t.push(new An("metageneration")),t.push(new An("name","fullPath",!0));function e(s,a){return aae(a)}const r=new An("name");r.xform=e,t.push(r);function n(s,a){return a!==void 0?Number(a):a}const i=new An("size");return i.xform=n,t.push(i),t.push(new An("timeCreated")),t.push(new An("updated")),t.push(new An("md5Hash",null,!0)),t.push(new An("cacheControl",null,!0)),t.push(new An("contentDisposition",null,!0)),t.push(new An("contentEncoding",null,!0)),t.push(new An("contentLanguage",null,!0)),t.push(new An("contentType",null,!0)),t.push(new An("metadata","customMetadata",!0)),J0=t,J0}function oae(t,e){function r(){const n=t.bucket,i=t.fullPath,s=new pi(n,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:r})}function cae(t,e,r){const n={};n.type="file";const i=r.length;for(let s=0;s<i;s++){const a=r[s];n[a.local]=a.xform(n,e[a.server])}return oae(n,t),n}function Zq(t,e,r){const n=Xq(e);return n===null?null:cae(t,n,r)}function lae(t,e,r,n){const i=Xq(e);if(i===null||!c2(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(d=>{const h=t.bucket,p=t.fullPath,g="/b/"+a(h)+"/o/"+a(p),y=zC(g,r,n),S=Kq({alt:"media",token:d});return y+S})[0]}function uae(t,e){const r={},n=e.length;for(let i=0;i<n;i++){const s=e[i];s.writable&&(r[s.server]=t[s.local])}return JSON.stringify(r)}class u2{constructor(e,r,n,i){this.url=e,this.method=r,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function eV(t){if(!t)throw o2()}function dae(t,e){function r(n,i){const s=Zq(t,i,e);return eV(s!==null),s}return r}function hae(t,e){function r(n,i){const s=Zq(t,i,e);return eV(s!==null),lae(s,i,t.host,t._protocol)}return r}function tV(t){function e(r,n){let i;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?i=Ese():i=_se():r.getStatus()===402?i=wse(t.bucket):r.getStatus()===403?i=Ase(t.path):i=n,i.status=r.getStatus(),i.serverResponse=n.serverResponse,i}return e}function rV(t){const e=tV(t);function r(n,i){let s=e(n,i);return n.getStatus()===404&&(s=xse(t.path)),s.serverResponse=i.serverResponse,s}return r}function fae(t,e,r){const n=e.fullServerUrl(),i=zC(n,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,c=new u2(i,s,hae(t,r),a);return c.errorHandler=rV(e),c}function pae(t,e){const r=e.fullServerUrl(),n=zC(r,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function a(u,d){}const c=new u2(n,i,a,s);return c.successCodes=[200,204],c.errorHandler=rV(e),c}function mae(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function vae(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=mae(null,e)),n}function gae(t,e,r,n,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){let T="";for(let M=0;M<2;M++)T=T+Math.random().toString().slice(2);return T}const u=c();a["Content-Type"]="multipart/related; boundary="+u;const d=vae(e,n,i),h=uae(d,r),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+u+"--",y=yc.getBlob(p,n,g);if(y===null)throw Ose();const S={name:d.fullPath},x=zC(s,t.host,t._protocol),w="POST",E=t.maxUploadRetryTime,R=new u2(x,w,dae(t,r),E);return R.urlParams=S,R.headers=a,R.body=y.uploadData(),R.errorHandler=tV(e),R}class yae{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=lu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=lu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=lu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,i,s){if(this.sent_)throw zf("cannot .send() more than once");if(zc(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw zf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw zf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw zf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw zf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class bae extends yae{initXhr(){this.xhr_.responseType="text"}}function d2(){return new bae}class xu{constructor(e,r){this._service=e,r instanceof pi?this._location=r:this._location=pi.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new xu(e,r)}get root(){const e=new pi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Qq(this._location.path)}get storage(){return this._service}get parent(){const e=nae(this._location.path);if(e===null)return null;const r=new pi(this._location.bucket,e);return new xu(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw Dse(e)}}function Sae(t,e,r){t._throwIfRoot("uploadBytes");const n=gae(t.storage,t._location,Jq(),new yc(e,!0),r);return t.storage.makeRequestWithTokens(n,d2).then(i=>({metadata:i,ref:t}))}function Cae(t){t._throwIfRoot("getDownloadURL");const e=fae(t.storage,t._location,Jq());return t.storage.makeRequestWithTokens(e,d2).then(r=>{if(r===null)throw jse();return r})}function xae(t){t._throwIfRoot("deleteObject");const e=pae(t.storage,t._location);return t.storage.makeRequestWithTokens(e,d2)}function wae(t,e){const r=iae(t._location.path,e),n=new pi(t._location.bucket,r);return new xu(t.storage,n)}function _ae(t){return/^[A-Za-z]+:\/\//.test(t)}function Eae(t,e){return new xu(t,e)}function nV(t,e){if(t instanceof h2){const r=t;if(r._bucket==null)throw Nse();const n=new xu(r,r._bucket);return e!=null?nV(n,e):n}else return e!==void 0?wae(t,e):t}function Aae(t,e){if(e&&_ae(e)){if(t instanceof h2)return Eae(t,e);throw DT("To use ref(service, url), the first argument must be a Storage instance.")}else return nV(t,e)}function I4(t,e){const r=e?.[Hq];return r==null?null:pi.makeFromBucketSpec(r,t)}function Tae(t,e,r,n={}){t.host=`${e}:${r}`;const i=zc(e);i&&(aP(`https://${t.host}/b`),oP("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=n;s&&(t._overrideAuthToken=typeof s=="string"?s:RB(s,t.app.options.projectId))}class h2{constructor(e,r,n,i,s,a=!1){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=Fq,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Sse,this._maxUploadRetryTime=Cse,this._requests=new Set,i!=null?this._bucket=pi.makeFromBucketSpec(i,this._host):this._bucket=I4(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=pi.makeFromBucketSpec(this._url,e):this._bucket=I4(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){P4("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){P4("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(Vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xu(this,e)}_makeRequest(e,r,n,i,s=!0){if(this._deleted)return new kse(Wq());{const a=Gse(e,this._appId,n,i,r,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const N4="@firebase/storage",O4="0.14.0";const iV="storage";function Rae(t,e,r){return t=Kt(t),Sae(t,e,r)}function Pae(t){return t=Kt(t),Cae(t)}function Iae(t){return t=Kt(t),xae(t)}function j4(t,e){return t=Kt(t),Aae(t,e)}function Nae(t=uP(),e){t=Kt(t);const n=hC(t,iV).getImmediate({identifier:e}),i=EB("storage");return i&&Oae(n,...i),n}function Oae(t,e,r,n={}){Tae(t,e,r,n)}function jae(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new h2(r,n,i,e,Iu)}function Mae(){gu(new Rc(iV,jae,"PUBLIC").setMultipleInstances(!0)),ta(N4,O4,""),ta(N4,O4,"esm2020")}Mae();const Dae={apiKey:"AIzaSyDKHfW-8Jm1yQ-KaIUoFyQEFco9GSUXtCo",authDomain:"acciones-7fa3a.firebaseapp.com",projectId:"acciones-7fa3a",storageBucket:"acciones-7fa3a.firebasestorage.app",messagingSenderId:"636200777968",appId:"1:636200777968:web:bab3d22e4a66e2fa5baa35",measurementId:void 0},f2=NB(Dae),oc=sre(f2),lt=ise(f2),M4=Nae(f2),kae=new Ha,kT={ADMIN:"admin",INVESTOR:"investor"},hS=t=>{switch(t){case kT.ADMIN:case"admin":return{canViewStrategies:!0,canManageNotifications:!0,canManageUsers:!0,canViewReports:!0};case kT.INVESTOR:case"investor":case"psychologist":return{canViewStrategies:!0,canManageNotifications:!1,canManageUsers:!1,canViewReports:!0};default:return{canViewStrategies:!1,canManageNotifications:!1,canManageUsers:!1,canViewReports:!1}}},D4=t=>`Campo ${t} obligatorio`,Lae={"auth/email-already-in-use":"Este correo electrnico ya est registrado","auth/invalid-email":"Correo electrnico invlido","auth/operation-not-allowed":"Operacin no permitida","auth/weak-password":"La contrasea es demasiado dbil","auth/user-disabled":"Esta cuenta ha sido deshabilitada","auth/user-not-found":"Usuario no encontrado","auth/wrong-password":"Contrasea incorrecta","auth/invalid-credential":"Credenciales invlidas","auth/too-many-requests":"Demasiados intentos. Intenta ms tarde","auth/network-request-failed":"Error de conexin. Verifica tu internet","auth/popup-closed-by-user":"Ventana de inicio de sesin cerrada","auth/cancelled-popup-request":"Solicitud cancelada","auth/popup-blocked":"Ventana emergente bloqueada por el navegador","auth/missing-email":"Falta el correo electrnico","auth/internal-error":"Error interno del servidor","auth/invalid-api-key":"Clave API invlida","auth/app-deleted":"Aplicacin eliminada","auth/account-exists-with-different-credential":"Ya existe una cuenta con este correo","auth/credential-already-in-use":"Credencial ya en uso","auth/timeout":"Tiempo de espera agotado","permission-denied":"Permisos insuficientes",unauthenticated:"Debes iniciar sesin","not-found":"Recurso no encontrado","already-exists":"El recurso ya existe","resource-exhausted":"Cuota excedida","failed-precondition":"Operacin rechazada",aborted:"Operacin abortada","out-of-range":"Operacin fuera de rango",unimplemented:"Operacin no implementada",internal:"Error interno",unavailable:"Servicio no disponible","data-loss":"Prdida de datos"},k4=t=>Lae[t]||"Ha ocurrido un error. Intenta nuevamente",o_={email:{required:D4("Correo electrnico"),invalid:"Correo electrnico invlido"},password:{required:D4("Contrasea")}},sV=A.createContext(void 0),bi=()=>{const t=A.useContext(sV);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},zae=({children:t})=>{const[e,r]=A.useState(null),[n,i]=A.useState(null),[s,a]=A.useState(!0),c=async S=>{try{const x=await kC(rr(lt,"users",S));if(x.exists()){const w=x.data(),E=hS(w.role);return JSON.stringify(w.permissions)!==JSON.stringify(E)?(await Zd(rr(lt,"users",S),{...w,permissions:E,updatedAt:Ee.now()}),{...w,permissions:E}):w}return null}catch(x){return console.error("Error fetching user data:",x),null}},u=async(S,x,w)=>{const E=kT.ADMIN,R=hS(E),T={uid:S,email:x,displayName:w,role:E,permissions:R,createdAt:Ee.now(),updatedAt:Ee.now(),isActive:!0};return await Zd(rr(lt,"users",S),T),T},d=async(S,x)=>{try{const w=await Wee(oc,S,x),E=await c(w.user.uid);if(!E)throw new Error("Usuario no encontrado en la base de datos");if(!E.isActive)throw await Jw(oc),new Error("Usuario inactivo. Contacta al administrador.")}catch(w){throw new Error(k4(w.code))}},h=async()=>{try{const S=await pte(oc,kae);let x=await c(S.user.uid);if(x||(x=await u(S.user.uid,S.user.email||"",S.user.displayName||"Usuario")),!x.isActive)throw await Jw(oc),new Error("Usuario inactivo. Contacta al administrador.")}catch(S){throw new Error(k4(S.code))}},p=async(S,x,w)=>{const E=await r7(oc,S,x);await u(E.user.uid,S,w)},g=async()=>{await Jw(oc)};A.useEffect(()=>$ee(oc,async x=>{if(i(x),x){const w=await c(x.uid);r(w)}else r(null);a(!1)}),[]);const y={currentUser:e,firebaseUser:n,loading:s,login:d,loginWithGoogle:h,register:p,logout:g};return m.jsx(sV.Provider,{value:y,children:t})},aV=A.createContext(void 0),Uae=()=>{const t=A.useContext(aV);if(!t)throw new Error("useAssistant must be used within an AssistantProvider");return t},Bae=({children:t})=>{const[e,r]=A.useState(!1),[n,i]=A.useState(void 0),s=c=>{i(c),r(!0)},a=()=>{r(!1),setTimeout(()=>i(void 0),300)};return m.jsx(aV.Provider,{value:{showAssistant:s,hideAssistant:a,isAssistantOpen:e,welcomeMessage:n},children:t})},UC=({size:t="md"})=>{const e={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return m.jsx("div",{className:"flex items-center justify-center",children:m.jsxs("svg",{className:`animate-spin ${e[t]} text-primary`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})},ls=({children:t})=>{const{currentUser:e,loading:r}=bi();return r?m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsx(UC,{size:"lg"})}):e?m.jsx(m.Fragment,{children:t}):m.jsx(Fb,{to:"/login",replace:!0})},qae=({children:t})=>{const{currentUser:e,loading:r}=bi();return r?m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsx(UC,{size:"lg"})}):e?m.jsx(Fb,{to:"/dashboard",replace:!0}):m.jsx(m.Fragment,{children:t})};var oV={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},L4=ea.createContext&&ea.createContext(oV),Vae=["attr","size","title"];function Fae(t,e){if(t==null)return{};var r=Hae(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Hae(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function fS(){return fS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fS.apply(this,arguments)}function z4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?z4(Object(r),!0).forEach(function(n){Wae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):z4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Wae(t,e,r){return e=Kae(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kae(t){var e=Gae(t,"string");return typeof e=="symbol"?e:e+""}function Gae(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cV(t){return t&&t.map((e,r)=>ea.createElement(e.tag,pS({key:r},e.attr),cV(e.child)))}function ke(t){return e=>ea.createElement($ae,fS({attr:pS({},t.attr)},e),cV(t.child))}function $ae(t){var e=r=>{var{attr:n,size:i,title:s}=t,a=Fae(t,Vae),c=i||r.size||"1em",u;return r.className&&(u=r.className),t.className&&(u=(u?u+" ":"")+t.className),ea.createElement("svg",fS({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,a,{className:u,style:pS(pS({color:t.color||r.color},r.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),s&&ea.createElement("title",null,s),t.children)};return L4!==void 0?ea.createElement(L4.Consumer,null,r=>e(r)):e(oV)}function p2(t){return ke({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"},child:[]}]})(t)}function Yae(t){return ke({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M256 336h-.02c0-16.18 1.34-8.73-85.05-181.51-17.65-35.29-68.19-35.36-85.87 0C-2.06 328.75.02 320.33.02 336H0c0 44.18 57.31 80 128 80s128-35.82 128-80zM128 176l72 144H56l72-144zm511.98 160c0-16.18 1.34-8.73-85.05-181.51-17.65-35.29-68.19-35.36-85.87 0-87.12 174.26-85.04 165.84-85.04 181.51H384c0 44.18 57.31 80 128 80s128-35.82 128-80h-.02zM440 320l72-144 72 144H440zm88 128H352V153.25c23.51-10.29 41.16-31.48 46.39-57.25H528c8.84 0 16-7.16 16-16V48c0-8.84-7.16-16-16-16H383.64C369.04 12.68 346.09 0 320 0s-49.04 12.68-63.64 32H112c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h129.61c5.23 25.76 22.87 46.96 46.39 57.25V448H112c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h416c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function Xae(t){return ke({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(t)}function Qae(t){return ke({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"},child:[]}]})(t)}function Jae(t){return ke({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function ua(t){return ke({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(t)}function lV(t){return ke({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(t)}function dc(t){return ke({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function Zae(t){return ke({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(t)}function eoe(t){return ke({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function toe(t){return ke({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(t)}function roe(t){return ke({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"},child:[]}]})(t)}function noe(t){return ke({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function uV(t){return ke({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"},child:[]}]})(t)}function Hc(t){return ke({attr:{viewBox:"0 0 288 512"},child:[{tag:"path",attr:{d:"M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z"},child:[]}]})(t)}function m2(t){return ke({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function ioe(t){return ke({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function soe(t){return ke({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function aoe(t){return ke({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(t)}function ooe(t){return ke({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(t)}function coe(t){return ke({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(t)}function loe(t){return ke({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM64 72c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8V72zm0 64c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8v-16zm192.81 248H304c8.84 0 16 7.16 16 16s-7.16 16-16 16h-47.19c-16.45 0-31.27-9.14-38.64-23.86-2.95-5.92-8.09-6.52-10.17-6.52s-7.22.59-10.02 6.19l-7.67 15.34a15.986 15.986 0 0 1-14.31 8.84c-.38 0-.75-.02-1.14-.05-6.45-.45-12-4.75-14.03-10.89L144 354.59l-10.61 31.88c-5.89 17.66-22.38 29.53-41 29.53H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h12.39c4.83 0 9.11-3.08 10.64-7.66l18.19-54.64c3.3-9.81 12.44-16.41 22.78-16.41s19.48 6.59 22.77 16.41l13.88 41.64c19.77-16.19 54.05-9.7 66 14.16 2.02 4.06 5.96 6.5 10.16 6.5zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"},child:[]}]})(t)}function uoe(t){return ke({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M437.2 403.5L320 215V64h8c13.3 0 24-10.7 24-24V24c0-13.3-10.7-24-24-24H120c-13.3 0-24 10.7-24 24v16c0 13.3 10.7 24 24 24h8v151L10.8 403.5C-18.5 450.6 15.3 512 70.9 512h306.2c55.7 0 89.4-61.5 60.1-108.5zM137.9 320l48.2-77.6c3.7-5.2 5.8-11.6 5.8-18.4V64h64v160c0 6.9 2.2 13.2 5.8 18.4l48.2 77.6h-172z"},child:[]}]})(t)}function doe(t){return ke({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M485.5 0L576 160H474.9L405.7 0h79.8zm-128 0l69.2 160H149.3L218.5 0h139zm-267 0h79.8l-69.2 160H0L90.5 0zM0 192h100.7l123 251.7c1.5 3.1-2.7 5.9-5 3.3L0 192zm148.2 0h279.6l-137 318.2c-1 2.4-4.5 2.4-5.5 0L148.2 192zm204.1 251.7l123-251.7H576L357.3 446.9c-2.3 2.7-6.5-.1-5-3.2z"},child:[]}]})(t)}function hoe(t){return ke({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"},child:[]}]})(t)}function foe(t){return ke({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function poe(t){return ke({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(t)}function moe(t){return ke({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M96.06 454.35c.01 6.29 1.87 12.45 5.36 17.69l17.09 25.69a31.99 31.99 0 0 0 26.64 14.28h61.71a31.99 31.99 0 0 0 26.64-14.28l17.09-25.69a31.989 31.989 0 0 0 5.36-17.69l.04-38.35H96.01l.05 38.35zM0 176c0 44.37 16.45 84.85 43.56 115.78 16.52 18.85 42.36 58.23 52.21 91.45.04.26.07.52.11.78h160.24c.04-.26.07-.51.11-.78 9.85-33.22 35.69-72.6 52.21-91.45C335.55 260.85 352 220.37 352 176 352 78.61 272.91-.3 175.45 0 73.44.31 0 82.97 0 176zm176-80c-44.11 0-80 35.89-80 80 0 8.84-7.16 16-16 16s-16-7.16-16-16c0-61.76 50.24-112 112-112 8.84 0 16 7.16 16 16s-7.16 16-16 16z"},child:[]}]})(t)}function voe(t){return ke({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(t)}function goe(t){return ke({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},child:[]}]})(t)}function yoe(t){return ke({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(t)}function v2(t){return ke({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"},child:[]}]})(t)}function qg(t){return ke({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505.12019,19.09375c-1.18945-5.53125-6.65819-11-12.207-12.1875C460.716,0,435.507,0,410.40747,0,307.17523,0,245.26909,55.20312,199.05238,128H94.83772c-16.34763.01562-35.55658,11.875-42.88664,26.48438L2.51562,253.29688A28.4,28.4,0,0,0,0,264a24.00867,24.00867,0,0,0,24.00582,24H127.81618l-22.47457,22.46875c-11.36521,11.36133-12.99607,32.25781,0,45.25L156.24582,406.625c11.15623,11.1875,32.15619,13.15625,45.27726,0l22.47457-22.46875V488a24.00867,24.00867,0,0,0,24.00581,24,28.55934,28.55934,0,0,0,10.707-2.51562l98.72834-49.39063c14.62888-7.29687,26.50776-26.5,26.50776-42.85937V312.79688c72.59753-46.3125,128.03493-108.40626,128.03493-211.09376C512.07526,76.5,512.07526,51.29688,505.12019,19.09375ZM384.04033,168A40,40,0,1,1,424.05,128,40.02322,40.02322,0,0,1,384.04033,168Z"},child:[]}]})(t)}function boe(t){return ke({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function dV(t){return ke({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"},child:[]}]})(t)}function Soe(t){return ke({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function hV(t){return ke({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41z"},child:[]}]})(t)}function fV(t){return ke({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M279 224H41c-21.4 0-32.1-25.9-17-41L143 64c9.4-9.4 24.6-9.4 33.9 0l119 119c15.2 15.1 4.5 41-16.9 41z"},child:[]}]})(t)}function pV(t){return ke({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41zm255-105L177 64c-9.4-9.4-24.6-9.4-33.9 0L24 183c-15.1 15.1-4.4 41 17 41h238c21.4 0 32.1-25.9 17-41z"},child:[]}]})(t)}function Coe(t){return ke({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(t)}function xoe(t){return ke({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"},child:[]}]})(t)}function woe(t){return ke({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"},child:[]}]})(t)}function $s(t){return ke({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function g2(t){return ke({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function _oe(t){return ke({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4zm323-128.4l-27.8-28.1c-4.6-4.7-12.1-4.7-16.8-.1l-104.8 104-45.5-45.8c-4.6-4.7-12.1-4.7-16.8-.1l-28.1 27.9c-4.7 4.6-4.7 12.1-.1 16.8l81.7 82.3c4.6 4.7 12.1 4.7 16.8.1l141.3-140.2c4.6-4.7 4.7-12.2.1-16.8z"},child:[]}]})(t)}function Eoe(t){return ke({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(t)}function Aoe(t){return ke({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zM104 424c0 13.3 10.7 24 24 24s24-10.7 24-24-10.7-24-24-24-24 10.7-24 24zm216-135.4v49c36.5 7.4 64 39.8 64 78.4v41.7c0 7.6-5.4 14.2-12.9 15.7l-32.2 6.4c-4.3.9-8.5-1.9-9.4-6.3l-3.1-15.7c-.9-4.3 1.9-8.6 6.3-9.4l19.3-3.9V416c0-62.8-96-65.1-96 1.9v26.7l19.3 3.9c4.3.9 7.1 5.1 6.3 9.4l-3.1 15.7c-.9 4.3-5.1 7.1-9.4 6.3l-31.2-4.2c-7.9-1.1-13.8-7.8-13.8-15.9V416c0-38.6 27.5-70.9 64-78.4v-45.2c-2.2.7-4.4 1.1-6.6 1.9-18 6.3-37.3 9.8-57.4 9.8s-39.4-3.5-57.4-9.8c-7.4-2.6-14.9-4.2-22.6-5.2v81.6c23.1 6.9 40 28.1 40 53.4 0 30.9-25.1 56-56 56s-56-25.1-56-56c0-25.3 16.9-46.5 40-53.4v-80.4C48.5 301 0 355.8 0 422.4v44.8C0 491.9 20.1 512 44.8 512h358.4c24.7 0 44.8-20.1 44.8-44.8v-44.8c0-72-56.8-130.3-128-133.8z"},child:[]}]})(t)}function LT(t){return ke({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function mV(t){return ke({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.3 271.1l-115.2-45c-4.1-1.6-12.6-3.7-22.2 0l-115.2 45c-10.7 4.2-17.7 14-17.7 24.9 0 111.6 68.7 188.8 132.9 213.9 9.6 3.7 18 1.6 22.2 0C558.4 489.9 640 420.5 640 296c0-10.9-7-20.7-17.7-24.9zM496 462.4V273.3l95.5 37.3c-5.6 87.1-60.9 135.4-95.5 151.8zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm96 40c0-2.5.8-4.8 1.1-7.2-2.5-.1-4.9-.8-7.5-.8h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c6.8 0 13.3-1.5 19.2-4-54-42.9-99.2-116.7-99.2-212z"},child:[]}]})(t)}function Toe(t){return ke({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M630.6 364.9l-90.3-90.2c-12-12-28.3-18.7-45.3-18.7h-79.3c-17.7 0-32 14.3-32 32v79.2c0 17 6.7 33.2 18.7 45.2l90.3 90.2c12.5 12.5 32.8 12.5 45.3 0l92.5-92.5c12.6-12.5 12.6-32.7.1-45.2zm-182.8-21c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24c0 13.2-10.7 24-24 24zm-223.8-88c70.7 0 128-57.3 128-128C352 57.3 294.7 0 224 0S96 57.3 96 128c0 70.6 57.3 127.9 128 127.9zm127.8 111.2V294c-12.2-3.6-24.9-6.2-38.2-6.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 287.9 0 348.1 0 422.3v41.6c0 26.5 21.5 48 48 48h352c15.5 0 29.1-7.5 37.9-18.9l-58-58c-18.1-18.1-28.1-42.2-28.1-67.9z"},child:[]}]})(t)}function Roe(t){return ke({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M589.6 240l45.6-45.6c6.3-6.3 6.3-16.5 0-22.8l-22.8-22.8c-6.3-6.3-16.5-6.3-22.8 0L544 194.4l-45.6-45.6c-6.3-6.3-16.5-6.3-22.8 0l-22.8 22.8c-6.3 6.3-6.3 16.5 0 22.8l45.6 45.6-45.6 45.6c-6.3 6.3-6.3 16.5 0 22.8l22.8 22.8c6.3 6.3 16.5 6.3 22.8 0l45.6-45.6 45.6 45.6c6.3 6.3 16.5 6.3 22.8 0l22.8-22.8c6.3-6.3 6.3-16.5 0-22.8L589.6 240zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function Poe(t){return ke({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M610.5 341.3c2.6-14.1 2.6-28.5 0-42.6l25.8-14.9c3-1.7 4.3-5.2 3.3-8.5-6.7-21.6-18.2-41.2-33.2-57.4-2.3-2.5-6-3.1-9-1.4l-25.8 14.9c-10.9-9.3-23.4-16.5-36.9-21.3v-29.8c0-3.4-2.4-6.4-5.7-7.1-22.3-5-45-4.8-66.2 0-3.3.7-5.7 3.7-5.7 7.1v29.8c-13.5 4.8-26 12-36.9 21.3l-25.8-14.9c-2.9-1.7-6.7-1.1-9 1.4-15 16.2-26.5 35.8-33.2 57.4-1 3.3.4 6.8 3.3 8.5l25.8 14.9c-2.6 14.1-2.6 28.5 0 42.6l-25.8 14.9c-3 1.7-4.3 5.2-3.3 8.5 6.7 21.6 18.2 41.1 33.2 57.4 2.3 2.5 6 3.1 9 1.4l25.8-14.9c10.9 9.3 23.4 16.5 36.9 21.3v29.8c0 3.4 2.4 6.4 5.7 7.1 22.3 5 45 4.8 66.2 0 3.3-.7 5.7-3.7 5.7-7.1v-29.8c13.5-4.8 26-12 36.9-21.3l25.8 14.9c2.9 1.7 6.7 1.1 9-1.4 15-16.2 26.5-35.8 33.2-57.4 1-3.3-.4-6.8-3.3-8.5l-25.8-14.9zM496 368.5c-26.8 0-48.5-21.8-48.5-48.5s21.8-48.5 48.5-48.5 48.5 21.8 48.5 48.5-21.7 48.5-48.5 48.5zM96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm224 32c1.9 0 3.7-.5 5.6-.6 8.3-21.7 20.5-42.1 36.3-59.2 7.4-8 17.9-12.6 28.9-12.6 6.9 0 13.7 1.8 19.6 5.3l7.9 4.6c.8-.5 1.6-.9 2.4-1.4 7-14.6 11.2-30.8 11.2-48 0-61.9-50.1-112-112-112S208 82.1 208 144c0 61.9 50.1 112 112 112zm105.2 194.5c-2.3-1.2-4.6-2.6-6.8-3.9-8.2 4.8-15.3 9.8-27.5 9.8-10.9 0-21.4-4.6-28.9-12.6-18.3-19.8-32.3-43.9-40.2-69.6-10.7-34.5 24.9-49.7 25.8-50.3-.1-2.6-.1-5.2 0-7.8l-7.9-4.6c-3.8-2.2-7-5-9.8-8.1-3.3.2-6.5.6-9.8.6-24.6 0-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h255.4c-3.7-6-6.2-12.8-6.2-20.3v-9.2zM173.1 274.6C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}function U4(t){return ke({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}function Ioe(t){return ke({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M461.2 128H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h384c8.84 0 16-7.16 16-16 0-26.51-21.49-48-48-48H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h397.2c28.02 0 50.8-21.53 50.8-48V176c0-26.47-22.78-48-50.8-48zM416 336c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"},child:[]}]})(t)}const oa=({label:t,error:e,maxLength:r,showCharCount:n=!0,className:i="",value:s,onChange:a,type:c,...u})=>{const[d,h]=A.useState(0),[p,g]=A.useState(!1),[y,S]=A.useState(!1),x=c==="password";return A.useEffect(()=>{h(s?String(s).length:0)},[s]),m.jsxs("div",{className:"w-full",children:[t&&m.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-text-primary mb-2 transition-colors",children:[t,u.required&&m.jsx("span",{className:"text-danger ml-1",children:"*"})]}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base border rounded-lg transition-all duration-200
          ${e?"border-danger focus:ring-2 focus:ring-danger/20 bg-danger/5":y?"border-primary focus:ring-2 focus:ring-primary/20 bg-white":"border-border focus:border-primary hover:border-primary/70 bg-white/50"}
          outline-none text-text-primary placeholder-text-secondary/70
          ${x?"pr-10":""}
          ${i}`,value:s,onChange:a,onFocus:()=>S(!0),onBlur:()=>S(!1),maxLength:r,type:x&&p?"text":c,...u}),x&&m.jsx("button",{type:"button",onClick:()=>g(!p),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors p-1",tabIndex:-1,children:p?m.jsx(ooe,{className:"text-base sm:text-lg"}):m.jsx(coe,{className:"text-base sm:text-lg"})})]}),m.jsxs("div",{className:"flex justify-between items-center mt-1.5",children:[m.jsx("div",{className:"min-h-[20px]",children:e&&m.jsx("p",{className:"text-xs sm:text-sm text-danger font-medium",children:e})}),r&&n&&m.jsxs("p",{className:"text-xs text-text-secondary",children:[d,"/",r]})]})]})},yn=({variant:t="primary",size:e="md",isLoading:r=!1,children:n,className:i="",disabled:s,...a})=>{const c="font-medium rounded-lg transition-all duration-200 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 active:scale-95",u={primary:"bg-primary text-white hover:bg-primary/90 active:bg-primary/80 focus:ring-primary/30 shadow-md hover:shadow-lg",secondary:"bg-secondary text-white hover:bg-secondary/90 active:bg-secondary/80 focus:ring-secondary/30 shadow-md hover:shadow-lg",danger:"bg-danger text-white hover:bg-danger/90 active:bg-danger/80 focus:ring-danger/30 shadow-md hover:shadow-lg",success:"bg-success text-white hover:bg-success/90 active:bg-success/80 focus:ring-success/30 shadow-md hover:shadow-lg",outline:"border-2 border-primary text-primary hover:bg-primary hover:text-white focus:ring-primary/30 transition-colors"},d={sm:"px-3 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm",md:"px-4 sm:px-5 py-2 sm:py-2.5 text-sm sm:text-base",lg:"px-6 sm:px-7 py-3 sm:py-3.5 text-base sm:text-lg"};return m.jsx("button",{className:`${c} ${u[t]} ${d[e]} ${i}`,disabled:s||r,...a,children:r?m.jsxs("span",{className:"flex items-center justify-center gap-2",children:[m.jsxs("svg",{className:"animate-spin h-4 w-4 sm:h-5 sm:w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),m.jsx("span",{className:"text-xs sm:text-sm",children:"Cargando..."})]}):n})},eh=({isOpen:t,onClose:e,title:r,children:n,size:i="md"})=>{if(A.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),A.useEffect(()=>{const a=c=>{c.key==="Escape"&&t&&e()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[t,e]),!t)return null;const s={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return uC.createPortal(m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm animate-fadeIn",onClick:e}),m.jsxs("div",{className:`relative bg-white rounded-xl shadow-2xl w-full ${s[i]} animate-slideUp`,children:[r&&m.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border",children:[m.jsx("h2",{className:"text-xl font-semibold text-text-primary",children:r}),m.jsx("button",{onClick:e,className:"text-text-secondary hover:text-text-primary transition-colors cursor-pointer",children:m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),m.jsx("div",{className:"px-6 py-4 max-h-[calc(100vh-200px)] overflow-y-auto",children:n})]})]}),document.body)},BC=({isOpen:t,onClose:e,title:r,message:n,type:i="warning",buttonText:s="Entendido"})=>{const c={warning:{bg:"bg-warning/10",color:"text-warning",path:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"},error:{bg:"bg-danger/10",color:"text-danger",path:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"},info:{bg:"bg-info/10",color:"text-info",path:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}}[i];return m.jsx(eh,{isOpen:t,onClose:e,size:"sm",children:m.jsxs("div",{className:"text-center py-4",children:[m.jsx("div",{className:`mx-auto flex items-center justify-center h-16 w-16 rounded-full ${c.bg} mb-4`,children:m.jsx("svg",{className:`h-10 w-10 ${c.color}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:c.path})})}),m.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-2",children:r}),m.jsx("p",{className:"text-text-secondary mb-6",children:n}),m.jsx(yn,{variant:"primary",onClick:e,className:"min-w-[120px]",children:s})]})})},B4=()=>{const[t,e]=A.useState([]);return A.useEffect(()=>{const r=Array.from({length:30},(n,i)=>({id:i,x:Math.random()*100,y:Math.random()*100,size:Math.random()*4+2,duration:Math.random()*20+15}));e(r)},[]),m.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:t.map(r=>m.jsx("div",{className:"absolute rounded-full bg-white/20",style:{left:`${r.x}%`,top:`${r.y}%`,width:`${r.size}px`,height:`${r.size}px`,animation:`float ${r.duration}s infinite ease-in-out`,animationDelay:`${Math.random()*5}s`}},r.id))})},Noe=()=>{const t=Pu(),{login:e}=bi(),[r,n]=A.useState({email:"",password:""}),[i,s]=A.useState({}),[a,c]=A.useState(!1),[u,d]=A.useState(!1),[h,p]=A.useState(""),g=()=>{const x={};return r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(x.email=o_.email.invalid):x.email=o_.email.required,r.password||(x.password=o_.password.required),s(x),Object.keys(x).length===0},y=async x=>{if(x.preventDefault(),!!g()){c(!0);try{await e(r.email,r.password),t("/dashboard")}catch(w){p(w.message||"Error al iniciar sesin"),d(!0)}finally{c(!1)}}},S=()=>{window.open("https://wa.me/5215579987650?text=Hola,%20me%20interesa%20el%20bot%20de%20trading%20automatizado","_blank")};return m.jsxs(m.Fragment,{children:[m.jsx("style",{children:`
                @keyframes float {
                    0%, 100% { transform: translateY(0) translateX(0); }
                    25% { transform: translateY(-20px) translateX(10px); }
                    50% { transform: translateY(-10px) translateX(-10px); }
                    75% { transform: translateY(-30px) translateX(5px); }
                }
                
                @keyframes rotate {
                    from { transform: rotate(0deg); }
                    to { transform: rotate(360deg); }
                }
                
                @keyframes pulse-glow {
                    0%, 100% { opacity: 0.3; transform: scale(1); }
                    50% { opacity: 0.6; transform: scale(1.1); }
                }

                @keyframes slideInUp {
                    from {
                        opacity: 0;
                        transform: translateY(20px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }

                @keyframes slideInDown {
                    from {
                        opacity: 0;
                        transform: translateY(-20px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }

                .animate-slide-up {
                    animation: slideInUp 0.6s ease-out forwards;
                }

                .animate-slide-down {
                    animation: slideInDown 0.6s ease-out forwards;
                }

                @media (max-width: 1023px) {
                    .mobile-full-height {
                        min-height: 100dvh;
                    }
                }
            `}),m.jsxs("div",{className:"min-h-screen w-full flex flex-col lg:flex-row relative bg-white",children:[m.jsxs("div",{className:"hidden lg:flex lg:w-1/2 h-screen bg-gradient-to-br from-[#1b527c] via-[#2d9bf0] to-[#0f6cbf] text-white relative overflow-hidden flex-col justify-between",children:[m.jsx(B4,{}),m.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[m.jsx("div",{className:"absolute top-20 right-20 w-40 h-40 opacity-10",children:m.jsx("svg",{viewBox:"0 0 100 100",className:"w-full h-full animate-[rotate_30s_linear_infinite]",children:m.jsx("polygon",{points:"50,5 95,27.5 95,72.5 50,95 5,72.5 5,27.5",fill:"none",stroke:"currentColor",strokeWidth:"2"})})}),m.jsx("div",{className:"absolute bottom-40 left-10 w-32 h-32 opacity-10",children:m.jsx("svg",{viewBox:"0 0 100 100",className:"w-full h-full animate-[rotate_25s_linear_infinite_reverse]",children:m.jsx("polygon",{points:"50,5 95,27.5 95,72.5 50,95 5,72.5 5,27.5",fill:"none",stroke:"currentColor",strokeWidth:"2"})})}),m.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 rounded-full border-2 border-[#55bff3]/20 animate-[pulse-glow_4s_ease-in-out_infinite]"}),m.jsx("div",{className:"absolute bottom-1/3 right-1/4 w-48 h-48 rounded-full border-2 border-[#55bff3]/20 animate-[pulse-glow_5s_ease-in-out_infinite]",style:{animationDelay:"1s"}}),m.jsx("div",{className:"absolute top-1/2 right-10 w-24 h-24 border-2 border-[#55bff3]/15 transform rotate-45 animate-[rotate_40s_linear_infinite]"}),m.jsx("div",{className:"absolute bottom-20 left-1/3 w-20 h-20 border-2 border-[#55bff3]/15 transform rotate-12 animate-[rotate_35s_linear_infinite_reverse]"}),m.jsx("div",{className:"absolute top-40 left-1/2 w-32 h-32 opacity-10",children:m.jsx("svg",{viewBox:"0 0 100 100",className:"w-full h-full animate-[float_15s_ease-in-out_infinite]",children:m.jsx("polygon",{points:"50,10 90,90 10,90",fill:"none",stroke:"currentColor",strokeWidth:"2"})})}),m.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-20",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("defs",{children:m.jsx("pattern",{id:"dots",width:"30",height:"30",patternUnits:"userSpaceOnUse",children:m.jsx("circle",{cx:"15",cy:"15",r:"1.5",fill:"currentColor"})})}),m.jsx("rect",{width:"100%",height:"100%",fill:"url(#dots)"})]}),m.jsxs("div",{className:"absolute inset-0",children:[m.jsx("div",{className:"absolute top-1/4 left-0 w-full h-0.5 bg-gradient-to-r from-transparent via-[#55bff3]/30 to-transparent transform -rotate-12"}),m.jsx("div",{className:"absolute top-2/4 left-0 w-full h-0.5 bg-gradient-to-r from-transparent via-[#55bff3]/30 to-transparent transform rotate-12"}),m.jsx("div",{className:"absolute top-3/4 left-0 w-full h-0.5 bg-gradient-to-r from-transparent via-[#55bff3]/30 to-transparent transform -rotate-6"})]})]}),m.jsx(B4,{}),m.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[m.jsx("div",{className:"absolute top-20 right-20 w-40 h-40 opacity-10",children:m.jsx("svg",{viewBox:"0 0 100 100",className:"w-full h-full animate-[rotate_30s_linear_infinite]",children:m.jsx("polygon",{points:"50,5 95,27.5 95,72.5 50,95 5,72.5 5,27.5",fill:"none",stroke:"currentColor",strokeWidth:"2"})})}),m.jsx("div",{className:"absolute bottom-40 left-10 w-32 h-32 opacity-10",children:m.jsx("svg",{viewBox:"0 0 100 100",className:"w-full h-full animate-[rotate_25s_linear_infinite_reverse]",children:m.jsx("polygon",{points:"50,5 95,27.5 95,72.5 50,95 5,72.5 5,27.5",fill:"none",stroke:"currentColor",strokeWidth:"2"})})}),m.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 rounded-full border-2 border-[#55bff3]/20 animate-[pulse-glow_4s_ease-in-out_infinite]"}),m.jsx("div",{className:"absolute bottom-1/3 right-1/4 w-48 h-48 rounded-full border-2 border-[#55bff3]/20 animate-[pulse-glow_5s_ease-in-out_infinite]",style:{animationDelay:"1s"}}),m.jsx("div",{className:"absolute top-1/2 right-10 w-24 h-24 border-2 border-[#55bff3]/15 transform rotate-45 animate-[rotate_40s_linear_infinite]"}),m.jsx("div",{className:"absolute bottom-20 left-1/3 w-20 h-20 border-2 border-[#55bff3]/15 transform rotate-12 animate-[rotate_35s_linear_infinite_reverse]"}),m.jsx("div",{className:"absolute top-40 left-1/2 w-32 h-32 opacity-10",children:m.jsx("svg",{viewBox:"0 0 100 100",className:"w-full h-full animate-[float_15s_ease-in-out_infinite]",children:m.jsx("polygon",{points:"50,10 90,90 10,90",fill:"none",stroke:"currentColor",strokeWidth:"2"})})}),m.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-20",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("defs",{children:m.jsx("pattern",{id:"dots",width:"30",height:"30",patternUnits:"userSpaceOnUse",children:m.jsx("circle",{cx:"15",cy:"15",r:"1.5",fill:"currentColor"})})}),m.jsx("rect",{width:"100%",height:"100%",fill:"url(#dots)"})]}),m.jsxs("div",{className:"absolute inset-0",children:[m.jsx("div",{className:"absolute top-1/4 left-0 w-full h-0.5 bg-gradient-to-r from-transparent via-[#55bff3]/30 to-transparent transform -rotate-12"}),m.jsx("div",{className:"absolute top-2/4 left-0 w-full h-0.5 bg-gradient-to-r from-transparent via-[#55bff3]/30 to-transparent transform rotate-12"}),m.jsx("div",{className:"absolute top-3/4 left-0 w-full h-0.5 bg-gradient-to-r from-transparent via-[#55bff3]/30 to-transparent transform -rotate-6"})]})]}),m.jsxs("div",{className:"relative z-10 h-full flex flex-col justify-between p-6 lg:p-8",children:[m.jsxs("div",{className:"animate-slide-down",children:[m.jsx("div",{className:"mb-6",children:m.jsx("img",{src:"/images/logotipo-vaiston-byn.png",alt:"Vaiston Logo",className:"h-10 lg:h-12 w-auto drop-shadow-lg"})}),m.jsxs("div",{className:"mb-8",children:[m.jsx("h1",{className:"text-3xl lg:text-4xl font-bold mb-3 leading-tight drop-shadow-lg",children:"Trading Automatizado con IA"}),m.jsx("p",{className:"text-base lg:text-lg text-white/90 drop-shadow",children:"Bot inteligente para inversiones en acciones"})]}),m.jsx("div",{className:"mb-6 inline-block",children:m.jsx("div",{className:"px-4 py-2 bg-white/10 backdrop-blur-md rounded-full border border-white/30 shadow-lg",children:m.jsx("p",{className:"text-xs font-semibold",children:" Versin Demo"})})}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("h3",{className:"text-sm font-bold text-white/90 mb-3",children:"Funcionalidades Principales"}),m.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Trading automatizado","Estrategia Value Investing","Stop Loss automtico","Take Profit +15%","Monitoreo 24/7","Gestin de riesgo","Dashboard en tiempo real","Integracin Alpaca","Anlisis de mercado","Reportes detallados"].map((x,w)=>m.jsxs("div",{className:"flex items-center gap-2 backdrop-blur-sm bg-white/5 p-2 rounded-lg hover:bg-white/10 transition-colors",children:[m.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#55bff3] shadow-lg shadow-[#55bff3]/50 flex-shrink-0"}),m.jsx("p",{className:"text-xs",children:x})]},w))})]})]}),m.jsxs("div",{className:"space-y-2.5 animate-slide-up",children:[m.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-3 border border-white/20 shadow-xl hover:bg-white/15 transition-colors",children:[m.jsx("p",{className:"text-xs text-white/70 mb-0.5",children:"Renta Mensual"}),m.jsxs("p",{className:"text-2xl font-bold mb-0.5",children:["$399 ",m.jsx("span",{className:"text-xs font-normal text-white/80",children:"MXN"})]}),m.jsx("p",{className:"text-xs text-white/80",children:" Totalmente personalizado  Soporte 24/7"})]}),m.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-3 border border-white/20 shadow-xl hover:bg-white/15 transition-colors",children:[m.jsx("p",{className:"text-sm font-semibold mb-0.5",children:" Bot de Trading Personalizado"}),m.jsx("p",{className:"text-xs text-white/80",children:" Estrategias bajo cotizacin"})]}),m.jsxs("button",{onClick:S,className:"w-full bg-[#25D366] hover:bg-[#20BA5A] text-white font-semibold py-3 px-4 rounded-lg transition-all duration-300 flex items-center justify-center gap-2 shadow-xl hover:shadow-2xl transform hover:scale-105 text-sm mt-3",children:[m.jsx(p2,{className:"text-base"}),m.jsx("span",{children:"Quiero ms informacin"})]})]})]})]}),m.jsxs("div",{className:"hidden lg:block absolute left-1/2 top-0 bottom-0 w-px z-20",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-white/30 to-transparent"}),m.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:m.jsx("div",{className:"w-4 h-4 rounded-full bg-white/40 backdrop-blur-sm border-2 border-white/60 shadow-lg"})})]}),m.jsxs("div",{className:"w-full lg:w-1/2 mobile-full-height flex flex-col items-center justify-center px-4 sm:px-6 lg:px-8 py-8 sm:py-12 bg-gradient-to-br from-gray-50 via-white to-gray-100 relative overflow-hidden",children:[m.jsxs("div",{className:"absolute inset-0 overflow-hidden opacity-20 lg:opacity-30",children:[m.jsx("div",{className:"absolute top-10 right-10 w-32 h-32 border border-[#1b527c]/20 rounded-full"}),m.jsx("div",{className:"absolute bottom-20 left-10 w-24 h-24 border border-[#55bff3]/20 transform rotate-45"}),m.jsx("div",{className:"absolute top-1/2 right-1/4 w-20 h-20 border border-[#2d9bf0]/20 rounded-lg transform rotate-12"}),m.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-30",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("defs",{children:m.jsx("pattern",{id:"grid-right",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:m.jsx("circle",{cx:"20",cy:"20",r:"1",fill:"#1b527c"})})}),m.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid-right)"})]})]}),m.jsx("div",{className:"lg:hidden absolute top-4 left-4 z-20",children:m.jsx("img",{src:"/images/logotipo-vaiston.png",alt:"Vaiston Logo",className:"h-8 sm:h-10 w-auto drop-shadow-lg"})}),m.jsxs("div",{className:"w-full max-w-md relative z-10 mt-14 sm:mt-0 animate-slide-up",children:[m.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl sm:rounded-3xl shadow-2xl p-5 sm:p-6 lg:p-8 border border-gray-200/50 hover:shadow-3xl transition-shadow duration-300",children:[m.jsxs("div",{className:"text-center mb-6 lg:mb-8",children:[m.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-3xl font-bold text-gray-800 mb-2",children:"Iniciar Sesin"}),m.jsx("p",{className:"text-sm lg:text-base text-gray-600",children:"Accede al sistema de demostracin"})]}),m.jsxs("div",{className:"mb-6 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-3 sm:p-4 border border-blue-200 hover:shadow-md transition-shadow",children:[m.jsxs("p",{className:"text-xs font-semibold text-blue-900 mb-2 flex items-center gap-2",children:[m.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),"Credenciales de Demo"]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between bg-white/60 rounded-lg px-3 py-2 gap-1",children:[m.jsx("span",{className:"text-xs text-gray-600",children:"Usuario:"}),m.jsx("span",{className:"text-xs font-mono font-semibold text-gray-800 break-all",children:"admin@admin.com"})]}),m.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between bg-white/60 rounded-lg px-3 py-2 gap-1",children:[m.jsx("span",{className:"text-xs text-gray-600",children:"Contrasea:"}),m.jsx("span",{className:"text-xs font-mono font-semibold text-gray-800",children:"$Vaiston123"})]})]})]}),m.jsxs("form",{onSubmit:y,className:"space-y-4 sm:space-y-5 lg:space-y-6",children:[m.jsx(oa,{label:"Correo Electrnico",type:"email",value:r.email,onChange:x=>n({...r,email:x.target.value}),error:i.email,placeholder:"tu@email.com",required:!0,className:"text-sm sm:text-base"}),m.jsx(oa,{label:"Contrasea",type:"password",value:r.password,onChange:x=>n({...r,password:x.target.value}),error:i.password,placeholder:"",required:!0,className:"text-sm sm:text-base"}),m.jsx(yn,{type:"submit",variant:"primary",className:"w-full text-sm sm:text-base py-2.5 sm:py-3",isLoading:a,children:"Iniciar Sesin"})]}),m.jsx("div",{className:"mt-5 lg:mt-6 text-center",children:m.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:["Al iniciar sesin, aceptas nuestros"," ",m.jsx(mh,{to:"/terms",className:"text-[#1b527c] hover:text-[#2d9bf0] font-medium underline hover:no-underline transition-colors",children:"Trminos y Condiciones"})]})})]}),m.jsx("div",{className:"mt-4 lg:hidden text-center text-xs text-gray-500",children:m.jsxs("p",{children:["Necesitas ayuda? ",m.jsx("a",{href:"mailto:contacto@vaiston.com",className:"text-[#1b527c] hover:text-[#2d9bf0] font-medium",children:"Contctanos"})]})})]})]})]}),m.jsx(BC,{isOpen:u,onClose:()=>d(!1),title:"Error",message:h,type:"error"})]})},Qt={async create(t,e){return(await dS(di(lt,t),{...e,createdAt:Ee.now(),updatedAt:Ee.now()})).id},async getById(t,e){const r=rr(lt,t,e),n=await kC(r);return n.exists()?{id:n.id,...n.data()}:null},async getAll(t,...e){const r=Ya(di(lt,t),...e);return(await Ac(r)).docs.map(i=>({id:i.id,...i.data()}))},async update(t,e,r){const n=rr(lt,t,e);await Cc(n,{...r,updatedAt:Ee.now()})},async delete(t,e){const r=rr(lt,t,e);await a2(r)},subscribe(t,e,...r){console.log(` FirebaseService: Subscribing to collection '${t}'`);const n=Ya(di(lt,t),...r);return gse(n,s=>{console.log(` FirebaseService: Snapshot received for '${t}', docs count:`,s.docs.length);const a=s.docs.map(c=>({id:c.id,...c.data()}));console.log(" FirebaseService: Calling callback with data:",a),e(a)},s=>{console.error(` FirebaseService: Error in subscription for '${t}':`,s)})},async uploadFile(t,e){const r=j4(M4,t);return await Rae(r,e),await Pae(r)},async deleteFile(t){const e=j4(M4,t);await Iae(e)},async createInvitation(t){return(await dS(di(lt,"invitations"),{...t,createdAt:Ee.now()})).id},async getInvitationByToken(t){const e=Ya(di(lt,"invitations"),sn("token","==",t)),r=await Ac(e);if(r.empty)return null;const n=r.docs[0];return{id:n.id,...n.data()}},async updateInvitationStatus(t,e,r){const n=rr(lt,"invitations",t),i={status:e};r&&(i.usedAt=r),await Cc(n,i)},async getActiveInvitations(t){const e=Ya(di(lt,"invitations"),sn("createdBy","==",t));return(await Ac(e)).docs.map(n=>({id:n.id,...n.data()}))},async revokeInvitation(t){const e=rr(lt,"invitations",t);await Cc(e,{status:"revoked"})}},rn=[];for(let t=0;t<256;++t)rn.push((t+256).toString(16).slice(1));function Ooe(t,e=0){return(rn[t[e+0]]+rn[t[e+1]]+rn[t[e+2]]+rn[t[e+3]]+"-"+rn[t[e+4]]+rn[t[e+5]]+"-"+rn[t[e+6]]+rn[t[e+7]]+"-"+rn[t[e+8]]+rn[t[e+9]]+"-"+rn[t[e+10]]+rn[t[e+11]]+rn[t[e+12]]+rn[t[e+13]]+rn[t[e+14]]+rn[t[e+15]]).toLowerCase()}let c_;const joe=new Uint8Array(16);function Moe(){if(!c_){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");c_=crypto.getRandomValues.bind(crypto)}return c_(joe)}const Doe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),q4={randomUUID:Doe};function koe(t,e,r){t=t||{};const n=t.random??t.rng?.()??Moe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Ooe(n)}function Loe(t,e,r){return q4.randomUUID&&!t?q4.randomUUID():koe(t)}const zoe=()=>Loe(),vV=t=>`${window.location.origin}/register?invite=${t}`,zT=t=>new Date>t,gV=async t=>{try{return await navigator.clipboard.writeText(t),!0}catch(e){console.error("Error copying to clipboard:",e);try{const r=document.createElement("textarea");return r.value=t,r.style.position="fixed",r.style.left="-999999px",document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),!0}catch(r){return console.error("Fallback copy failed:",r),!1}}},Uoe=()=>{const t=new Date;return t.setDate(t.getDate()+7),t},V4=t=>{const e=new Date,r=t.getTime()-e.getTime(),n=Math.ceil(r/(1e3*60*60*24));return n<0?"Expirada":n===0?"Expira hoy":n===1?"Expira maana":`Expira en ${n} das`},Boe=()=>{const[t,e]=A.useState([]);return A.useEffect(()=>{const r=Array.from({length:30},(n,i)=>({id:i,x:Math.random()*100,y:Math.random()*100,size:Math.random()*4+2,duration:Math.random()*20+15}));e(r)},[]),m.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:t.map(r=>m.jsx("div",{className:"absolute rounded-full bg-white/20",style:{left:`${r.x}%`,top:`${r.y}%`,width:`${r.size}px`,height:`${r.size}px`,animation:`float ${r.duration}s infinite ease-in-out`,animationDelay:`${Math.random()*5}s`}},r.id))})},qoe=t=>({minLength:t.length>=6,hasUpperCase:/[A-Z]/.test(t),hasLowerCase:/[a-z]/.test(t),hasNumber:/[0-9]/.test(t),hasSpecialChar:/[!@#$%^&*(),.?":{}|<>]/.test(t)}),F4=t=>Object.values(t).every(e=>e===!0),Voe=()=>{const[t]=aJ(),e=Pu(),r=t.get("invite"),[n,i]=A.useState(null),[s,a]=A.useState(!0),[c,u]=A.useState(null),[d,h]=A.useState({password:"",confirmPassword:""}),[p,g]=A.useState({minLength:!1,hasUpperCase:!1,hasLowerCase:!1,hasNumber:!1,hasSpecialChar:!1}),[y,S]=A.useState(!0),[x,w]=A.useState(!1);A.useEffect(()=>{E()},[r]),A.useEffect(()=>{g(qoe(d.password))},[d.password]),A.useEffect(()=>{d.confirmPassword?S(d.password===d.confirmPassword):S(!0)},[d.password,d.confirmPassword]);const E=async()=>{if(!r){u("Link de invitacin invlido"),a(!1);return}try{const T=await Qt.getInvitationByToken(r);if(!T){u("Invitacin no encontrada"),a(!1);return}if(T.status!=="pending"){u("Esta invitacin ya ha sido utilizada"),a(!1);return}if(zT(T)){u("Esta invitacin ha expirado"),a(!1);return}i(T),a(!1)}catch(T){console.error("Error validating invitation:",T),u("Error al validar la invitacin"),a(!1)}},R=async T=>{if(T.preventDefault(),!!n){if(!F4(p)){u("La contrasea no cumple con todos los requisitos");return}if(!y){u("Las contraseas no coinciden");return}w(!0),u(null);try{const M=await r7(oc,n.email,d.password),D={uid:M.user.uid,email:n.email,displayName:n.displayName,role:n.role,permissions:n.permissions,isActive:!0,createdAt:Ee.now(),updatedAt:Ee.now(),invitedBy:n.createdBy};await Zd(rr(lt,"users",M.user.uid),D),await Qt.update("invitations",n.id,{status:"accepted",acceptedAt:Ee.now(),userId:M.user.uid}),e("/dashboard")}catch(M){console.error("Error creating user:",M),M.code==="auth/email-already-in-use"?u("Este correo ya est registrado"):u("Error al crear la cuenta. Por favor intenta de nuevo.")}finally{w(!1)}}};return s?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#1b527c] to-[#2d9bf0]",children:m.jsx(UC,{size:"lg"})}):c&&!n?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#1b527c] to-[#2d9bf0] p-4",children:m.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full text-center",children:[m.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx($s,{className:"text-3xl text-red-600"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Invitacin Invlida"}),m.jsx("p",{className:"text-gray-600 mb-6",children:c}),m.jsx(yn,{onClick:()=>e("/login"),variant:"primary",children:"Ir al Login"})]})}):m.jsxs(m.Fragment,{children:[m.jsx("style",{children:`
                @keyframes float {
                    0%, 100% { transform: translateY(0) translateX(0); }
                    25% { transform: translateY(-20px) translateX(10px); }
                    50% { transform: translateY(-10px) translateX(-10px); }
                    75% { transform: translateY(-30px) translateX(5px); }
                }
                
                @keyframes rotate {
                    from { transform: rotate(0deg); }
                    to { transform: rotate(360deg); }
                }
                
                @keyframes pulse-glow {
                    0%, 100% { opacity: 0.3; transform: scale(1); }
                    50% { opacity: 0.6; transform: scale(1.1); }
                }
            `}),m.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row relative overflow-hidden",children:[m.jsxs("div",{className:"w-full lg:w-1/2 bg-gradient-to-br from-[#1b527c] via-[#2d9bf0] to-[#0f6cbf] text-white relative overflow-hidden",children:[m.jsx(Boe,{}),m.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[m.jsx("div",{className:"absolute top-20 right-20 w-40 h-40 opacity-10",children:m.jsx("svg",{viewBox:"0 0 100 100",className:"w-full h-full animate-[rotate_30s_linear_infinite]",children:m.jsx("polygon",{points:"50,5 95,27.5 95,72.5 50,95 5,72.5 5,27.5",fill:"none",stroke:"currentColor",strokeWidth:"2"})})}),m.jsx("div",{className:"absolute bottom-40 left-10 w-32 h-32 opacity-10",children:m.jsx("svg",{viewBox:"0 0 100 100",className:"w-full h-full animate-[rotate_25s_linear_infinite_reverse]",children:m.jsx("polygon",{points:"50,5 95,27.5 95,72.5 50,95 5,72.5 5,27.5",fill:"none",stroke:"currentColor",strokeWidth:"2"})})}),m.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 rounded-full border-2 border-[#55bff3]/20 animate-[pulse-glow_4s_ease-in-out_infinite]"}),m.jsx("div",{className:"absolute bottom-1/3 right-1/4 w-48 h-48 rounded-full border-2 border-[#55bff3]/20 animate-[pulse-glow_5s_ease-in-out_infinite]",style:{animationDelay:"1s"}}),m.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-20",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("defs",{children:m.jsx("pattern",{id:"dots",width:"30",height:"30",patternUnits:"userSpaceOnUse",children:m.jsx("circle",{cx:"15",cy:"15",r:"1.5",fill:"currentColor"})})}),m.jsx("rect",{width:"100%",height:"100%",fill:"url(#dots)"})]})]}),m.jsxs("div",{className:"relative z-10 min-h-screen lg:min-h-0 flex flex-col justify-center p-8 lg:p-12",children:[m.jsx("div",{className:"mb-8 lg:mb-12",children:m.jsx("img",{src:"/images/logotipo-vaiston-byn.png",alt:"Vaiston Logo",className:"h-12 lg:h-16 w-auto drop-shadow-lg"})}),m.jsxs("div",{className:"mb-8 lg:mb-12",children:[m.jsxs("div",{className:"inline-flex items-center gap-3 mb-4",children:[m.jsx("div",{className:"w-12 h-12 bg-white/10 backdrop-blur-sm rounded-full flex items-center justify-center",children:m.jsx(LT,{className:"text-2xl"})}),m.jsx("h1",{className:"text-3xl lg:text-5xl font-bold leading-tight drop-shadow-lg",children:"Bienvenido!"})]}),m.jsx("p",{className:"text-lg lg:text-xl text-white/90 drop-shadow mb-6",children:"Has sido invitado a unirte a nuestra plataforma de trading automatizado con IA."}),n&&m.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-5 border border-white/20 shadow-xl",children:[m.jsx("p",{className:"text-sm text-white/70 mb-2",children:"Invitado como:"}),m.jsx("p",{className:"text-2xl font-bold mb-1",children:n.displayName}),m.jsx("p",{className:"text-white/80",children:n.email}),m.jsxs("div",{className:"mt-3 pt-3 border-t border-white/20",children:[m.jsx("p",{className:"text-sm text-white/70",children:"Rol asignado:"}),m.jsx("p",{className:"text-lg font-semibold",children:n.role==="admin"?"Administrador":n.role==="psychologist"?"Inversionista":n.role==="receptionist"?"Recepcionista":"Inversionista"})]})]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Con este sistema podrs:"}),m.jsxs("div",{className:"flex items-center gap-3 backdrop-blur-sm bg-white/5 p-3 rounded-lg",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-[#55bff3] shadow-lg shadow-[#55bff3]/50"}),m.jsx("p",{className:"text-base lg:text-lg",children:"Monitorear el bot de trading en tiempo real"})]}),m.jsxs("div",{className:"flex items-center gap-3 backdrop-blur-sm bg-white/5 p-3 rounded-lg",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-[#55bff3] shadow-lg shadow-[#55bff3]/50"}),m.jsx("p",{className:"text-base lg:text-lg",children:"Visualizar posiciones y rendimiento"})]}),m.jsxs("div",{className:"flex items-center gap-3 backdrop-blur-sm bg-white/5 p-3 rounded-lg",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-[#55bff3] shadow-lg shadow-[#55bff3]/50"}),m.jsx("p",{className:"text-base lg:text-lg",children:"Gestionar estrategias de inversin"})]}),m.jsxs("div",{className:"flex items-center gap-3 backdrop-blur-sm bg-white/5 p-3 rounded-lg",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-[#55bff3] shadow-lg shadow-[#55bff3]/50"}),m.jsx("p",{className:"text-base lg:text-lg",children:"Recibir notificaciones de operaciones"})]})]})]})]}),m.jsxs("div",{className:"hidden lg:block absolute left-1/2 top-0 bottom-0 w-px z-20",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-white/30 to-transparent"}),m.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:m.jsx("div",{className:"w-4 h-4 rounded-full bg-white/40 backdrop-blur-sm border-2 border-white/60 shadow-lg"})})]}),m.jsxs("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-6 lg:p-8 bg-gradient-to-br from-gray-50 via-white to-gray-100 min-h-screen lg:min-h-0 relative overflow-hidden",children:[m.jsxs("div",{className:"absolute inset-0 overflow-hidden opacity-30",children:[m.jsx("div",{className:"absolute top-10 right-10 w-32 h-32 border border-[#1b527c]/20 rounded-full"}),m.jsx("div",{className:"absolute bottom-20 left-10 w-24 h-24 border border-[#55bff3]/20 transform rotate-45"}),m.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-10",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("defs",{children:m.jsx("pattern",{id:"grid-right",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:m.jsx("circle",{cx:"20",cy:"20",r:"1",fill:"#1b527c"})})}),m.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid-right)"})]})]}),m.jsx("div",{className:"w-full max-w-md relative z-10",children:m.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-2xl p-6 lg:p-8 border border-gray-200/50",children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[#1b527c] to-[#2d9bf0] rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(dV,{className:"text-3xl text-white"})}),m.jsx("h2",{className:"text-2xl lg:text-3xl font-bold text-gray-800 mb-2",children:"Crear Contrasea"}),m.jsx("p",{className:"text-sm lg:text-base text-gray-600",children:"Configura una contrasea segura para tu cuenta"})]}),c&&m.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:m.jsx("p",{className:"text-sm text-red-600",children:c})}),m.jsxs("form",{onSubmit:R,className:"space-y-5",children:[m.jsx(oa,{label:"Contrasea",type:"password",value:d.password,onChange:T=>h({...d,password:T.target.value}),placeholder:"",required:!0}),d.password&&m.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[m.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Requisitos de contrasea:"}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[p.minLength?m.jsx(dc,{className:"text-green-500"}):m.jsx($s,{className:"text-gray-400"}),m.jsx("span",{className:p.minLength?"text-green-700":"text-gray-600",children:"Mnimo 6 caracteres"})]}),m.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[p.hasUpperCase?m.jsx(dc,{className:"text-green-500"}):m.jsx($s,{className:"text-gray-400"}),m.jsx("span",{className:p.hasUpperCase?"text-green-700":"text-gray-600",children:"Una letra mayscula (A-Z)"})]}),m.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[p.hasLowerCase?m.jsx(dc,{className:"text-green-500"}):m.jsx($s,{className:"text-gray-400"}),m.jsx("span",{className:p.hasLowerCase?"text-green-700":"text-gray-600",children:"Una letra minscula (a-z)"})]}),m.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[p.hasNumber?m.jsx(dc,{className:"text-green-500"}):m.jsx($s,{className:"text-gray-400"}),m.jsx("span",{className:p.hasNumber?"text-green-700":"text-gray-600",children:"Un nmero (0-9)"})]}),m.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[p.hasSpecialChar?m.jsx(dc,{className:"text-green-500"}):m.jsx($s,{className:"text-gray-400"}),m.jsx("span",{className:p.hasSpecialChar?"text-green-700":"text-gray-600",children:"Un carcter especial (!@#$%^&*)"})]}),d.confirmPassword&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"border-t border-gray-200 my-2 pt-2"}),m.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[y?m.jsx(dc,{className:"text-green-500"}):m.jsx($s,{className:"text-red-500"}),m.jsx("span",{className:y?"text-green-700 font-medium":"text-red-600 font-medium",children:y?"Las contraseas coinciden":"Las contraseas no coinciden"})]})]})]})]}),m.jsx(oa,{label:"Confirmar Contrasea",type:"password",value:d.confirmPassword,onChange:T=>h({...d,confirmPassword:T.target.value}),placeholder:"",required:!0,error:y?void 0:"Las contraseas no coinciden"}),m.jsx(yn,{type:"submit",variant:"primary",className:"w-full",isLoading:x,disabled:!F4(p)||!y||!d.confirmPassword,children:"Crear Cuenta"})]}),m.jsx("div",{className:"mt-5 lg:mt-6 text-center",children:m.jsxs("p",{className:"text-xs text-gray-500",children:["Al crear tu cuenta, aceptas nuestros"," ",m.jsx(mh,{to:"/terms",className:"text-[#1b527c] hover:text-[#2d9bf0] font-medium underline",children:"Trminos y Condiciones"})]})})]})})]})]})]})},Foe=()=>m.jsx("div",{className:"min-h-screen bg-background py-12 px-4",children:m.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-lg shadow-lg p-8",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx(loe,{className:"text-6xl text-primary mx-auto mb-4"}),m.jsx("h1",{className:"text-4xl font-bold text-text-primary mb-2",children:"Trminos y Condiciones"}),m.jsx("p",{className:"text-text-secondary",children:"ltima actualizacin: Diciembre 2024"})]}),m.jsxs("div",{className:"space-y-8 text-text-secondary",children:[m.jsxs("section",{children:[m.jsxs("h2",{className:"text-2xl font-bold text-text-primary mb-4 flex items-center gap-2",children:[m.jsx(dV,{className:"text-primary"}),"1. Aceptacin de Trminos"]}),m.jsx("p",{className:"mb-4",children:'Al acceder y utilizar este sistema CRM de Psicologa (en adelante, "el Sistema"), usted acepta estar sujeto a estos Trminos y Condiciones. Si no est de acuerdo con alguna parte de estos trminos, no debe utilizar el Sistema.'}),m.jsx("p",{children:"Este es un sistema de demostracin proporcionado nicamente con fines ilustrativos. El uso de este sistema implica la aceptacin total de estos trminos."})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-4",children:"2. Naturaleza del Sistema"}),m.jsxs("p",{className:"mb-4",children:["Este Sistema es una ",m.jsx("strong",{children:"versin de demostracin"})," diseada para mostrar las capacidades y funcionalidades de un CRM especializado en gestin de consultorios de psicologa."]}),m.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[m.jsx("li",{children:"Los datos ingresados son nicamente para fines de prueba"}),m.jsx("li",{children:"No se garantiza la persistencia de los datos"}),m.jsx("li",{children:"El sistema puede ser reiniciado o modificado sin previo aviso"}),m.jsx("li",{children:"No debe utilizarse para gestionar informacin real de pacientes"})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-4",children:"3. Opciones de Adquisicin"}),m.jsx("p",{className:"mb-4",children:"El Sistema est disponible bajo dos modalidades:"}),m.jsxs("div",{className:"bg-background rounded-lg p-6 mb-4",children:[m.jsx("h3",{className:"text-xl font-semibold text-primary mb-3",children:"Opcin 1: Compra de Cdigo Fuente"}),m.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[m.jsx("li",{children:"Adquisicin completa del cdigo fuente"}),m.jsx("li",{children:"Licencia de uso perpetuo"}),m.jsx("li",{children:"Posibilidad de personalizacin ilimitada"}),m.jsx("li",{children:"Soporte tcnico inicial incluido"})]})]}),m.jsxs("div",{className:"bg-background rounded-lg p-6",children:[m.jsx("h3",{className:"text-xl font-semibold text-primary mb-3",children:"Opcin 2: Renta Mensual"}),m.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[m.jsxs("li",{children:["Costo: ",m.jsx("strong",{children:"$399 MXN/mes"})]}),m.jsx("li",{children:"Acceso completo al sistema"}),m.jsx("li",{children:"Actualizaciones automticas incluidas"}),m.jsx("li",{children:"Soporte tcnico continuo"}),m.jsx("li",{children:"Hosting y mantenimiento incluidos"})]})]})]}),m.jsxs("section",{children:[m.jsxs("h2",{className:"text-2xl font-bold text-text-primary mb-4 flex items-center gap-2",children:[m.jsx(mV,{className:"text-primary"}),"4. Privacidad y Proteccin de Datos"]}),m.jsx("p",{className:"mb-4",children:"Nos comprometemos a proteger la privacidad de los usuarios:"}),m.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[m.jsx("li",{children:"Los datos se almacenan de forma segura en Firebase"}),m.jsx("li",{children:"Implementamos encriptacin en trnsito y en reposo"}),m.jsx("li",{children:"Cumplimos con las mejores prcticas de seguridad"}),m.jsx("li",{children:"No compartimos informacin con terceros sin consentimiento"}),m.jsx("li",{children:"Los usuarios tienen derecho a solicitar la eliminacin de sus datos"})]})]}),m.jsxs("section",{children:[m.jsxs("h2",{className:"text-2xl font-bold text-text-primary mb-4 flex items-center gap-2",children:[m.jsx(voe,{className:"text-primary"}),"5. Limitacin de Responsabilidad"]}),m.jsx("p",{className:"mb-4",children:'El Sistema se proporciona "TAL CUAL" sin garantas de ningn tipo, ya sean expresas o implcitas:'}),m.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[m.jsx("li",{children:"No garantizamos disponibilidad ininterrumpida del servicio"}),m.jsx("li",{children:"No nos hacemos responsables por prdida de datos en la versin demo"}),m.jsx("li",{children:"El usuario es responsable del uso adecuado del sistema"}),m.jsx("li",{children:"No nos responsabilizamos por decisiones tomadas basadas en el sistema"}),m.jsx("li",{children:"La versin demo no debe usarse para datos mdicos reales"})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-4",children:"6. Propiedad Intelectual"}),m.jsx("p",{className:"mb-4",children:"Todo el contenido, diseo, cdigo y funcionalidades del Sistema son propiedad exclusiva del desarrollador:"}),m.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[m.jsx("li",{children:"El cdigo fuente est protegido por derechos de autor"}),m.jsx("li",{children:"No se permite la reproduccin sin autorizacin"}),m.jsx("li",{children:"La compra del cdigo fuente otorga licencia de uso, no transferencia de propiedad intelectual"})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-4",children:"7. Uso Aceptable"}),m.jsx("p",{className:"mb-4",children:"Al utilizar el Sistema, el usuario se compromete a:"}),m.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[m.jsx("li",{children:"No intentar acceder a reas restringidas del sistema"}),m.jsx("li",{children:"No realizar ingeniera inversa del cdigo"}),m.jsx("li",{children:"No utilizar el sistema para fines ilegales o no autorizados"}),m.jsx("li",{children:"No intentar comprometer la seguridad del sistema"}),m.jsx("li",{children:"Respetar los derechos de otros usuarios"})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-4",children:"8. Modificaciones"}),m.jsx("p",{children:"Nos reservamos el derecho de modificar estos Trminos y Condiciones en cualquier momento. Los cambios entrarn en vigor inmediatamente despus de su publicacin en el sistema. El uso continuado del Sistema despus de dichas modificaciones constituye la aceptacin de los nuevos trminos."})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-4",children:"9. Contacto"}),m.jsx("p",{className:"mb-4",children:"Para consultas sobre estos Trminos y Condiciones, opciones de adquisicin, o soporte tcnico, por favor contacte al administrador del sistema."}),m.jsx("div",{className:"bg-primary/10 border border-primary rounded-lg p-4",children:m.jsxs("p",{className:"text-sm",children:[m.jsx("strong",{children:"Nota:"})," Al utilizar este sistema de demostracin, usted reconoce haber ledo, entendido y aceptado estos Trminos y Condiciones en su totalidad."]})})]})]}),m.jsx("div",{className:"mt-12 pt-8 border-t border-border",children:m.jsx(mh,{to:"/login",className:"inline-flex items-center gap-2 px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:" Volver al Login"})})]})}),Hoe=()=>{const[t,e]=A.useState([]);return A.useEffect(()=>{const r=Array.from({length:15},(n,i)=>({id:i,y:Math.random()*100,size:Math.random()*3+1,duration:Math.random()*15+10}));e(r)},[]),m.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:t.map(r=>m.jsx("div",{className:"absolute rounded-full bg-white/10",style:{left:`${Math.random()*100}%`,top:`${r.y}%`,width:`${r.size}px`,height:`${r.size}px`,animation:`float ${r.duration}s infinite ease-in-out`,animationDelay:`${Math.random()*3}s`}},r.id))})},Woe=({isOpen:t,onClose:e})=>{const[r,n]=A.useState("android");return t?m.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e,children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 relative",onClick:i=>i.stopPropagation(),children:[m.jsx("button",{onClick:e,className:"absolute top-4 right-4 w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors",children:m.jsx($s,{className:"text-gray-500"})}),m.jsxs("div",{className:"text-center mb-6",children:[m.jsx(m2,{className:"text-3xl text-primary mx-auto mb-2"}),m.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Descarga en tu telfono"})]}),m.jsxs("div",{className:"flex gap-2 mb-6",children:[m.jsx("button",{onClick:()=>n("android"),className:`flex-1 py-2 px-3 rounded-lg font-medium transition-all ${r==="android"?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Android"}),m.jsx("button",{onClick:()=>n("ios"),className:`flex-1 py-2 px-3 rounded-lg font-medium transition-all ${r==="ios"?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"iOS"})]}),m.jsxs("div",{className:"mb-6",children:[r==="android"&&m.jsx("div",{className:"space-y-4",children:m.jsxs("ol",{className:"space-y-3 text-gray-700 text-sm",children:[m.jsxs("li",{className:"flex gap-3",children:[m.jsx("span",{className:"font-bold text-primary flex-shrink-0",children:"1."}),m.jsxs("div",{className:"flex-1",children:[m.jsx("span",{children:"Haz clic en instalar"}),m.jsx("button",{onClick:()=>{const i=document.createElement("a");i.href="/crm-psicologos.apk",i.download="crm-psicologos.apk",document.body.appendChild(i),i.click(),document.body.removeChild(i)},className:"block mt-2 w-full bg-primary hover:bg-primary/90 text-white font-medium py-2 px-3 rounded-lg transition-colors text-xs",children:"Descargar aplicacin"})]})]}),m.jsxs("li",{className:"flex gap-3",children:[m.jsx("span",{className:"font-bold text-primary flex-shrink-0",children:"2."}),m.jsx("span",{children:"Espera a que la instalacin se complete en tu celular"})]}),m.jsxs("li",{className:"flex gap-3",children:[m.jsx("span",{className:"font-bold text-primary flex-shrink-0",children:"3."}),m.jsx("span",{children:"Busca la aplicacin en tu inicio e ingresa a ella"})]})]})}),r==="ios"&&m.jsx("div",{className:"space-y-3",children:m.jsxs("ol",{className:"space-y-3 text-gray-700 text-sm",children:[m.jsxs("li",{className:"flex gap-3",children:[m.jsx("span",{className:"font-bold text-primary flex-shrink-0",children:"1."}),m.jsx("span",{children:"Haz click en el icono de compartir"})]}),m.jsxs("li",{className:"flex gap-3",children:[m.jsx("span",{className:"font-bold text-primary flex-shrink-0",children:"2."}),m.jsx("span",{children:"Encuentra y selecciona la opcin Agregar al Inicio"})]}),m.jsxs("li",{className:"flex gap-3",children:[m.jsx("span",{className:"font-bold text-primary flex-shrink-0",children:"3."}),m.jsx("span",{children:"Haz click en Agregar y la app ser agregada a tu celular"})]})]})})]}),m.jsx("button",{onClick:e,className:"w-full bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-4 rounded-lg transition-colors",children:"Cerrar"})]})}):null},Koe=({isOpen:t,onClose:e})=>{if(!t)return null;const r=()=>{window.open("https://wa.me/5215579987650?text=Hola,%20me%20interesa%20contratar%20el%20CRM%20de%20Psicologa.%20Me%20gustara%20conocer%20ms%20detalles.","_blank")};return m.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e,children:m.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full p-8 relative",onClick:n=>n.stopPropagation(),children:[m.jsx("button",{onClick:e,className:"absolute top-4 right-4 w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors",children:m.jsx($s,{className:"text-gray-500"})}),m.jsxs("div",{className:"text-center mb-6",children:[m.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[#1b527c] to-[#2d9bf0] rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(qg,{className:"text-3xl text-white"})}),m.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Listo para contratar?"}),m.jsx("p",{className:"text-gray-600",children:"Proceso simple y directo"})]}),m.jsxs("div",{className:"space-y-4 mb-8",children:[m.jsxs("div",{className:"flex gap-4",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-[#1b527c] text-white flex items-center justify-center font-bold flex-shrink-0",children:"1"}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:"Contacto Inicial"}),m.jsx("p",{className:"text-sm text-gray-600",children:"Contctame por WhatsApp para agendar una reunin"})]})]}),m.jsxs("div",{className:"flex gap-4",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-[#2d9bf0] text-white flex items-center justify-center font-bold flex-shrink-0",children:"2"}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:"Anlisis de Necesidades"}),m.jsx("p",{className:"text-sm text-gray-600",children:"Evaluamos si el sistema cumple con tus requisitos o si necesitas modificaciones personalizadas"})]})]}),m.jsxs("div",{className:"flex gap-4",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-[#55bff3] text-white flex items-center justify-center font-bold flex-shrink-0",children:"3"}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:"Seleccin de Modalidad"}),m.jsx("p",{className:"text-sm text-gray-600",children:"Elige entre renta mensual ($399 MXN) o compra del cdigo fuente"})]})]}),m.jsxs("div",{className:"flex gap-4",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-[#0f6cbf] text-white flex items-center justify-center font-bold flex-shrink-0",children:"4"}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:"Implementacin"}),m.jsx("p",{className:"text-sm text-gray-600",children:"Configuracin, capacitacin y puesta en marcha del sistema"})]})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[m.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border border-blue-200",children:[m.jsx(Hc,{className:"text-3xl text-[#1b527c] mb-2"}),m.jsx("h4",{className:"font-bold text-gray-800 mb-1",children:"Renta Mensual"}),m.jsxs("p",{className:"text-2xl font-bold text-[#1b527c]",children:["$399 ",m.jsx("span",{className:"text-sm font-normal",children:"MXN"})]}),m.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Todo incluido"})]}),m.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border border-blue-200",children:[m.jsx(roe,{className:"text-3xl text-[#1b527c] mb-2"}),m.jsx("h4",{className:"font-bold text-gray-800 mb-1",children:"Cdigo Fuente"}),m.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Pago nico"}),m.jsx("p",{className:"text-xs text-gray-600",children:"Personalizacin total"})]})]}),m.jsxs("button",{onClick:r,className:"w-full bg-[#25D366] hover:bg-[#20BA5A] text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 flex items-center justify-center gap-3 shadow-lg hover:shadow-xl transform hover:scale-105",children:[m.jsx(p2,{className:"text-2xl"}),m.jsx("span",{children:"Contactar por WhatsApp"})]}),m.jsxs("p",{className:"text-center text-xs text-gray-500 mt-4",children:["Tambin puedes escribir a: ",m.jsx("a",{href:"mailto:contacto@vaiston.com",className:"text-[#1b527c] hover:underline",children:"contacto@vaiston.com"})]})]})})},Goe=()=>{const t=ma(),{currentUser:e}=bi(),[r,n]=A.useState(!1),[i,s]=A.useState(!1),[a,c]=A.useState(!1);if(!e)return null;const d=[{path:"/dashboard",label:"Dashboard",icon:m.jsx(foe,{})},{path:"/trading",label:"Trading en Vivo",icon:m.jsx(Jae,{}),permission:"canViewStrategies"},{path:"/users",label:"Usuarios",icon:m.jsx(Poe,{}),permission:"canManageUsers"},{path:"/help",label:"Ayuda",icon:m.jsx(v2,{})}].filter(p=>p.permission?e.permissions[p.permission]:!0),h=p=>t.pathname===p;return m.jsxs(m.Fragment,{children:[m.jsx("style",{children:`
                @keyframes float {
                    0%, 100% { transform: translateY(0) translateX(0); }
                    25% { transform: translateY(-15px) translateX(5px); }
                    50% { transform: translateY(-8px) translateX(-5px); }
                    75% { transform: translateY(-20px) translateX(3px); }
                }
            `}),m.jsx("button",{onClick:()=>n(!r),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-gradient-to-br from-[#1b527c] to-[#2d9bf0] text-white rounded-lg cursor-pointer shadow-lg",children:r?m.jsx($s,{size:24}):m.jsx(Xae,{size:24})}),m.jsxs("aside",{className:`fixed top-0 left-0 h-full bg-gradient-to-b from-[#1b527c] via-[#2d9bf0] to-[#0f6cbf] transition-transform duration-300 z-40 overflow-hidden
          ${r?"translate-x-0":"-translate-x-full"} lg:translate-x-0 w-64`,children:[m.jsx(Hoe,{}),m.jsxs("div",{className:"absolute inset-0 overflow-hidden opacity-10",children:[m.jsx("div",{className:"absolute top-10 right-5 w-20 h-20",children:m.jsx("svg",{viewBox:"0 0 100 100",className:"w-full h-full animate-[float_20s_ease-in-out_infinite]",children:m.jsx("polygon",{points:"50,5 95,27.5 95,72.5 50,95 5,72.5 5,27.5",fill:"none",stroke:"white",strokeWidth:"2"})})}),m.jsx("div",{className:"absolute bottom-20 left-5 w-16 h-16",children:m.jsx("svg",{viewBox:"0 0 100 100",className:"w-full h-full animate-[float_18s_ease-in-out_infinite]",style:{animationDelay:"2s"},children:m.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"white",strokeWidth:"2"})})})]}),m.jsxs("div",{className:"relative z-10 h-full flex flex-col",children:[m.jsxs("div",{className:"p-6 border-b border-white/20",children:[m.jsx("img",{src:"/images/logotipo-vaiston-byn.png",alt:"Vaiston Logo",className:"h-12 w-auto drop-shadow-lg"}),m.jsx("p",{className:"text-xs text-white/80 mt-2 font-medium",children:"CRM para Psiclogos"})]}),m.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:d.map(p=>m.jsx(mh,{to:p.path,onClick:()=>n(!1),className:`flex items-center justify-between gap-3 px-4 py-3 rounded-xl transition-all duration-200 cursor-pointer group
                ${h(p.path)?"bg-white/25 text-white shadow-lg backdrop-blur-sm border border-white/30 hover:bg-white/30":"text-white/70 hover:bg-white/15 hover:text-white hover:shadow-md hover:border hover:border-white/20"}`,children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:`text-xl transition-transform duration-200 ${!h(p.path)&&"group-hover:scale-110"}`,children:p.icon}),m.jsx("span",{className:"font-medium",children:p.label})]})},p.path))}),m.jsx("div",{className:"p-4 border-t border-white/20 lg:hidden",children:m.jsxs("button",{onClick:()=>c(!0),className:"w-full bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white font-semibold py-3 px-4 rounded-xl transition-all duration-300 flex items-center justify-center gap-2 border border-white/30 shadow-lg hover:shadow-xl transform hover:scale-105",children:[m.jsx(m2,{className:"text-lg"}),m.jsx("span",{children:"Descarga en tu telfono"})]})}),m.jsxs("div",{className:"p-4 border-t border-white/20",children:[m.jsxs("button",{onClick:()=>s(!0),className:"w-full bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white font-semibold py-3 px-4 rounded-xl transition-all duration-300 flex items-center justify-center gap-2 border border-white/30 shadow-lg hover:shadow-xl transform hover:scale-105",children:[m.jsx(qg,{className:"text-lg"}),m.jsx("span",{children:"Contratar Sistema"})]}),m.jsx("p",{className:"text-center text-xs text-white/60 mt-2",children:"Versin Demo"})]})]})]}),r&&m.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:()=>n(!1)}),m.jsx(Woe,{isOpen:a,onClose:()=>c(!1)}),m.jsx(Koe,{isOpen:i,onClose:()=>s(!1)})]})},qC=({isOpen:t,onClose:e,onConfirm:r,title:n,message:i,confirmText:s="Confirmar",cancelText:a="Cancelar",isLoading:c=!1})=>m.jsx(eh,{isOpen:t,onClose:e,size:"sm",children:m.jsxs("div",{className:"text-center py-4",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-warning/10 mb-4",children:m.jsx("svg",{className:"h-10 w-10 text-warning",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),m.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-2",children:n}),m.jsx("p",{className:"text-text-secondary mb-6",children:i}),m.jsxs("div",{className:"flex gap-3 justify-center",children:[m.jsx(yn,{variant:"outline",onClick:e,disabled:c,children:a}),m.jsx(yn,{variant:"danger",onClick:r,isLoading:c,children:s})]})]})});var _l={},El={},Uf={},Al={},Yt={},l_={},Tl={},u_={},Bf={},Z0={},H4;function yV(){if(H4)return Z0;H4=1,Object.defineProperty(Z0,"__esModule",{value:!0}),Z0.default=r;let t;const e=new Uint8Array(16);function r(){if(!t&&(t=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!t))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(e)}return Z0}var Rd={},qf={},Vf={},W4;function $oe(){if(W4)return Vf;W4=1,Object.defineProperty(Vf,"__esModule",{value:!0}),Vf.default=void 0;var t=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return Vf.default=t,Vf}var K4;function VC(){if(K4)return qf;K4=1,Object.defineProperty(qf,"__esModule",{value:!0}),qf.default=void 0;var t=e($oe());function e(i){return i&&i.__esModule?i:{default:i}}function r(i){return typeof i=="string"&&t.default.test(i)}var n=r;return qf.default=n,qf}var G4;function FC(){if(G4)return Rd;G4=1,Object.defineProperty(Rd,"__esModule",{value:!0}),Rd.default=void 0,Rd.unsafeStringify=n;var t=e(VC());function e(a){return a&&a.__esModule?a:{default:a}}const r=[];for(let a=0;a<256;++a)r.push((a+256).toString(16).slice(1));function n(a,c=0){return r[a[c+0]]+r[a[c+1]]+r[a[c+2]]+r[a[c+3]]+"-"+r[a[c+4]]+r[a[c+5]]+"-"+r[a[c+6]]+r[a[c+7]]+"-"+r[a[c+8]]+r[a[c+9]]+"-"+r[a[c+10]]+r[a[c+11]]+r[a[c+12]]+r[a[c+13]]+r[a[c+14]]+r[a[c+15]]}function i(a,c=0){const u=n(a,c);if(!(0,t.default)(u))throw TypeError("Stringified UUID is invalid");return u}var s=i;return Rd.default=s,Rd}var $4;function Yoe(){if($4)return Bf;$4=1,Object.defineProperty(Bf,"__esModule",{value:!0}),Bf.default=void 0;var t=r(yV()),e=FC();function r(d){return d&&d.__esModule?d:{default:d}}let n,i,s=0,a=0;function c(d,h,p){let g=h&&p||0;const y=h||new Array(16);d=d||{};let S=d.node||n,x=d.clockseq!==void 0?d.clockseq:i;if(S==null||x==null){const D=d.random||(d.rng||t.default)();S==null&&(S=n=[D[0]|1,D[1],D[2],D[3],D[4],D[5]]),x==null&&(x=i=(D[6]<<8|D[7])&16383)}let w=d.msecs!==void 0?d.msecs:Date.now(),E=d.nsecs!==void 0?d.nsecs:a+1;const R=w-s+(E-a)/1e4;if(R<0&&d.clockseq===void 0&&(x=x+1&16383),(R<0||w>s)&&d.nsecs===void 0&&(E=0),E>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=w,a=E,i=x,w+=122192928e5;const T=((w&268435455)*1e4+E)%4294967296;y[g++]=T>>>24&255,y[g++]=T>>>16&255,y[g++]=T>>>8&255,y[g++]=T&255;const M=w/4294967296*1e4&268435455;y[g++]=M>>>8&255,y[g++]=M&255,y[g++]=M>>>24&15|16,y[g++]=M>>>16&255,y[g++]=x>>>8|128,y[g++]=x&255;for(let D=0;D<6;++D)y[g+D]=S[D];return h||(0,e.unsafeStringify)(y)}var u=c;return Bf.default=u,Bf}var Ff={},sc={},Hf={},Y4;function bV(){if(Y4)return Hf;Y4=1,Object.defineProperty(Hf,"__esModule",{value:!0}),Hf.default=void 0;var t=e(VC());function e(i){return i&&i.__esModule?i:{default:i}}function r(i){if(!(0,t.default)(i))throw TypeError("Invalid UUID");let s;const a=new Uint8Array(16);return a[0]=(s=parseInt(i.slice(0,8),16))>>>24,a[1]=s>>>16&255,a[2]=s>>>8&255,a[3]=s&255,a[4]=(s=parseInt(i.slice(9,13),16))>>>8,a[5]=s&255,a[6]=(s=parseInt(i.slice(14,18),16))>>>8,a[7]=s&255,a[8]=(s=parseInt(i.slice(19,23),16))>>>8,a[9]=s&255,a[10]=(s=parseInt(i.slice(24,36),16))/1099511627776&255,a[11]=s/4294967296&255,a[12]=s>>>24&255,a[13]=s>>>16&255,a[14]=s>>>8&255,a[15]=s&255,a}var n=r;return Hf.default=n,Hf}var X4;function SV(){if(X4)return sc;X4=1,Object.defineProperty(sc,"__esModule",{value:!0}),sc.URL=sc.DNS=void 0,sc.default=a;var t=FC(),e=r(bV());function r(c){return c&&c.__esModule?c:{default:c}}function n(c){c=unescape(encodeURIComponent(c));const u=[];for(let d=0;d<c.length;++d)u.push(c.charCodeAt(d));return u}const i="6ba7b810-9dad-11d1-80b4-00c04fd430c8";sc.DNS=i;const s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";sc.URL=s;function a(c,u,d){function h(p,g,y,S){var x;if(typeof p=="string"&&(p=n(p)),typeof g=="string"&&(g=(0,e.default)(g)),((x=g)===null||x===void 0?void 0:x.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let w=new Uint8Array(16+p.length);if(w.set(g),w.set(p,g.length),w=d(w),w[6]=w[6]&15|u,w[8]=w[8]&63|128,y){S=S||0;for(let E=0;E<16;++E)y[S+E]=w[E];return y}return(0,t.unsafeStringify)(w)}try{h.name=c}catch{}return h.DNS=i,h.URL=s,h}return sc}var Wf={},Q4;function Xoe(){if(Q4)return Wf;Q4=1,Object.defineProperty(Wf,"__esModule",{value:!0}),Wf.default=void 0;function t(y){if(typeof y=="string"){const S=unescape(encodeURIComponent(y));y=new Uint8Array(S.length);for(let x=0;x<S.length;++x)y[x]=S.charCodeAt(x)}return e(n(i(y),y.length*8))}function e(y){const S=[],x=y.length*32,w="0123456789abcdef";for(let E=0;E<x;E+=8){const R=y[E>>5]>>>E%32&255,T=parseInt(w.charAt(R>>>4&15)+w.charAt(R&15),16);S.push(T)}return S}function r(y){return(y+64>>>9<<4)+14+1}function n(y,S){y[S>>5]|=128<<S%32,y[r(S)-1]=S;let x=1732584193,w=-271733879,E=-1732584194,R=271733878;for(let T=0;T<y.length;T+=16){const M=x,D=w,z=E,j=R;x=u(x,w,E,R,y[T],7,-680876936),R=u(R,x,w,E,y[T+1],12,-389564586),E=u(E,R,x,w,y[T+2],17,606105819),w=u(w,E,R,x,y[T+3],22,-1044525330),x=u(x,w,E,R,y[T+4],7,-176418897),R=u(R,x,w,E,y[T+5],12,1200080426),E=u(E,R,x,w,y[T+6],17,-1473231341),w=u(w,E,R,x,y[T+7],22,-45705983),x=u(x,w,E,R,y[T+8],7,1770035416),R=u(R,x,w,E,y[T+9],12,-1958414417),E=u(E,R,x,w,y[T+10],17,-42063),w=u(w,E,R,x,y[T+11],22,-1990404162),x=u(x,w,E,R,y[T+12],7,1804603682),R=u(R,x,w,E,y[T+13],12,-40341101),E=u(E,R,x,w,y[T+14],17,-1502002290),w=u(w,E,R,x,y[T+15],22,1236535329),x=d(x,w,E,R,y[T+1],5,-165796510),R=d(R,x,w,E,y[T+6],9,-1069501632),E=d(E,R,x,w,y[T+11],14,643717713),w=d(w,E,R,x,y[T],20,-373897302),x=d(x,w,E,R,y[T+5],5,-701558691),R=d(R,x,w,E,y[T+10],9,38016083),E=d(E,R,x,w,y[T+15],14,-660478335),w=d(w,E,R,x,y[T+4],20,-405537848),x=d(x,w,E,R,y[T+9],5,568446438),R=d(R,x,w,E,y[T+14],9,-1019803690),E=d(E,R,x,w,y[T+3],14,-187363961),w=d(w,E,R,x,y[T+8],20,1163531501),x=d(x,w,E,R,y[T+13],5,-1444681467),R=d(R,x,w,E,y[T+2],9,-51403784),E=d(E,R,x,w,y[T+7],14,1735328473),w=d(w,E,R,x,y[T+12],20,-1926607734),x=h(x,w,E,R,y[T+5],4,-378558),R=h(R,x,w,E,y[T+8],11,-2022574463),E=h(E,R,x,w,y[T+11],16,1839030562),w=h(w,E,R,x,y[T+14],23,-35309556),x=h(x,w,E,R,y[T+1],4,-1530992060),R=h(R,x,w,E,y[T+4],11,1272893353),E=h(E,R,x,w,y[T+7],16,-155497632),w=h(w,E,R,x,y[T+10],23,-1094730640),x=h(x,w,E,R,y[T+13],4,681279174),R=h(R,x,w,E,y[T],11,-358537222),E=h(E,R,x,w,y[T+3],16,-722521979),w=h(w,E,R,x,y[T+6],23,76029189),x=h(x,w,E,R,y[T+9],4,-640364487),R=h(R,x,w,E,y[T+12],11,-421815835),E=h(E,R,x,w,y[T+15],16,530742520),w=h(w,E,R,x,y[T+2],23,-995338651),x=p(x,w,E,R,y[T],6,-198630844),R=p(R,x,w,E,y[T+7],10,1126891415),E=p(E,R,x,w,y[T+14],15,-1416354905),w=p(w,E,R,x,y[T+5],21,-57434055),x=p(x,w,E,R,y[T+12],6,1700485571),R=p(R,x,w,E,y[T+3],10,-1894986606),E=p(E,R,x,w,y[T+10],15,-1051523),w=p(w,E,R,x,y[T+1],21,-2054922799),x=p(x,w,E,R,y[T+8],6,1873313359),R=p(R,x,w,E,y[T+15],10,-30611744),E=p(E,R,x,w,y[T+6],15,-1560198380),w=p(w,E,R,x,y[T+13],21,1309151649),x=p(x,w,E,R,y[T+4],6,-145523070),R=p(R,x,w,E,y[T+11],10,-1120210379),E=p(E,R,x,w,y[T+2],15,718787259),w=p(w,E,R,x,y[T+9],21,-343485551),x=s(x,M),w=s(w,D),E=s(E,z),R=s(R,j)}return[x,w,E,R]}function i(y){if(y.length===0)return[];const S=y.length*8,x=new Uint32Array(r(S));for(let w=0;w<S;w+=8)x[w>>5]|=(y[w/8]&255)<<w%32;return x}function s(y,S){const x=(y&65535)+(S&65535);return(y>>16)+(S>>16)+(x>>16)<<16|x&65535}function a(y,S){return y<<S|y>>>32-S}function c(y,S,x,w,E,R){return s(a(s(s(S,y),s(w,R)),E),x)}function u(y,S,x,w,E,R,T){return c(S&x|~S&w,y,S,E,R,T)}function d(y,S,x,w,E,R,T){return c(S&w|x&~w,y,S,E,R,T)}function h(y,S,x,w,E,R,T){return c(S^x^w,y,S,E,R,T)}function p(y,S,x,w,E,R,T){return c(x^(S|~w),y,S,E,R,T)}var g=t;return Wf.default=g,Wf}var J4;function Qoe(){if(J4)return Ff;J4=1,Object.defineProperty(Ff,"__esModule",{value:!0}),Ff.default=void 0;var t=r(SV()),e=r(Xoe());function r(s){return s&&s.__esModule?s:{default:s}}var i=(0,t.default)("v3",48,e.default);return Ff.default=i,Ff}var Kf={},Gf={},Z4;function Joe(){if(Z4)return Gf;Z4=1,Object.defineProperty(Gf,"__esModule",{value:!0}),Gf.default=void 0;var e={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return Gf.default=e,Gf}var ek;function Zoe(){if(ek)return Kf;ek=1,Object.defineProperty(Kf,"__esModule",{value:!0}),Kf.default=void 0;var t=n(Joe()),e=n(yV()),r=FC();function n(a){return a&&a.__esModule?a:{default:a}}function i(a,c,u){if(t.default.randomUUID&&!c&&!a)return t.default.randomUUID();a=a||{};const d=a.random||(a.rng||e.default)();if(d[6]=d[6]&15|64,d[8]=d[8]&63|128,c){u=u||0;for(let h=0;h<16;++h)c[u+h]=d[h];return c}return(0,r.unsafeStringify)(d)}var s=i;return Kf.default=s,Kf}var $f={},Yf={},tk;function ece(){if(tk)return Yf;tk=1,Object.defineProperty(Yf,"__esModule",{value:!0}),Yf.default=void 0;function t(i,s,a,c){switch(i){case 0:return s&a^~s&c;case 1:return s^a^c;case 2:return s&a^s&c^a&c;case 3:return s^a^c}}function e(i,s){return i<<s|i>>>32-s}function r(i){const s=[1518500249,1859775393,2400959708,3395469782],a=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof i=="string"){const h=unescape(encodeURIComponent(i));i=[];for(let p=0;p<h.length;++p)i.push(h.charCodeAt(p))}else Array.isArray(i)||(i=Array.prototype.slice.call(i));i.push(128);const c=i.length/4+2,u=Math.ceil(c/16),d=new Array(u);for(let h=0;h<u;++h){const p=new Uint32Array(16);for(let g=0;g<16;++g)p[g]=i[h*64+g*4]<<24|i[h*64+g*4+1]<<16|i[h*64+g*4+2]<<8|i[h*64+g*4+3];d[h]=p}d[u-1][14]=(i.length-1)*8/Math.pow(2,32),d[u-1][14]=Math.floor(d[u-1][14]),d[u-1][15]=(i.length-1)*8&4294967295;for(let h=0;h<u;++h){const p=new Uint32Array(80);for(let E=0;E<16;++E)p[E]=d[h][E];for(let E=16;E<80;++E)p[E]=e(p[E-3]^p[E-8]^p[E-14]^p[E-16],1);let g=a[0],y=a[1],S=a[2],x=a[3],w=a[4];for(let E=0;E<80;++E){const R=Math.floor(E/20),T=e(g,5)+t(R,y,S,x)+w+s[R]+p[E]>>>0;w=x,x=S,S=e(y,30)>>>0,y=g,g=T}a[0]=a[0]+g>>>0,a[1]=a[1]+y>>>0,a[2]=a[2]+S>>>0,a[3]=a[3]+x>>>0,a[4]=a[4]+w>>>0}return[a[0]>>24&255,a[0]>>16&255,a[0]>>8&255,a[0]&255,a[1]>>24&255,a[1]>>16&255,a[1]>>8&255,a[1]&255,a[2]>>24&255,a[2]>>16&255,a[2]>>8&255,a[2]&255,a[3]>>24&255,a[3]>>16&255,a[3]>>8&255,a[3]&255,a[4]>>24&255,a[4]>>16&255,a[4]>>8&255,a[4]&255]}var n=r;return Yf.default=n,Yf}var rk;function tce(){if(rk)return $f;rk=1,Object.defineProperty($f,"__esModule",{value:!0}),$f.default=void 0;var t=r(SV()),e=r(ece());function r(s){return s&&s.__esModule?s:{default:s}}var i=(0,t.default)("v5",80,e.default);return $f.default=i,$f}var Xf={},nk;function rce(){if(nk)return Xf;nk=1,Object.defineProperty(Xf,"__esModule",{value:!0}),Xf.default=void 0;var t="00000000-0000-0000-0000-000000000000";return Xf.default=t,Xf}var Qf={},ik;function nce(){if(ik)return Qf;ik=1,Object.defineProperty(Qf,"__esModule",{value:!0}),Qf.default=void 0;var t=e(VC());function e(i){return i&&i.__esModule?i:{default:i}}function r(i){if(!(0,t.default)(i))throw TypeError("Invalid UUID");return parseInt(i.slice(14,15),16)}var n=r;return Qf.default=n,Qf}var sk;function ice(){return sk||(sk=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return a.default}});var e=h(Yoe()),r=h(Qoe()),n=h(Zoe()),i=h(tce()),s=h(rce()),a=h(nce()),c=h(VC()),u=h(FC()),d=h(bV());function h(p){return p&&p.__esModule?p:{default:p}}})(u_)),u_}var ak;function ju(){if(ak)return Tl;ak=1,Object.defineProperty(Tl,"__esModule",{value:!0}),Tl.createNoDashGuid=Tl.createGuid=void 0;const t=ice(),e=()=>(0,t.v4)();Tl.createGuid=e;const r=()=>e().replace(new RegExp("-","g"),"").toUpperCase();return Tl.createNoDashGuid=r,Tl}var ok;function Vg(){return ok||(ok=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformEvent=t.EventType=void 0;const e=ju();(function(n){n[n.Debug=0]="Debug",n[n.Info=1]="Info",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.None=4]="None"})(t.EventType||(t.EventType={}));class r{constructor(i,s){this.privName=i,this.privEventId=(0,e.createNoDashGuid)(),this.privEventTime=new Date().toISOString(),this.privEventType=s,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}t.PlatformEvent=r})(l_)),l_}var ck;function sce(){if(ck)return Yt;ck=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.AudioStreamNodeErrorEvent=Yt.AudioStreamNodeDetachedEvent=Yt.AudioStreamNodeAttachedEvent=Yt.AudioStreamNodeAttachingEvent=Yt.AudioStreamNodeEvent=Yt.AudioSourceErrorEvent=Yt.AudioSourceOffEvent=Yt.AudioSourceReadyEvent=Yt.AudioSourceInitializingEvent=Yt.AudioSourceEvent=void 0;const t=Vg();class e extends t.PlatformEvent{constructor(g,y,S=t.EventType.Info){super(g,S),this.privAudioSourceId=y}get audioSourceId(){return this.privAudioSourceId}}Yt.AudioSourceEvent=e;class r extends e{constructor(g){super("AudioSourceInitializingEvent",g)}}Yt.AudioSourceInitializingEvent=r;class n extends e{constructor(g){super("AudioSourceReadyEvent",g)}}Yt.AudioSourceReadyEvent=n;class i extends e{constructor(g){super("AudioSourceOffEvent",g)}}Yt.AudioSourceOffEvent=i;class s extends e{constructor(g,y){super("AudioSourceErrorEvent",g,t.EventType.Error),this.privError=y}get error(){return this.privError}}Yt.AudioSourceErrorEvent=s;class a extends e{constructor(g,y,S){super(g,y),this.privAudioNodeId=S}get audioNodeId(){return this.privAudioNodeId}}Yt.AudioStreamNodeEvent=a;class c extends a{constructor(g,y){super("AudioStreamNodeAttachingEvent",g,y)}}Yt.AudioStreamNodeAttachingEvent=c;class u extends a{constructor(g,y){super("AudioStreamNodeAttachedEvent",g,y)}}Yt.AudioStreamNodeAttachedEvent=u;class d extends a{constructor(g,y){super("AudioStreamNodeDetachedEvent",g,y)}}Yt.AudioStreamNodeDetachedEvent=d;class h extends a{constructor(g,y,S){super("AudioStreamNodeErrorEvent",g,y),this.privError=S}get error(){return this.privError}}return Yt.AudioStreamNodeErrorEvent=h,Yt}var Xt={},lk;function ace(){if(lk)return Xt;lk=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.ConnectionRedirectEvent=Xt.ConnectionMessageSentEvent=Xt.ConnectionMessageReceivedEvent=Xt.ConnectionEstablishErrorEvent=Xt.ConnectionErrorEvent=Xt.ConnectionClosedEvent=Xt.ConnectionEstablishedEvent=Xt.ConnectionStartEvent=Xt.ConnectionEvent=Xt.ServiceEvent=void 0;const t=Vg();class e extends t.PlatformEvent{constructor(g,y,S=t.EventType.Info){super(g,S),this.privJsonResult=y}get jsonString(){return this.privJsonResult}}Xt.ServiceEvent=e;class r extends t.PlatformEvent{constructor(g,y,S=t.EventType.Info){super(g,S),this.privConnectionId=y}get connectionId(){return this.privConnectionId}}Xt.ConnectionEvent=r;class n extends r{constructor(g,y,S){super("ConnectionStartEvent",g),this.privUri=y,this.privHeaders=S}get uri(){return this.privUri}get headers(){return this.privHeaders}}Xt.ConnectionStartEvent=n;class i extends r{constructor(g){super("ConnectionEstablishedEvent",g)}}Xt.ConnectionEstablishedEvent=i;class s extends r{constructor(g,y,S){super("ConnectionClosedEvent",g,t.EventType.Debug),this.privReason=S,this.privStatusCode=y}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}Xt.ConnectionClosedEvent=s;class a extends r{constructor(g,y,S){super("ConnectionErrorEvent",g,t.EventType.Debug),this.privMessage=y,this.privType=S}get message(){return this.privMessage}get type(){return this.privType}}Xt.ConnectionErrorEvent=a;class c extends r{constructor(g,y,S){super("ConnectionEstablishErrorEvent",g,t.EventType.Error),this.privStatusCode=y,this.privReason=S}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}Xt.ConnectionEstablishErrorEvent=c;class u extends r{constructor(g,y,S){super("ConnectionMessageReceivedEvent",g),this.privNetworkReceivedTime=y,this.privMessage=S}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}Xt.ConnectionMessageReceivedEvent=u;class d extends r{constructor(g,y,S){super("ConnectionMessageSentEvent",g),this.privNetworkSentTime=y,this.privMessage=S}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}Xt.ConnectionMessageSentEvent=d;class h extends r{constructor(g,y,S,x){super("ConnectionRedirectEvent",g,t.EventType.Info),this.privRedirectUrl=y,this.privOriginalUrl=S,this.privContext=x}get redirectUrl(){return this.privRedirectUrl}get originalUrl(){return this.privOriginalUrl}get context(){return this.privContext}}return Xt.ConnectionRedirectEvent=h,Xt}var d_={},Ua={},uk;function ga(){if(uk)return Ua;uk=1,Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.ObjectDisposedError=Ua.InvalidOperationError=Ua.ArgumentNullError=void 0;class t extends Error{constructor(i){super(i),this.name="ArgumentNull",this.message=i}}Ua.ArgumentNullError=t;class e extends Error{constructor(i){super(i),this.name="InvalidOperation",this.message=i}}Ua.InvalidOperationError=e;class r extends Error{constructor(i,s){super(s),this.name=i+"ObjectDisposed",this.message=s}}return Ua.ObjectDisposedError=r,Ua}var dk;function CV(){return dk||(dk=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessage=t.MessageType=void 0;const e=ga(),r=ju();var n;(function(s){s[s.Text=0]="Text",s[s.Binary=1]="Binary"})(n=t.MessageType||(t.MessageType={}));class i{constructor(a,c,u,d){if(this.privBody=null,a===n.Text&&c&&typeof c!="string")throw new e.InvalidOperationError("Payload must be a string");if(a===n.Binary&&c&&!(c instanceof ArrayBuffer))throw new e.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=a,this.privBody=c,this.privHeaders=u||{},this.privId=d||(0,r.createNoDashGuid)(),this.messageType){case n.Binary:this.privSize=this.binaryBody!==null?this.binaryBody.byteLength:0;break;case n.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===n.Binary)throw new e.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===n.Text)throw new e.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}t.ConnectionMessage=i})(d_)),d_}var Jf={},hk;function oce(){if(hk)return Jf;hk=1,Object.defineProperty(Jf,"__esModule",{value:!0}),Jf.ConnectionOpenResponse=void 0;let t=class{constructor(r,n){this.privStatusCode=r,this.privReason=n}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}};return Jf.ConnectionOpenResponse=t,Jf}var Zf={},fk;function cce(){if(fk)return Zf;fk=1,Object.defineProperty(Zf,"__esModule",{value:!0}),Zf.DeferralMap=void 0;let t=class{constructor(){this.privMap={}}add(r,n){this.privMap[r]=n}getId(r){return this.privMap[r]}complete(r,n){try{this.privMap[r].resolve(n)}catch(i){this.privMap[r].reject(i)}finally{this.privMap[r]=void 0}}};return Zf.DeferralMap=t,Zf}var Rl={},pk;function xV(){if(pk)return Rl;pk=1,Object.defineProperty(Rl,"__esModule",{value:!0}),Rl.SendingAgentContextMessageEvent=Rl.DialogEvent=void 0;const t=Vg();class e extends t.PlatformEvent{constructor(i,s=t.EventType.Info){super(i,s)}}Rl.DialogEvent=e;class r extends e{constructor(i){super("SendingAgentContextMessageEvent"),this.privAgentConfig=i}get agentConfig(){return this.privAgentConfig}}return Rl.SendingAgentContextMessageEvent=r,Rl}var ep={},tp={},mk;function wV(){if(mk)return tp;mk=1,Object.defineProperty(tp,"__esModule",{value:!0}),tp.EventSource=void 0;const t=ga(),e=ju();let r=class{constructor(i){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=i}onEvent(i){if(this.isDisposed())throw new t.ObjectDisposedError("EventSource");if(this.metadata)for(const s in this.metadata)s&&i.metadata&&(i.metadata[s]||(i.metadata[s]=this.metadata[s]));for(const s in this.privEventListeners)s&&this.privEventListeners[s]&&this.privEventListeners[s](i)}attach(i){const s=(0,e.createNoDashGuid)();return this.privEventListeners[s]=i,{detach:()=>(delete this.privEventListeners[s],Promise.resolve())}}attachListener(i){return this.attach(s=>i.onEvent(s))}attachConsoleListener(i){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(s=>i.onEvent(s)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}};return tp.EventSource=r,tp}var vk;function lce(){if(vk)return ep;vk=1,Object.defineProperty(ep,"__esModule",{value:!0}),ep.Events=void 0;const t=ga(),e=wV();let r=class UT{static setEventSource(i){if(!i)throw new t.ArgumentNullError("eventSource");UT.privInstance=i}static get instance(){return UT.privInstance}};return ep.Events=r,r.privInstance=new e.EventSource,ep}var h_={},gk;function uce(){return gk||(gk=1,Object.defineProperty(h_,"__esModule",{value:!0})),h_}var f_={},yk;function dce(){return yk||(yk=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionState=void 0,(function(e){e[e.None=0]="None",e[e.Connected=1]="Connected",e[e.Connecting=2]="Connecting",e[e.Disconnected=3]="Disconnected"})(t.ConnectionState||(t.ConnectionState={}))})(f_)),f_}var p_={},bk;function hce(){return bk||(bk=1,Object.defineProperty(p_,"__esModule",{value:!0})),p_}var m_={},Sk;function fce(){return Sk||(Sk=1,Object.defineProperty(m_,"__esModule",{value:!0})),m_}var v_={},Ck;function pce(){return Ck||(Ck=1,Object.defineProperty(v_,"__esModule",{value:!0})),v_}var g_={},xk;function mce(){return xk||(xk=1,Object.defineProperty(g_,"__esModule",{value:!0})),g_}var y_={},wk;function vce(){return wk||(wk=1,Object.defineProperty(y_,"__esModule",{value:!0})),y_}var b_={},_k;function gce(){return _k||(_k=1,Object.defineProperty(b_,"__esModule",{value:!0})),b_}var S_={},Ek;function yce(){return Ek||(Ek=1,Object.defineProperty(S_,"__esModule",{value:!0})),S_}var C_={},Ak;function bce(){return Ak||(Ak=1,Object.defineProperty(C_,"__esModule",{value:!0})),C_}var rp={},Tk;function _V(){if(Tk)return rp;Tk=1,Object.defineProperty(rp,"__esModule",{value:!0}),rp.List=void 0;const t=ga();let e=class Xl{constructor(n){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],n)for(const i of n)this.privList.push(i)}get(n){return this.throwIfDisposed(),this.privList[n]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(n){this.throwIfDisposed(),this.insertAt(this.privList.length,n)}insertAt(n,i){this.throwIfDisposed(),n===0?this.privList.unshift(i):n===this.privList.length?this.privList.push(i):this.privList.splice(n,0,i),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(n){return this.throwIfDisposed(),this.remove(n,1)[0]}remove(n,i){this.throwIfDisposed();const s=this.privList.splice(n,i);return this.triggerSubscriptions(this.privRemoveSubscriptions),s}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(n){this.throwIfDisposed();const i=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[i]=n,{detach:()=>(delete this.privAddSubscriptions[i],Promise.resolve())}}onRemoved(n){this.throwIfDisposed();const i=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[i]=n,{detach:()=>(delete this.privRemoveSubscriptions[i],Promise.resolve())}}onDisposed(n){this.throwIfDisposed();const i=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[i]=n,{detach:()=>(delete this.privDisposedSubscriptions[i],Promise.resolve())}}join(n){return this.throwIfDisposed(),this.privList.join(n)}toArray(){const n=Array();return this.privList.forEach(i=>{n.push(i)}),n}any(n){return this.throwIfDisposed(),n?this.where(n).length()>0:this.length()>0}all(n){return this.throwIfDisposed(),this.where(n).length()===this.length()}forEach(n){this.throwIfDisposed();for(let i=0;i<this.length();i++)n(this.privList[i],i)}select(n){this.throwIfDisposed();const i=[];for(let s=0;s<this.privList.length;s++)i.push(n(this.privList[s],s));return new Xl(i)}where(n){this.throwIfDisposed();const i=new Xl;for(let s=0;s<this.privList.length;s++)n(this.privList[s],s)&&i.add(this.privList[s]);return i}orderBy(n){this.throwIfDisposed();const s=this.toArray().sort(n);return new Xl(s)}orderByDesc(n){return this.throwIfDisposed(),this.orderBy((i,s)=>n(s,i))}clone(){return this.throwIfDisposed(),new Xl(this.toArray())}concat(n){return this.throwIfDisposed(),new Xl(this.privList.concat(n.toArray()))}concatArray(n){return this.throwIfDisposed(),new Xl(this.privList.concat(n))}isDisposed(){return this.privList==null}dispose(n){this.isDisposed()||(this.privDisposeReason=n,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new t.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(n){if(n)for(const i in n)i&&n[i]()}};return rp.List=e,rp}var x_={},Rk;function EV(){return Rk||(Rk=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.marshalPromiseToCallbacks=t.Sink=t.Deferred=t.PromiseResultEventSource=t.PromiseResult=t.PromiseState=void 0;var e;(function(c){c[c.None=0]="None",c[c.Resolved=1]="Resolved",c[c.Rejected=2]="Rejected"})(e=t.PromiseState||(t.PromiseState={}));class r{constructor(u){this.throwIfError=()=>{if(this.isError)throw this.error},u.on(d=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=d)},d=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=d)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}t.PromiseResult=r;class n{constructor(){this.setResult=u=>{this.privOnSetResult(u)},this.setError=u=>{this.privOnSetError(u)},this.on=(u,d)=>{this.privOnSetResult=u,this.privOnSetError=d}}}t.PromiseResultEventSource=n;class i{constructor(){this.resolve=u=>(this.privResolve(u),this),this.reject=u=>(this.privReject(u),this),this.privPromise=new Promise((u,d)=>{this.privResolve=u,this.privReject=d})}get promise(){return this.privPromise}}t.Deferred=i;class s{constructor(){this.privState=e.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new n,this.privPromiseResult=new r(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(u){if(this.privState!==e.None)throw new Error("'Cannot resolve a completed promise'");this.privState=e.Resolved,this.privPromiseResultEvents.setResult(u);for(let d=0;d<this.privSuccessHandlers.length;d++)this.executeSuccessCallback(u,this.privSuccessHandlers[d],this.privErrorHandlers[d]);this.detachHandlers()}reject(u){if(this.privState!==e.None)throw new Error("'Cannot reject a completed promise'");this.privState=e.Rejected,this.privPromiseResultEvents.setError(u);for(const d of this.privErrorHandlers)this.executeErrorCallback(u,d);this.detachHandlers()}on(u,d){u==null&&(u=()=>{}),this.privState===e.None?(this.privSuccessHandlers.push(u),this.privErrorHandlers.push(d)):(this.privState===e.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,u,d):this.privState===e.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,d),this.detachHandlers())}executeSuccessCallback(u,d,h){try{d(u)}catch(p){this.executeErrorCallback(`'Unhandled callback error: ${p}'`,h)}}executeErrorCallback(u,d){if(d)try{d(u)}catch(h){throw new Error(`'Unhandled callback error: ${h}. InnerError: ${u}'`)}else throw new Error(`'Unhandled error: ${u}'`)}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}}t.Sink=s;function a(c,u,d){c.then(h=>{try{u&&u(h)}catch(p){if(d)try{if(p instanceof Error){const g=p;d(g.name+": "+g.message)}else d(p)}catch{}}},h=>{if(d)try{if(h instanceof Error){const p=h;d(p.name+": "+p.message)}else d(h)}catch{}})}t.marshalPromiseToCallbacks=a})(x_)),x_}var np={},Pk;function AV(){if(Pk)return np;Pk=1,Object.defineProperty(np,"__esModule",{value:!0}),np.Queue=void 0;const t=ga(),e=_V(),r=EV();var n;(function(s){s[s.Dequeue=0]="Dequeue",s[s.Peek=1]="Peek"})(n||(n={}));let i=class{constructor(a){this.privPromiseStore=new e.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=a||new e.List,this.privDetachables=[],this.privSubscribers=new e.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(a){this.throwIfDispose(),this.enqueueFromPromise(new Promise(c=>c(a)))}enqueueFromPromise(a){this.throwIfDispose(),a.then(c=>{this.privList.add(c)},()=>{})}dequeue(){this.throwIfDispose();const a=new r.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:a,type:n.Dequeue}),this.drain()),a.promise}peek(){this.throwIfDispose();const a=new r.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:a,type:n.Peek}),this.drain()),a.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return this.privSubscribers==null}async drainAndDispose(a,c){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=c,this.privIsDisposing=!0;const u=this.privSubscribers;if(u){for(;u.length()>0;)u.removeFirst().deferral.resolve(void 0);this.privSubscribers===u&&(this.privSubscribers=u)}for(const d of this.privDetachables)await d.detach();if(this.privPromiseStore.length()>0&&a){const d=[];return this.privPromiseStore.toArray().forEach(h=>{d.push(h)}),Promise.all(d).finally(()=>{this.privSubscribers=null,this.privList.forEach(h=>{a(h)}),this.privList=null}).then()}else this.privSubscribers=null,this.privList=null}}async dispose(a){await this.drainAndDispose(null,a)}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const a=this.privSubscribers,c=this.privList;if(a&&c){for(;c.length()>0&&a.length()>0&&!this.privIsDisposing;){const u=a.removeFirst();if(u.type===n.Peek)u.deferral.resolve(c.first());else{const d=c.removeFirst();u.deferral.resolve(d)}}this.privSubscribers===a&&(this.privSubscribers=a),this.privList===c&&(this.privList=c)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed())throw this.privDisposeReason?new t.InvalidOperationError(this.privDisposeReason):new t.ObjectDisposedError("Queue");if(this.privIsDisposing)throw new t.InvalidOperationError("Queue disposing")}};return np.Queue=i,np}var ip={},Ik;function Sce(){if(Ik)return ip;Ik=1,Object.defineProperty(ip,"__esModule",{value:!0}),ip.RawWebsocketMessage=void 0;const t=CV(),e=ga(),r=ju();let n=class{constructor(s,a,c){if(this.privPayload=null,!a)throw new e.ArgumentNullError("payload");if(s===t.MessageType.Binary&&Object.getPrototypeOf(a).constructor.name!=="ArrayBuffer")throw new e.InvalidOperationError("Payload must be ArrayBuffer");if(s===t.MessageType.Text&&typeof a!="string")throw new e.InvalidOperationError("Payload must be a string");this.privMessageType=s,this.privPayload=a,this.privId=c||(0,r.createNoDashGuid)()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===t.MessageType.Binary)throw new e.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===t.MessageType.Text)throw new e.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}};return ip.RawWebsocketMessage=n,ip}var sp={},Nk;function Cce(){if(Nk)return sp;Nk=1,Object.defineProperty(sp,"__esModule",{value:!0}),sp.RiffPcmEncoder=void 0;let t=class{constructor(r,n){this.privActualSampleRate=r,this.privDesiredSampleRate=n}encode(r){const n=this.downSampleAudioFrame(r,this.privActualSampleRate,this.privDesiredSampleRate);if(!n)return null;const i=n.length*2,s=new ArrayBuffer(i),a=new DataView(s);return this.floatTo16BitPCM(a,0,n),s}setString(r,n,i){for(let s=0;s<i.length;s++)r.setUint8(n+s,i.charCodeAt(s))}floatTo16BitPCM(r,n,i){for(let s=0;s<i.length;s++,n+=2){const a=Math.max(-1,Math.min(1,i[s]));r.setInt16(n,a<0?a*32768:a*32767,!0)}}downSampleAudioFrame(r,n,i){if(!r)return null;if(i===n||i>n)return r;const s=n/i,a=Math.round(r.length/s),c=new Float32Array(a);let u=0,d=0;for(;d<a;){const h=Math.round((d+1)*s);let p=0,g=0;for(;u<h&&u<r.length;)p+=r[u++],g++;c[d++]=p/g}return c}};return sp.RiffPcmEncoder=t,sp}var ap={},Ok;function xce(){if(Ok)return ap;Ok=1,Object.defineProperty(ap,"__esModule",{value:!0}),ap.Stream=void 0;const t=ga(),e=ju(),r=AV();let n=class{constructor(s){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=s||(0,e.createNoDashGuid)(),this.privReaderQueue=new r.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(s){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(s)}catch{}}read(){if(this.privIsReadEnded)throw new t.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(async s=>((s===void 0||s.isEnd)&&await this.privReaderQueue.dispose("End of stream reached"),s))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new r.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new t.InvalidOperationError("Stream closed")}};return ap.Stream=n,ap}var w_={},jk;function y2(){return jk||(jk=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationStatus=void 0,(function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"})(t.TranslationStatus||(t.TranslationStatus={}))})(w_)),w_}var op={},Mk;function wce(){if(Mk)return op;Mk=1,Object.defineProperty(op,"__esModule",{value:!0}),op.ChunkedArrayBufferStream=void 0;const t=Ve();let e=class extends t.Stream{constructor(n,i){super(i),this.privTargetChunkSize=Math.round(n),this.privNextBufferReadyBytes=0}writeStreamChunk(n){if(n.isEnd||this.privNextBufferReadyBytes===0&&n.buffer.byteLength===this.privTargetChunkSize){super.writeStreamChunk(n);return}let i=0;for(;i<n.buffer.byteLength;){this.privNextBufferToWrite===void 0&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=n.timeReceived);const s=Math.min(n.buffer.byteLength-i,this.privTargetChunkSize-this.privNextBufferReadyBytes),a=new Uint8Array(this.privNextBufferToWrite),c=new Uint8Array(n.buffer.slice(i,s+i));a.set(c,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=s,i+=s,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){this.privNextBufferReadyBytes!==0&&!this.isClosed&&super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}};return op.ChunkedArrayBufferStream=e,op}var __={},Dk;function _ce(){return Dk||(Dk=1,Object.defineProperty(__,"__esModule",{value:!0})),__}var cp={},kk;function Ece(){if(kk)return cp;kk=1,Object.defineProperty(cp,"__esModule",{value:!0}),cp.Timeout=void 0;let t=class cc{static load(){const r=new Map([[0,()=>{}]]),n=new Map,s="data:text/javascript;base64,"+btoa(`!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id "'.concat(e,'".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`),a=new Worker(s);return a.addEventListener("message",({data:d})=>{if(cc.isCallNotification(d)){const{params:{timerId:h}}=d,p=r.get(h);if(typeof p=="number"){const g=n.get(p);if(g===void 0||g!==h)throw new Error("The timer is in an undefined state.")}else if(typeof p<"u")p(),r.delete(h);else throw new Error("The timer is in an undefined state.")}else if(cc.isClearResponse(d)){const{id:h}=d,p=n.get(h);if(p===void 0)throw new Error("The timer is in an undefined state.");n.delete(h),r.delete(p)}else{const{error:{message:h}}=d;throw new Error(h)}}),{clearTimeout:d=>{const h=Math.random();n.set(h,d),r.set(d,h),a.postMessage({id:h,method:"clear",params:{timerId:d}})},setTimeout:(d,h)=>{const p=Math.random();return r.set(p,d),a.postMessage({id:null,method:"set",params:{delay:h,now:performance.now(),timerId:p}}),p}}}static loadWorkerTimers(){return()=>(cc.workerTimers!==null||(cc.workerTimers=cc.load()),cc.workerTimers)}static isCallNotification(r){return r.method!==void 0&&r.method==="call"}static isClearResponse(r){return r.error===null&&typeof r.id=="number"}};return cp.Timeout=t,t.workerTimers=null,t.clearTimeout=e=>t.timers().clearTimeout(e),t.setTimeout=(e,r)=>t.timers().setTimeout(e,r),t.timers=t.loadWorkerTimers(),cp}var et={},Lk;function Ace(){if(Lk)return et;Lk=1,Object.defineProperty(et,"__esModule",{value:!0}),et.OCSPCacheUpdateErrorEvent=et.OCSPResponseRetrievedEvent=et.OCSPCacheFetchErrorEvent=et.OCSPVerificationFailedEvent=et.OCSPCacheHitEvent=et.OCSPCacheEntryNeedsRefreshEvent=et.OCSPCacheEntryExpiredEvent=et.OCSPWSUpgradeStartedEvent=et.OCSPStapleReceivedEvent=et.OCSPCacheUpdateCompleteEvent=et.OCSPDiskCacheStoreEvent=et.OCSPMemoryCacheStoreEvent=et.OCSPCacheUpdateNeededEvent=et.OCSPDiskCacheHitEvent=et.OCSPCacheMissEvent=et.OCSPMemoryCacheHitEvent=et.OCSPEvent=void 0;const t=Vg();class e extends t.PlatformEvent{constructor(T,M,D){super(T,M),this.privSignature=D}}et.OCSPEvent=e;class r extends e{constructor(T){super("OCSPMemoryCacheHitEvent",t.EventType.Debug,T)}}et.OCSPMemoryCacheHitEvent=r;class n extends e{constructor(T){super("OCSPCacheMissEvent",t.EventType.Debug,T)}}et.OCSPCacheMissEvent=n;class i extends e{constructor(T){super("OCSPDiskCacheHitEvent",t.EventType.Debug,T)}}et.OCSPDiskCacheHitEvent=i;class s extends e{constructor(T){super("OCSPCacheUpdateNeededEvent",t.EventType.Debug,T)}}et.OCSPCacheUpdateNeededEvent=s;class a extends e{constructor(T){super("OCSPMemoryCacheStoreEvent",t.EventType.Debug,T)}}et.OCSPMemoryCacheStoreEvent=a;class c extends e{constructor(T){super("OCSPDiskCacheStoreEvent",t.EventType.Debug,T)}}et.OCSPDiskCacheStoreEvent=c;class u extends e{constructor(T){super("OCSPCacheUpdateCompleteEvent",t.EventType.Debug,T)}}et.OCSPCacheUpdateCompleteEvent=u;class d extends e{constructor(){super("OCSPStapleReceivedEvent",t.EventType.Debug,"")}}et.OCSPStapleReceivedEvent=d;class h extends e{constructor(T){super("OCSPWSUpgradeStartedEvent",t.EventType.Debug,T)}}et.OCSPWSUpgradeStartedEvent=h;class p extends e{constructor(T,M){super("OCSPCacheEntryExpiredEvent",t.EventType.Debug,T),this.privExpireTime=M}}et.OCSPCacheEntryExpiredEvent=p;class g extends e{constructor(T,M,D){super("OCSPCacheEntryNeedsRefreshEvent",t.EventType.Debug,T),this.privExpireTime=D,this.privStartTime=M}}et.OCSPCacheEntryNeedsRefreshEvent=g;class y extends e{constructor(T,M,D){super("OCSPCacheHitEvent",t.EventType.Debug,T),this.privExpireTime=D,this.privExpireTimeString=new Date(D).toLocaleDateString(),this.privStartTime=M,this.privStartTimeString=new Date(M).toLocaleTimeString()}}et.OCSPCacheHitEvent=y;class S extends e{constructor(T,M){super("OCSPVerificationFailedEvent",t.EventType.Debug,T),this.privError=M}}et.OCSPVerificationFailedEvent=S;class x extends e{constructor(T,M){super("OCSPCacheFetchErrorEvent",t.EventType.Debug,T),this.privError=M}}et.OCSPCacheFetchErrorEvent=x;class w extends e{constructor(T){super("OCSPResponseRetrievedEvent",t.EventType.Debug,T)}}et.OCSPResponseRetrievedEvent=w;class E extends e{constructor(T,M){super("OCSPCacheUpdateErrorEvent",t.EventType.Debug,T),this.privError=M}}return et.OCSPCacheUpdateErrorEvent=E,et}var lp={},zk;function Tce(){if(zk)return lp;zk=1,Object.defineProperty(lp,"__esModule",{value:!0}),lp.BackgroundEvent=void 0;const t=Ve();class e extends t.PlatformEvent{constructor(n){super("BackgroundEvent",t.EventType.Error),this.privError=n}get error(){return this.privError}}return lp.BackgroundEvent=e,lp}var Uk;function Ve(){return Uk||(Uk=1,(function(t){var e=Al&&Al.__createBinding||(Object.create?(function(i,s,a,c){c===void 0&&(c=a),Object.defineProperty(i,c,{enumerable:!0,get:function(){return s[a]}})}):(function(i,s,a,c){c===void 0&&(c=a),i[c]=s[a]})),r=Al&&Al.__exportStar||function(i,s){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&e(s,i,a)};Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationStatus=void 0,r(sce(),t),r(ace(),t),r(CV(),t),r(oce(),t),r(cce(),t),r(xV(),t),r(ga(),t),r(lce(),t),r(wV(),t),r(ju(),t),r(uce(),t),r(dce(),t),r(hce(),t),r(fce(),t),r(pce(),t),r(mce(),t),r(vce(),t),r(gce(),t),r(yce(),t),r(bce(),t),r(_V(),t),r(Vg(),t),r(EV(),t),r(AV(),t),r(Sce(),t),r(Cce(),t),r(xce(),t);var n=y2();Object.defineProperty(t,"TranslationStatus",{enumerable:!0,get:function(){return n.TranslationStatus}}),r(wce(),t),r(_ce(),t),r(Ece(),t),r(Ace(),t),r(Tce(),t)})(Al)),Al}var up={},Bk;function Si(){if(Bk)return up;Bk=1,Object.defineProperty(up,"__esModule",{value:!0}),up.HeaderNames=void 0;let t=class{};return up.HeaderNames=t,t.AuthKey="Ocp-Apim-Subscription-Key",t.Authorization="Authorization",t.SpIDAuthKey="Apim-Subscription-Id",t.ConnectionId="X-ConnectionId",t.ContentType="Content-Type",t.CustomCommandsAppId="X-CommandsAppId",t.Path="Path",t.RequestId="X-RequestId",t.RequestStreamId="X-StreamId",t.RequestTimestamp="X-Timestamp",up}var dp={},qk;function b2(){if(qk)return dp;qk=1,Object.defineProperty(dp,"__esModule",{value:!0}),dp.AuthInfo=void 0;class t{constructor(r,n){this.privHeaderName=r,this.privToken=n}get headerName(){return this.privHeaderName}get token(){return this.privToken}}return dp.AuthInfo=t,dp}var Vk;function Rce(){if(Vk)return Uf;Vk=1,Object.defineProperty(Uf,"__esModule",{value:!0}),Uf.CognitiveSubscriptionKeyAuthentication=void 0;const t=Ve(),e=Si(),r=b2();let n=class{constructor(s){if(!s)throw new t.ArgumentNullError("subscriptionKey");this.privAuthInfo=new r.AuthInfo(e.HeaderNames.AuthKey,s)}fetch(s){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(s){return Promise.resolve(this.privAuthInfo)}};return Uf.CognitiveSubscriptionKeyAuthentication=n,Uf}var hp={},Fk;function Pce(){if(Fk)return hp;Fk=1,Object.defineProperty(hp,"__esModule",{value:!0}),hp.CognitiveTokenAuthentication=void 0;const t=Ve(),e=b2(),r=Si();let n=class BT{constructor(s,a){if(!s)throw new t.ArgumentNullError("fetchCallback");if(!a)throw new t.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=s,this.privFetchOnExpiryCallback=a}fetch(s){return this.privFetchCallback(s).then(a=>new e.AuthInfo(r.HeaderNames.Authorization,a===void 0?void 0:BT.privTokenPrefix+a))}fetchOnExpiry(s){return this.privFetchOnExpiryCallback(s).then(a=>new e.AuthInfo(r.HeaderNames.Authorization,a===void 0?void 0:BT.privTokenPrefix+a))}};return hp.CognitiveTokenAuthentication=n,n.privTokenPrefix="Bearer ",hp}var E_={},Hk;function Ice(){return Hk||(Hk=1,Object.defineProperty(E_,"__esModule",{value:!0})),E_}var A_={},Wk;function Nce(){return Wk||(Wk=1,Object.defineProperty(A_,"__esModule",{value:!0})),A_}var T_={},Kk;function S2(){return Kk||(Kk=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionEndedEvent=t.RecognitionCompletionStatus=t.RecognitionStartedEvent=t.ConnectingToServiceEvent=t.ListeningStartedEvent=t.RecognitionTriggeredEvent=t.SpeechRecognitionEvent=void 0;const e=Ve();class r extends e.PlatformEvent{constructor(h,p,g,y=e.EventType.Info){super(h,y),this.privRequestId=p,this.privSessionId=g}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}t.SpeechRecognitionEvent=r;class n extends r{constructor(h,p,g,y){super("RecognitionTriggeredEvent",h,p),this.privAudioSourceId=g,this.privAudioNodeId=y}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}t.RecognitionTriggeredEvent=n;class i extends r{constructor(h,p,g,y){super("ListeningStartedEvent",h,p),this.privAudioSourceId=g,this.privAudioNodeId=y}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}t.ListeningStartedEvent=i;class s extends r{constructor(h,p,g){super("ConnectingToServiceEvent",h,g),this.privAuthFetchEventid=p}get authFetchEventid(){return this.privAuthFetchEventid}}t.ConnectingToServiceEvent=s;class a extends r{constructor(h,p,g,y,S){super("RecognitionStartedEvent",h,S),this.privAudioSourceId=p,this.privAudioNodeId=g,this.privAuthFetchEventId=y}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}t.RecognitionStartedEvent=a;var c;(function(d){d[d.Success=0]="Success",d[d.AudioSourceError=1]="AudioSourceError",d[d.AudioSourceTimeout=2]="AudioSourceTimeout",d[d.AuthTokenFetchError=3]="AuthTokenFetchError",d[d.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",d[d.UnAuthorized=5]="UnAuthorized",d[d.ConnectTimeout=6]="ConnectTimeout",d[d.ConnectError=7]="ConnectError",d[d.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",d[d.UnknownError=9]="UnknownError"})(c=t.RecognitionCompletionStatus||(t.RecognitionCompletionStatus={}));class u extends r{constructor(h,p,g,y,S,x,w,E){super("RecognitionEndedEvent",h,S,w===c.Success?e.EventType.Info:e.EventType.Error),this.privAudioSourceId=p,this.privAudioNodeId=g,this.privAuthFetchEventId=y,this.privStatus=w,this.privError=E,this.privServiceTag=x}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}t.RecognitionEndedEvent=u})(T_)),T_}var fp={},Pl={},us={};const Oce={},jce=Object.freeze(Object.defineProperty({__proto__:null,default:Oce},Symbol.toStringTag,{value:"Module"})),eu=IX(jce);var R_={},Gk;function TV(){return Gk||(Gk=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=void 0;const e=Ve();Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return e.EventType}})})(R_)),R_}var pp={},$k;function tt(){if($k)return pp;$k=1,Object.defineProperty(pp,"__esModule",{value:!0}),pp.Contracts=void 0;let t=class lc{static throwIfNullOrUndefined(r,n){if(r==null)throw new Error("throwIfNullOrUndefined:"+n)}static throwIfNull(r,n){if(r===null)throw new Error("throwIfNull:"+n)}static throwIfNullOrWhitespace(r,n){if(lc.throwIfNullOrUndefined(r,n),(""+r).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+n)}static throwIfNullOrTooLong(r,n,i){if(lc.throwIfNullOrUndefined(r,n),(""+r).length>i)throw new Error("throwIfNullOrTooLong:"+n+" (more than "+i.toString()+" characters)")}static throwIfNullOrTooShort(r,n,i){if(lc.throwIfNullOrUndefined(r,n),(""+r).length<i)throw new Error("throwIfNullOrTooShort:"+n+" (less than "+i.toString()+" characters)")}static throwIfDisposed(r){if(r)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(r,n){if(lc.throwIfNullOrUndefined(r,n),r.length===0)throw new Error("throwIfArrayEmptyOrWhitespace:"+n);for(const i of r)lc.throwIfNullOrWhitespace(i,n)}static throwIfFileDoesNotExist(r,n){lc.throwIfNullOrWhitespace(r,n)}static throwIfNotUndefined(r,n){if(r!==void 0)throw new Error("throwIfNotUndefined:"+n)}static throwIfNumberOutOfRange(r,n,i,s){if(lc.throwIfNullOrUndefined(r,n),r<i||r>s)throw new Error("throwIfNumberOutOfRange:"+n+" (must be between "+i.toString()+" and "+s.toString()+")")}};return pp.Contracts=t,pp}var Yk;function Mce(){if(Yk)return us;Yk=1;var t=us&&us.__createBinding||(Object.create?(function(c,u,d,h){h===void 0&&(h=d),Object.defineProperty(c,h,{enumerable:!0,get:function(){return u[d]}})}):(function(c,u,d,h){h===void 0&&(h=d),c[h]=u[d]})),e=us&&us.__setModuleDefault||(Object.create?(function(c,u){Object.defineProperty(c,"default",{enumerable:!0,value:u})}):function(c,u){c.default=u}),r=us&&us.__importStar||function(c){if(c&&c.__esModule)return c;var u={};if(c!=null)for(var d in c)d!=="default"&&Object.prototype.hasOwnProperty.call(c,d)&&t(u,c,d);return e(u,c),u};Object.defineProperty(us,"__esModule",{value:!0}),us.ConsoleLoggingListener=void 0;const n=r(eu),i=TV(),s=tt();let a=class{constructor(u=i.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=u}set logPath(u){s.Contracts.throwIfNullOrUndefined(n.openSync,`
File System access not available`),this.privLogPath=u}set enableConsoleOutput(u){this.privEnableConsoleOutput=u}onEvent(u){if(u.eventType>=this.privLogLevelFilter){const d=this.toString(u);if(this.logCallback&&this.logCallback(d),this.privLogPath&&n.writeFileSync(this.privLogPath,d+`
`,{flag:"a+"}),this.privEnableConsoleOutput)switch(u.eventType){case i.LogLevel.Debug:console.debug(d);break;case i.LogLevel.Info:console.info(d);break;case i.LogLevel.Warning:console.warn(d);break;case i.LogLevel.Error:console.error(d);break;default:console.log(d);break}}}toString(u){const d=[`${u.eventTime}`,`${u.name}`],h=u;for(const p in h)if(p&&u.hasOwnProperty(p)&&p!=="eventTime"&&p!=="eventType"&&p!=="eventId"&&p!=="name"&&p!=="constructor"){const g=h[p];let y="<NULL>";g!=null&&(typeof g=="number"||typeof g=="string"?y=g.toString():y=JSON.stringify(g)),d.push(`${p}: ${y}`)}return d.join(" | ")}};return us.ConsoleLoggingListener=a,us}var P_={},Xk;function Dce(){return Xk||(Xk=1,Object.defineProperty(P_,"__esModule",{value:!0})),P_}var I_={},N_={},Qk;function Mu(){return Qk||(Qk=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AudioStreamFormatImpl=t.AudioStreamFormat=t.AudioFormatTag=void 0;var e;(function(i){i[i.PCM=1]="PCM",i[i.MuLaw=2]="MuLaw",i[i.Siren=3]="Siren",i[i.MP3=4]="MP3",i[i.SILKSkype=5]="SILKSkype",i[i.OGG_OPUS=6]="OGG_OPUS",i[i.WEBM_OPUS=7]="WEBM_OPUS",i[i.ALaw=8]="ALaw",i[i.FLAC=9]="FLAC",i[i.OPUS=10]="OPUS",i[i.AMR_WB=11]="AMR_WB",i[i.G722=12]="G722"})(e=t.AudioFormatTag||(t.AudioFormatTag={}));class r{static getDefaultInputFormat(){return n.getDefaultInputFormat()}static getWaveFormat(s,a,c,u){return new n(s,a,c,u)}static getWaveFormatPCM(s,a,c){return new n(s,a,c)}}t.AudioStreamFormat=r;class n extends r{constructor(s=16e3,a=16,c=1,u=e.PCM){super();let d=!0;switch(u){case e.PCM:this.formatTag=1;break;case e.ALaw:this.formatTag=6;break;case e.MuLaw:this.formatTag=7;break;default:d=!1}if(this.bitsPerSample=a,this.samplesPerSec=s,this.channels=c,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),d){this.privHeader=new ArrayBuffer(44);const h=new DataView(this.privHeader);this.setString(h,0,"RIFF"),h.setUint32(4,0,!0),this.setString(h,8,"WAVEfmt "),h.setUint32(16,16,!0),h.setUint16(20,this.formatTag,!0),h.setUint16(22,this.channels,!0),h.setUint32(24,this.samplesPerSec,!0),h.setUint32(28,this.avgBytesPerSec,!0),h.setUint16(32,this.channels*(this.bitsPerSample/8),!0),h.setUint16(34,this.bitsPerSample,!0),this.setString(h,36,"data"),h.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new n}static getAudioContext(s){const a=window.AudioContext||window.webkitAudioContext||!1;if(a)return s!==void 0&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new a({sampleRate:s}):new a;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(s,a,c){for(let u=0;u<c.length;u++)s.setUint8(a+u,c.charCodeAt(u))}}t.AudioStreamFormatImpl=n})(N_)),N_}var Jk;function kce(){return Jk||(Jk=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MicAudioSource=t.AudioWorkletSourceURLPropertyName=void 0;const e=Le(),r=Ve(),n=Mu();t.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class i{constructor(a,c,u,d){this.privRecorder=a,this.deviceId=c,this.privStreams={},this.privOutputChunkSize=i.AUDIOFORMAT.avgBytesPerSec/10,this.privId=u||(0,r.createNoDashGuid)(),this.privEvents=new r.EventSource,this.privMediaStream=d||null,this.privIsClosing=!1}get format(){return Promise.resolve(i.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new r.Deferred;try{this.createAudioContext()}catch(u){if(u instanceof Error){const d=u;this.privInitializeDeferral.reject(d.name+": "+d.message)}else this.privInitializeDeferral.reject(u);return this.privInitializeDeferral.promise}const a=window.navigator;let c=a.getUserMedia||a.webkitGetUserMedia||a.mozGetUserMedia||a.msGetUserMedia;if(a.mediaDevices&&(c=(u,d,h)=>{a.mediaDevices.getUserMedia(u).then(d).catch(h)}),c){const u=()=>{this.onEvent(new r.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new r.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):c({audio:this.deviceId?{deviceId:this.deviceId}:!0,video:!1},d=>{this.privMediaStream=d,this.onEvent(new r.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},d=>{const h=`Error occurred during microphone initialization: ${d}`;this.privInitializeDeferral.reject(h),this.onEvent(new r.AudioSourceErrorEvent(this.privId,h))})};this.privContext.state==="suspended"?this.privContext.resume().then(u).catch(d=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${d}`)}):u()}else{const u="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(u),this.onEvent(new r.AudioSourceErrorEvent(u,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(a){return this.onEvent(new r.AudioStreamNodeAttachingEvent(this.privId,a)),this.listen(a).then(c=>(this.onEvent(new r.AudioStreamNodeAttachedEvent(this.privId,a)),{detach:async()=>(c.readEnded(),delete this.privStreams[a],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,a)),this.turnOff()),id:()=>a,read:()=>c.read()}))}detach(a){a&&this.privStreams[a]&&(this.privStreams[a].close(),delete this.privStreams[a],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,a)))}async turnOff(){for(const a in this.privStreams)if(a){const c=this.privStreams[a];c&&c.close()}this.onEvent(new r.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(await this.privInitializeDeferral,this.privInitializeDeferral=null),await this.destroyAudioContext()}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(a=>({bitspersample:i.AUDIOFORMAT.bitsPerSample,channelcount:i.AUDIOFORMAT.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:a,samplerate:i.AUDIOFORMAT.samplesPerSec,type:e.type.Microphones}))}setProperty(a,c){if(a===t.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(c);else throw new Error("Property '"+a+"' is not supported on Microphone.")}getMicrophoneLabel(){const a="microphone";if(this.privMicrophoneLabel!==void 0)return Promise.resolve(this.privMicrophoneLabel);if(this.privMediaStream===void 0||!this.privMediaStream.active)return Promise.resolve(a);this.privMicrophoneLabel=a;const c=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(c===void 0)return Promise.resolve(this.privMicrophoneLabel);const u=new r.Deferred;return navigator.mediaDevices.enumerateDevices().then(d=>{for(const h of d)if(h.deviceId===c){this.privMicrophoneLabel=h.label;break}u.resolve(this.privMicrophoneLabel)},()=>u.resolve(this.privMicrophoneLabel)),u.promise}async listen(a){await this.turnOn();const c=new r.ChunkedArrayBufferStream(this.privOutputChunkSize,a);this.privStreams[a]=c;try{this.privRecorder.record(this.privContext,this.privMediaStream,c)}catch(d){throw this.onEvent(new r.AudioStreamNodeErrorEvent(this.privId,a,d)),d}return c}onEvent(a){this.privEvents.onEvent(a),r.Events.instance.onEvent(a)}createAudioContext(){this.privContext||(this.privContext=n.AudioStreamFormatImpl.getAudioContext(i.AUDIOFORMAT.samplesPerSec))}async destroyAudioContext(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let a=!1;"close"in this.privContext&&(a=!0),a?this.privIsClosing||(this.privIsClosing=!0,await this.privContext.close(),this.privContext=null,this.privIsClosing=!1):this.privContext!==null&&this.privContext.state==="running"&&await this.privContext.suspend()}}t.MicAudioSource=i,i.AUDIOFORMAT=n.AudioStreamFormat.getDefaultInputFormat()})(I_)),I_}var mp={},Zk;function Lce(){if(Zk)return mp;Zk=1,Object.defineProperty(mp,"__esModule",{value:!0}),mp.FileAudioSource=void 0;const t=Le(),e=Ve(),r=Mu();let n=class{constructor(s,a,c){this.privStreams={},this.privHeaderEnd=44,this.privId=c||(0,e.createNoDashGuid)(),this.privEvents=new e.EventSource,this.privSource=s,typeof window<"u"&&typeof Blob<"u"&&this.privSource instanceof Blob?this.privFilename=s.name:this.privFilename=a||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const s=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new e.AudioSourceErrorEvent(s,"")),Promise.reject(s)}this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}id(){return this.privId}async attach(s){this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,s));const a=await this.upload(s);return this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,s)),Promise.resolve({detach:async()=>{a.readEnded(),delete this.privStreams[s],this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,s)),await this.turnOff()},id:()=>s,read:()=>a.read()})}detach(s){s&&this.privStreams[s]&&(this.privStreams[s].close(),delete this.privStreams[s],this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,s)))}turnOff(){for(const s in this.privStreams)if(s){const a=this.privStreams[s];a&&!a.isClosed&&a.close()}return this.onEvent(new e.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(s=>Promise.resolve({bitspersample:s.bitsPerSample,channelcount:s.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:s.samplesPerSec,type:t.type.File}))}readHeader(){const a=this.privSource.slice(0,4296),c=new e.Deferred,u=d=>{const h=new DataView(d),p=E=>String.fromCharCode(h.getUint8(E),h.getUint8(E+1),h.getUint8(E+2),h.getUint8(E+3));if(p(0)!=="RIFF"){c.reject("Invalid WAV header in file, RIFF was not found");return}if(p(8)!=="WAVE"||p(12)!=="fmt "){c.reject("Invalid WAV header in file, WAVEfmt was not found");return}const g=h.getInt32(16,!0),y=h.getUint16(22,!0),S=h.getUint32(24,!0),x=h.getUint16(34,!0);let w=36+Math.max(g-16,0);for(;p(w)!=="data";w+=2)if(w>4288){c.reject("Invalid WAV header in file, data block was not found");return}this.privHeaderEnd=w+8,c.resolve(r.AudioStreamFormat.getWaveFormatPCM(S,x,y))};if(typeof window<"u"&&typeof Blob<"u"&&a instanceof Blob){const d=new FileReader;d.onload=h=>{const p=h.target.result;u(p)},d.readAsArrayBuffer(a)}else{const d=a;u(d.buffer.slice(d.byteOffset,d.byteOffset+d.byteLength))}return c.promise}async upload(s){const a=c=>{const u=`Error occurred while processing '${this.privFilename}'. ${c}`;throw this.onEvent(new e.AudioStreamNodeErrorEvent(this.privId,s,u)),new Error(u)};try{await this.turnOn();const c=await this.privAudioFormatPromise,u=new e.ChunkedArrayBufferStream(c.avgBytesPerSec/10,s);this.privStreams[s]=u;const d=this.privSource.slice(this.privHeaderEnd),h=p=>{u.isClosed||(u.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()}),u.close())};if(typeof window<"u"&&typeof Blob<"u"&&d instanceof Blob){const p=new FileReader;p.onerror=g=>a(g.toString()),p.onload=g=>{const y=g.target.result;h(y)},p.readAsArrayBuffer(d)}else{const p=d;h(p.buffer.slice(p.byteOffset,p.byteOffset+p.byteLength))}return u}catch(c){a(c)}}onEvent(s){this.privEvents.onEvent(s),e.Events.instance.onEvent(s)}};return mp.FileAudioSource=n,mp}var vp={},e6;function zce(){if(e6)return vp;e6=1,Object.defineProperty(vp,"__esModule",{value:!0}),vp.PcmRecorder=void 0;const t=Ve();class e{constructor(n){this.privStopInputOnRelease=n}record(n,i,s){const c=new t.RiffPcmEncoder(n.sampleRate,16e3),u=n.createMediaStreamSource(i),d=()=>{const p=(()=>{let g=0;try{return n.createScriptProcessor(g,1,1)}catch{g=2048;let S=n.sampleRate;for(;g<16384&&S>=32e3;)g<<=1,S>>=1;return n.createScriptProcessor(g,1,1)}})();p.onaudioprocess=g=>{const y=g.inputBuffer.getChannelData(0);if(s&&!s.isClosed){const S=c.encode(y);S&&s.writeStreamChunk({buffer:S,isEnd:!1,timeReceived:Date.now()})}},u.connect(p),p.connect(n.destination),this.privMediaResources={scriptProcessorNode:p,source:u,stream:i}},h=!!this.privSpeechProcessorScript&&this.privSpeechProcessorScript.toLowerCase()==="ignore";if(n.audioWorklet&&!h){if(!this.privSpeechProcessorScript){const p=`class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`,g=new Blob([p],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(g)}n.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{const p=new AudioWorkletNode(n,"speech-processor");p.port.onmessage=g=>{const y=g.data;if(s&&!s.isClosed){const S=c.encode(y);S&&s.writeStreamChunk({buffer:S,isEnd:!1,timeReceived:Date.now()})}},u.connect(p),p.connect(n.destination),this.privMediaResources={scriptProcessorNode:p,source:u,stream:i}}).catch(()=>{d()})}else try{d()}catch(p){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${p}`)}}releaseMediaResources(n){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(n.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(i=>i.stop()),this.privMediaResources.source=null))}setWorkletUrl(n){this.privSpeechProcessorScript=n}}return vp.PcmRecorder=e,vp}var gp={},ai={},t6;function RV(){if(t6)return ai;t6=1;var t=ai&&ai.__createBinding||(Object.create?(function(g,y,S,x){x===void 0&&(x=S),Object.defineProperty(g,x,{enumerable:!0,get:function(){return y[S]}})}):(function(g,y,S,x){x===void 0&&(x=S),g[x]=y[S]})),e=ai&&ai.__setModuleDefault||(Object.create?(function(g,y){Object.defineProperty(g,"default",{enumerable:!0,value:y})}):function(g,y){g.default=y}),r=ai&&ai.__importStar||function(g){if(g&&g.__esModule)return g;var y={};if(g!=null)for(var S in g)S!=="default"&&Object.prototype.hasOwnProperty.call(g,S)&&t(y,g,S);return e(y,g),y},n=ai&&ai.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(ai,"__esModule",{value:!0}),ai.WebsocketMessageAdapter=void 0;const i=r(eu),s=r(eu),a=n(eu),c=n(eu),u=n(eu),d=Si(),h=Ve();let p=class qT{constructor(y,S,x,w,E,R){if(!y)throw new h.ArgumentNullError("uri");if(!x)throw new h.ArgumentNullError("messageFormatter");this.proxyInfo=w,this.privConnectionEvents=new h.EventSource,this.privConnectionId=S,this.privMessageFormatter=x,this.privConnectionState=h.ConnectionState.None,this.privUri=y,this.privHeaders=E,this.privEnableCompression=R,this.privHeaders[d.HeaderNames.ConnectionId]=this.privConnectionId,this.privHeaders.connectionId=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===h.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new h.Deferred,this.privCertificateValidatedDeferral=new h.Deferred,this.privConnectionState=h.ConnectionState.Connecting;try{if(typeof WebSocket<"u"&&!qT.forceNpmWebSocket)this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);else{let S=new URL(this.privUri).protocol;S?.toLocaleLowerCase()==="wss:"?S="https:":S?.toLocaleLowerCase()==="ws:"&&(S="http:");const x={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression,followRedirects:S.toLocaleLowerCase()==="https:"};this.privCertificateValidatedDeferral.resolve(),x.agent=this.getAgent(),x.agent.protocol=S,this.privWebsocketClient=new u.default(this.privUri,x),this.privWebsocketClient.on("redirect",w=>{const E=new h.ConnectionRedirectEvent(this.privConnectionId,w,this.privUri,`Getting redirect URL from endpoint ${this.privUri} with redirect URL '${w}'`);h.Events.instance.onEvent(E)})}this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new h.Queue,this.privDisconnectDeferral=new h.Deferred,this.privSendMessageQueue=new h.Queue,this.processSendQueue().catch(y=>{h.Events.instance.onEvent(new h.BackgroundEvent(y))})}catch(y){return this.privConnectionEstablishDeferral.resolve(new h.ConnectionOpenResponse(500,y)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new h.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=h.ConnectionState.Connected,this.onEvent(new h.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new h.ConnectionOpenResponse(200,""))},y=>{this.privConnectionEstablishDeferral.reject(y)})},this.privWebsocketClient.onerror=y=>{this.onEvent(new h.ConnectionErrorEvent(this.privConnectionId,y.message,y.type)),this.privLastErrorReceived=y.message},this.privWebsocketClient.onclose=y=>{this.privConnectionState===h.ConnectionState.Connecting?(this.privConnectionState=h.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new h.ConnectionOpenResponse(y.code,y.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=h.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new h.ConnectionClosedEvent(this.privConnectionId,y.code,y.reason))),this.onClose(y.code,y.reason).catch(S=>{h.Events.instance.onEvent(new h.BackgroundEvent(S))})},this.privWebsocketClient.onmessage=y=>{const S=new Date().toISOString();if(this.privConnectionState===h.ConnectionState.Connected){const x=new h.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(x.promise),y.data instanceof ArrayBuffer){const w=new h.RawWebsocketMessage(h.MessageType.Binary,y.data);this.privMessageFormatter.toConnectionMessage(w).then(E=>{this.onEvent(new h.ConnectionMessageReceivedEvent(this.privConnectionId,S,E)),x.resolve(E)},E=>{x.reject(`Invalid binary message format. Error: ${E}`)})}else{const w=new h.RawWebsocketMessage(h.MessageType.Text,y.data);this.privMessageFormatter.toConnectionMessage(w).then(E=>{this.onEvent(new h.ConnectionMessageReceivedEvent(this.privConnectionId,S,E)),x.resolve(E)},E=>{x.reject(`Invalid text message format. Error: ${E}`)})}}},this.privConnectionEstablishDeferral.promise}send(y){if(this.privConnectionState!==h.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${h.ConnectionState[this.privConnectionState]} state`);const S=new h.Deferred,x=new h.Deferred;return this.privSendMessageQueue.enqueueFromPromise(x.promise),this.privMessageFormatter.fromConnectionMessage(y).then(w=>{x.resolve({Message:y,RawWebsocketMessage:w,sendStatusDeferral:S})},w=>{x.reject(`Error formatting the message. ${w}`)}),S.promise}read(){return this.privConnectionState!==h.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(y){if(this.privWebsocketClient)this.privConnectionState!==h.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,y||"Normal closure by client");else return Promise.resolve();return this.privDisconnectDeferral.promise}get events(){return this.privConnectionEvents}sendRawMessage(y){try{if(!y)return Promise.resolve();if(this.onEvent(new h.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),y.Message)),this.isWebsocketOpen)this.privWebsocketClient.send(y.RawWebsocketMessage.payload);else return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+y.Message.id+" "+new Error().stack);return Promise.resolve()}catch(S){return Promise.reject(`websocket send error: ${S}`)}}async onClose(y,S){const x=`Connection closed. ${y}: ${S}`;this.privConnectionState=h.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),await this.privReceivingMessageQueue.drainAndDispose(()=>{},x),await this.privSendMessageQueue.drainAndDispose(w=>{w.sendStatusDeferral.reject(x)},x)}async processSendQueue(){for(;;){const S=await this.privSendMessageQueue.dequeue();if(!S)return;try{await this.sendRawMessage(S),S.sendStatusDeferral.resolve()}catch(x){S.sendStatusDeferral.reject(x)}}}onEvent(y){this.privConnectionEvents.onEvent(y),h.Events.instance.onEvent(y)}getAgent(){const y=new a.default.Agent(this.createConnection);return this.proxyInfo!==void 0&&this.proxyInfo.HostName!==void 0&&this.proxyInfo.Port>0&&(y.proxyInfo=this.proxyInfo),y}static GetProxyAgent(y){const S={host:y.HostName,port:y.Port};return y.UserName?S.headers={"Proxy-Authentication":"Basic "+Buffer.from(`${y.UserName}:${y.Password===void 0?"":y.Password}`).toString("base64")}:S.headers={},S.headers.requestOCSP="true",new c.default(S)}createConnection(y,S){let x;if(S={...S,requestOCSP:!0,servername:S.host},this.proxyInfo){const E=qT.GetProxyAgent(this.proxyInfo);x=new Promise((R,T)=>{E.callback(y,S,(M,D)=>{M?T(M):R(D)})})}else S.secureEndpoint?x=Promise.resolve(s.connect(S)):x=Promise.resolve(i.connect(S));return x}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}};return ai.WebsocketMessageAdapter=p,p.forceNpmWebSocket=!1,ai}var r6;function Uce(){if(r6)return gp;r6=1,Object.defineProperty(gp,"__esModule",{value:!0}),gp.WebsocketConnection=void 0;const t=Ve(),e=RV();let r=class{constructor(i,s,a,c,u,d=!1,h){if(this.privIsDisposed=!1,!i)throw new t.ArgumentNullError("uri");if(!c)throw new t.ArgumentNullError("messageFormatter");this.privMessageFormatter=c;let p="",g=0;if(s){for(const y in s)if(y){p+=g===0&&i.indexOf("?")===-1?"?":"&";const S=encodeURIComponent(y);p+=S;let x=s[y];x&&(x=encodeURIComponent(x),p+=`=${x}`),g++}}if(a){for(const y in a)if(y){p+=g===0&&i.indexOf("?")===-1?"?":"&";const S=encodeURIComponent(a[y]);p+=`${y}=${S}`,g++}}this.privUri=i+p,this.privId=h||(0,t.createNoDashGuid)(),this.privConnectionMessageAdapter=new e.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,u,a,d)}async dispose(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&await this.privConnectionMessageAdapter.close()}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(i){return this.privConnectionMessageAdapter.send(i)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}};return gp.WebsocketConnection=r,gp}var yp={},n6;function Bce(){if(n6)return yp;n6=1,Object.defineProperty(yp,"__esModule",{value:!0}),yp.ReplayableAudioNode=void 0;let t=class{constructor(n,i){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=n,this.privBytesPerSecond=i}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&this.privBuffers.length!==0){const n=this.privReplayOffset-this.privBufferStartOffset;let i=Math.round(n*this.privBytesPerSecond*1e-7);i%2!==0&&i++;let s=0;for(;s<this.privBuffers.length&&i>=this.privBuffers[s].chunk.buffer.byteLength;)i-=this.privBuffers[s++].chunk.buffer.byteLength;if(s<this.privBuffers.length){const a=this.privBuffers[s].chunk.buffer.slice(i);return this.privReplayOffset+=a.byteLength/this.privBytesPerSecond*1e7,s===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:a,isEnd:!1,timeReceived:this.privBuffers[s].chunk.timeReceived})}}return this.privAudioNode.read().then(n=>(n&&n.buffer&&this.privBuffers&&(this.privBuffers.push(new e(n,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=n.buffer.byteLength),n))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&this.privBuffers.length!==0&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(n){if(this.privBuffers===void 0||this.privBuffers.length===0)return;this.privLastShrinkOffset=n;const i=n-this.privBufferStartOffset;let s=Math.round(i*this.privBytesPerSecond*1e-7),a=0;for(;a<this.privBuffers.length&&s>=this.privBuffers[a].chunk.buffer.byteLength;)s-=this.privBuffers[a++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(n-s/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(a)}findTimeAtOffset(n){if(n<this.privBufferStartOffset||this.privBuffers===void 0)return 0;for(const i of this.privBuffers){const s=i.byteOffset/this.privBytesPerSecond*1e7,a=s+i.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(n>=s&&n<=a)return i.chunk.timeReceived}return 0}};yp.ReplayableAudioNode=t;class e{constructor(n,i,s){this.chunk=n,this.serial=i,this.byteOffset=s}}return yp}var bp={},O_={},Ba={},ds={},i6;function PV(){if(i6)return ds;i6=1;var t=ds&&ds.__createBinding||(Object.create?(function(a,c,u,d){d===void 0&&(d=u),Object.defineProperty(a,d,{enumerable:!0,get:function(){return c[u]}})}):(function(a,c,u,d){d===void 0&&(d=u),a[d]=c[u]})),e=ds&&ds.__setModuleDefault||(Object.create?(function(a,c){Object.defineProperty(a,"default",{enumerable:!0,value:c})}):function(a,c){a.default=c}),r=ds&&ds.__importStar||function(a){if(a&&a.__esModule)return a;var c={};if(a!=null)for(var u in a)u!=="default"&&Object.prototype.hasOwnProperty.call(a,u)&&t(c,a,u);return e(c,a),c};Object.defineProperty(ds,"__esModule",{value:!0}),ds.AudioFileWriter=void 0;const n=r(eu),i=tt();let s=class{constructor(c){i.Contracts.throwIfNullOrUndefined(n.openSync,`
File System access not available, please use Push or PullAudioOutputStream`),this.privFd=n.openSync(c,"w")}set format(c){i.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=c;let u=0;this.privAudioFormat.hasHeader&&(u=this.privAudioFormat.header.byteLength),this.privFd!==void 0&&(this.privWriteStream=n.createWriteStream("",{fd:this.privFd,start:u,autoClose:!1}))}write(c){i.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),this.privWriteStream!==void 0&&this.privWriteStream.write(new Uint8Array(c.slice(0)))}close(){this.privFd!==void 0&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),n.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),n.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}};return ds.AudioFileWriter=s,ds}var oi={},s6;function IV(){if(s6)return oi;s6=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.PullAudioInputStreamImpl=oi.PullAudioInputStream=oi.PushAudioInputStreamImpl=oi.PushAudioInputStream=oi.AudioInputStream=void 0;const t=Le(),e=Ve(),r=ju(),n=Ce(),i=Mu();let s=class{constructor(){}static createPushStream(p){return a.create(p)}static createPullStream(p,g){return u.create(p,g)}};oi.AudioInputStream=s;class a extends s{static create(p){return new c(p)}}oi.PushAudioInputStream=a;class c extends a{constructor(p){super(),p===void 0?this.privFormat=i.AudioStreamFormatImpl.getDefaultInputFormat():this.privFormat=p,this.privEvents=new e.EventSource,this.privId=(0,r.createNoDashGuid)(),this.privStream=new e.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(p){this.privStream.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}async attach(p){this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,p)),await this.turnOn();const g=this.privStream;return this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,p)),{detach:async()=>(this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,p)),this.turnOff()),id:()=>p,read:()=>g.read()}}detach(p){this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,p))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:t.type.Stream})}onEvent(p){this.privEvents.onEvent(p),e.Events.instance.onEvent(p)}toBuffer(p){const g=Buffer.alloc(p.byteLength),y=new Uint8Array(p);for(let S=0;S<g.length;++S)g[S]=y[S];return g}}oi.PushAudioInputStreamImpl=c;class u extends s{constructor(){super()}static create(p,g){return new d(p,g)}}oi.PullAudioInputStream=u;class d extends u{constructor(p,g){super(),g===void 0?this.privFormat=n.AudioStreamFormat.getDefaultInputFormat():this.privFormat=g,this.privEvents=new e.EventSource,this.privId=(0,r.createNoDashGuid)(),this.privCallback=p,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}async attach(p){return this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,p)),await this.turnOn(),this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,p)),{detach:()=>(this.privCallback.close(),this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,p)),this.turnOff()),id:()=>p,read:()=>{let g=0,y;for(;g<this.privBufferSize;){const S=new ArrayBuffer(this.privBufferSize-g),x=this.privCallback.read(S);if(y===void 0?y=S:new Int8Array(y).set(new Int8Array(S),g),x===0)break;g+=x}return Promise.resolve({buffer:y.slice(0,g),isEnd:this.privIsClosed||g===0,timeReceived:Date.now()})}}}detach(p){this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,p))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:t.type.Stream})}onEvent(p){this.privEvents.onEvent(p),e.Events.instance.onEvent(p)}}return oi.PullAudioInputStreamImpl=d,oi}var ci={},Sp={},j_={},a6;function NV(){return a6||(a6=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisOutputFormat=void 0,(function(e){e[e.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",e[e.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",e[e.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",e[e.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",e[e.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",e[e.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",e[e.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",e[e.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",e[e.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",e[e.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",e[e.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",e[e.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",e[e.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",e[e.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",e[e.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",e[e.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",e[e.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",e[e.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",e[e.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",e[e.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",e[e.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",e[e.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",e[e.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",e[e.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",e[e.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",e[e.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",e[e.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",e[e.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",e[e.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",e[e.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",e[e.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",e[e.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",e[e.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",e[e.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",e[e.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",e[e.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",e[e.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm",e[e.AmrWb16000Hz=37]="AmrWb16000Hz",e[e.G72216Khz64Kbps=38]="G72216Khz64Kbps"})(t.SpeechSynthesisOutputFormat||(t.SpeechSynthesisOutputFormat={}))})(j_)),j_}var o6;function Fg(){if(o6)return Sp;o6=1,Object.defineProperty(Sp,"__esModule",{value:!0}),Sp.AudioOutputFormatImpl=void 0;const t=NV(),e=Mu();class r extends e.AudioStreamFormatImpl{constructor(i,s,a,c,u,d,h,p,g){super(a,d,s,i),this.formatTag=i,this.avgBytesPerSec=c,this.blockAlign=u,this.priAudioFormatString=h,this.priRequestAudioFormatString=p,this.priHasHeader=g}static fromSpeechSynthesisOutputFormat(i){return i===void 0?r.getDefaultOutputFormat():r.fromSpeechSynthesisOutputFormatString(r.SpeechSynthesisOutputFormatToString[i])}static fromSpeechSynthesisOutputFormatString(i){switch(i){case"raw-8khz-8bit-mono-mulaw":return new r(e.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,i,i,!1);case"riff-16khz-16kbps-mono-siren":return new r(e.AudioFormatTag.Siren,1,16e3,2e3,40,0,i,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new r(e.AudioFormatTag.Siren,1,16e3,2e3,40,0,i,i,!1);case"audio-16khz-32kbitrate-mono-mp3":return new r(e.AudioFormatTag.MP3,1,16e3,4096,2,16,i,i,!1);case"audio-16khz-128kbitrate-mono-mp3":return new r(e.AudioFormatTag.MP3,1,16e3,16384,2,16,i,i,!1);case"audio-16khz-64kbitrate-mono-mp3":return new r(e.AudioFormatTag.MP3,1,16e3,8192,2,16,i,i,!1);case"audio-24khz-48kbitrate-mono-mp3":return new r(e.AudioFormatTag.MP3,1,24e3,6144,2,16,i,i,!1);case"audio-24khz-96kbitrate-mono-mp3":return new r(e.AudioFormatTag.MP3,1,24e3,12288,2,16,i,i,!1);case"audio-24khz-160kbitrate-mono-mp3":return new r(e.AudioFormatTag.MP3,1,24e3,20480,2,16,i,i,!1);case"raw-16khz-16bit-mono-truesilk":return new r(e.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,i,i,!1);case"riff-8khz-16bit-mono-pcm":return new r(e.AudioFormatTag.PCM,1,8e3,16e3,2,16,i,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new r(e.AudioFormatTag.PCM,1,24e3,48e3,2,16,i,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new r(e.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,i,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new r(e.AudioFormatTag.PCM,1,16e3,32e3,2,16,i,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new r(e.AudioFormatTag.PCM,1,24e3,48e3,2,16,i,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new r(e.AudioFormatTag.PCM,1,8e3,16e3,2,16,i,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new r(e.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,i,i,!1);case"ogg-24khz-16bit-mono-opus":return new r(e.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,i,i,!1);case"raw-48khz-16bit-mono-pcm":return new r(e.AudioFormatTag.PCM,1,48e3,96e3,2,16,i,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new r(e.AudioFormatTag.PCM,1,48e3,96e3,2,16,i,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new r(e.AudioFormatTag.MP3,1,48e3,12288,2,16,i,i,!1);case"audio-48khz-192kbitrate-mono-mp3":return new r(e.AudioFormatTag.MP3,1,48e3,24576,2,16,i,i,!1);case"ogg-48khz-16bit-mono-opus":return new r(e.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,i,i,!1);case"webm-16khz-16bit-mono-opus":return new r(e.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,i,i,!1);case"webm-24khz-16bit-mono-opus":return new r(e.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,i,i,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new r(e.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,i,i,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new r(e.AudioFormatTag.OPUS,1,16e3,4e3,2,16,i,i,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new r(e.AudioFormatTag.OPUS,1,24e3,6e3,2,16,i,i,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new r(e.AudioFormatTag.OPUS,1,24e3,3e3,2,16,i,i,!1);case"audio-24khz-16bit-mono-flac":return new r(e.AudioFormatTag.FLAC,1,24e3,24e3,2,16,i,i,!1);case"audio-48khz-16bit-mono-flac":return new r(e.AudioFormatTag.FLAC,1,48e3,3e4,2,16,i,i,!1);case"raw-24khz-16bit-mono-truesilk":return new r(e.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,i,i,!1);case"raw-8khz-8bit-mono-alaw":return new r(e.AudioFormatTag.ALaw,1,8e3,8e3,1,8,i,i,!1);case"riff-8khz-8bit-mono-alaw":return new r(e.AudioFormatTag.ALaw,1,8e3,8e3,1,8,i,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new r(e.AudioFormatTag.PCM,1,22050,44100,2,16,i,i,!1);case"riff-22050hz-16bit-mono-pcm":return new r(e.AudioFormatTag.PCM,1,22050,44100,2,16,i,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new r(e.AudioFormatTag.PCM,1,44100,88200,2,16,i,i,!1);case"riff-44100hz-16bit-mono-pcm":return new r(e.AudioFormatTag.PCM,1,44100,88200,2,16,i,"raw-44100hz-16bit-mono-pcm",!0);case"amr-wb-16000h":return new r(e.AudioFormatTag.AMR_WB,1,16e3,3052,2,16,i,i,!1);case"g722-16khz-64kbps":return new r(e.AudioFormatTag.G722,1,16e3,8e3,2,16,i,i,!1);case"riff-16khz-16bit-mono-pcm":default:return new r(e.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return r.fromSpeechSynthesisOutputFormatString(typeof window<"u"?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(i){if(this.priHasHeader){const s=new DataView(this.privHeader);s.setUint32(4,i+this.privHeader.byteLength-8,!0),s.setUint32(40,i,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(i){if(!this.hasHeader)return i;this.updateHeader(i.byteLength);const s=new Uint8Array(i.byteLength+this.header.byteLength);return s.set(new Uint8Array(this.header),0),s.set(new Uint8Array(i),this.header.byteLength),s.buffer}}return Sp.AudioOutputFormatImpl=r,r.SpeechSynthesisOutputFormatToString={[t.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[t.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[t.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[t.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[t.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[t.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[t.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[t.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[t.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[t.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[t.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[t.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[t.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[t.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[t.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[t.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[t.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[t.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[t.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[t.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[t.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[t.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[t.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[t.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[t.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[t.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[t.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[t.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[t.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[t.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[t.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[t.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[t.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[t.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[t.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[t.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[t.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm",[t.SpeechSynthesisOutputFormat.AmrWb16000Hz]:"amr-wb-16000hz",[t.SpeechSynthesisOutputFormat.G72216Khz64Kbps]:"g722-16khz-64kbps"},Sp}var c6;function xh(){if(c6)return ci;c6=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.PushAudioOutputStreamImpl=ci.PushAudioOutputStream=ci.PullAudioOutputStreamImpl=ci.PullAudioOutputStream=ci.AudioOutputStream=void 0;const t=Ve(),e=tt(),r=Fg();let n=class{constructor(){}static createPullStream(){return i.create()}};ci.AudioOutputStream=n;class i extends n{static create(){return new s}}ci.PullAudioOutputStream=i;class s extends i{constructor(){super(),this.privId=(0,t.createNoDashGuid)(),this.privStream=new t.Stream}set format(d){d==null&&(this.privFormat=r.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=d}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}async read(d){const h=new Int8Array(d);let p=0;if(this.privLastChunkView!==void 0){if(this.privLastChunkView.length>d.byteLength)return h.set(this.privLastChunkView.slice(0,d.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(d.byteLength),Promise.resolve(d.byteLength);h.set(this.privLastChunkView),p=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;p<d.byteLength&&!this.privStream.isReadEnded;){const g=await this.privStream.read();if(g!==void 0&&!g.isEnd){let y;g.buffer.byteLength>d.byteLength-p?(y=g.buffer.slice(0,d.byteLength-p),this.privLastChunkView=new Int8Array(g.buffer.slice(d.byteLength-p))):y=g.buffer,h.set(new Int8Array(y),p),p+=y.byteLength}else this.privStream.readEnded()}return p}write(d){e.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}ci.PullAudioOutputStreamImpl=s;class a extends n{constructor(){super()}static create(d){return new c(d)}}ci.PushAudioOutputStream=a;class c extends a{constructor(d){super(),this.privId=(0,t.createNoDashGuid)(),this.privCallback=d}set format(d){}write(d){this.privCallback.write&&this.privCallback.write(d)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}return ci.PushAudioOutputStreamImpl=c,ci}var l6;function qce(){if(l6)return Ba;l6=1,Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.AudioOutputConfigImpl=Ba.AudioConfigImpl=Ba.AudioConfig=void 0;const t=$n(),e=tt(),r=Ce(),n=PV(),i=IV(),s=xh();let a=class OV{static fromDefaultMicrophoneInput(){const h=new t.PcmRecorder(!0);return new c(new t.MicAudioSource(h))}static fromMicrophoneInput(h){const p=new t.PcmRecorder(!0);return new c(new t.MicAudioSource(p,h))}static fromWavFileInput(h,p="unnamedBuffer.wav"){return new c(new t.FileAudioSource(h,p))}static fromStreamInput(h){if(h instanceof r.PullAudioInputStreamCallback)return new c(new i.PullAudioInputStreamImpl(h));if(h instanceof r.AudioInputStream)return new c(h);if(typeof MediaStream<"u"&&h instanceof MediaStream){const p=new t.PcmRecorder(!1);return new c(new t.MicAudioSource(p,null,null,h))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new u(new r.SpeakerAudioDestination)}static fromSpeakerOutput(h){if(h===void 0)return OV.fromDefaultSpeakerOutput();if(h instanceof r.SpeakerAudioDestination)return new u(h);throw new Error("Not Supported Type")}static fromAudioFileOutput(h){return new u(new n.AudioFileWriter(h))}static fromStreamOutput(h){if(h instanceof r.PushAudioOutputStreamCallback)return new u(new s.PushAudioOutputStreamImpl(h));if(h instanceof r.PushAudioOutputStream)return new u(h);if(h instanceof r.PullAudioOutputStream)return new u(h);throw new Error("Not Supported Type")}};Ba.AudioConfig=a;class c extends a{constructor(h){super(),this.privSource=h}get format(){return this.privSource.format}close(h,p){this.privSource.turnOff().then(()=>{h&&h()},g=>{p&&p(g)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(h){return this.privSource.attach(h)}detach(h){return this.privSource.detach(h)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(h,p){if(e.Contracts.throwIfNull(p,"value"),this.privSource.setProperty!==void 0)this.privSource.setProperty(h,p);else throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(h,p){if(this.privSource.getProperty!==void 0)return this.privSource.getProperty(h,p);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}Ba.AudioConfigImpl=c;class u extends a{constructor(h){super(),this.privDestination=h}set format(h){this.privDestination.format=h}write(h){this.privDestination.write(h)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}return Ba.AudioOutputConfigImpl=u,Ba}var M_={},u6;function Vce(){return u6||(u6=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationReason=void 0,(function(e){e[e.Error=0]="Error",e[e.EndOfStream=1]="EndOfStream"})(t.CancellationReason||(t.CancellationReason={}))})(M_)),M_}var Cp={},d6;function Fce(){if(d6)return Cp;d6=1,Object.defineProperty(Cp,"__esModule",{value:!0}),Cp.PullAudioInputStreamCallback=void 0;let t=class{};return Cp.PullAudioInputStreamCallback=t,Cp}var xp={},h6;function Hce(){if(h6)return xp;h6=1,Object.defineProperty(xp,"__esModule",{value:!0}),xp.PushAudioOutputStreamCallback=void 0;let t=class{};return xp.PushAudioOutputStreamCallback=t,xp}var wp={},f6;function Wce(){if(f6)return wp;f6=1,Object.defineProperty(wp,"__esModule",{value:!0}),wp.KeywordRecognitionModel=void 0;const t=tt();let e=class{constructor(){this.privDisposed=!1}static fromFile(n){throw t.Contracts.throwIfFileDoesNotExist(n,"fileName"),new Error("Not yet implemented.")}static fromStream(n){throw t.Contracts.throwIfNull(n,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}};return wp.KeywordRecognitionModel=e,wp}var _p={},p6;function Kce(){if(p6)return _p;p6=1,Object.defineProperty(_p,"__esModule",{value:!0}),_p.SessionEventArgs=void 0;let t=class{constructor(r){this.privSessionId=r}get sessionId(){return this.privSessionId}};return _p.SessionEventArgs=t,_p}var Ep={},m6;function Gce(){if(m6)return Ep;m6=1,Object.defineProperty(Ep,"__esModule",{value:!0}),Ep.RecognitionEventArgs=void 0;const t=Ce();let e=class extends t.SessionEventArgs{constructor(n,i){super(i),this.privOffset=n}get offset(){return this.privOffset}};return Ep.RecognitionEventArgs=e,Ep}var D_={},v6;function $ce(){return v6||(v6=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.OutputFormat=void 0,(function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"})(t.OutputFormat||(t.OutputFormat={}))})(D_)),D_}var Ap={},g6;function Yce(){if(g6)return Ap;g6=1,Object.defineProperty(Ap,"__esModule",{value:!0}),Ap.RecognitionResult=void 0;let t=class{constructor(r,n,i,s,a,c,u,d,h,p){this.privResultId=r,this.privReason=n,this.privText=i,this.privDuration=s,this.privOffset=a,this.privLanguage=c,this.privLanguageDetectionConfidence=u,this.privErrorDetails=d,this.privJson=h,this.privProperties=p}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}};return Ap.RecognitionResult=t,Ap}var Tp={},y6;function Xce(){if(y6)return Tp;y6=1,Object.defineProperty(Tp,"__esModule",{value:!0}),Tp.SpeechRecognitionResult=void 0;const t=Ce();let e=class extends t.RecognitionResult{constructor(n,i,s,a,c,u,d,h,p,g,y){super(n,i,s,a,c,u,d,p,g,y),this.privSpeakerId=h}get speakerId(){return this.privSpeakerId}};return Tp.SpeechRecognitionResult=e,Tp}var qa={},b6;function Qce(){if(b6)return qa;b6=1,Object.defineProperty(qa,"__esModule",{value:!0}),qa.MeetingTranscriptionEventArgs=qa.ConversationTranscriptionEventArgs=qa.SpeechRecognitionEventArgs=void 0;const t=Ce();let e=class extends t.RecognitionEventArgs{constructor(s,a,c){super(a,c),this.privResult=s}get result(){return this.privResult}};qa.SpeechRecognitionEventArgs=e;class r extends t.RecognitionEventArgs{constructor(s,a,c){super(a,c),this.privResult=s}get result(){return this.privResult}}qa.ConversationTranscriptionEventArgs=r;class n extends e{}return qa.MeetingTranscriptionEventArgs=n,qa}var Rp={},Pp={},S6;function Hg(){if(S6)return Pp;S6=1,Object.defineProperty(Pp,"__esModule",{value:!0}),Pp.CancellationEventArgsBase=void 0;const t=Ce();let e=class extends t.RecognitionEventArgs{constructor(n,i,s,a,c){super(a,c),this.privReason=n,this.privErrorDetails=i,this.privErrorCode=s}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return Pp.CancellationEventArgsBase=e,Pp}var C6;function Jce(){if(C6)return Rp;C6=1,Object.defineProperty(Rp,"__esModule",{value:!0}),Rp.SpeechRecognitionCanceledEventArgs=void 0;const t=Hg();let e=class extends t.CancellationEventArgsBase{};return Rp.SpeechRecognitionCanceledEventArgs=e,Rp}var Ip={},x6;function Zce(){if(x6)return Ip;x6=1,Object.defineProperty(Ip,"__esModule",{value:!0}),Ip.TranslationRecognitionEventArgs=void 0;const t=Ce();let e=class extends t.RecognitionEventArgs{constructor(n,i,s){super(i,s),this.privResult=n}get result(){return this.privResult}};return Ip.TranslationRecognitionEventArgs=e,Ip}var Np={},w6;function ele(){if(w6)return Np;w6=1,Object.defineProperty(Np,"__esModule",{value:!0}),Np.TranslationSynthesisEventArgs=void 0;const t=Ce();let e=class extends t.SessionEventArgs{constructor(n,i){super(i),this.privResult=n}get result(){return this.privResult}};return Np.TranslationSynthesisEventArgs=e,Np}var Op={},_6;function MV(){if(_6)return Op;_6=1,Object.defineProperty(Op,"__esModule",{value:!0}),Op.TranslationRecognitionResult=void 0;const t=Ce();let e=class jV extends t.SpeechRecognitionResult{constructor(n,i,s,a,c,u,d,h,p,g,y){super(i,s,a,c,u,d,h,void 0,p,g,y),this.privTranslations=n}static fromSpeechRecognitionResult(n){return new jV(void 0,n.resultId,n.reason,n.text,n.duration,n.offset,n.language,n.languageDetectionConfidence,n.errorDetails,n.json,n.properties)}get translations(){return this.privTranslations}};return Op.TranslationRecognitionResult=e,Op}var jp={},E6;function tle(){if(E6)return jp;E6=1,Object.defineProperty(jp,"__esModule",{value:!0}),jp.TranslationSynthesisResult=void 0;let t=class{constructor(r,n){this.privReason=r,this.privAudio=n}get audio(){return this.privAudio}get reason(){return this.privReason}};return jp.TranslationSynthesisResult=t,jp}var k_={},A6;function rle(){return A6||(A6=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ResultReason=void 0,(function(e){e[e.NoMatch=0]="NoMatch",e[e.Canceled=1]="Canceled",e[e.RecognizingSpeech=2]="RecognizingSpeech",e[e.RecognizedSpeech=3]="RecognizedSpeech",e[e.RecognizedKeyword=4]="RecognizedKeyword",e[e.TranslatingSpeech=5]="TranslatingSpeech",e[e.TranslatedSpeech=6]="TranslatedSpeech",e[e.SynthesizingAudio=7]="SynthesizingAudio",e[e.SynthesizingAudioCompleted=8]="SynthesizingAudioCompleted",e[e.SynthesizingAudioStarted=9]="SynthesizingAudioStarted",e[e.VoicesListRetrieved=10]="VoicesListRetrieved",e[e.TranslatingParticipantSpeech=11]="TranslatingParticipantSpeech",e[e.TranslatedParticipantSpeech=12]="TranslatedParticipantSpeech",e[e.TranslatedInstantMessage=13]="TranslatedInstantMessage",e[e.TranslatedParticipantInstantMessage=14]="TranslatedParticipantInstantMessage"})(t.ResultReason||(t.ResultReason={}))})(k_)),k_}var Il={},T6;function nle(){if(T6)return Il;T6=1,Object.defineProperty(Il,"__esModule",{value:!0}),Il.SpeechConfigImpl=Il.SpeechConfig=void 0;const t=Le(),e=tt(),r=Ce();let n=class{constructor(){}static fromSubscription(a,c){e.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),e.Contracts.throwIfNullOrWhitespace(c,"region");const u=new i;return u.setProperty(r.PropertyId.SpeechServiceConnection_Region,c),u.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),u}static fromEndpoint(a,c){e.Contracts.throwIfNull(a,"endpoint");const u=typeof c=="string"&&c.trim().length>0,d=typeof c=="object"&&c!==null&&typeof c.getToken=="function",h=typeof c=="object"&&c!==null&&typeof c.key=="string";if(c!==void 0&&!u&&!d&&!h)throw new Error("Invalid 'auth' parameter: expected a non-empty API key string, a TokenCredential, or a KeyCredential.");let p;return typeof c=="string"?(p=new i,p.setProperty(r.PropertyId.SpeechServiceConnection_Key,c)):typeof c=="object"&&typeof c.getToken=="function"?p=new i(c):typeof c=="object"&&typeof c.key=="string"?(p=new i,p.setProperty(r.PropertyId.SpeechServiceConnection_Key,c.key)):p=new i,p.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,a.href),p}static fromHost(a,c){e.Contracts.throwIfNull(a,"hostName");const u=new i;return u.setProperty(r.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),u.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),c!==void 0&&u.setProperty(r.PropertyId.SpeechServiceConnection_Key,c),u}static fromAuthorizationToken(a,c){e.Contracts.throwIfNull(a,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(c,"region");const u=new i;return u.setProperty(r.PropertyId.SpeechServiceConnection_Region,c),u.authorizationToken=a,u}close(){}};Il.SpeechConfig=n;class i extends n{constructor(a){super(),this.privProperties=new r.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=r.OutputFormat.Simple,this.privTokenCredential=a}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a)}get outputFormat(){return r.OutputFormat[this.privProperties.getProperty(t.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privProperties.setProperty(t.OutputFormatPropertyName,r.OutputFormat[a])}get endpointId(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_EndpointId,a)}get tokenCredential(){return this.privTokenCredential}setProperty(a,c){e.Contracts.throwIfNull(c,"value"),this.privProperties.setProperty(a,c)}getProperty(a,c){return this.privProperties.getProperty(a,c)}setProxy(a,c,u,d){this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPort],c),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyUserName],u),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPassword],d)}setServiceProperty(a,c){const u=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));u[a]=c,this.privProperties.setProperty(t.ServicePropertiesPropertyName,JSON.stringify(u))}setProfanity(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_ProfanityOption,r.ProfanityOption[a])}enableAudioLogging(){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true"),this.privProperties.setProperty(t.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Detailed])}enableDictation(){this.privProperties.setProperty(t.ForceDictationPropertyName,"true")}clone(){const a=new i(this.tokenCredential);return a.privProperties=this.privProperties.clone(),a}get speechSynthesisLanguage(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return r.SpeechSynthesisOutputFormat[this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,r.SpeechSynthesisOutputFormat[a])}}return Il.SpeechConfigImpl=i,Il}var Nl={},R6;function ile(){if(R6)return Nl;R6=1,Object.defineProperty(Nl,"__esModule",{value:!0}),Nl.SpeechTranslationConfigImpl=Nl.SpeechTranslationConfig=void 0;const t=Le(),e=tt(),r=Ce();let n=class extends r.SpeechConfig{constructor(){super()}static fromSubscription(a,c){e.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),e.Contracts.throwIfNullOrWhitespace(c,"region");const u=new i;return u.properties.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),u.properties.setProperty(r.PropertyId.SpeechServiceConnection_Region,c),u}static fromAuthorizationToken(a,c){e.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(c,"region");const u=new i;return u.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a),u.properties.setProperty(r.PropertyId.SpeechServiceConnection_Region,c),u}static fromHost(a,c){e.Contracts.throwIfNull(a,"hostName");const u=new i;return u.setProperty(r.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),c!==void 0&&u.setProperty(r.PropertyId.SpeechServiceConnection_Key,c),u}static fromEndpoint(a,c){e.Contracts.throwIfNull(a,"endpoint");const u=typeof c=="string"&&c.trim().length>0,d=typeof c=="object"&&c!==null&&typeof c.getToken=="function",h=typeof c=="object"&&c!==null&&typeof c.key=="string";if(c!==void 0&&!u&&!d&&!h)throw new Error("Invalid 'auth' parameter: expected a non-empty API key string, a TokenCredential, or a KeyCredential.");let p;return typeof c=="string"?(p=new i,p.setProperty(r.PropertyId.SpeechServiceConnection_Key,c)):typeof c=="object"&&typeof c.getToken=="function"?p=new i(c):typeof c=="object"&&typeof c.key=="string"?(p=new i,p.setProperty(r.PropertyId.SpeechServiceConnection_Key,c.key)):p=new i,p.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,a.href),p}};Nl.SpeechTranslationConfig=n;class i extends n{constructor(a){super(),this.privSpeechProperties=new r.PropertyCollection,this.outputFormat=r.OutputFormat.Simple,this.privTokenCredential=a}set authorizationToken(a){e.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}set speechRecognitionLanguage(a){e.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return r.OutputFormat[this.privSpeechProperties.getProperty(t.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privSpeechProperties.setProperty(t.OutputFormatPropertyName,r.OutputFormat[a])}get endpointId(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_EndpointId,a)}addTargetLanguage(a){e.Contracts.throwIfNullOrWhitespace(a,"value");const c=this.targetLanguages;c.includes(a)||(c.push(a),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,c.join(",")))}get targetLanguages(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(a){e.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,a)}get region(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_Region)}get tokenCredential(){return this.privTokenCredential}setProxy(a,c,u,d){this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPort],c),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyUserName],u),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPassword],d)}getProperty(a,c){return this.privSpeechProperties.getProperty(a,c)}setProperty(a,c){this.privSpeechProperties.setProperty(a,c)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(a,c){const u=JSON.parse(this.privSpeechProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));u[a]=c,this.privSpeechProperties.setProperty(t.ServicePropertiesPropertyName,JSON.stringify(u))}setProfanity(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceResponse_ProfanityOption,r.ProfanityOption[a])}enableAudioLogging(){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(t.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return r.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,r.SpeechSynthesisOutputFormat[a])}}return Nl.SpeechTranslationConfigImpl=i,Nl}var Mp={},P6;function kV(){if(P6)return Mp;P6=1,Object.defineProperty(Mp,"__esModule",{value:!0}),Mp.PropertyCollection=void 0;const t=Ce();let e=class DV{constructor(){this.privKeys=[],this.privValues=[]}getProperty(n,i){let s;typeof n=="string"?s=n:s=t.PropertyId[n];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===s)return this.privValues[a];if(i!==void 0)return String(i)}setProperty(n,i){let s;typeof n=="string"?s=n:s=t.PropertyId[n];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===s){this.privValues[a]=i;return}this.privKeys.push(s),this.privValues.push(i)}clone(){const n=new DV;for(let i=0;i<this.privKeys.length;i++)n.privKeys.push(this.privKeys[i]),n.privValues.push(this.privValues[i]);return n}mergeTo(n){this.privKeys.forEach(i=>{if(n.getProperty(i,void 0)===void 0){const s=this.getProperty(i);n.setProperty(i,s)}})}get keys(){return this.privKeys}};return Mp.PropertyCollection=e,Mp}var L_={},I6;function C2(){return I6||(I6=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyId=void 0,(function(e){e[e.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",e[e.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",e[e.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",e[e.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",e[e.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",e[e.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",e[e.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",e[e.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",e[e.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",e[e.SpeechServiceConnection_TranslationCategoryId=9]="SpeechServiceConnection_TranslationCategoryId",e[e.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",e[e.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",e[e.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",e[e.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",e[e.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",e[e.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",e[e.Speech_SessionId=16]="Speech_SessionId",e[e.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",e[e.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",e[e.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",e[e.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",e[e.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",e[e.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",e[e.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",e[e.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",e[e.CancellationDetails_Reason=25]="CancellationDetails_Reason",e[e.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",e[e.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",e[e.SpeechServiceConnection_Url=28]="SpeechServiceConnection_Url",e[e.SpeechServiceConnection_InitialSilenceTimeoutMs=29]="SpeechServiceConnection_InitialSilenceTimeoutMs",e[e.SpeechServiceConnection_EndSilenceTimeoutMs=30]="SpeechServiceConnection_EndSilenceTimeoutMs",e[e.Speech_SegmentationSilenceTimeoutMs=31]="Speech_SegmentationSilenceTimeoutMs",e[e.Speech_SegmentationMaximumTimeMs=32]="Speech_SegmentationMaximumTimeMs",e[e.Speech_SegmentationStrategy=33]="Speech_SegmentationStrategy",e[e.Speech_StartEventSensitivity=34]="Speech_StartEventSensitivity",e[e.SpeechServiceConnection_EnableAudioLogging=35]="SpeechServiceConnection_EnableAudioLogging",e[e.SpeechServiceConnection_LanguageIdMode=36]="SpeechServiceConnection_LanguageIdMode",e[e.SpeechServiceConnection_RecognitionEndpointVersion=37]="SpeechServiceConnection_RecognitionEndpointVersion",e[e.SpeechServiceResponse_ProfanityOption=38]="SpeechServiceResponse_ProfanityOption",e[e.SpeechServiceResponse_PostProcessingOption=39]="SpeechServiceResponse_PostProcessingOption",e[e.SpeechServiceResponse_RequestWordLevelTimestamps=40]="SpeechServiceResponse_RequestWordLevelTimestamps",e[e.SpeechServiceResponse_StablePartialResultThreshold=41]="SpeechServiceResponse_StablePartialResultThreshold",e[e.SpeechServiceResponse_OutputFormatOption=42]="SpeechServiceResponse_OutputFormatOption",e[e.SpeechServiceResponse_TranslationRequestStablePartialResult=43]="SpeechServiceResponse_TranslationRequestStablePartialResult",e[e.SpeechServiceResponse_RequestWordBoundary=44]="SpeechServiceResponse_RequestWordBoundary",e[e.SpeechServiceResponse_RequestPunctuationBoundary=45]="SpeechServiceResponse_RequestPunctuationBoundary",e[e.SpeechServiceResponse_RequestSentenceBoundary=46]="SpeechServiceResponse_RequestSentenceBoundary",e[e.SpeechServiceResponse_DiarizeIntermediateResults=47]="SpeechServiceResponse_DiarizeIntermediateResults",e[e.Conversation_ApplicationId=48]="Conversation_ApplicationId",e[e.Conversation_DialogType=49]="Conversation_DialogType",e[e.Conversation_Initial_Silence_Timeout=50]="Conversation_Initial_Silence_Timeout",e[e.Conversation_From_Id=51]="Conversation_From_Id",e[e.Conversation_Conversation_Id=52]="Conversation_Conversation_Id",e[e.Conversation_Custom_Voice_Deployment_Ids=53]="Conversation_Custom_Voice_Deployment_Ids",e[e.Conversation_Speech_Activity_Template=54]="Conversation_Speech_Activity_Template",e[e.Conversation_Request_Bot_Status_Messages=55]="Conversation_Request_Bot_Status_Messages",e[e.Conversation_Agent_Connection_Id=56]="Conversation_Agent_Connection_Id",e[e.SpeechServiceConnection_Host=57]="SpeechServiceConnection_Host",e[e.ConversationTranslator_Host=58]="ConversationTranslator_Host",e[e.ConversationTranslator_Name=59]="ConversationTranslator_Name",e[e.ConversationTranslator_CorrelationId=60]="ConversationTranslator_CorrelationId",e[e.ConversationTranslator_Token=61]="ConversationTranslator_Token",e[e.PronunciationAssessment_ReferenceText=62]="PronunciationAssessment_ReferenceText",e[e.PronunciationAssessment_GradingSystem=63]="PronunciationAssessment_GradingSystem",e[e.PronunciationAssessment_Granularity=64]="PronunciationAssessment_Granularity",e[e.PronunciationAssessment_EnableMiscue=65]="PronunciationAssessment_EnableMiscue",e[e.PronunciationAssessment_Json=66]="PronunciationAssessment_Json",e[e.PronunciationAssessment_Params=67]="PronunciationAssessment_Params",e[e.WebWorkerLoadType=68]="WebWorkerLoadType",e[e.TalkingAvatarService_WebRTC_SDP=69]="TalkingAvatarService_WebRTC_SDP"})(t.PropertyId||(t.PropertyId={}))})(L_)),L_}var Dp={},N6;function sle(){if(N6)return Dp;N6=1,Object.defineProperty(Dp,"__esModule",{value:!0}),Dp.Recognizer=void 0;const t=Le(),e=Ve(),r=tt(),n=Ce();let i=class LV{constructor(a,c,u,d){this.audioConfig=a!==void 0?a:n.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=c.clone(),this.privConnectionFactory=u,this.tokenCredential=d,this.implCommonRecognizerSetup()}close(a,c){r.Contracts.throwIfDisposed(this.privDisposed),(0,e.marshalPromiseToCallbacks)(this.dispose(!0),a,c)}get internalData(){return this.privReco}async dispose(a){this.privDisposed||(this.privDisposed=!0,a&&this.privReco&&(await this.privReco.audioSource.turnOff(),await this.privReco.dispose()))}static get telemetryEnabled(){return t.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(a){t.ServiceRecognizerBase.telemetryDataEnabled=a}implCommonRecognizerSetup(){let a=typeof window<"u"?"Browser":"Node",c="unknown",u="unknown";typeof navigator<"u"&&(a=a+"/"+navigator.platform,c=navigator.userAgent,u=navigator.appVersion);const d=this.createRecognizerConfig(new t.SpeechServiceConfig(new t.Context(new t.OS(a,c,u))));this.privReco=this.createServiceRecognizer(LV.getAuth(this.privProperties,this.tokenCredential),this.privConnectionFactory,this.audioConfig,d)}async recognizeOnceAsyncImpl(a){r.Contracts.throwIfDisposed(this.privDisposed);const c=new e.Deferred;await this.implRecognizerStop(),await this.privReco.recognize(a,c.resolve,c.reject);const u=await c.promise;return await this.implRecognizerStop(),u}async startContinuousRecognitionAsyncImpl(a){r.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop(),await this.privReco.recognize(a,void 0,void 0)}async stopContinuousRecognitionAsyncImpl(){r.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop()}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}static getAuth(a,c){const u=a.getProperty(n.PropertyId.SpeechServiceConnection_Key,void 0);return u&&u!==""?new t.CognitiveSubscriptionKeyAuthentication(u):c?new t.CognitiveTokenAuthentication(async()=>{try{return(await c.getToken("https://cognitiveservices.azure.com/.default"))?.token??""}catch(d){throw d}},async()=>{try{return(await c.getToken("https://cognitiveservices.azure.com/.default"))?.token??""}catch(d){throw d}}):new t.CognitiveTokenAuthentication(()=>{const d=a.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(d)},()=>{const d=a.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(d)})}};return Dp.Recognizer=i,Dp}var kp={},z_={},O6;function ws(){return O6||(O6=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechStartEventSensitivity=t.RecognitionMode=void 0,(function(e){e.Interactive="Interactive",e.Dictation="Dictation",e.Conversation="Conversation",e.None="None"})(t.RecognitionMode||(t.RecognitionMode={})),(function(e){e.Low="low",e.Medium="medium",e.High="high"})(t.SpeechStartEventSensitivity||(t.SpeechStartEventSensitivity={}))})(z_)),z_}var j6;function ale(){if(j6)return kp;j6=1,Object.defineProperty(kp,"__esModule",{value:!0}),kp.SpeechRecognizer=void 0;const t=Le(),e=ws(),r=Ve(),n=tt(),i=Ce();let s=class zV extends i.Recognizer{constructor(c,u){const d=c;n.Contracts.throwIfNull(d,"speechConfig"),n.Contracts.throwIfNullOrWhitespace(d.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage]),super(u,d.properties,new t.SpeechConnectionFactory,c.tokenCredential),this.privDisposedRecognizer=!1}static FromConfig(c,u,d){const h=c;return u.properties.mergeTo(h.properties),new zV(c,d)}get endpointId(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(c){n.Contracts.throwIfNullOrWhitespace(c,"token"),this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,c)}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(t.OutputFormatPropertyName,i.OutputFormat[i.OutputFormat.Simple])===i.OutputFormat[i.OutputFormat.Simple]?i.OutputFormat.Simple:i.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(c,u){(0,r.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(e.RecognitionMode.Interactive),c,u)}startContinuousRecognitionAsync(c,u){(0,r.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(this.properties.getProperty(t.ForceDictationPropertyName,void 0)===void 0?e.RecognitionMode.Conversation:e.RecognitionMode.Dictation),c,u)}stopContinuousRecognitionAsync(c,u){(0,r.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),c,u)}startKeywordRecognitionAsync(c,u,d){n.Contracts.throwIfNull(c,"model"),d&&d("Not yet implemented.")}stopKeywordRecognitionAsync(c){c&&c()}close(c,u){n.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),c,u)}async dispose(c){this.privDisposedRecognizer||(c&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(c))}createRecognizerConfig(c){return new t.RecognizerConfig(c,this.privProperties)}createServiceRecognizer(c,u,d,h){const p=d;return new t.SpeechServiceRecognizer(c,u,p,h,this)}};return kp.SpeechRecognizer=s,kp}var Lp={},zp={},Ol={},M6;function UV(){if(M6)return Ol;M6=1,Object.defineProperty(Ol,"__esModule",{value:!0}),Ol.ConnectionMessageImpl=Ol.ConnectionMessage=void 0;const t=Si(),e=Ve(),r=kV(),n=C2();let i=class{};Ol.ConnectionMessage=i;class s{constructor(c){this.privConnectionMessage=c,this.privProperties=new r.PropertyCollection,this.privConnectionMessage.headers[t.HeaderNames.ConnectionId]&&this.privProperties.setProperty(n.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[t.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(u=>{this.privProperties.setProperty(u,this.privConnectionMessage.headers[u])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(c=>c.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===e.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===e.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}return Ol.ConnectionMessageImpl=s,Ol}var D6;function BV(){if(D6)return zp;D6=1,Object.defineProperty(zp,"__esModule",{value:!0}),zp.Connection=void 0;const t=Le(),e=Ve(),r=UV(),n=tt(),i=Ce();let s=class VT{static fromRecognizer(c){const u=c.internalData,d=new VT;return d.privInternalData=u,d.setupEvents(),d}static fromSynthesizer(c){const u=c.internalData,d=new VT;return d.privInternalData=u,d.setupEvents(),d}openConnection(c,u){(0,e.marshalPromiseToCallbacks)(this.privInternalData.connect(),c,u)}closeConnection(c,u){if(this.privInternalData instanceof t.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");(0,e.marshalPromiseToCallbacks)(this.privInternalData.disconnect(),c,u)}setMessageProperty(c,u,d){if(n.Contracts.throwIfNullOrWhitespace(u,"propertyName"),this.privInternalData instanceof t.ServiceRecognizerBase){if(c.toLowerCase()!=="speech.context")throw new Error("Only speech.context message property sets are currently supported for recognizer");{const h=this.privInternalData.speechContext.getContext();h[u]=d}}else if(this.privInternalData instanceof t.SynthesisAdapterBase){if(c.toLowerCase()!=="speech.config"&&c.toLowerCase()!=="synthesis.context")throw new Error("Only speech.config and synthesis.context message paths are currently supported for synthesizer");if(c.toLowerCase()==="speech.config"){if(u.toLowerCase()!=="context")throw new Error("Only context property is currently supported for speech.config message path for synthesizer");this.privInternalData.synthesizerConfig.setContextFromJson(d)}else this.privInternalData.synthesisContext.setSection(u,d)}}sendMessageAsync(c,u,d,h){(0,e.marshalPromiseToCallbacks)(this.privInternalData.sendNetworkMessage(c,u),d,h)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(c=>{c.name==="ConnectionEstablishedEvent"?this.connected&&this.connected(new i.ConnectionEventArgs(c.connectionId)):c.name==="ConnectionClosedEvent"?this.disconnected&&this.disconnected(new i.ConnectionEventArgs(c.connectionId)):c.name==="ConnectionMessageSentEvent"?this.messageSent&&this.messageSent(new i.ConnectionMessageEventArgs(new r.ConnectionMessageImpl(c.message))):c.name==="ConnectionMessageReceivedEvent"&&this.messageReceived&&this.messageReceived(new i.ConnectionMessageEventArgs(new r.ConnectionMessageImpl(c.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(c=>{this.receivedServiceMessage&&this.receivedServiceMessage(new i.ServiceEventArgs(c.jsonString,c.name))})}};return zp.Connection=s,zp}var k6;function ole(){if(k6)return Lp;k6=1,Object.defineProperty(Lp,"__esModule",{value:!0}),Lp.TranslationRecognizer=void 0;const t=Le(),e=ws(),r=Ve(),n=BV(),i=tt(),s=Ce();let a=class qV extends s.Recognizer{constructor(u,d,h){const p=u;i.Contracts.throwIfNull(p,"speechConfig"),super(d,p.properties,h||new t.TranslationConnectionFactory,u.tokenCredential),this.privDisposedTranslationRecognizer=!1,this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&i.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice),s.PropertyId[s.PropertyId.SpeechServiceConnection_TranslationVoice]),i.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages),s.PropertyId[s.PropertyId.SpeechServiceConnection_TranslationToLanguages]),i.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage),s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(u,d,h){const p=u;return d.properties.mergeTo(p.properties),d.properties.getProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)===t.AutoDetectSourceLanguagesOpenRangeOptionName&&p.properties.setProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),new qV(u,h)}get speechRecognitionLanguage(){return i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(u){this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,u)}recognizeOnceAsync(u,d){i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,r.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(e.RecognitionMode.Interactive),u,d)}startContinuousRecognitionAsync(u,d){(0,r.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),u,d)}stopContinuousRecognitionAsync(u,d){(0,r.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),u,d)}removeTargetLanguage(u){if(i.Contracts.throwIfNullOrUndefined(u,"language to be removed"),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0){const d=this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),h=d.indexOf(u);h>-1&&(d.splice(h,1),this.properties.setProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,d.join(",")),this.updateLanguages(d))}}addTargetLanguage(u){i.Contracts.throwIfNullOrUndefined(u,"language to be added");let d=[];this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?(d=this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),d.includes(u)||(d.push(u),this.properties.setProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,d.join(",")))):(this.properties.setProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,u),d=[u]),this.updateLanguages(d)}close(u,d){i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),u,d)}onConnection(){}async dispose(u){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,u&&(await this.implRecognizerStop(),await super.dispose(u)))}createRecognizerConfig(u){return new t.RecognizerConfig(u,this.privProperties)}createServiceRecognizer(u,d,h,p){const g=h;return new t.TranslationServiceRecognizer(u,d,g,p,this)}updateLanguages(u){const d=n.Connection.fromRecognizer(this);d&&(d.setMessageProperty("speech.context","translationcontext",{to:u}),d.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:u})))}};return Lp.TranslationRecognizer=a,Lp}var Up={},L6;function cle(){if(L6)return Up;L6=1,Object.defineProperty(Up,"__esModule",{value:!0}),Up.Translations=void 0;const t=Ce();let e=class{constructor(){this.privMap=new t.PropertyCollection}get languages(){return this.privMap.keys}get(n,i){return this.privMap.getProperty(n,i)}set(n,i){this.privMap.setProperty(n,i)}};return Up.Translations=e,Up}var U_={},z6;function lle(){return z6||(z6=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.NoMatchReason=void 0,(function(e){e[e.NotRecognized=0]="NotRecognized",e[e.InitialSilenceTimeout=1]="InitialSilenceTimeout",e[e.InitialBabbleTimeout=2]="InitialBabbleTimeout"})(t.NoMatchReason||(t.NoMatchReason={}))})(U_)),U_}var Bp={},U6;function ule(){if(U6)return Bp;U6=1,Object.defineProperty(Bp,"__esModule",{value:!0}),Bp.NoMatchDetails=void 0;const t=Le(),e=Ce();let r=class VV{constructor(i){this.privReason=i}static fromResult(i){const s=t.SimpleSpeechPhrase.fromJSON(i.json,0);let a=e.NoMatchReason.NotRecognized;switch(s.RecognitionStatus){case t.RecognitionStatus.BabbleTimeout:a=e.NoMatchReason.InitialBabbleTimeout;break;case t.RecognitionStatus.InitialSilenceTimeout:a=e.NoMatchReason.InitialSilenceTimeout;break;default:a=e.NoMatchReason.NotRecognized;break}return new VV(a)}get reason(){return this.privReason}};return Bp.NoMatchDetails=r,Bp}var qp={},B6;function dle(){if(B6)return qp;B6=1,Object.defineProperty(qp,"__esModule",{value:!0}),qp.TranslationRecognitionCanceledEventArgs=void 0;let t=class{constructor(r,n,i,s,a){this.privCancelReason=n,this.privErrorDetails=i,this.privResult=a,this.privSessionId=r,this.privErrorCode=s}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return qp.TranslationRecognitionCanceledEventArgs=t,qp}var Vp={},q6;function FV(){if(q6)return Vp;q6=1,Object.defineProperty(Vp,"__esModule",{value:!0}),Vp.CancellationDetailsBase=void 0;let t=class{constructor(r,n,i){this.privReason=r,this.privErrorDetails=n,this.privErrorCode=i}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}};return Vp.CancellationDetailsBase=t,Vp}var Fp={},V6;function hle(){if(V6)return Fp;V6=1,Object.defineProperty(Fp,"__esModule",{value:!0}),Fp.CancellationDetails=void 0;const t=Le(),e=FV(),r=Ce();let n=class HV extends e.CancellationDetailsBase{constructor(s,a,c){super(s,a,c)}static fromResult(s){let a=r.CancellationReason.Error,c=r.CancellationErrorCode.NoError;if(s instanceof r.RecognitionResult&&s.json){const u=t.SimpleSpeechPhrase.fromJSON(s.json,0);a=t.EnumTranslation.implTranslateCancelResult(u.RecognitionStatus)}return s.properties&&(c=r.CancellationErrorCode[s.properties.getProperty(t.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new HV(a,s.errorDetails||t.EnumTranslation.implTranslateErrorDetails(c),c)}};return Fp.CancellationDetails=n,Fp}var B_={},F6;function fle(){return F6||(F6=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationErrorCode=void 0,(function(e){e[e.NoError=0]="NoError",e[e.AuthenticationFailure=1]="AuthenticationFailure",e[e.BadRequestParameters=2]="BadRequestParameters",e[e.TooManyRequests=3]="TooManyRequests",e[e.ConnectionFailure=4]="ConnectionFailure",e[e.ServiceTimeout=5]="ServiceTimeout",e[e.ServiceError=6]="ServiceError",e[e.RuntimeError=7]="RuntimeError",e[e.Forbidden=8]="Forbidden"})(t.CancellationErrorCode||(t.CancellationErrorCode={}))})(B_)),B_}var Hp={},H6;function ple(){if(H6)return Hp;H6=1,Object.defineProperty(Hp,"__esModule",{value:!0}),Hp.ConnectionEventArgs=void 0;const t=Ce();let e=class extends t.SessionEventArgs{};return Hp.ConnectionEventArgs=e,Hp}var Wp={},W6;function mle(){if(W6)return Wp;W6=1,Object.defineProperty(Wp,"__esModule",{value:!0}),Wp.ServiceEventArgs=void 0;const t=Ce();let e=class extends t.SessionEventArgs{constructor(n,i,s){super(s),this.privJsonResult=n,this.privEventName=i}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}};return Wp.ServiceEventArgs=e,Wp}var Kp={},K6;function vle(){if(K6)return Kp;K6=1,Object.defineProperty(Kp,"__esModule",{value:!0}),Kp.PhraseListGrammar=void 0;const t=tt();let e=class WV{constructor(n){this.privGrammerBuilder=n.dynamicGrammar}static fromRecognizer(n){const i=n.internalData;return new WV(i)}addPhrase(n){this.privGrammerBuilder.addPhrase(n)}addPhrases(n){this.privGrammerBuilder.addPhrase(n)}clear(){this.privGrammerBuilder.clearPhrases()}setWeight(n){t.Contracts.throwIfNumberOutOfRange(n,"weight",0,2),this.privGrammerBuilder.setWeight(n)}};return Kp.PhraseListGrammar=e,Kp}var jl={},G6;function x2(){if(G6)return jl;G6=1,Object.defineProperty(jl,"__esModule",{value:!0}),jl.DialogServiceConfigImpl=jl.DialogServiceConfig=void 0;const t=tt(),e=Ce();let r=class{constructor(){}set applicationId(s){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}};jl.DialogServiceConfig=r;class n extends r{constructor(){super(),this.privSpeechConfig=new e.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(s){t.Contracts.throwIfNullOrWhitespace(s,"value"),this.privSpeechConfig.speechRecognitionLanguage=s}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(s){this.privSpeechConfig.outputFormat=s}setProperty(s,a){this.privSpeechConfig.setProperty(s,a)}getProperty(s,a){return this.privSpeechConfig.getProperty(s)}setProxy(s,a,c,u){this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyHostName,s),this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyPort,`${a}`),c&&this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyUserName,c),u&&this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyPassword,u)}setServiceProperty(s,a,c){this.privSpeechConfig.setServiceProperty(s,a)}close(){}}return jl.DialogServiceConfigImpl=n,jl}var Gp={},$6;function gle(){if($6)return Gp;$6=1,Object.defineProperty(Gp,"__esModule",{value:!0}),Gp.BotFrameworkConfig=void 0;const t=tt(),e=x2(),r=Ce();let n=class extends e.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(s,a,c){t.Contracts.throwIfNullOrWhitespace(s,"subscription"),t.Contracts.throwIfNullOrWhitespace(a,"region");const u=new e.DialogServiceConfigImpl;return u.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),u.setProperty(r.PropertyId.SpeechServiceConnection_Key,s),u.setProperty(r.PropertyId.SpeechServiceConnection_Region,a),c&&u.setProperty(r.PropertyId.Conversation_ApplicationId,c),u}static fromAuthorizationToken(s,a,c){t.Contracts.throwIfNullOrWhitespace(s,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(a,"region");const u=new e.DialogServiceConfigImpl;return u.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),u.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,s),u.setProperty(r.PropertyId.SpeechServiceConnection_Region,a),c&&u.setProperty(r.PropertyId.Conversation_ApplicationId,c),u}static fromHost(s,a,c){t.Contracts.throwIfNullOrUndefined(s,"host");const u=s instanceof URL?s:new URL(`wss://${s}.convai.speech.azure.us`);t.Contracts.throwIfNullOrUndefined(u,"resolvedHost");const d=new e.DialogServiceConfigImpl;return d.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),d.setProperty(r.PropertyId.SpeechServiceConnection_Host,u.toString()),a!==void 0&&d.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),d}static fromEndpoint(s,a){t.Contracts.throwIfNull(s,"endpoint");const c=new e.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,s.toString()),a!==void 0&&c.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),c}};return Gp.BotFrameworkConfig=n,Gp}var $p={},Y6;function yle(){if(Y6)return $p;Y6=1,Object.defineProperty($p,"__esModule",{value:!0}),$p.CustomCommandsConfig=void 0;const t=tt(),e=x2(),r=Ce();let n=class extends e.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(s,a,c){t.Contracts.throwIfNullOrWhitespace(s,"applicationId"),t.Contracts.throwIfNullOrWhitespace(a,"subscription"),t.Contracts.throwIfNullOrWhitespace(c,"region");const u=new e.DialogServiceConfigImpl;return u.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.CustomCommands),u.setProperty(r.PropertyId.Conversation_ApplicationId,s),u.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),u.setProperty(r.PropertyId.SpeechServiceConnection_Region,c),u}static fromAuthorizationToken(s,a,c){t.Contracts.throwIfNullOrWhitespace(s,"applicationId"),t.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(c,"region");const u=new e.DialogServiceConfigImpl;return u.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.CustomCommands),u.setProperty(r.PropertyId.Conversation_ApplicationId,s),u.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a),u.setProperty(r.PropertyId.SpeechServiceConnection_Region,c),u}set applicationId(s){t.Contracts.throwIfNullOrWhitespace(s,"value"),this.setProperty(r.PropertyId.Conversation_ApplicationId,s)}get applicationId(){return this.getProperty(r.PropertyId.Conversation_ApplicationId)}};return $p.CustomCommandsConfig=n,$p}var Yp={},Xp={},Qp={},Jp={},X6;function Wc(){if(X6)return Jp;X6=1,Object.defineProperty(Jp,"__esModule",{value:!0}),Jp.QueryParameterNames=void 0;let t=class{};return Jp.QueryParameterNames=t,t.BotId="botid",t.CustomSpeechDeploymentId="cid",t.CustomVoiceDeploymentId="deploymentId",t.EnableAudioLogging="storeAudio",t.EnableLanguageId="lidEnabled",t.EnableWordLevelTimestamps="wordLevelTimestamps",t.EndSilenceTimeoutMs="endSilenceTimeoutMs",t.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs",t.SegmentationMaximumTimeMs="segmentationMaximumTimeMs",t.SegmentationStrategy="segmentationStrategy",t.Format="format",t.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",t.Language="language",t.Profanity="profanity",t.RequestBotStatusMessages="enableBotMessageStatus",t.StableIntermediateThreshold="stableIntermediateThreshold",t.StableTranslation="stableTranslation",t.TestHooks="testhooks",t.Postprocessing="postprocessing",t.CtsMeetingId="meetingId",t.CtsDeviceId="deviceId",t.CtsIsParticipant="isParticipant",t.EnableAvatar="enableTalkingAvatar",Jp}var Q6;function yo(){if(Q6)return Qp;Q6=1,Object.defineProperty(Qp,"__esModule",{value:!0}),Qp.ConnectionFactoryBase=void 0;const t=Le(),e=Ve(),r=Ce(),n=Wc();let i=class{static getHostSuffix(a){if(a){if(a.toLowerCase().startsWith("china"))return".azure.cn";if(a.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(a,c,u){new Map([[r.PropertyId.Speech_SegmentationSilenceTimeoutMs,n.QueryParameterNames.SegmentationSilenceTimeoutMs],[r.PropertyId.SpeechServiceConnection_EnableAudioLogging,n.QueryParameterNames.EnableAudioLogging],[r.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,n.QueryParameterNames.EndSilenceTimeoutMs],[r.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,n.QueryParameterNames.InitialSilenceTimeoutMs],[r.PropertyId.SpeechServiceResponse_PostProcessingOption,n.QueryParameterNames.Postprocessing],[r.PropertyId.SpeechServiceResponse_ProfanityOption,n.QueryParameterNames.Profanity],[r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,n.QueryParameterNames.EnableWordLevelTimestamps],[r.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,n.QueryParameterNames.StableIntermediateThreshold]]).forEach((p,g)=>{this.setUrlParameter(g,p,a,c,u)});const h=JSON.parse(a.parameters.getProperty(t.ServicePropertiesPropertyName,"{}"));Object.keys(h).forEach(p=>{c[p]=h[p]})}setUrlParameter(a,c,u,d,h){const p=u.parameters.getProperty(a,void 0);p&&(!h||h.search(c)===-1)&&(d[c]=p.toLocaleLowerCase())}static async getRedirectUrlFromEndpoint(a){const c=new URL(a);c.protocol="https:",c.port="443",c.searchParams.append("GenerateRedirectResponse","true");const d=c.toString();e.Events.instance.onEvent(new e.ConnectionRedirectEvent("",d,void 0,"ConnectionFactoryBase: redirectUrl request"));const h=await fetch(d);if(h.status!==200)return a;const p=await h.text();e.Events.instance.onEvent(new e.ConnectionRedirectEvent("",p,a,"ConnectionFactoryBase: redirectUrlString"));try{return new URL(p.trim()).toString()}catch{return a}}};return Qp.ConnectionFactoryBase=i,Qp}var J6;function ble(){if(J6)return Xp;J6=1,Object.defineProperty(Xp,"__esModule",{value:!0}),Xp.DialogConnectionFactory=void 0;const t=$n(),e=Le(),r=Ce(),n=yo(),i=Le(),s=Si(),a=Wc();class c extends n.ConnectionFactoryBase{create(d,h,p){const g=d.parameters.getProperty(r.PropertyId.Conversation_ApplicationId,""),y=d.parameters.getProperty(r.PropertyId.Conversation_DialogType),S=d.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region),x=d.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),w=d.parameters.getProperty(r.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),E={};E[s.HeaderNames.ConnectionId]=p,E[a.QueryParameterNames.Format]=d.parameters.getProperty(e.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase(),E[a.QueryParameterNames.Language]=x,E[a.QueryParameterNames.RequestBotStatusMessages]=w,g&&(E[a.QueryParameterNames.BotId]=g,y===r.DialogServiceConfig.DialogTypes.CustomCommands&&(E[s.HeaderNames.CustomCommandsAppId]=g));const R=y===r.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",T=y===r.DialogServiceConfig.DialogTypes.CustomCommands?"v1":y===r.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",M={};h.token!=null&&h.token!==""&&(M[h.headerName]=h.token);let D=d.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,"");if(!D){const j=n.ConnectionFactoryBase.getHostSuffix(S),O=d.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,`wss://${S}.${c.BaseUrl}${j}`);D=`${O.endsWith("/")?O:O+"/"}${R}${c.ApiKey}/${T}`}this.setCommonUrlParams(d,E,D);const z=d.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new t.WebsocketConnection(D,E,M,new i.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(d),z,p))}}return Xp.DialogConnectionFactory=c,c.ApiKey="api",c.BaseUrl="convai.speech",Xp}var Z6;function Sle(){if(Z6)return Yp;Z6=1,Object.defineProperty(Yp,"__esModule",{value:!0}),Yp.DialogServiceConnector=void 0;const t=ble(),e=Le(),r=ws(),n=Ve(),i=tt(),s=Ce(),a=C2();let c=class extends s.Recognizer{constructor(d,h){const p=d;i.Contracts.throwIfNull(d,"dialogConfig"),super(h,p.properties,new t.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=p.properties.clone();const g=this.buildAgentConfig();this.privReco.agentConfig.set(g)}connect(d,h){(0,n.marshalPromiseToCallbacks)(this.privReco.connect(),d,h)}disconnect(d,h){(0,n.marshalPromiseToCallbacks)(this.privReco.disconnect(),d,h)}get authorizationToken(){return this.properties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(d){i.Contracts.throwIfNullOrWhitespace(d,"token"),this.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,d)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(a.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(d){this.properties.setProperty(a.PropertyId.Conversation_Speech_Activity_Template,d)}listenOnceAsync(d,h){if(this.isTurnComplete){i.Contracts.throwIfDisposed(this.privIsDisposed);const g=(async()=>{await this.privReco.connect(),await this.implRecognizerStop(),this.isTurnComplete=!1;const y=new n.Deferred;await this.privReco.recognize(r.RecognitionMode.Conversation,y.resolve,y.reject);const S=await y.promise;return await this.implRecognizerStop(),S})();g.catch(()=>{this.dispose(!0).catch(()=>{})}),(0,n.marshalPromiseToCallbacks)(g.finally(()=>{this.isTurnComplete=!0}),d,h)}}sendActivityAsync(d,h,p){(0,n.marshalPromiseToCallbacks)(this.privReco.sendMessage(d),h,p)}close(d,h){i.Contracts.throwIfDisposed(this.privIsDisposed),(0,n.marshalPromiseToCallbacks)(this.dispose(!0),d,h)}async dispose(d){this.privIsDisposed||d&&(this.privIsDisposed=!0,await this.implRecognizerStop(),await super.dispose(d))}createRecognizerConfig(d){return new e.RecognizerConfig(d,this.privProperties)}createServiceRecognizer(d,h,p,g){const y=p;return new e.DialogServiceAdapter(d,h,y,g,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(a.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(a.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(a.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}};return Yp.DialogServiceConnector=c,Yp}var Zp={},e3;function Cle(){if(e3)return Zp;e3=1,Object.defineProperty(Zp,"__esModule",{value:!0}),Zp.ActivityReceivedEventArgs=void 0;let t=class{constructor(r,n){this.privActivity=r,this.privAudioStream=n}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}};return Zp.ActivityReceivedEventArgs=t,Zp}var em={},tm={},t3;function xle(){if(t3)return tm;t3=1,Object.defineProperty(tm,"__esModule",{value:!0}),tm.TurnStatusResponsePayload=void 0;class t{constructor(r){this.privMessageStatusResponse=JSON.parse(r)}static fromJSON(r){return new t(r)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}return tm.TurnStatusResponsePayload=t,tm}var r3;function wle(){if(r3)return em;r3=1,Object.defineProperty(em,"__esModule",{value:!0}),em.TurnStatusReceivedEventArgs=void 0;const t=xle();let e=class{constructor(n){this.privTurnStatus=t.TurnStatusResponsePayload.fromJSON(n)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}};return em.TurnStatusReceivedEventArgs=e,em}var q_={},n3;function _le(){return n3||(n3=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ServicePropertyChannel=void 0,(function(e){e[e.UriQueryParameter=0]="UriQueryParameter"})(t.ServicePropertyChannel||(t.ServicePropertyChannel={}))})(q_)),q_}var V_={},i3;function Ele(){return i3||(i3=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ProfanityOption=void 0,(function(e){e[e.Masked=0]="Masked",e[e.Removed=1]="Removed",e[e.Raw=2]="Raw"})(t.ProfanityOption||(t.ProfanityOption={}))})(V_)),V_}var rm={},s3;function Ale(){if(s3)return rm;s3=1,Object.defineProperty(rm,"__esModule",{value:!0}),rm.BaseAudioPlayer=void 0;const t=ga(),e=Ce(),r=Mu();let n=class{constructor(s){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,s===void 0&&(s=e.AudioStreamFormat.getDefaultInputFormat()),this.init(s)}playAudioSample(s,a,c){try{this.ensureInitializedContext();const u=this.formatAudioData(s),d=new Float32Array(this.samples.length+u.length);d.set(this.samples,0),d.set(u,this.samples.length),this.samples=d,a&&a()}catch(u){c&&c(u)}}stopAudio(s,a){this.audioContext!==null&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{s&&s()},c=>{a&&a(c)}),this.audioContext=null)}init(s){this.audioFormat=s,this.samples=new Float32Array}ensureInitializedContext(){if(this.audioContext===null){this.createAudioContext();const s=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},s)}}createAudioContext(){this.audioContext=r.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(s){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(s),128);case 16:return this.formatArrayBuffer(new Int16Array(s),32768);case 32:return this.formatArrayBuffer(new Int32Array(s),2147483648);default:throw new t.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(s,a){const c=new Float32Array(s.length);for(let u=0;u<s.length;u++)c[u]=s[u]/a;return c}updateAudioBuffer(){if(this.samples.length===0)return;const s=this.audioFormat.channels,a=this.audioContext.createBufferSource(),c=this.samples.length/s,u=this.audioContext.createBuffer(s,c,this.audioFormat.samplesPerSec);for(let d=0;d<s;d++){let h=d;const p=u.getChannelData(d);for(let g=0;g<this.samples.length;g++,h+=s)p[g]=this.samples[h]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),a.buffer=u,a.connect(this.gainNode),a.start(this.startTime),this.startTime+=u.duration,this.samples=new Float32Array}async playAudio(s){this.audioContext===null&&this.createAudioContext();const a=this.audioContext.createBufferSource(),c=this.audioContext.destination;await this.audioContext.decodeAudioData(s,u=>{a.buffer=u,a.connect(c),a.start(0)})}};return rm.BaseAudioPlayer=n,rm}var nm={},a3;function Tle(){if(a3)return nm;a3=1,Object.defineProperty(nm,"__esModule",{value:!0}),nm.ConnectionMessageEventArgs=void 0;let t=class{constructor(r){this.privConnectionMessage=r}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}};return nm.ConnectionMessageEventArgs=t,nm}var im={},F_={},o3;function KV(){return o3||(o3=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageIdMode=void 0,(function(e){e[e.AtStart=0]="AtStart",e[e.Continuous=1]="Continuous"})(t.LanguageIdMode||(t.LanguageIdMode={}))})(F_)),F_}var c3;function Rle(){if(c3)return im;c3=1,Object.defineProperty(im,"__esModule",{value:!0}),im.AutoDetectSourceLanguageConfig=void 0;const t=Le(),e=tt(),r=Ce(),n=KV();let i=class Nb{constructor(){this.privProperties=new r.PropertyCollection,this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=n.LanguageIdMode.AtStart}static fromOpenRange(){const a=new Nb;return a.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,t.AutoDetectSourceLanguagesOpenRangeOptionName),a.properties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),a}static fromLanguages(a){e.Contracts.throwIfArrayEmptyOrWhitespace(a,"languages");const c=new Nb;return c.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a.join()),c}static fromSourceLanguageConfigs(a){if(a.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const c=new Nb,u=[];return a.forEach(d=>{if(u.push(d.language),d.endpointId!==void 0&&d.endpointId!==""){const h=d.language+r.PropertyId.SpeechServiceConnection_EndpointId.toString();c.properties.setProperty(h,d.endpointId)}}),c.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,u.join()),c}get properties(){return this.privProperties}set mode(a){a===n.LanguageIdMode.Continuous?(this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=a}};return im.AutoDetectSourceLanguageConfig=i,im}var sm={},l3;function Ple(){if(l3)return sm;l3=1,Object.defineProperty(sm,"__esModule",{value:!0}),sm.AutoDetectSourceLanguageResult=void 0;const t=tt();let e=class FT{constructor(n,i){t.Contracts.throwIfNullOrUndefined(n,"language"),t.Contracts.throwIfNullOrUndefined(i,"languageDetectionConfidence"),this.privLanguage=n,this.privLanguageDetectionConfidence=i}static fromResult(n){return new FT(n.language,n.languageDetectionConfidence)}static fromConversationTranscriptionResult(n){return new FT(n.language,n.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}};return sm.AutoDetectSourceLanguageResult=e,sm}var am={},u3;function Ile(){if(u3)return am;u3=1,Object.defineProperty(am,"__esModule",{value:!0}),am.SourceLanguageConfig=void 0;const t=tt();let e=class GV{constructor(n,i){t.Contracts.throwIfNullOrUndefined(n,"language"),this.privLanguage=n,this.privEndpointId=i}static fromLanguage(n,i){return new GV(n,i)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}};return am.SourceLanguageConfig=e,am}var H_={},Ml={},d3;function $V(){if(d3)return Ml;d3=1,Object.defineProperty(Ml,"__esModule",{value:!0}),Ml.ConversationImpl=Ml.Conversation=void 0;const t=Le(),e=Ve(),r=tt(),n=Ce();let i=class{constructor(){}static createConversationAsync(c,u,d,h){r.Contracts.throwIfNullOrUndefined(c,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),r.Contracts.throwIfNullOrUndefined(c.region,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),!c.subscriptionKey&&!c.getProperty(n.PropertyId[n.PropertyId.SpeechServiceAuthorization_Token])&&r.Contracts.throwIfNullOrUndefined(c.subscriptionKey,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let p,g,y;return typeof u=="string"?(p=new s(c,u),(0,e.marshalPromiseToCallbacks)((async()=>{})(),d,h)):(p=new s(c),g=u,y=d,p.createConversationAsync((()=>{g&&g()}),S=>{y&&y(S)})),p}};Ml.Conversation=i;class s extends i{constructor(c,u){if(super(),this.privErrors=t.ConversationConnectionConfig.restErrors,this.onConnected=p=>{this.privIsConnected=!0;try{this.privConversationTranslator?.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,p)}catch{}},this.onDisconnected=p=>{try{this.privConversationTranslator?.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,p)}catch{}finally{this.close(!1)}},this.onCanceled=(p,g)=>{try{this.privConversationTranslator?.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,g)}catch{}},this.onParticipantUpdateCommandReceived=(p,g)=>{try{const y=this.privParticipants.getParticipant(g.id);if(y!==void 0){switch(g.key){case t.ConversationTranslatorCommandTypes.changeNickname:y.displayName=g.value;break;case t.ConversationTranslatorCommandTypes.setUseTTS:y.isUsingTts=g.value;break;case t.ConversationTranslatorCommandTypes.setProfanityFiltering:y.profanity=g.value;break;case t.ConversationTranslatorCommandTypes.setMute:y.isMuted=g.value;break;case t.ConversationTranslatorCommandTypes.setTranslateToLanguages:y.translateToLanguages=g.value;break}this.privParticipants.addOrUpdateParticipant(y),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,[this.toParticipant(y)],g.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(p,g)=>{try{this.privParticipants.participants.forEach(y=>y.isMuted=y.isHost?!1:g.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,this.toParticipants(!1),g.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(p,g)=>{try{const y=this.privParticipants.addOrUpdateParticipant(g.participant);y!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,[this.toParticipant(y)],g.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(p,g)=>{try{const y=this.privParticipants.getParticipant(g.participant.id);y!==void 0&&(this.privParticipants.deleteParticipant(g.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.LeftConversation,[this.toParticipant(y)],g.sessionId)))}catch{}},this.onTranslationReceived=(p,g)=>{try{switch(g.command){case t.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new n.ConversationTranslationEventArgs(g.payload,void 0,g.sessionId));break;case t.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new n.ConversationTranslationEventArgs(g.payload,void 0,g.sessionId));break;case t.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new n.ConversationTranslationEventArgs(g.payload,void 0,g.sessionId));break}}catch{}},this.onParticipantsListReceived=(p,g)=>{try{if(g.sessionToken!==void 0&&g.sessionToken!==null&&(this.privRoom.token=g.sessionToken),this.privParticipants.participants=[...g.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),g.sessionId)),this.me.isHost){const y=this.privConversationTranslator?.properties.getProperty(n.PropertyId.ConversationTranslator_Name);y!==void 0&&y.length>0&&y!==this.me.displayName&&this.changeNicknameAsync(y)}}catch{}},this.onConversationExpiration=(p,g)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,g)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new n.PropertyCollection,this.privManager=new t.ConversationManager,c.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])||c.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage],t.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=c.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),u)this.privConversationId=u;else{c.targetLanguages.length===0&&c.addTargetLanguage(this.privLanguage),c.getProperty(n.PropertyId[n.PropertyId.SpeechServiceResponse_ProfanityOption])||c.setProfanity(n.ProfanityOption.Masked);let g=c.getProperty(n.PropertyId[n.PropertyId.ConversationTranslator_Name]);g==null&&(g="Host"),r.Contracts.throwIfNullOrTooLong(g,"nickname",50),r.Contracts.throwIfNullOrTooShort(g,"nickname",2),c.setProperty(n.PropertyId[n.PropertyId.ConversationTranslator_Name],g)}this.privConfig=c;const h=c;r.Contracts.throwIfNull(h,"speechConfig"),this.privProperties=h.properties.clone(),this.privIsConnected=!1,this.privParticipants=new t.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){return this.privParticipants.me?.isHost?!1:this.privParticipants.me?.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const c=this.conversationId,u=this.participants.map(p=>({id:p.id,preferredLanguage:p.preferredLanguage,voice:p.voice})),d={};for(const p of t.ConversationConnectionConfig.transcriptionEventKeys){const g=this.properties.getProperty(p,"");g!==""&&(d[p]=g)}return{id:c,participants:u,conversationProperties:d}}get canSend(){return this.privIsConnected&&!this.privParticipants.me?.isMuted}get canSendAsHost(){return this.privIsConnected&&this.privParticipants.me?.isHost}get authorizationToken(){return this.privToken}set authorizationToken(c){r.Contracts.throwIfNullOrWhitespace(c,"authorizationToken"),this.privToken=c}set conversationTranslator(c){this.privConversationTranslator=c}onToken(c){this.privConversationTranslator.onToken(c)}createConversationAsync(c,u){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),u),this.privManager.createOrJoin(this.privProperties,void 0,(d=>{d||this.handleError(new Error(this.privErrors.permissionDeniedConnect),u),this.privRoom=d,this.handleCallback(c,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}startConversationAsync(c,u){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),u),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=t.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,(()=>{this.handleCallback(c,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}addParticipantAsync(c,u,d){r.Contracts.throwIfNullOrUndefined(c,"Participant"),(0,e.marshalPromiseToCallbacks)(this.addParticipantImplAsync(c),u,d)}joinConversationAsync(c,u,d,h,p){try{r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","conversationId")),r.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrWhitespace(d,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,c,(g=>{r.Contracts.throwIfNullOrUndefined(g,this.privErrors.permissionDeniedConnect),this.privRoom=g,this.privConfig.authorizationToken=g.cognitiveSpeechAuthToken,h&&h(g.cognitiveSpeechAuthToken)}),(g=>{this.handleError(g,p)}))}catch(g){this.handleError(g,p)}}deleteConversationAsync(c,u){(0,e.marshalPromiseToCallbacks)(this.deleteConversationImplAsync(),c,u)}async deleteConversationImplAsync(){r.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),r.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endConversationAsync(c,u){(0,e.marshalPromiseToCallbacks)(this.endConversationImplAsync(),c,u)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),(()=>{this.handleCallback(c,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}muteAllParticipantsAsync(c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),(()=>{this.handleCallback(c,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}muteParticipantAsync(c,u,d){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),!this.me.isHost&&this.me.id!==c&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),d),this.privParticipants.getParticipantIndex(c)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(c,!0),(()=>{this.handleCallback(u,d)}),(p=>{this.handleError(p,d)}))}catch(h){this.handleError(h,d)}}removeParticipantAsync(c,u,d){try{if(r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&c.hasOwnProperty("id"))(0,e.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(c),u,d);else{r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),d);let h="";typeof c=="string"?h=c:c.hasOwnProperty("id")?h=c.id:c.hasOwnProperty("userId")&&(h=c.userId),r.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(g=>g.id===h)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(h),(()=>{this.handleCallback(u,d)}),(g=>{this.handleError(g,d)}))}}catch(h){this.handleError(h,d)}}unlockConversationAsync(c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),(()=>{this.handleCallback(c,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}unmuteAllParticipantsAsync(c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),(()=>{this.handleCallback(c,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}unmuteParticipantAsync(c,u,d){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),!this.me.isHost&&this.me.id!==c&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),d),this.privParticipants.getParticipantIndex(c)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(c,!1),(()=>{this.handleCallback(u,d)}),(p=>{this.handleError(p,d)}))}catch(h){this.handleError(h,d)}}sendTextMessageAsync(c,u,d){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","message")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),c.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(c),(()=>{this.handleCallback(u,d)}),(h=>{this.handleError(h,d)}))}catch(h){this.handleError(h,d)}}setTranslatedLanguagesAsync(c,u,d){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfArrayEmptyOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","languages")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(c),(()=>{this.handleCallback(u,d)}),(h=>{this.handleError(h,d)}))}catch(h){this.handleError(h,d)}}changeNicknameAsync(c,u,d){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(c),(()=>{this.handleCallback(u,d)}),(h=>{this.handleError(h,d)}))}catch(h){this.handleError(h,d)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(c){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await c.enforceAudioGating(),this.privTranscriberRecognizer=c,this.privTranscriberRecognizer.conversation=this}getKeepAlive(){const c=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:c,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(c){if(this.privParticipants.addOrUpdateParticipant(c)!==void 0&&this.privTranscriberRecognizer){const d=this.conversationInfo;return d.participants=[c],this.privTranscriberRecognizer.pushConversationEvent(d,"join")}}removeParticipantImplAsync(c){this.privParticipants.deleteParticipant(c.id);const u=this.conversationInfo;return u.participants=[c],this.privTranscriberRecognizer.pushConversationEvent(u,"leave")}async close(c){try{this.privIsConnected=!1,await this.privConversationRecognizer?.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(u){throw u}c&&this.dispose()}handleCallback(c,u){if(c){try{c()}catch(d){u&&u(d)}c=void 0}}handleError(c,u){if(u)if(c instanceof Error){const d=c;u(d.name+": "+d.message)}else u(c)}toParticipants(c){const u=this.privParticipants.participants.map(d=>this.toParticipant(d));return c?u:u.filter(d=>d.isHost===!1)}toParticipant(c){return new n.Participant(c.id,c.avatar,c.displayName,c.isHost,c.isMuted,c.isUsingTts,c.preferredLanguage,c.voice)}getMuteAllCommand(c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:c})}getMuteCommand(c,u){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(c,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMute,participantId:c,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:u})}getLockCommand(c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:c})}getEjectCommand(c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(c,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.ejectParticipant,participantId:c,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:c})}getChangeNicknameCommand(c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(c,"nickname"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.changeNickname,nickname:c,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:c})}getMessageCommand(c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),r.Contracts.throwIfNullOrWhitespace(c,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:c,type:t.ConversationTranslatorMessageTypes.instantMessage})}}return Ml.ConversationImpl=s,Ml}var om={},h3;function Nle(){if(h3)return om;h3=1,Object.defineProperty(om,"__esModule",{value:!0}),om.ConversationCommon=void 0;let t=class{constructor(r){this.privAudioConfig=r}handleCallback(r,n){if(r){try{r()}catch(i){n&&n(i)}r=void 0}}handleError(r,n){if(n)if(r instanceof Error){const i=r;n(i.name+": "+i.message)}else n(r)}};return om.ConversationCommon=t,om}var cm={},f3;function Ole(){if(f3)return cm;f3=1,Object.defineProperty(cm,"__esModule",{value:!0}),cm.ConversationExpirationEventArgs=void 0;const t=Ce();let e=class extends t.SessionEventArgs{constructor(n,i){super(i),this.privExpirationTime=n}get expirationTime(){return this.privExpirationTime}};return cm.ConversationExpirationEventArgs=e,cm}var lm={},p3;function jle(){if(p3)return lm;p3=1,Object.defineProperty(lm,"__esModule",{value:!0}),lm.ConversationParticipantsChangedEventArgs=void 0;const t=Ce();let e=class extends t.SessionEventArgs{constructor(n,i,s){super(s),this.privReason=n,this.privParticipant=i}get reason(){return this.privReason}get participants(){return this.privParticipant}};return lm.ConversationParticipantsChangedEventArgs=e,lm}var um={},m3;function Mle(){if(m3)return um;m3=1,Object.defineProperty(um,"__esModule",{value:!0}),um.ConversationTranslationCanceledEventArgs=void 0;const t=Hg();let e=class extends t.CancellationEventArgsBase{};return um.ConversationTranslationCanceledEventArgs=e,um}var dm={},v3;function Dle(){if(v3)return dm;v3=1,Object.defineProperty(dm,"__esModule",{value:!0}),dm.ConversationTranslationEventArgs=void 0;const t=Ce();let e=class extends t.RecognitionEventArgs{constructor(n,i,s){super(i,s),this.privResult=n}get result(){return this.privResult}};return dm.ConversationTranslationEventArgs=e,dm}var hm={},g3;function kle(){if(g3)return hm;g3=1,Object.defineProperty(hm,"__esModule",{value:!0}),hm.ConversationTranslationResult=void 0;const t=MV();let e=class extends t.TranslationRecognitionResult{constructor(n,i,s,a,c,u,d,h,p,g,y){super(i,a,c,u,d,h,void 0,void 0,p,g,y),this.privId=n,this.privOrigLang=s}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}};return hm.ConversationTranslationResult=e,hm}var W_={},fm={},pm={},y3;function YV(){if(y3)return pm;y3=1,Object.defineProperty(pm,"__esModule",{value:!0}),pm.StringUtils=void 0;let t=class{static formatString(r,n){if(!r)return"";if(!n)return r;let i="",s="";const a=d=>{i+=d},c=d=>{s+=d};let u=a;for(let d=0;d<r.length;d++){const h=r[d],p=d+1<r.length?r[d+1]:"";switch(h){case"{":p==="{"?(u("{"),d++):u=c;break;case"}":p==="}"?(u("}"),d++):(n.hasOwnProperty(s)&&(i+=n[s]),u=a,s="");break;default:u(h);break}}return i}};return pm.StringUtils=t,pm}var b3;function Lle(){if(b3)return fm;b3=1,Object.defineProperty(fm,"__esModule",{value:!0}),fm.ConversationTranslatorConnectionFactory=void 0;const t=$n(),e=YV(),r=tt(),n=Ce(),i=Si(),s=Wc(),a=yo(),c=Le();let u=class XV extends a.ConnectionFactoryBase{constructor(h){super(),r.Contracts.throwIfNullOrUndefined(h,"convGetter"),this.privConvGetter=h}create(h,p,g){const y=h.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase()==="TRUE",S=this.privConvGetter().room,x=S.cognitiveSpeechRegion||h.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region,""),w={hostSuffix:a.ConnectionFactoryBase.getHostSuffix(x),path:XV.CTS_VIRT_MIC_PATH,region:encodeURIComponent(x)};w[s.QueryParameterNames.Language]=encodeURIComponent(h.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,"")),w[s.QueryParameterNames.CtsMeetingId]=encodeURIComponent(S.roomId),w[s.QueryParameterNames.CtsDeviceId]=encodeURIComponent(S.participantId),w[s.QueryParameterNames.CtsIsParticipant]=S.isHost?"":"&"+s.QueryParameterNames.CtsIsParticipant;let E="";const R={},T={};if(y){E=h.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint),E||(E="wss://"+h.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),E=e.StringUtils.formatString(E,w);const D=new URL(E);D.searchParams.forEach((j,O)=>{R[O]=j}),new c.TranscriberConnectionFactory().setQueryParams(R,h,E),R[s.QueryParameterNames.CtsMeetingId]=w[s.QueryParameterNames.CtsMeetingId],R[s.QueryParameterNames.CtsDeviceId]=w[s.QueryParameterNames.CtsDeviceId],S.isHost||(R[s.QueryParameterNames.CtsIsParticipant]=""),s.QueryParameterNames.Format in R||(R[s.QueryParameterNames.Format]="simple"),D.searchParams.forEach((j,O)=>{D.searchParams.set(O,R[O]),delete R[O]}),E=D.toString()}else{const D=new c.TranslationConnectionFactory;E=D.getEndpointUrl(h,!0),E=e.StringUtils.formatString(E,w),D.setQueryParams(R,h,E)}T[i.HeaderNames.ConnectionId]=g,T[t.RestConfigBase.configParams.token]=S.token,p.token&&(T[p.headerName]=p.token);const M=h.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase()==="TRUE";return Promise.resolve(new t.WebsocketConnection(E,R,T,new c.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(h),M,g))}};return fm.ConversationTranslatorConnectionFactory=u,u.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio",fm}var S3;function zle(){return S3||(S3=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslator=t.SpeechState=void 0;const e=Le(),r=Lle(),n=Ve(),i=tt(),s=Ce(),a=$V(),c=w2();var u;(function(p){p[p.Inactive=0]="Inactive",p[p.Connecting=1]="Connecting",p[p.Connected=2]="Connected"})(u=t.SpeechState||(t.SpeechState={}));class d extends s.TranslationRecognizer{constructor(g,y,S,x){super(g,y,new r.ConversationTranslatorConnectionFactory(x)),this.privSpeechState=u.Inactive,S&&(this.privTranslator=S,this.sessionStarted=()=>{this.privSpeechState=u.Connected},this.sessionStopped=()=>{this.privSpeechState=u.Inactive},this.recognizing=(w,E)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,E)},this.recognized=async(w,E)=>{E.result?.errorDetails?(await this.cancelSpeech(),this.fireCancelEvent(E.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,E)},this.canceled=async()=>{if(this.privSpeechState!==u.Inactive)try{await this.cancelSpeech()}catch{this.privSpeechState=u.Inactive}})}get state(){return this.privSpeechState}set state(g){this.privSpeechState=g}set authentication(g){this.privReco.authentication=g}onConnection(){this.privSpeechState=u.Connected}async onCancelSpeech(){this.privSpeechState=u.Inactive,await this.cancelSpeech()}fireCancelEvent(g){try{if(this.privTranslator.canceled){const y=new c.ConversationTranslationCanceledEventArgs(s.CancellationReason.Error,g,s.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,y)}}catch{}}async cancelSpeech(){try{this.stopContinuousRecognitionAsync(),await this.privReco?.disconnect(),this.privSpeechState=u.Inactive}catch{}}}class h extends c.ConversationCommon{constructor(g){super(g),this.privErrors=e.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new s.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){return this.privConversation?.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===u.Connected||this.privCTRecognizer.state===u.Connecting||this.privConversation.isMutedByHost)}onToken(g){this.privCTRecognizer.authentication=g}setServiceProperty(g,y){const S=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));S[g]=y,this.privProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(S))}joinConversationAsync(g,y,S,x,w){try{if(typeof g=="string"){i.Contracts.throwIfNullOrUndefined(g,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(y,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),w);let E=S;(E==null||E==="")&&(E=e.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=s.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(s.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(E),this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage],E),this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.ConversationTranslator_Name],y);const R=[s.PropertyId.SpeechServiceConnection_Host,s.PropertyId.ConversationTranslator_Host,s.PropertyId.SpeechServiceConnection_Endpoint,s.PropertyId.SpeechServiceConnection_ProxyHostName,s.PropertyId.SpeechServiceConnection_ProxyPassword,s.PropertyId.SpeechServiceConnection_ProxyPort,s.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const M of R){const D=this.privProperties.getProperty(M);if(D){const z=typeof M=="string"?M:s.PropertyId[M];this.privSpeechTranslationConfig.setProperty(z,D)}}const T=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));for(const M of Object.keys(T))this.privSpeechTranslationConfig.setServiceProperty(M,T[M],s.ServicePropertyChannel.UriQueryParameter);this.privConversation=new a.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(g,y,E,(M=>{M||this.handleError(new Error(this.privErrors.permissionDeniedConnect),w),this.privSpeechTranslationConfig.authorizationToken=M,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync((()=>{this.handleCallback(x,w)}),(D=>{this.handleError(D,w)}))}),(M=>{this.handleError(M,w)}))}else typeof g=="object"?(i.Contracts.throwIfNullOrUndefined(g,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(y,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(s.PropertyId.ConversationTranslator_Name,y),this.privConversation=g,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=g.config,this.handleCallback(S,x)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),x)}catch(E){this.handleError(E,typeof S=="string"?w:x)}}leaveConversationAsync(g,y){(0,n.marshalPromiseToCallbacks)((async()=>{await this.cancelSpeech(),await this.privConversation.endConversationImplAsync(),await this.privConversation.deleteConversationImplAsync(),this.dispose()})(),g,y)}sendTextMessageAsync(g,y,S){try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrWhitespace(g,this.privErrors.invalidArgs.replace("{arg}",g)),this.privConversation.sendTextMessageAsync(g,y,S)}catch(x){this.handleError(x,S)}}startTranscribingAsync(g,y){(0,n.marshalPromiseToCallbacks)((async()=>{try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privCTRecognizer===void 0&&await this.connectTranslatorRecognizer(),i.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),y),await this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(S){throw this.privIsSpeaking=!1,await this.cancelSpeech(),S}})(),g,y)}stopTranscribingAsync(g,y){(0,n.marshalPromiseToCallbacks)((async()=>{try{if(!this.privIsSpeaking){await this.cancelSpeech();return}this.privIsSpeaking=!1,await new Promise((S,x)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(S,x)})}catch{await this.cancelSpeech()}})(),g,y)}isDisposed(){return this.privIsDisposed}dispose(g,y,S){(0,n.marshalPromiseToCallbacks)((async()=>{this.isDisposed&&!this.privIsSpeaking||(await this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)})(),y,S)}async cancelSpeech(){try{this.privIsSpeaking=!1,await this.privCTRecognizer?.onCancelSpeech(),this.privCTRecognizer=void 0}catch{}}async connectTranslatorRecognizer(){try{this.privAudioConfig===void 0&&(this.privAudioConfig=s.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key],"");const g=()=>this.privConversation;this.privCTRecognizer=new d(this.privSpeechTranslationConfig,this.privAudioConfig,this,g)}catch(g){throw await this.cancelSpeech(),g}}startContinuousRecognition(){return new Promise((g,y)=>{this.privCTRecognizer.startContinuousRecognitionAsync(g,y)})}}t.ConversationTranslator=h})(W_)),W_}var mm={},C3;function Ule(){if(C3)return mm;C3=1,Object.defineProperty(mm,"__esModule",{value:!0}),mm.ConversationTranscriber=void 0;const t=Le(),e=ws(),r=Ve(),n=tt(),i=Ce();let s=class QV extends i.Recognizer{constructor(c,u){const d=c;n.Contracts.throwIfNull(d,"speechConfig"),n.Contracts.throwIfNullOrWhitespace(d.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage]),super(u,d.properties,new t.ConversationTranscriberConnectionFactory,c.tokenCredential),this.privProperties.setProperty(i.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(c,u,d){const h=c;return u.properties.mergeTo(h.properties),new QV(c,d)}get endpointId(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(c){n.Contracts.throwIfNullOrWhitespace(c,"token"),this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,c)}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(t.OutputFormatPropertyName,i.OutputFormat[i.OutputFormat.Simple])===i.OutputFormat[i.OutputFormat.Simple]?i.OutputFormat.Simple:i.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(c,u){(0,r.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),c,u)}stopTranscribingAsync(c,u){(0,r.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),c,u)}close(c,u){n.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),c,u)}async dispose(c){this.privDisposedRecognizer||(c&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(c))}createRecognizerConfig(c){return new t.RecognizerConfig(c,this.privProperties)}createServiceRecognizer(c,u,d,h){const p=d;return h.isSpeakerDiarizationEnabled=!0,new t.ConversationTranscriptionServiceRecognizer(c,u,p,h,this)}};return mm.ConversationTranscriber=s,mm}var Dl={},x3;function Ble(){if(x3)return Dl;x3=1,Object.defineProperty(Dl,"__esModule",{value:!0}),Dl.Participant=Dl.User=void 0;const t=Ce();class e{constructor(i){this.privUserId=i}get userId(){return this.privUserId}}Dl.User=e;class r{constructor(i,s,a,c,u,d,h,p){this.privId=i,this.privAvatar=s,this.privDisplayName=a,this.privIsHost=c,this.privIsMuted=u,this.privIsUsingTts=d,this.privPreferredLanguage=h,this.privVoice=p,this.privProperties=new t.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(i,s,a){return new r(i,"",i,!1,!1,!1,s,a)}}return Dl.Participant=r,Dl}var K_={},w3;function qle(){return w3||(w3=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ParticipantChangedReason=void 0,(function(e){e[e.JoinedConversation=0]="JoinedConversation",e[e.LeftConversation=1]="LeftConversation",e[e.Updated=2]="Updated"})(t.ParticipantChangedReason||(t.ParticipantChangedReason={}))})(K_)),K_}var kl={},_3;function Vle(){if(_3)return kl;_3=1,Object.defineProperty(kl,"__esModule",{value:!0}),kl.MeetingImpl=kl.Meeting=void 0;const t=Le(),e=Ve(),r=tt(),n=Ce();let i=class{constructor(){}static createMeetingAsync(c,u,d,h){if(r.Contracts.throwIfNullOrUndefined(c,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),r.Contracts.throwIfNullOrUndefined(c.region,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),r.Contracts.throwIfNull(u,"meetingId"),u.length===0)throw new Error("meetingId cannot be empty");!c.subscriptionKey&&!c.getProperty(n.PropertyId[n.PropertyId.SpeechServiceAuthorization_Token])&&r.Contracts.throwIfNullOrUndefined(c.subscriptionKey,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const p=new s(c,u);return(0,e.marshalPromiseToCallbacks)((async()=>{})(),d,h),p}};kl.Meeting=i;class s extends i{constructor(c,u){super(),this.privErrors=t.ConversationConnectionConfig.restErrors,this.onConnected=p=>{this.privIsConnected=!0;try{this.privConversationTranslator?.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,p)}catch{}},this.onDisconnected=p=>{try{this.privConversationTranslator?.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,p)}catch{}finally{this.close(!1)}},this.onCanceled=(p,g)=>{try{this.privConversationTranslator?.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,g)}catch{}},this.onParticipantUpdateCommandReceived=(p,g)=>{try{const y=this.privParticipants.getParticipant(g.id);if(y!==void 0){switch(g.key){case t.ConversationTranslatorCommandTypes.changeNickname:y.displayName=g.value;break;case t.ConversationTranslatorCommandTypes.setUseTTS:y.isUsingTts=g.value;break;case t.ConversationTranslatorCommandTypes.setProfanityFiltering:y.profanity=g.value;break;case t.ConversationTranslatorCommandTypes.setMute:y.isMuted=g.value;break;case t.ConversationTranslatorCommandTypes.setTranslateToLanguages:y.translateToLanguages=g.value;break}this.privParticipants.addOrUpdateParticipant(y),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,[this.toParticipant(y)],g.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(p,g)=>{try{this.privParticipants.participants.forEach(y=>y.isMuted=y.isHost?!1:g.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,this.toParticipants(!1),g.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(p,g)=>{try{const y=this.privParticipants.addOrUpdateParticipant(g.participant);y!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,[this.toParticipant(y)],g.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(p,g)=>{try{const y=this.privParticipants.getParticipant(g.participant.id);y!==void 0&&(this.privParticipants.deleteParticipant(g.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.LeftConversation,[this.toParticipant(y)],g.sessionId)))}catch{}},this.onTranslationReceived=(p,g)=>{try{switch(g.command){case t.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new n.ConversationTranslationEventArgs(g.payload,void 0,g.sessionId));break;case t.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new n.ConversationTranslationEventArgs(g.payload,void 0,g.sessionId));break;case t.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new n.ConversationTranslationEventArgs(g.payload,void 0,g.sessionId));break}}catch{}},this.onParticipantsListReceived=(p,g)=>{try{if(g.sessionToken!==void 0&&g.sessionToken!==null&&(this.privRoom.token=g.sessionToken),this.privParticipants.participants=[...g.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),g.sessionId)),this.me.isHost){const y=this.privConversationTranslator?.properties.getProperty(n.PropertyId.ConversationTranslator_Name);y!==void 0&&y.length>0&&y!==this.me.displayName&&this.changeNicknameAsync(y)}}catch{}},this.onConversationExpiration=(p,g)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,g)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new n.PropertyCollection,this.privManager=new t.ConversationManager,c.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])||c.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage],t.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=c.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=u,this.privConfig=c;const h=c;r.Contracts.throwIfNull(h,"speechConfig"),this.privProperties=h.properties.clone(),this.privIsConnected=!1,this.privParticipants=new t.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){return this.privParticipants.me?.isHost?!1:this.privParticipants.me?.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const c=this.meetingId,u=this.participants.map(p=>({id:p.id,preferredLanguage:p.preferredLanguage,voice:p.voice})),d={};for(const p of t.ConversationConnectionConfig.transcriptionEventKeys){const g=this.properties.getProperty(p,"");g!==""&&(d[p]=g)}return{id:c,participants:u,meetingProperties:d}}get canSend(){return this.privIsConnected&&!this.privParticipants.me?.isMuted}get canSendAsHost(){return this.privIsConnected&&this.privParticipants.me?.isHost}get authorizationToken(){return this.privToken}set authorizationToken(c){r.Contracts.throwIfNullOrWhitespace(c,"authorizationToken"),this.privToken=c}createMeetingAsync(c,u){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),u),this.privManager.createOrJoin(this.privProperties,void 0,(d=>{d||this.handleError(new Error(this.privErrors.permissionDeniedConnect),u),this.privRoom=d,this.handleCallback(c,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}startMeetingAsync(c,u){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),u),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,(()=>{this.handleCallback(c,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}addParticipantAsync(c,u,d){r.Contracts.throwIfNullOrUndefined(c,"Participant"),(0,e.marshalPromiseToCallbacks)(this.addParticipantImplAsync(c),u,d)}joinMeetingAsync(c,u,d,h,p){try{r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","conversationId")),r.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrWhitespace(d,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,c,(g=>{r.Contracts.throwIfNullOrUndefined(g,this.privErrors.permissionDeniedConnect),this.privRoom=g,this.privConfig.authorizationToken=g.cognitiveSpeechAuthToken,h&&h(g.cognitiveSpeechAuthToken)}),(g=>{this.handleError(g,p)}))}catch(g){this.handleError(g,p)}}deleteMeetingAsync(c,u){(0,e.marshalPromiseToCallbacks)(this.deleteMeetingImplAsync(),c,u)}async deleteMeetingImplAsync(){r.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),r.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endMeetingAsync(c,u){(0,e.marshalPromiseToCallbacks)(this.endMeetingImplAsync(),c,u)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),(()=>{this.handleCallback(c,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}muteAllParticipantsAsync(c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),(()=>{this.handleCallback(c,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}muteParticipantAsync(c,u,d){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),!this.me.isHost&&this.me.id!==c&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),d),this.privParticipants.getParticipantIndex(c)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(c,!0),(()=>{this.handleCallback(u,d)}),(p=>{this.handleError(p,d)}))}catch(h){this.handleError(h,d)}}removeParticipantAsync(c,u,d){try{if(r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&c.hasOwnProperty("id"))(0,e.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(c),u,d);else{r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),d);let h="";typeof c=="string"?h=c:c.hasOwnProperty("id")?h=c.id:c.hasOwnProperty("userId")&&(h=c.userId),r.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(g=>g.id===h)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(h),(()=>{this.handleCallback(u,d)}),(g=>{this.handleError(g,d)}))}}catch(h){this.handleError(h,d)}}unlockMeetingAsync(c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),(()=>{this.handleCallback(c,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}unmuteAllParticipantsAsync(c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),(()=>{this.handleCallback(c,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}unmuteParticipantAsync(c,u,d){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),!this.me.isHost&&this.me.id!==c&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),d),this.privParticipants.getParticipantIndex(c)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(c,!1),(()=>{this.handleCallback(u,d)}),(p=>{this.handleError(p,d)}))}catch(h){this.handleError(h,d)}}sendTextMessageAsync(c,u,d){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","message")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),c.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(c),(()=>{this.handleCallback(u,d)}),(h=>{this.handleError(h,d)}))}catch(h){this.handleError(h,d)}}setTranslatedLanguagesAsync(c,u,d){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfArrayEmptyOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","languages")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(c),(()=>{this.handleCallback(u,d)}),(h=>{this.handleError(h,d)}))}catch(h){this.handleError(h,d)}}changeNicknameAsync(c,u,d){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(c),(()=>{this.handleCallback(u,d)}),(h=>{this.handleError(h,d)}))}catch(h){this.handleError(h,d)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(c){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await c.enforceAudioGating(),this.privTranscriberRecognizer=c,this.privTranscriberRecognizer.meeting=this}getKeepAlive(){const c=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:c,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(c){if(this.privParticipants.addOrUpdateParticipant(c)!==void 0&&this.privTranscriberRecognizer){const d=this.meetingInfo;return d.participants=[c],this.privTranscriberRecognizer.pushMeetingEvent(d,"join")}}removeParticipantImplAsync(c){this.privParticipants.deleteParticipant(c.id);const u=this.meetingInfo;return u.participants=[c],this.privTranscriberRecognizer.pushMeetingEvent(u,"leave")}async close(c){try{this.privIsConnected=!1,await this.privConversationRecognizer?.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(u){throw u}c&&this.dispose()}handleCallback(c,u){if(c){try{c()}catch(d){u&&u(d)}c=void 0}}handleError(c,u){if(u)if(c instanceof Error){const d=c;u(d.name+": "+d.message)}else u(c)}toParticipants(c){const u=this.privParticipants.participants.map(d=>this.toParticipant(d));return c?u:u.filter(d=>d.isHost===!1)}toParticipant(c){return new n.Participant(c.id,c.avatar,c.displayName,c.isHost,c.isMuted,c.isUsingTts,c.preferredLanguage,c.voice)}getMuteAllCommand(c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:c})}getMuteCommand(c,u){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(c,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMute,participantId:c,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:u})}getLockCommand(c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:c})}getEjectCommand(c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(c,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.ejectParticipant,participantId:c,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:c})}getChangeNicknameCommand(c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(c,"nickname"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.changeNickname,nickname:c,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:c})}getMessageCommand(c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),r.Contracts.throwIfNullOrWhitespace(c,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:c,type:t.ConversationTranslatorMessageTypes.instantMessage})}}return kl.MeetingImpl=s,kl}var vm={},E3;function Fle(){if(E3)return vm;E3=1,Object.defineProperty(vm,"__esModule",{value:!0}),vm.MeetingTranscriptionCanceledEventArgs=void 0;const t=Hg();class e extends t.CancellationEventArgsBase{}return vm.MeetingTranscriptionCanceledEventArgs=e,vm}var gm={},A3;function Hle(){if(A3)return gm;A3=1,Object.defineProperty(gm,"__esModule",{value:!0}),gm.MeetingTranscriber=void 0;const t=Le(),e=Ve(),r=tt(),n=Ce(),i=w2();let s=class{constructor(c){this.privAudioConfig=c,this.privProperties=new n.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return n.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(c){r.Contracts.throwIfNullOrWhitespace(c,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,c)}joinMeetingAsync(c,u,d){const h=c;r.Contracts.throwIfNullOrUndefined(i.MeetingImpl,"Meeting"),this.privRecognizer=new t.TranscriberRecognizer(c.config,this.privAudioConfig),r.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),(0,e.marshalPromiseToCallbacks)(h.connectTranscriberRecognizer(this.privRecognizer),u,d)}startTranscribingAsync(c,u){this.privRecognizer.startContinuousRecognitionAsync(c,u)}stopTranscribingAsync(c,u){this.privRecognizer.stopContinuousRecognitionAsync(c,u)}leaveMeetingAsync(c,u){this.privRecognizer.disconnectCallbacks(),(0,e.marshalPromiseToCallbacks)((async()=>{})(),c,u)}close(c,u){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,e.marshalPromiseToCallbacks)(this.dispose(!0),c,u)}async dispose(c){this.privDisposedRecognizer||(this.privRecognizer&&(await this.privRecognizer.close(),this.privRecognizer=void 0),c&&(this.privDisposedRecognizer=!0))}};return gm.MeetingTranscriber=s,gm}var ym={},T3;function Wle(){if(T3)return ym;T3=1,Object.defineProperty(ym,"__esModule",{value:!0}),ym.ConversationTranscriptionResult=void 0;const t=Ce();let e=class extends t.RecognitionResult{constructor(n,i,s,a,c,u,d,h,p,g,y){super(n,i,s,a,c,u,d,p,g,y),this.privSpeakerId=h}get speakerId(){return this.privSpeakerId}};return ym.ConversationTranscriptionResult=e,ym}var R3;function w2(){return R3||(R3=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriptionResult=t.MeetingTranscriber=t.MeetingTranscriptionCanceledEventArgs=t.MeetingImpl=t.Meeting=t.ParticipantChangedReason=t.User=t.Participant=t.ConversationTranscriber=t.ConversationTranslator=t.ConversationTranslationResult=t.ConversationTranslationEventArgs=t.ConversationTranslationCanceledEventArgs=t.ConversationParticipantsChangedEventArgs=t.ConversationExpirationEventArgs=t.ConversationCommon=t.ConversationImpl=t.Conversation=void 0;var e=$V();Object.defineProperty(t,"Conversation",{enumerable:!0,get:function(){return e.Conversation}}),Object.defineProperty(t,"ConversationImpl",{enumerable:!0,get:function(){return e.ConversationImpl}});var r=Nle();Object.defineProperty(t,"ConversationCommon",{enumerable:!0,get:function(){return r.ConversationCommon}});var n=Ole();Object.defineProperty(t,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return n.ConversationExpirationEventArgs}});var i=jle();Object.defineProperty(t,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return i.ConversationParticipantsChangedEventArgs}});var s=Mle();Object.defineProperty(t,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return s.ConversationTranslationCanceledEventArgs}});var a=Dle();Object.defineProperty(t,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return a.ConversationTranslationEventArgs}});var c=kle();Object.defineProperty(t,"ConversationTranslationResult",{enumerable:!0,get:function(){return c.ConversationTranslationResult}});var u=zle();Object.defineProperty(t,"ConversationTranslator",{enumerable:!0,get:function(){return u.ConversationTranslator}});var d=Ule();Object.defineProperty(t,"ConversationTranscriber",{enumerable:!0,get:function(){return d.ConversationTranscriber}});var h=Ble();Object.defineProperty(t,"Participant",{enumerable:!0,get:function(){return h.Participant}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return h.User}});var p=qle();Object.defineProperty(t,"ParticipantChangedReason",{enumerable:!0,get:function(){return p.ParticipantChangedReason}});var g=Vle();Object.defineProperty(t,"Meeting",{enumerable:!0,get:function(){return g.Meeting}}),Object.defineProperty(t,"MeetingImpl",{enumerable:!0,get:function(){return g.MeetingImpl}});var y=Fle();Object.defineProperty(t,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return y.MeetingTranscriptionCanceledEventArgs}});var S=Hle();Object.defineProperty(t,"MeetingTranscriber",{enumerable:!0,get:function(){return S.MeetingTranscriber}});var x=Wle();Object.defineProperty(t,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return x.ConversationTranscriptionResult}})})(H_)),H_}var Ll={},P3;function _2(){if(P3)return Ll;P3=1,Object.defineProperty(Ll,"__esModule",{value:!0}),Ll.SynthesisRequest=Ll.Synthesizer=void 0;const t=Le(),e=Ve(),r=tt(),n=Ce();let i=class JV{constructor(c){const u=c;r.Contracts.throwIfNull(u,"speechConfig"),this.privProperties=u.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new e.Queue,this.tokenCredential=c.tokenCredential}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(c){r.Contracts.throwIfNullOrWhitespace(c,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,c)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===t.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(c){const u={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-AvaMultilingualNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let d=this.properties.getProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),h=this.properties.getProperty(n.PropertyId.SpeechServiceConnection_SynthVoice,""),p=JV.XMLEncode(c);return this.autoDetectSourceLanguage?d="en-US":h=h||u[d],h&&(p=`<voice name='${h}'>${p}</voice>`),p=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${d}'>${p}</speak>`,p}async dispose(c){this.privDisposed||(c&&this.privAdapter&&await this.privAdapter.dispose(),this.privDisposed=!0)}async adapterSpeak(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const c=await this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(c.text,c.isSSML,c.requestId,c.cb,c.err,c.dataStream)}}createSynthesizerConfig(c){return new t.SynthesizerConfig(c,this.privProperties)}implCommonSynthesizeSetup(){let c=typeof window<"u"?"Browser":"Node",u="unknown",d="unknown";typeof navigator<"u"&&(c=c+"/"+navigator.platform,u=navigator.userAgent,d=navigator.appVersion);const h=this.createSynthesizerConfig(new t.SpeechServiceConfig(new t.Context(new t.OS(c,u,d)))),p=this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Key,void 0),g=p&&p!==""?new t.CognitiveSubscriptionKeyAuthentication(p):this.tokenCredential?new t.CognitiveTokenAuthentication(async()=>{try{return(await this.tokenCredential.getToken("https://cognitiveservices.azure.com/.default"))?.token??""}catch(y){throw y}},async()=>{try{return(await this.tokenCredential.getToken("https://cognitiveservices.azure.com/.default"))?.token??""}catch(y){throw y}}):new t.CognitiveTokenAuthentication(()=>{const y=this.privProperties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(y)},()=>{const y=this.privProperties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(y)});this.privAdapter=this.createSynthesisAdapter(g,this.privConnectionFactory,h),this.privRestAdapter=this.createRestSynthesisAdapter(g,h)}static XMLEncode(c){return c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};Ll.Synthesizer=i;class s{constructor(c,u,d,h,p,g){this.requestId=c,this.text=u,this.isSSML=d,this.cb=h,this.err=p,this.dataStream=g}}return Ll.SynthesisRequest=s,Ll}var bm={},I3;function Kle(){if(I3)return bm;I3=1,Object.defineProperty(bm,"__esModule",{value:!0}),bm.SpeechSynthesizer=void 0;const t=Le(),e=Ve(),r=PV(),n=Fg(),i=xh(),s=tt(),a=Ce(),c=_2();let u=class ZV extends a.Synthesizer{constructor(h,p){super(h),p!==null&&(p===void 0?this.audioConfig=typeof window>"u"?void 0:a.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=p),this.privConnectionFactory=new t.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(h,p,g){const y=h;return p.properties.mergeTo(y.properties),new ZV(h,g)}speakTextAsync(h,p,g,y){this.speakImpl(h,!1,p,g,y)}speakSsmlAsync(h,p,g,y){this.speakImpl(h,!0,p,g,y)}async getVoicesAsync(h=""){return this.getVoices(h)}close(h,p){s.Contracts.throwIfDisposed(this.privDisposed),(0,e.marshalPromiseToCallbacks)(this.dispose(!0),h,p)}get internalData(){return this.privAdapter}createSynthesisAdapter(h,p,g){return new t.SpeechSynthesisAdapter(h,p,g,this,this.audioConfig)}createRestSynthesisAdapter(h,p){return new t.SynthesisRestAdapter(p,h)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(a.SpeechSynthesisOutputFormat[this.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(h,p,g,y,S){try{s.Contracts.throwIfDisposed(this.privDisposed);const x=(0,e.createNoDashGuid)();let w;S instanceof a.PushAudioOutputStreamCallback?w=new i.PushAudioOutputStreamImpl(S):S instanceof a.PullAudioOutputStream?w=S:S!==void 0?w=new r.AudioFileWriter(S):w=void 0,this.synthesisRequestQueue.enqueue(new c.SynthesisRequest(x,h,p,E=>{if(this.privSynthesizing=!1,g)try{g(E)}catch(R){y&&y(R)}g=void 0,this.adapterSpeak().catch(()=>{})},E=>{y&&y(E)},w)),this.adapterSpeak().catch(()=>{})}catch(x){if(y)if(x instanceof Error){const w=x;y(w.name+": "+w.message)}else y(x);this.dispose(!0).catch(()=>{})}}async getVoices(h){const p=(0,e.createNoDashGuid)(),g=await this.privRestAdapter.getVoicesList(p);if(g.ok&&Array.isArray(g.json)){let y=g.json;return h&&h.length>0&&(y=y.filter(S=>!!S.Locale&&S.Locale.toLowerCase()===h.toLowerCase())),new a.SynthesisVoicesResult(p,y,void 0)}else return new a.SynthesisVoicesResult(p,void 0,`Error: ${g.status}: ${g.statusText}`)}};return bm.SpeechSynthesizer=u,bm}var Sm={},N3;function Gle(){if(N3)return Sm;N3=1,Object.defineProperty(Sm,"__esModule",{value:!0}),Sm.SynthesisResult=void 0;let t=class{constructor(r,n,i,s){this.privResultId=r,this.privReason=n,this.privErrorDetails=i,this.privProperties=s}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}};return Sm.SynthesisResult=t,Sm}var Cm={},O3;function $le(){if(O3)return Cm;O3=1,Object.defineProperty(Cm,"__esModule",{value:!0}),Cm.SpeechSynthesisResult=void 0;const t=Ce();let e=class extends t.SynthesisResult{constructor(n,i,s,a,c,u){super(n,i,a,c),this.privAudioData=s,this.privAudioDuration=u}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}};return Cm.SpeechSynthesisResult=e,Cm}var xm={},j3;function Yle(){if(j3)return xm;j3=1,Object.defineProperty(xm,"__esModule",{value:!0}),xm.SpeechSynthesisEventArgs=void 0;let t=class{constructor(r){this.privResult=r}get result(){return this.privResult}};return xm.SpeechSynthesisEventArgs=t,xm}var wm={},M3;function Xle(){if(M3)return wm;M3=1,Object.defineProperty(wm,"__esModule",{value:!0}),wm.SpeechSynthesisWordBoundaryEventArgs=void 0;let t=class{constructor(r,n,i,s,a,c){this.privAudioOffset=r,this.privDuration=n,this.privText=i,this.privWordLength=s,this.privTextOffset=a,this.privBoundaryType=c}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}};return wm.SpeechSynthesisWordBoundaryEventArgs=t,wm}var _m={},D3;function Qle(){if(D3)return _m;D3=1,Object.defineProperty(_m,"__esModule",{value:!0}),_m.SpeechSynthesisBookmarkEventArgs=void 0;let t=class{constructor(r,n){this.privAudioOffset=r,this.privText=n}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}};return _m.SpeechSynthesisBookmarkEventArgs=t,_m}var Em={},k3;function Jle(){if(k3)return Em;k3=1,Object.defineProperty(Em,"__esModule",{value:!0}),Em.SpeechSynthesisVisemeEventArgs=void 0;let t=class{constructor(r,n,i){this.privAudioOffset=r,this.privVisemeId=n,this.privAnimation=i}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}};return Em.SpeechSynthesisVisemeEventArgs=t,Em}var G_={},L3;function Zle(){return L3||(L3=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisBoundaryType=void 0,(function(e){e.Word="WordBoundary",e.Punctuation="PunctuationBoundary",e.Sentence="SentenceBoundary"})(t.SpeechSynthesisBoundaryType||(t.SpeechSynthesisBoundaryType={}))})(G_)),G_}var Am={},z3;function eue(){if(z3)return Am;z3=1,Object.defineProperty(Am,"__esModule",{value:!0}),Am.SynthesisVoicesResult=void 0;const t=Ce();let e=class extends t.SynthesisResult{constructor(n,i,s){if(Array.isArray(i)){super(n,t.ResultReason.VoicesListRetrieved,void 0,new t.PropertyCollection),this.privVoices=[];for(const a of i)this.privVoices.push(new t.VoiceInfo(a))}else super(n,t.ResultReason.Canceled,s||"Error information unavailable",new t.PropertyCollection)}get voices(){return this.privVoices}};return Am.SynthesisVoicesResult=e,Am}var $_={},U3;function tue(){return U3||(U3=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceInfo=t.SynthesisVoiceType=t.SynthesisVoiceGender=void 0;var e;(function(a){a[a.Unknown=0]="Unknown",a[a.Female=1]="Female",a[a.Male=2]="Male",a[a.Neutral=3]="Neutral"})(e=t.SynthesisVoiceGender||(t.SynthesisVoiceGender={}));var r;(function(a){a[a.Unknown=0]="Unknown",a[a.OnlineNeural=1]="OnlineNeural",a[a.OnlineStandard=2]="OnlineStandard",a[a.OfflineNeural=3]="OfflineNeural",a[a.OfflineStandard=4]="OfflineStandard",a[a.OnlineNeuralHD=5]="OnlineNeuralHD"})(r=t.SynthesisVoiceType||(t.SynthesisVoiceType={}));const n={[e[e.Neutral]]:e.Neutral,[e[e.Male]]:e.Male,[e[e.Female]]:e.Female},i={Neural:r.OnlineNeural,NeuralHD:r.OnlineNeuralHD};class s{constructor(c){if(this.privStyleList=[],c){if(this.privName=c.Name,this.privLocale=c.Locale,this.privShortName=c.ShortName,this.privLocaleName=c.LocaleName,this.privDisplayName=c.DisplayName,this.privLocalName=c.LocalName,this.privVoiceType=i[c.VoiceType]||r.Unknown,this.privGender=n[c.Gender]||e.Unknown,c.StyleList&&Array.isArray(c.StyleList))for(const u of c.StyleList)this.privStyleList.push(u);this.privSampleRateHertz=c.SampleRateHertz,this.privStatus=c.Status,c.ExtendedPropertyMap&&(this.privExtendedPropertyMap=c.ExtendedPropertyMap),this.privWordsPerMinute=c.WordsPerMinute,Array.isArray(c.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...c.SecondaryLocaleList]),Array.isArray(c.RolePlayList)&&(this.privRolePlayList=[...c.RolePlayList]),c.VoiceTag&&(this.privVoiceTag=c.VoiceTag)}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}get voiceTag(){return this.privVoiceTag}}t.VoiceInfo=s})($_)),$_}var Tm={},B3;function rue(){if(B3)return Tm;B3=1,Object.defineProperty(Tm,"__esModule",{value:!0}),Tm.SpeakerAudioDestination=void 0;const t=Ve(),e=xh(),r=Mu(),n=1800,i={[r.AudioFormatTag.PCM]:"audio/wav",[r.AudioFormatTag.MuLaw]:"audio/x-wav",[r.AudioFormatTag.MP3]:"audio/mpeg",[r.AudioFormatTag.OGG_OPUS]:"audio/ogg",[r.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[r.AudioFormatTag.ALaw]:"audio/x-wav",[r.AudioFormatTag.FLAC]:"audio/flac",[r.AudioFormatTag.AMR_WB]:"audio/amr-wb",[r.AudioFormatTag.G722]:"audio/G722"};let s=class{constructor(c){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=c||(0,t.createNoDashGuid)(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(c,u,d){this.privAudioBuffer!==void 0?(this.privAudioBuffer.push(c),this.updateSourceBuffer().then(()=>{u&&u()},h=>{d&&d(h)})):this.privAudioOutputStream!==void 0&&(this.privAudioOutputStream.write(c),this.privBytesReceived+=c.byteLength)}close(c,u){if(this.privIsClosed=!0,this.privSourceBuffer!==void 0)this.handleSourceBufferUpdateEnd().then(()=>{c&&c()},d=>{u&&u(d)});else if(this.privAudioOutputStream!==void 0&&typeof window<"u")if((this.privFormat.formatTag===r.AudioFormatTag.PCM||this.privFormat.formatTag===r.AudioFormatTag.MuLaw||this.privFormat.formatTag===r.AudioFormatTag.ALaw)&&this.privFormat.hasHeader===!1)console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{let d=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(d).then(()=>{d=this.privFormat.addHeader(d);const h=new Blob([d],{type:i[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(h),this.notifyPlayback().then(()=>{c&&c()},p=>{u&&u(p)})},h=>{u&&u(h)})}else this.onAudioEnd&&this.onAudioEnd(this)}set format(c){if(typeof AudioContext<"u"||typeof window<"u"&&typeof window.webkitAudioContext<"u"){this.privFormat=c;const u=i[this.privFormat.formatTag];u===void 0?console.warn(`Unknown mimeType for format ${r.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):typeof MediaSource<"u"&&MediaSource.isTypeSupported(u)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=n,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(u),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(d=>{t.Events.instance.onEvent(new t.BackgroundEvent(d))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(d=>{t.Events.instance.onEvent(new t.BackgroundEvent(d))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(d=>{t.Events.instance.onEvent(new t.BackgroundEvent(d))})):(console.warn(`Format ${r.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new e.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){return this.privAudio?.volume??-1}set volume(c){this.privAudio&&(this.privAudio.volume=c)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return this.privAudio!==void 0?this.privAudio.currentTime:-1}pause(){!this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.pause(),this.privIsPaused=!0)}resume(c,u){this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.play().then(()=>{c&&c()},d=>{u&&u(d)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}async updateSourceBuffer(){if(this.privAudioBuffer!==void 0&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const c=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(c)}catch{this.privAudioBuffer.unshift(c),console.log("buffer filled, pausing addition of binaries until space is made");return}await this.notifyPlayback()}else this.canEndStream()&&await this.handleSourceBufferUpdateEnd()}async handleSourceBufferUpdateEnd(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),await this.notifyPlayback())}async notifyPlayback(){!this.privPlaybackStarted&&this.privAudio!==void 0&&(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||await this.privAudio.play())}canEndStream(){return this.isClosed&&this.privSourceBuffer!==void 0&&this.privAudioBuffer.length===0&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&this.privMediaSource.readyState==="open"}sourceBufferAvailable(){return this.privSourceBuffer!==void 0&&!this.privSourceBuffer.updating}};return Tm.SpeakerAudioDestination=s,Tm}var Rm={},q3;function nue(){if(q3)return Rm;q3=1,Object.defineProperty(Rm,"__esModule",{value:!0}),Rm.ConversationTranscriptionCanceledEventArgs=void 0;const t=Hg();let e=class extends t.CancellationEventArgsBase{};return Rm.ConversationTranscriptionCanceledEventArgs=e,Rm}var Pm={},V3;function iue(){if(V3)return Pm;V3=1,Object.defineProperty(Pm,"__esModule",{value:!0}),Pm.MeetingTranscriptionCanceledEventArgs=void 0;const t=Hg();let e=class extends t.CancellationEventArgsBase{};return Pm.MeetingTranscriptionCanceledEventArgs=e,Pm}var Y_={},F3;function sue(){return F3||(F3=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentGradingSystem=void 0,(function(e){e[e.FivePoint=1]="FivePoint",e[e.HundredMark=2]="HundredMark"})(t.PronunciationAssessmentGradingSystem||(t.PronunciationAssessmentGradingSystem={}))})(Y_)),Y_}var X_={},H3;function aue(){return H3||(H3=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentGranularity=void 0,(function(e){e[e.Phoneme=1]="Phoneme",e[e.Word=2]="Word",e[e.FullText=3]="FullText"})(t.PronunciationAssessmentGranularity||(t.PronunciationAssessmentGranularity={}))})(X_)),X_}var Im={},W3;function oue(){if(W3)return Im;W3=1,Object.defineProperty(Im,"__esModule",{value:!0}),Im.PronunciationAssessmentConfig=void 0;const t=tt(),e=Ce();let r=class eF{constructor(i,s=e.PronunciationAssessmentGradingSystem.FivePoint,a=e.PronunciationAssessmentGranularity.Phoneme,c=!1){t.Contracts.throwIfNullOrUndefined(i,"referenceText"),this.privProperties=new e.PropertyCollection,this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_ReferenceText,i),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_GradingSystem,e.PronunciationAssessmentGradingSystem[s]),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_Granularity,e.PronunciationAssessmentGranularity[a]),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,String(c))}static fromJSON(i){t.Contracts.throwIfNullOrUndefined(i,"json");const s=new eF("");return s.privProperties=new e.PropertyCollection,s.properties.setProperty(e.PropertyId.PronunciationAssessment_Json,i),s}toJSON(){return this.updateJson(),this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Params)}applyTo(i){this.updateJson();const s=i.internalData;s.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(e.PropertyId.PronunciationAssessment_Params),s.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(e.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(i){t.Contracts.throwIfNullOrWhitespace(i,"referenceText"),this.properties.setProperty(e.PropertyId.PronunciationAssessment_ReferenceText,i)}set phonemeAlphabet(i){t.Contracts.throwIfNullOrWhitespace(i,"phonemeAlphabet"),this.privPhonemeAlphabet=i}set enableMiscue(i){const s=i?"true":"false";this.properties.setProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,s)}get enableMiscue(){return this.properties.getProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()==="true"}set nbestPhonemeCount(i){this.privNBestPhonemeCount=i}set enableProsodyAssessment(i){this.privEnableProsodyAssessment=i}get properties(){return this.privProperties}updateJson(){const i=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Json,"{}"),s=JSON.parse(i),a=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_ReferenceText);a&&(s.referenceText=a);const c=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_GradingSystem);c&&(s.gradingSystem=c);const u=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Granularity);u&&(s.granularity=u),this.privPhonemeAlphabet&&(s.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(s.nbestPhonemeCount=this.privNBestPhonemeCount),s.enableProsodyAssessment=this.privEnableProsodyAssessment,s.dimension="Comprehensive",this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_EnableMiscue)&&(s.enableMiscue=this.enableMiscue),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_Params,JSON.stringify(s))}};return Im.PronunciationAssessmentConfig=r,Im}var Nm={},K3;function cue(){if(K3)return Nm;K3=1,Object.defineProperty(Nm,"__esModule",{value:!0}),Nm.PronunciationAssessmentResult=void 0;const t=tt(),e=Ce();let r=class tF{constructor(i){const s=JSON.parse(i);t.Contracts.throwIfNullOrUndefined(s.NBest[0],"NBest"),this.privPronJson=s.NBest[0]}static fromResult(i){t.Contracts.throwIfNullOrUndefined(i,"result");const s=i.properties.getProperty(e.PropertyId.SpeechServiceResponse_JsonResult);return t.Contracts.throwIfNullOrUndefined(s,"json"),new tF(s)}get detailResult(){return this.privPronJson}get accuracyScore(){return this.detailResult.PronunciationAssessment?.AccuracyScore}get pronunciationScore(){return this.detailResult.PronunciationAssessment?.PronScore}get completenessScore(){return this.detailResult.PronunciationAssessment?.CompletenessScore}get fluencyScore(){return this.detailResult.PronunciationAssessment?.FluencyScore}get prosodyScore(){return this.detailResult.PronunciationAssessment?.ProsodyScore}};return Nm.PronunciationAssessmentResult=r,Nm}var Om={},G3;function lue(){if(G3)return Om;G3=1,Object.defineProperty(Om,"__esModule",{value:!0}),Om.AvatarConfig=void 0;const t=tt(),e=Ce();let r=class{constructor(i,s,a){this.privCustomized=!1,this.privUseBuiltInVoice=!1,t.Contracts.throwIfNullOrWhitespace(i,"character"),this.character=i,this.style=s,a===void 0&&(a=new e.AvatarVideoFormat),this.videoFormat=a}get customized(){return this.privCustomized}set customized(i){this.privCustomized=i}get useBuiltInVoice(){return this.privUseBuiltInVoice}set useBuiltInVoice(i){this.privUseBuiltInVoice=i}get photoAvatarBaseModel(){return this.privPhotoAvatarBaseModel}set photoAvatarBaseModel(i){this.privPhotoAvatarBaseModel=i}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(i){this.privBackgroundColor=i}get backgroundImage(){return this.privBackgroundImage}set backgroundImage(i){this.privBackgroundImage=i}get remoteIceServers(){return this.privRemoteIceServers}set remoteIceServers(i){this.privRemoteIceServers=i}};return Om.AvatarConfig=r,Om}var Q_={},$3;function uue(){return $3||($3=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarEventArgs=t.AvatarEventTypes=void 0,(function(r){r.SwitchedToSpeaking="SwitchedToSpeaking",r.SwitchedToIdle="SwitchedToIdle",r.SessionClosed="SessionClosed"})(t.AvatarEventTypes||(t.AvatarEventTypes={}));class e{constructor(n,i){this.privOffset=n,this.privDescription=i}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}t.AvatarEventArgs=e})(Q_)),Q_}var jm={},Mm={},Y3;function rF(){if(Y3)return Mm;Y3=1,Object.defineProperty(Mm,"__esModule",{value:!0}),Mm.SpeechSynthesisConnectionFactory=void 0;const t=$n(),e=Ce(),r=yo(),n=Le(),i=Si(),s=Wc();let a=class{constructor(){this.synthesisUri="/tts/cognitiveservices/websocket/v1"}async create(u,d,h){let p=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const g=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,void 0),y=r.ConnectionFactoryBase.getHostSuffix(g),S=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),x=S===void 0?"tts":"voice",w=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+g+"."+x+".speech"+y),E={},R={};if(d.token!==void 0&&d.token!==""&&(R[d.headerName]=d.token),R[i.HeaderNames.ConnectionId]=h,S!==void 0&&S!==""&&(!p||p.search(s.QueryParameterNames.CustomVoiceDeploymentId)===-1)&&(E[s.QueryParameterNames.CustomVoiceDeploymentId]=S),u.avatarEnabled&&(!p||p.search(s.QueryParameterNames.EnableAvatar)===-1)&&(E[s.QueryParameterNames.EnableAvatar]="true"),p){const M=new URL(p),D=M.pathname;(D===""||D==="/")&&(M.pathname=this.synthesisUri,p=await r.ConnectionFactoryBase.getRedirectUrlFromEndpoint(M.toString()))}p||(p=w+this.synthesisUri),u.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,p);const T=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(p,E,R,new n.WebsocketMessageFormatter,t.ProxyInfo.fromParameters(u.parameters),T,h)}};return Mm.SpeechSynthesisConnectionFactory=a,Mm}var X3;function due(){if(X3)return jm;X3=1,Object.defineProperty(jm,"__esModule",{value:!0}),jm.AvatarSynthesizer=void 0;const t=rF(),e=Le(),r=Ve(),n=Fg(),i=Ce(),s=tt(),a=_2();let c=class extends i.Synthesizer{constructor(d,h){super(d),s.Contracts.throwIfNullOrUndefined(h,"avatarConfig"),this.privConnectionFactory=new t.SpeechSynthesisConnectionFactory,this.privAvatarConfig=h,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(i.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}async startAvatarAsync(d){s.Contracts.throwIfNullOrUndefined(d,"peerConnection"),this.privIceServers=d.getConfiguration().iceServers,s.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const h=new r.Deferred;d.onicegatheringstatechange=()=>{r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering state: "+d.iceGatheringState,r.EventType.Debug)),d.iceGatheringState==="complete"&&(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering complete.",r.EventType.Info)),h.resolve())},d.onicecandidate=x=>{x.candidate?r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice candidate: "+x.candidate.candidate,r.EventType.Debug)):(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice candidate: complete",r.EventType.Debug)),h.resolve())},setTimeout(()=>{d.iceGatheringState!=="complete"&&(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering timeout.",r.EventType.Warning)),h.resolve())},2e3);const p=await d.createOffer();await d.setLocalDescription(p),await h.promise,r.Events.instance.onEvent(new r.PlatformEvent("peer connection: got local SDP.",r.EventType.Info)),this.privProperties.setProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(d.localDescription));const g=await this.speak("",!1);if(g.reason!==i.ResultReason.SynthesizingAudioCompleted)return new i.SynthesisResult(g.resultId,g.reason,g.errorDetails,g.properties);const y=atob(g.properties.getProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP)),S=new RTCSessionDescription(JSON.parse(y));return await d.setRemoteDescription(S),new i.SynthesisResult(g.resultId,g.reason,void 0,g.properties)}async speakTextAsync(d){const h=await this.speak(d,!1);return new i.SynthesisResult(h.resultId,h.reason,h.errorDetails,h.properties)}async speakSsmlAsync(d){const h=await this.speak(d,!0);return new i.SynthesisResult(h.resultId,h.reason,h.errorDetails,h.properties)}async stopSpeakingAsync(){for(;this.synthesisRequestQueue.length()>0;)(await this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()}async stopAvatarAsync(){return s.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)}async close(){if(!this.privDisposed)return this.dispose(!0)}get iceServers(){return this.privIceServers}createSynthesisAdapter(d,h,p){return new e.AvatarSynthesisAdapter(d,h,p,this,this.privAvatarConfig)}createRestSynthesisAdapter(d,h){}createSynthesizerConfig(d){const h=super.createSynthesizerConfig(d);return h.avatarEnabled=!0,h}async speak(d,h){const p=(0,r.createNoDashGuid)(),g=new r.Deferred;return this.synthesisRequestQueue.enqueue(new a.SynthesisRequest(p,d,h,y=>{g.resolve(y),this.privSynthesizing=!1,this.adapterSpeak()},y=>{g.reject(y),this.privSynthesizing=!1})),this.adapterSpeak(),g.promise}};return jm.AvatarSynthesizer=c,jm}var zl={},Q3;function hue(){if(Q3)return zl;Q3=1,Object.defineProperty(zl,"__esModule",{value:!0}),zl.AvatarVideoFormat=zl.Coordinate=void 0;class t{constructor(n,i){this.x=n,this.y=i}}zl.Coordinate=t;let e=class{constructor(n="H264",i=2e6,s=1920,a=1080){this.codec=n,this.bitrate=i,this.width=s,this.height=a}setCropRange(n,i){this.cropRange={bottomRight:i,topLeft:n}}};return zl.AvatarVideoFormat=e,zl}var Dm={},J3;function fue(){if(J3)return Dm;J3=1,Object.defineProperty(Dm,"__esModule",{value:!0}),Dm.AvatarWebRTCConnectionResult=void 0;const t=Ce();let e=class extends t.SynthesisResult{constructor(n,i,s,a,c){super(i,s,a,c),this.privSDPAnswer=n}get SDPAnswer(){return this.privSDPAnswer}};return Dm.AvatarWebRTCConnectionResult=e,Dm}var km={},Z3;function pue(){if(Z3)return km;Z3=1,Object.defineProperty(km,"__esModule",{value:!0}),km.Diagnostics=void 0;const t=$n(),e=Ve();let r=class{static SetLoggingLevel(i){this.privListener=new t.ConsoleLoggingListener(i),e.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(i){if(typeof window>"u")this.privListener&&(this.privListener.logPath=i);else throw new Error("File system logging not available in browser.")}static set onLogOutput(i){this.privListener&&(this.privListener.logCallback=i)}};return km.Diagnostics=r,r.privListener=void 0,km}var e5;function Ce(){return e5||(e5=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CustomCommandsConfig=t.BotFrameworkConfig=t.DialogServiceConfig=t.PhraseListGrammar=t.Connection=t.ServiceEventArgs=t.ConnectionEventArgs=t.CancellationErrorCode=t.CancellationDetails=t.CancellationDetailsBase=t.TranslationRecognitionCanceledEventArgs=t.NoMatchDetails=t.NoMatchReason=t.Translations=t.TranslationRecognizer=t.SpeechRecognizer=t.Recognizer=t.PropertyId=t.PropertyCollection=t.SpeechTranslationConfigImpl=t.SpeechTranslationConfig=t.SpeechConfigImpl=t.SpeechConfig=t.ResultReason=t.TranslationSynthesisResult=t.TranslationRecognitionResult=t.TranslationSynthesisEventArgs=t.TranslationRecognitionEventArgs=t.SpeechRecognitionCanceledEventArgs=t.MeetingTranscriptionEventArgs=t.ConversationTranscriptionEventArgs=t.SpeechRecognitionEventArgs=t.SpeechRecognitionResult=t.RecognitionResult=t.OutputFormat=t.RecognitionEventArgs=t.SessionEventArgs=t.KeywordRecognitionModel=t.PushAudioOutputStreamCallback=t.PullAudioInputStreamCallback=t.CancellationReason=t.PushAudioOutputStream=t.PullAudioOutputStream=t.AudioOutputStream=t.PushAudioInputStream=t.PullAudioInputStream=t.AudioInputStream=t.AudioFormatTag=t.AudioStreamFormat=t.AudioConfig=void 0,t.AvatarSynthesizer=t.AvatarEventArgs=t.AvatarConfig=t.LanguageIdMode=t.PronunciationAssessmentResult=t.PronunciationAssessmentConfig=t.PronunciationAssessmentGranularity=t.PronunciationAssessmentGradingSystem=t.MeetingTranscriptionCanceledEventArgs=t.ConversationTranscriptionCanceledEventArgs=t.SpeakerAudioDestination=t.VoiceInfo=t.SynthesisVoiceType=t.SynthesisVoiceGender=t.SynthesisVoicesResult=t.SpeechSynthesisBoundaryType=t.SpeechSynthesisVisemeEventArgs=t.SpeechSynthesisBookmarkEventArgs=t.SpeechSynthesisWordBoundaryEventArgs=t.SpeechSynthesisEventArgs=t.SpeechSynthesisResult=t.SynthesisResult=t.SpeechSynthesizer=t.SpeechSynthesisOutputFormat=t.Synthesizer=t.User=t.ParticipantChangedReason=t.Participant=t.MeetingTranscriber=t.Meeting=t.ConversationTranscriptionResult=t.ConversationTranscriber=t.ConversationTranslator=t.ConversationTranslationResult=t.ConversationTranslationEventArgs=t.ConversationTranslationCanceledEventArgs=t.ConversationParticipantsChangedEventArgs=t.ConversationExpirationEventArgs=t.Conversation=t.SourceLanguageConfig=t.AutoDetectSourceLanguageResult=t.AutoDetectSourceLanguageConfig=t.ConnectionMessage=t.ConnectionMessageEventArgs=t.BaseAudioPlayer=t.ProfanityOption=t.ServicePropertyChannel=t.TurnStatusReceivedEventArgs=t.ActivityReceivedEventArgs=t.DialogServiceConnector=void 0,t.LogLevel=t.Diagnostics=t.AvatarWebRTCConnectionResult=t.Coordinate=t.AvatarVideoFormat=void 0;var e=qce();Object.defineProperty(t,"AudioConfig",{enumerable:!0,get:function(){return e.AudioConfig}});var r=Mu();Object.defineProperty(t,"AudioStreamFormat",{enumerable:!0,get:function(){return r.AudioStreamFormat}}),Object.defineProperty(t,"AudioFormatTag",{enumerable:!0,get:function(){return r.AudioFormatTag}});var n=IV();Object.defineProperty(t,"AudioInputStream",{enumerable:!0,get:function(){return n.AudioInputStream}}),Object.defineProperty(t,"PullAudioInputStream",{enumerable:!0,get:function(){return n.PullAudioInputStream}}),Object.defineProperty(t,"PushAudioInputStream",{enumerable:!0,get:function(){return n.PushAudioInputStream}});var i=xh();Object.defineProperty(t,"AudioOutputStream",{enumerable:!0,get:function(){return i.AudioOutputStream}}),Object.defineProperty(t,"PullAudioOutputStream",{enumerable:!0,get:function(){return i.PullAudioOutputStream}}),Object.defineProperty(t,"PushAudioOutputStream",{enumerable:!0,get:function(){return i.PushAudioOutputStream}});var s=Vce();Object.defineProperty(t,"CancellationReason",{enumerable:!0,get:function(){return s.CancellationReason}});var a=Fce();Object.defineProperty(t,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return a.PullAudioInputStreamCallback}});var c=Hce();Object.defineProperty(t,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return c.PushAudioOutputStreamCallback}});var u=Wce();Object.defineProperty(t,"KeywordRecognitionModel",{enumerable:!0,get:function(){return u.KeywordRecognitionModel}});var d=Kce();Object.defineProperty(t,"SessionEventArgs",{enumerable:!0,get:function(){return d.SessionEventArgs}});var h=Gce();Object.defineProperty(t,"RecognitionEventArgs",{enumerable:!0,get:function(){return h.RecognitionEventArgs}});var p=$ce();Object.defineProperty(t,"OutputFormat",{enumerable:!0,get:function(){return p.OutputFormat}});var g=Yce();Object.defineProperty(t,"RecognitionResult",{enumerable:!0,get:function(){return g.RecognitionResult}});var y=Xce();Object.defineProperty(t,"SpeechRecognitionResult",{enumerable:!0,get:function(){return y.SpeechRecognitionResult}});var S=Qce();Object.defineProperty(t,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return S.SpeechRecognitionEventArgs}}),Object.defineProperty(t,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return S.ConversationTranscriptionEventArgs}}),Object.defineProperty(t,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return S.MeetingTranscriptionEventArgs}});var x=Jce();Object.defineProperty(t,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return x.SpeechRecognitionCanceledEventArgs}});var w=Zce();Object.defineProperty(t,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return w.TranslationRecognitionEventArgs}});var E=ele();Object.defineProperty(t,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return E.TranslationSynthesisEventArgs}});var R=MV();Object.defineProperty(t,"TranslationRecognitionResult",{enumerable:!0,get:function(){return R.TranslationRecognitionResult}});var T=tle();Object.defineProperty(t,"TranslationSynthesisResult",{enumerable:!0,get:function(){return T.TranslationSynthesisResult}});var M=rle();Object.defineProperty(t,"ResultReason",{enumerable:!0,get:function(){return M.ResultReason}});var D=nle();Object.defineProperty(t,"SpeechConfig",{enumerable:!0,get:function(){return D.SpeechConfig}}),Object.defineProperty(t,"SpeechConfigImpl",{enumerable:!0,get:function(){return D.SpeechConfigImpl}});var z=ile();Object.defineProperty(t,"SpeechTranslationConfig",{enumerable:!0,get:function(){return z.SpeechTranslationConfig}}),Object.defineProperty(t,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return z.SpeechTranslationConfigImpl}});var j=kV();Object.defineProperty(t,"PropertyCollection",{enumerable:!0,get:function(){return j.PropertyCollection}});var O=C2();Object.defineProperty(t,"PropertyId",{enumerable:!0,get:function(){return O.PropertyId}});var L=sle();Object.defineProperty(t,"Recognizer",{enumerable:!0,get:function(){return L.Recognizer}});var V=ale();Object.defineProperty(t,"SpeechRecognizer",{enumerable:!0,get:function(){return V.SpeechRecognizer}});var U=ole();Object.defineProperty(t,"TranslationRecognizer",{enumerable:!0,get:function(){return U.TranslationRecognizer}});var F=cle();Object.defineProperty(t,"Translations",{enumerable:!0,get:function(){return F.Translations}});var q=lle();Object.defineProperty(t,"NoMatchReason",{enumerable:!0,get:function(){return q.NoMatchReason}});var ve=ule();Object.defineProperty(t,"NoMatchDetails",{enumerable:!0,get:function(){return ve.NoMatchDetails}});var Ae=dle();Object.defineProperty(t,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return Ae.TranslationRecognitionCanceledEventArgs}});var Y=FV();Object.defineProperty(t,"CancellationDetailsBase",{enumerable:!0,get:function(){return Y.CancellationDetailsBase}});var ae=hle();Object.defineProperty(t,"CancellationDetails",{enumerable:!0,get:function(){return ae.CancellationDetails}});var pe=fle();Object.defineProperty(t,"CancellationErrorCode",{enumerable:!0,get:function(){return pe.CancellationErrorCode}});var me=ple();Object.defineProperty(t,"ConnectionEventArgs",{enumerable:!0,get:function(){return me.ConnectionEventArgs}});var _e=mle();Object.defineProperty(t,"ServiceEventArgs",{enumerable:!0,get:function(){return _e.ServiceEventArgs}});var H=BV();Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return H.Connection}});var G=vle();Object.defineProperty(t,"PhraseListGrammar",{enumerable:!0,get:function(){return G.PhraseListGrammar}});var le=x2();Object.defineProperty(t,"DialogServiceConfig",{enumerable:!0,get:function(){return le.DialogServiceConfig}});var X=gle();Object.defineProperty(t,"BotFrameworkConfig",{enumerable:!0,get:function(){return X.BotFrameworkConfig}});var ge=yle();Object.defineProperty(t,"CustomCommandsConfig",{enumerable:!0,get:function(){return ge.CustomCommandsConfig}});var be=Sle();Object.defineProperty(t,"DialogServiceConnector",{enumerable:!0,get:function(){return be.DialogServiceConnector}});var we=Cle();Object.defineProperty(t,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return we.ActivityReceivedEventArgs}});var Ke=wle();Object.defineProperty(t,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return Ke.TurnStatusReceivedEventArgs}});var se=_le();Object.defineProperty(t,"ServicePropertyChannel",{enumerable:!0,get:function(){return se.ServicePropertyChannel}});var je=Ele();Object.defineProperty(t,"ProfanityOption",{enumerable:!0,get:function(){return je.ProfanityOption}});var Ue=Ale();Object.defineProperty(t,"BaseAudioPlayer",{enumerable:!0,get:function(){return Ue.BaseAudioPlayer}});var fe=Tle();Object.defineProperty(t,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return fe.ConnectionMessageEventArgs}});var Pt=UV();Object.defineProperty(t,"ConnectionMessage",{enumerable:!0,get:function(){return Pt.ConnectionMessage}});var Ge=Rle();Object.defineProperty(t,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return Ge.AutoDetectSourceLanguageConfig}});var yt=Ple();Object.defineProperty(t,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return yt.AutoDetectSourceLanguageResult}});var Dt=Ile();Object.defineProperty(t,"SourceLanguageConfig",{enumerable:!0,get:function(){return Dt.SourceLanguageConfig}});var vt=w2();Object.defineProperty(t,"Conversation",{enumerable:!0,get:function(){return vt.Conversation}}),Object.defineProperty(t,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return vt.ConversationExpirationEventArgs}}),Object.defineProperty(t,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return vt.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(t,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return vt.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(t,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return vt.ConversationTranslationEventArgs}}),Object.defineProperty(t,"ConversationTranslationResult",{enumerable:!0,get:function(){return vt.ConversationTranslationResult}}),Object.defineProperty(t,"ConversationTranslator",{enumerable:!0,get:function(){return vt.ConversationTranslator}}),Object.defineProperty(t,"ConversationTranscriber",{enumerable:!0,get:function(){return vt.ConversationTranscriber}}),Object.defineProperty(t,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return vt.ConversationTranscriptionResult}}),Object.defineProperty(t,"Meeting",{enumerable:!0,get:function(){return vt.Meeting}}),Object.defineProperty(t,"MeetingTranscriber",{enumerable:!0,get:function(){return vt.MeetingTranscriber}}),Object.defineProperty(t,"Participant",{enumerable:!0,get:function(){return vt.Participant}}),Object.defineProperty(t,"ParticipantChangedReason",{enumerable:!0,get:function(){return vt.ParticipantChangedReason}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return vt.User}});var Ci=_2();Object.defineProperty(t,"Synthesizer",{enumerable:!0,get:function(){return Ci.Synthesizer}});var Bt=NV();Object.defineProperty(t,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return Bt.SpeechSynthesisOutputFormat}});var Gt=Kle();Object.defineProperty(t,"SpeechSynthesizer",{enumerable:!0,get:function(){return Gt.SpeechSynthesizer}});var xi=Gle();Object.defineProperty(t,"SynthesisResult",{enumerable:!0,get:function(){return xi.SynthesisResult}});var Yc=$le();Object.defineProperty(t,"SpeechSynthesisResult",{enumerable:!0,get:function(){return Yc.SpeechSynthesisResult}});var Eo=Yle();Object.defineProperty(t,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return Eo.SpeechSynthesisEventArgs}});var Rr=Xle();Object.defineProperty(t,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return Rr.SpeechSynthesisWordBoundaryEventArgs}});var ye=Qle();Object.defineProperty(t,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return ye.SpeechSynthesisBookmarkEventArgs}});var ut=Jle();Object.defineProperty(t,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return ut.SpeechSynthesisVisemeEventArgs}});var kt=Zle();Object.defineProperty(t,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return kt.SpeechSynthesisBoundaryType}});var Pr=eue();Object.defineProperty(t,"SynthesisVoicesResult",{enumerable:!0,get:function(){return Pr.SynthesisVoicesResult}});var Xc=tue();Object.defineProperty(t,"SynthesisVoiceGender",{enumerable:!0,get:function(){return Xc.SynthesisVoiceGender}}),Object.defineProperty(t,"SynthesisVoiceType",{enumerable:!0,get:function(){return Xc.SynthesisVoiceType}}),Object.defineProperty(t,"VoiceInfo",{enumerable:!0,get:function(){return Xc.VoiceInfo}});var Lu=rue();Object.defineProperty(t,"SpeakerAudioDestination",{enumerable:!0,get:function(){return Lu.SpeakerAudioDestination}});var zu=nue();Object.defineProperty(t,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return zu.ConversationTranscriptionCanceledEventArgs}});var Uu=iue();Object.defineProperty(t,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return Uu.MeetingTranscriptionCanceledEventArgs}});var Xn=sue();Object.defineProperty(t,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return Xn.PronunciationAssessmentGradingSystem}});var Ir=aue();Object.defineProperty(t,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return Ir.PronunciationAssessmentGranularity}});var On=oue();Object.defineProperty(t,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return On.PronunciationAssessmentConfig}});var $t=cue();Object.defineProperty(t,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return $t.PronunciationAssessmentResult}});var Bu=KV();Object.defineProperty(t,"LanguageIdMode",{enumerable:!0,get:function(){return Bu.LanguageIdMode}});var Ao=lue();Object.defineProperty(t,"AvatarConfig",{enumerable:!0,get:function(){return Ao.AvatarConfig}});var qu=uue();Object.defineProperty(t,"AvatarEventArgs",{enumerable:!0,get:function(){return qu.AvatarEventArgs}});var wi=due();Object.defineProperty(t,"AvatarSynthesizer",{enumerable:!0,get:function(){return wi.AvatarSynthesizer}});var As=hue();Object.defineProperty(t,"AvatarVideoFormat",{enumerable:!0,get:function(){return As.AvatarVideoFormat}}),Object.defineProperty(t,"Coordinate",{enumerable:!0,get:function(){return As.Coordinate}});var Zt=fue();Object.defineProperty(t,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return Zt.AvatarWebRTCConnectionResult}});var _i=pue();Object.defineProperty(t,"Diagnostics",{enumerable:!0,get:function(){return _i.Diagnostics}});var Ei=TV();Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return Ei.LogLevel}})})(O_)),O_}var t5;function mue(){if(t5)return bp;t5=1,Object.defineProperty(bp,"__esModule",{value:!0}),bp.ProxyInfo=void 0;const t=Ce();let e=class nF{constructor(n,i,s,a){this.privProxyHostName=n,this.privProxyPort=i,this.privProxyUserName=s,this.privProxyPassword=a}static fromParameters(n){return new nF(n.getProperty(t.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(n.getProperty(t.PropertyId.SpeechServiceConnection_ProxyPort),10),n.getProperty(t.PropertyId.SpeechServiceConnection_ProxyUserName),n.getProperty(t.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(n){return this.fromParameters(n.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}};return bp.ProxyInfo=e,bp}var Lm={},J_,r5;function vue(){if(r5)return J_;r5=1;const t=new Set(["json","buffer","string"]);return J_=e=>(...r)=>{const n=new Set;let i,s,a,c="";return r.forEach(u=>{if(typeof u=="string")if(u.toUpperCase()===u)if(i){const d=`Can't set method to ${u}, already set to ${i}.`;throw new Error(d)}else i=u;else if(u.startsWith("http:")||u.startsWith("https:"))c=u;else if(t.has(u))s=u;else throw new Error(`Unknown encoding, ${u}`);else if(typeof u=="number")n.add(u);else if(typeof u=="object")if(Array.isArray(u)||u instanceof Set)u.forEach(d=>n.add(d));else{if(a)throw new Error("Cannot set headers twice.");a=u}else throw new Error(`Unknown type: ${typeof u}`)}),i||(i="GET"),n.size===0&&n.add(200),e(n,i,s,a,c)},J_}var Z_,n5;function gue(){if(n5)return Z_;n5=1;const t=vue();class e extends Error{constructor(i,...s){super(...s),Error.captureStackTrace&&Error.captureStackTrace(this,e),this.name="StatusError",this.message=i.statusMessage,this.statusCode=i.status,this.res=i,this.json=i.json.bind(i),this.text=i.text.bind(i),this.arrayBuffer=i.arrayBuffer.bind(i);let a;Object.defineProperty(this,"responseBody",{get:()=>(a||(a=this.arrayBuffer()),a)}),this.headers={};for(const[u,d]of i.headers.entries())this.headers[u.toLowerCase()]=d}}return Z_=t((n,i,s,a,c)=>async(u,d,h={})=>{u=c+(u||"");let p=new URL(u);if(a||(a={}),p.username&&(a.Authorization="Basic "+btoa(p.username+":"+p.password),p=new URL(p.protocol+"//"+p.host+p.pathname+p.search)),p.protocol!=="https:"&&p.protocol!=="http:")throw new Error(`Unknown protocol, ${p.protocol}`);if(d&&!(d instanceof ArrayBuffer||ArrayBuffer.isView(d)||typeof d=="string"))if(typeof d=="object")d=JSON.stringify(d),a["Content-Type"]="application/json";else throw new Error("Unknown body type.");h=new Headers({...a||{},...h});const g=await fetch(p,{method:i,headers:h,body:d});if(g.statusCode=g.status,!n.has(g.status))throw new e(g);return s==="json"?g.json():s==="buffer"?g.arrayBuffer():s==="string"?g.text():g}),Z_}var i5;function yue(){return i5||(i5=1,(function(t){var e=Lm&&Lm.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(t,"__esModule",{value:!0}),t.RestMessageAdapter=t.RestRequestType=void 0;const r=e(gue()),n=Ve();var i;(function(a){a.Get="GET",a.Post="POST",a.Delete="DELETE",a.File="file"})(i=t.RestRequestType||(t.RestRequestType={}));let s=class{constructor(c){if(!c)throw new n.ArgumentNullError("configParams");this.privHeaders=c.headers,this.privIgnoreCache=c.ignoreCache}static extractHeaderValue(c,u){let d="";try{const h=u.trim().split(/[\r\n]+/),p={};h.forEach(g=>{const y=g.split(": "),S=y.shift().toLowerCase(),x=y.join(": ");p[S]=x}),d=p[c.toLowerCase()]}catch{}return d}set options(c){this.privHeaders=c.headers,this.privIgnoreCache=c.ignoreCache}setHeaders(c,u){this.privHeaders[c]=u}request(c,u,d={},h=null){const p=new n.Deferred,g=c===i.File?"POST":c,y=(x,w={})=>{const E=x;return{data:JSON.stringify(w),headers:JSON.stringify(x.headers),json:w,ok:x.statusCode>=200&&x.statusCode<300,status:x.statusCode,statusText:w.error?w.error.message:E.statusText?E.statusText:E.statusMessage}},S=x=>{const w=(0,r.default)(u,g,this.privHeaders,200,201,202,204,400,401,402,403,404),E=this.queryParams(d)===""?"":`?${this.queryParams(d)}`;w(E,x).then(async R=>{if(c===i.Delete||R.statusCode===204)p.resolve(y(R));else try{const T=await R.json();p.resolve(y(R,T))}catch{p.resolve(y(R))}}).catch(R=>{p.reject(R)})};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),c===i.Post&&h&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),S(h),p.promise}queryParams(c={}){return Object.keys(c).map(u=>encodeURIComponent(u)+"="+encodeURIComponent(c[u])).join("&")}};t.RestMessageAdapter=s})(Lm)),Lm}var zm={},s5;function iF(){if(s5)return zm;s5=1,Object.defineProperty(zm,"__esModule",{value:!0}),zm.RestConfigBase=void 0;let t=class Ob{static get requestOptions(){return Ob.privDefaultRequestOptions}static get configParams(){return Ob.privDefaultParams}static get restErrors(){return Ob.privRestErrors}};return zm.RestConfigBase=t,t.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4},t.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."},t.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"},zm}var a5;function $n(){return a5||(a5=1,(function(t){var e=Pl&&Pl.__createBinding||(Object.create?(function(n,i,s,a){a===void 0&&(a=s),Object.defineProperty(n,a,{enumerable:!0,get:function(){return i[s]}})}):(function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]})),r=Pl&&Pl.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Mce(),t),r(Dce(),t),r(kce(),t),r(Lce(),t),r(zce(),t),r(Uce(),t),r(RV(),t),r(Bce(),t),r(mue(),t),r(yue(),t),r(iF(),t)})(Pl)),Pl}var Um={},o5;function HC(){if(o5)return Um;o5=1,Object.defineProperty(Um,"__esModule",{value:!0}),Um.SpeechConnectionMessage=void 0;const t=Ve(),e=Si();class r extends t.ConnectionMessage{constructor(i,s,a,c,u,d,h,p){if(!s)throw new t.ArgumentNullError("path");if(!a)throw new t.ArgumentNullError("requestId");const g={};if(g[e.HeaderNames.Path]=s,g[e.HeaderNames.RequestId]=a,g[e.HeaderNames.RequestTimestamp]=new Date().toISOString(),c&&(g[e.HeaderNames.ContentType]=c),d&&(g[e.HeaderNames.RequestStreamId]=d),h)for(const y in h)y&&(g[y]=h[y]);p?super(i,u,g,p):super(i,u,g),this.privPath=s,this.privRequestId=a,this.privContentType=c,this.privStreamId=d,this.privAdditionalHeaders=h}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(i){let s=null,a=null,c=null,u=null;const d={};if(i.headers)for(const h in i.headers)h&&(h.toLowerCase()===e.HeaderNames.Path.toLowerCase()?s=i.headers[h]:h.toLowerCase()===e.HeaderNames.RequestId.toLowerCase()?a=i.headers[h]:h.toLowerCase()===e.HeaderNames.ContentType.toLowerCase()?c=i.headers[h]:h.toLowerCase()===e.HeaderNames.RequestStreamId.toLowerCase()?u=i.headers[h]:d[h]=i.headers[h]);return new r(i.messageType,s,a,c,i.body,u,d,i.id)}}return Um.SpeechConnectionMessage=r,Um}var eE={},c5;function bue(){return c5||(c5=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentationMode=void 0,(function(e){e.Normal="Normal",e.Disabled="Disabled",e.Custom="Custom",e.Semantic="Semantic"})(t.SegmentationMode||(t.SegmentationMode={}))})(eE)),eE}var tE={},l5;function Sue(){return l5||(l5=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.NextAction=void 0,(function(e){e.None="None",e.Synthesize="Synthesize"})(t.NextAction||(t.NextAction={}))})(tE)),tE}var rE={},u5;function Cue(){return u5||(u5=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Mode=void 0,(function(e){e.None="None",e.Always="Always"})(t.Mode||(t.Mode={}))})(rE)),rE}var nE={},d5;function xue(){return d5||(d5=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageIdDetectionPriority=t.LanguageIdDetectionMode=void 0,(function(e){e.DetectAtAudioStart="DetectAtAudioStart",e.DetectContinuous="DetectContinuous",e.DetectSegments="DetectSegments"})(t.LanguageIdDetectionMode||(t.LanguageIdDetectionMode={})),(function(e){e.Auto="Auto",e.PrioritizeLatency="PrioritizeLatency",e.PrioritizeAccuracy="PrioritizeAccuracy"})(t.LanguageIdDetectionPriority||(t.LanguageIdDetectionPriority={}))})(nE)),nE}var iE={},h5;function wue(){return h5||(h5=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.NextAction=void 0,(function(e){e.Recognize="Recognize",e.None="None"})(t.NextAction||(t.NextAction={}))})(iE)),iE}var sE={},f5;function _ue(){return f5||(f5=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.OnUnknownAction=void 0,(function(e){e.RecognizeWithDefaultLanguage="RecognizeWithDefaultLanguage",e.None="None"})(t.OnUnknownAction||(t.OnUnknownAction={}))})(sE)),sE}var aE={},p5;function Eue(){return p5||(p5=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ResultType=void 0,(function(e){e.Auto="Auto",e.StableFragment="StableFragment",e.Hypothesis="Hypothesis",e.None="None"})(t.ResultType||(t.ResultType={}))})(aE)),aE}var oE={},m5;function Aue(){return m5||(m5=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PhraseResultOutputType=void 0,(function(e){e.Always="Always",e.None="None"})(t.PhraseResultOutputType||(t.PhraseResultOutputType={}))})(oE)),oE}var cE={},v5;function Tue(){return v5||(v5=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.NextAction=void 0,(function(e){e.None="None",e.Translate="Translate"})(t.NextAction||(t.NextAction={}))})(cE)),cE}var g5;function Rue(){if(g5)return fp;g5=1,Object.defineProperty(fp,"__esModule",{value:!0}),fp.ServiceRecognizerBase=void 0;const t=$n(),e=Ve(),r=Ce(),n=Le(),i=HC(),s=bue(),a=ws(),c=Sue(),u=Cue(),d=xue(),h=wue(),p=_ue(),g=Eue(),y=Aue(),S=Tue();let x=class Vv{constructor(E,R,T,M,D){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!E)throw new e.ArgumentNullError("authentication");if(!R)throw new e.ArgumentNullError("connectionFactory");if(!T)throw new e.ArgumentNullError("audioSource");if(!M)throw new e.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=M.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=E,this.privConnectionFactory=R,this.privAudioSource=T,this.privRecognizerConfig=M,this.privIsDisposed=!1,this.privRecognizer=D,this.privRequestSession=new n.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new e.EventSource,this.privServiceEvents=new e.EventSource,this.privDynamicGrammar=new n.DynamicGrammarBuilder,this.privSpeechContext=new n.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new n.AgentConfig,this.privRecognizerConfig.parameters.getProperty(r.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?this.privSetTimeout=e.Timeout.setTimeout:(typeof window<"u"&&(this.privSetTimeout=window.setTimeout.bind(window)),typeof globalThis<"u"&&(this.privSetTimeout=globalThis.setTimeout.bind(globalThis))),this.connectionEvents.attach(j=>{if(j.name==="ConnectionClosedEvent"){const O=j;(O.statusCode===1003||O.statusCode===1007||O.statusCode===1002||O.statusCode===4e3||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(r.CancellationReason.Error,O.statusCode===1007?r.CancellationErrorCode.BadRequestParameters:r.CancellationErrorCode.ConnectionFailure,`${O.reason} websocket error code: ${O.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=(0,e.createNoDashGuid)())}setTranslationJson(){const E=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(E!==void 0){const R=E.split(","),T=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),M=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationCategoryId,void 0),D=T!==void 0?c.NextAction.Synthesize:c.NextAction.None;if(this.privSpeechContext.getContext().translation={onPassthrough:{action:D},onSuccess:{action:D},output:{includePassThroughResults:!0,interimResults:{mode:u.Mode.Always}},targetLanguages:R},M!==void 0&&(this.privSpeechContext.getContext().translation.category=M),T!==void 0){const j={};for(const O of R)j[O]=T;this.privSpeechContext.getContext().synthesis={defaultVoices:j}}const z=this.privSpeechContext.getContext().phraseDetection||{};z.onSuccess={action:S.NextAction.Translate},z.onInterim={action:S.NextAction.Translate},this.privSpeechContext.getContext().phraseDetection=z}}setSpeechSegmentationTimeoutJson(){const E=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0),R=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.Speech_SegmentationMaximumTimeMs,void 0),T=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.Speech_SegmentationStrategy,void 0),M={mode:s.SegmentationMode.Normal};let D=!1;if(T!==void 0){D=!0;let z=s.SegmentationMode.Normal;switch(T.toLowerCase()){case"default":break;case"time":z=s.SegmentationMode.Custom;break;case"semantic":z=s.SegmentationMode.Semantic;break}M.mode=z}if(E!==void 0){D=!0;const z=parseInt(E,10);M.mode=s.SegmentationMode.Custom,M.segmentationSilenceTimeoutMs=z}if(R!==void 0){D=!0;const z=parseInt(R,10);M.mode=s.SegmentationMode.Custom,M.segmentationForcedTimeoutMs=z}if(D){const z=this.privSpeechContext.getContext().phraseDetection||{};switch(z.mode=this.recognitionMode,this.recognitionMode){case a.RecognitionMode.Conversation:z.conversation=z.conversation??{segmentation:{}},z.conversation.segmentation=M;break;case a.RecognitionMode.Interactive:z.interactive=z.interactive??{segmentation:{}},z.interactive.segmentation=M;break;case a.RecognitionMode.Dictation:z.dictation=z.dictation??{},z.dictation.segmentation=M;break}this.privSpeechContext.getContext().phraseDetection=z}}setLanguageIdJson(){const E=this.privSpeechContext.getContext().phraseDetection||{};if(this.privRecognizerConfig.autoDetectSourceLanguages!==void 0){const R=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");R.length===1&&R[0]===n.AutoDetectSourceLanguagesOpenRangeOptionName&&(R[0]="UND");let T;this.privRecognizerConfig.languageIdMode==="Continuous"?T=d.LanguageIdDetectionMode.DetectContinuous:T=d.LanguageIdDetectionMode.DetectAtAudioStart,this.privSpeechContext.getContext().languageId={languages:R,mode:T,onSuccess:{action:h.NextAction.Recognize},onUnknown:{action:p.OnUnknownAction.None},priority:d.LanguageIdDetectionPriority.PrioritizeLatency},this.privSpeechContext.getContext().phraseOutput={interimResults:{resultType:g.ResultType.Auto},phraseResults:{resultType:y.PhraseResultOutputType.Always}};const M=this.privRecognizerConfig.sourceLanguageModels;M!==void 0&&(E.customModels=M,E.onInterim={action:S.NextAction.None},E.onSuccess={action:S.NextAction.None})}this.privSpeechContext.getContext().phraseDetection=E}setOutputDetailLevelJson(){this.privEnableSpeakerId&&(this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true"?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(n.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase()===r.OutputFormat[r.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}setSpeechStartEventSensitivityJson(){const E=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.Speech_StartEventSensitivity,void 0);if(E!==void 0){let R=!1;switch(E.toLowerCase()){case a.SpeechStartEventSensitivity.Low:case a.SpeechStartEventSensitivity.Medium:case a.SpeechStartEventSensitivity.High:R=!0;break}if(R){const T=this.privSpeechContext.getContext().phraseDetection||{};T.voiceOnsetSensitivity=E.toLowerCase(),this.privSpeechContext.getContext().phraseDetection=T}}}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(E){this.privRecognizerConfig.parameters.setProperty(r.PropertyId.ConversationTranslator_Token,E)}set authentication(E){this.privAuthentication=E}isDisposed(){return this.privIsDisposed}async dispose(E){if(this.privIsDisposed=!0,this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose(E)}catch{return}}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}async recognize(E,R,T){if(this.recognizeOverride!==void 0){await this.recognizeOverride(E,R,T);return}if(this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=E,this.privRecognizerConfig.recognitionEndpointVersion==="2"){const O=this.privSpeechContext.getContext().phraseDetection||{};O.mode=E,this.privSpeechContext.getContext().phraseDetection=O}this.setLanguageIdJson(),this.setTranslationJson(),this.privRecognizerConfig.autoDetectSourceLanguages!==void 0&&this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0&&this.setupTranslationWithLanguageId(),this.setSpeechSegmentationTimeoutJson(),this.setOutputDetailLevelJson(),this.setSpeechStartEventSensitivityJson(),this.privSuccessCallback=R,this.privErrorCallback=T,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const M=this.connectImpl();let D;try{const O=await this.audioSource.attach(this.privRequestSession.audioNodeId),L=await this.audioSource.format,V=await this.audioSource.deviceInfo;this.privIsLiveAudio=V.type&&V.type===n.type.Microphones,D=new t.ReplayableAudioNode(O,L.avgBytesPerSec),await this.privRequestSession.onAudioSourceAttachCompleted(D,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:V}}catch(O){throw await this.privRequestSession.onStopRecognizing(),O}try{await M}catch(O){await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,O);return}const z=new r.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,z),this.receiveMessage(),this.sendAudio(D).catch(async O=>{await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,O)})}async stopRecognizing(){if(this.privRequestSession.isRecognizing)try{await this.audioSource.turnOff(),await this.sendFinalAudio(),await this.privRequestSession.onStopRecognizing(),await this.privRequestSession.turnCompletionPromise}finally{await this.privRequestSession.dispose()}}async connect(){return await this.connectImpl(),Promise.resolve()}connectAsync(E,R){this.connectImpl().then(()=>{try{E&&E()}catch(T){R&&R(T)}},T=>{try{R&&R(T)}catch{}})}async disconnect(){if(await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.NoError,"Disconnecting"),this.disconnectOverride!==void 0&&await this.disconnectOverride(),this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose()}catch{}this.privConnectionPromise=void 0}sendMessage(E){}async sendNetworkMessage(E,R){const T=typeof R=="string"?e.MessageType.Text:e.MessageType.Binary,M=typeof R=="string"?"application/json":"";return(await this.fetchConnection()).send(new i.SpeechConnectionMessage(T,E,this.privRequestSession.requestId,M,R))}set activityTemplate(E){this.privActivityTemplate=E}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(E){this.privExpectContentAssessmentResponse=E}async sendTelemetryData(){const E=this.privRequestSession.getTelemetry();if(Vv.telemetryDataEnabled!==!0||this.privIsDisposed||E===null)return;if(Vv.telemetryData)try{Vv.telemetryData(E)}catch{}await(await this.fetchConnection()).send(new i.SpeechConnectionMessage(e.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",E))}async cancelRecognitionLocal(E,R,T){this.privRequestSession.isRecognizing&&(await this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,E,R,T))}async receiveMessage(){try{if(this.privIsDisposed)return;let E=await this.fetchConnection();const R=await E.read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(!R)return this.receiveMessage();this.privServiceHasSentMessage=!0;const T=i.SpeechConnectionMessage.fromConnectionMessage(R);if(T.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(T.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const M=n.SpeechDetected.fromJSON(T.textBody,this.privRequestSession.currentTurnAudioOffset),D=new r.RecognitionEventArgs(M.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,D);break;case"speech.enddetected":let z;T.textBody.length>0?z=T.textBody:z="{ Offset: 0 }";const j=n.SpeechDetected.fromJSON(z,this.privRequestSession.currentTurnAudioOffset),O=new r.RecognitionEventArgs(j.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,O);break;case"turn.end":await this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,await this.cancelRecognitionLocal(r.CancellationReason.EndOfStream,r.CancellationErrorCode.NoError,void 0));const L=new r.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing){this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,L);return}else E=await this.fetchConnection(),await this.sendPrePayloadJSON(E);break;default:await this.processTypeSpecificMessages(T)||this.privServiceEvents&&this.serviceEvents.onEvent(new e.ServiceEvent(T.path.toLowerCase(),T.textBody))}return this.receiveMessage()}catch{return null}}updateSpeakerDiarizationAudioOffset(){const E=this.privRequestSession.recognitionBytesSent,R=this.privAverageBytesPerMs!==0?E/this.privAverageBytesPerMs:0;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(R)}sendSpeechContext(E,R){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const T=this.speechContext.toJSON();if(R&&this.privRequestSession.onSpeechContext(),T)return E.send(new i.SpeechConnectionMessage(e.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",T))}setupTranslationWithLanguageId(){const E=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0),R=this.privRecognizerConfig.autoDetectSourceLanguages!==void 0;if(E!==void 0&&R){this.privSpeechContext.getContext().phraseOutput={interimResults:{resultType:g.ResultType.None},phraseResults:{resultType:y.PhraseResultOutputType.None}};const T=this.privSpeechContext.getContext().translation;if(T){const M=this.privRecognizerConfig.sourceLanguageModels;if(M!==void 0&&M.length>0){const z=this.privSpeechContext.getContext().phraseDetection||{};z.customModels=M,this.privSpeechContext.getContext().phraseDetection=z}this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&(T.onSuccess={action:c.NextAction.Synthesize},T.onPassthrough={action:c.NextAction.Synthesize})}}}noOp(){}async sendPrePayloadJSON(E,R=!0){if(this.sendPrePayloadJSONOverride!==void 0)return this.sendPrePayloadJSONOverride(E);await this.sendSpeechContext(E,R),await this.sendWaveHeader(E)}async sendWaveHeader(E){const R=await this.audioSource.format;return E.send(new i.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",R.header))}connectImpl(){return this.privConnectionPromise!==void 0?this.privConnectionPromise.then(E=>E.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),this.postConnectImplOverride!==void 0?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(E,R,T){if(R.onSpeechContext(),Vv.telemetryDataEnabled!==!0){const D={context:{system:JSON.parse(T).context.system}};T=JSON.stringify(D)}if(this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()==="true"){const M=JSON.parse(T);M.context.DisableReferenceChannel="True",M.context.MicSpec="1_0_0",T=JSON.stringify(M)}if(T)return E.send(new i.SpeechConnectionMessage(e.MessageType.Text,"speech.config",R.requestId,"application/json",T))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(E=>E.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async sendAudio(E){const R=await this.audioSource.format;this.privAverageBytesPerMs=R.avgBytesPerSec/1e3;let T=Date.now();const M=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),D=R.avgBytesPerSec/1e3*parseInt(M,10),z=this.privRequestSession.recogNumber,j=async()=>{if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===z){const O=await this.fetchConnection(),L=await E.read();if(this.privRequestSession.isSpeechEnded)return;let V,U;if(!L||L.isEnd?(V=null,U=0):(V=L.buffer,this.privRequestSession.onAudioSent(V.byteLength),D>=this.privRequestSession.bytesSent?U=0:U=Math.max(0,T-Date.now())),U!==0&&await this.delay(U),V!==null&&(T=Date.now()+V.byteLength*1e3/(R.avgBytesPerSec*2)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===z)if(O.send(new i.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,null,V)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),L?.isEnd)this.privIsLiveAudio||this.privRequestSession.onSpeechEnded();else return j()}};return j()}async retryableConnect(){let E=!1;this.privAuthFetchEventId=(0,e.createNoDashGuid)();const R=this.privRequestSession.sessionId;this.privConnectionId=R!==void 0?R:(0,e.createNoDashGuid)(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let T=0,M="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){this.privRequestSession.onRetryConnection();const z=await(E?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId));await this.privRequestSession.onAuthCompleted(!1);const j=await this.privConnectionFactory.create(this.privRecognizerConfig,z,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(j.events),j.events.attach(L=>{this.connectionEvents.onEvent(L)});const O=await j.open();if(O.statusCode===200)return await this.privRequestSession.onConnectionEstablishCompleted(O.statusCode),Promise.resolve(j);O.statusCode===1006&&(E=!0),T=O.statusCode,M=O.reason}return await this.privRequestSession.onConnectionEstablishCompleted(T,M),Promise.reject(`Unable to contact server. StatusCode: ${T}, ${this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${M}`)}delay(E){return new Promise(R=>this.privSetTimeout(R,E))}writeBufferToConsole(E){let R="Buffer Size: ";if(E===null)R+="null";else{const T=new Uint8Array(E);R+=`${E.byteLength}\r
`;for(let M=0;M<E.byteLength;M++)R+=T[M].toString(16).padStart(2,"0")+" ",(M+1)%16===0&&(console.info(R),R="")}console.info(R)}async sendFinalAudio(){await(await this.fetchConnection()).send(new i.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))}async configureConnection(){const E=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(E):(await this.sendSpeechServiceConfig(E,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendPrePayloadJSON(E,!1),E)}};return fp.ServiceRecognizerBase=x,x.telemetryDataEnabled=!0,fp}var Bm={},y5;function Pue(){if(y5)return Bm;y5=1,Object.defineProperty(Bm,"__esModule",{value:!0}),Bm.ConversationServiceRecognizer=void 0;const t=Ce(),e=Le();let r=class extends e.ServiceRecognizerBase{constructor(i,s,a,c,u){super(i,s,a,c,u),this.handleSpeechPhraseMessage=async d=>this.handleSpeechPhrase(d),this.handleSpeechHypothesisMessage=d=>this.handleSpeechHypothesis(d)}processTypeSpecificMessages(i){}handleRecognizedCallback(i,s,a){}handleRecognizingCallback(i,s,a){}async processSpeechMessages(i){let s=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(i.textBody),s=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&await this.handleSpeechPhraseMessage(i.textBody),s=!0;break}return s}cancelRecognition(i,s,a,c,u){}async handleSpeechPhrase(i){const s=e.SimpleSpeechPhrase.fromJSON(i,this.privRequestSession.currentTurnAudioOffset),a=e.EnumTranslation.implTranslateRecognitionResult(s.RecognitionStatus);let c;const u=new t.PropertyCollection;if(u.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,i),this.privRequestSession.onPhraseRecognized(s.Offset+s.Duration),t.ResultReason.Canceled===a){const d=e.EnumTranslation.implTranslateCancelResult(s.RecognitionStatus),h=e.EnumTranslation.implTranslateCancelErrorCode(s.RecognitionStatus);await this.cancelRecognitionLocal(d,h,e.EnumTranslation.implTranslateErrorDetails(h))}else if(s.RecognitionStatus!==e.RecognitionStatus.EndOfDictation){if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===t.OutputFormat[t.OutputFormat.Simple])c=new t.SpeechRecognitionResult(this.privRequestSession.requestId,a,s.DisplayText,s.Duration,s.Offset,s.Language,s.LanguageDetectionConfidence,s.SpeakerId,void 0,s.asJson(),u);else{const d=e.DetailedSpeechPhrase.fromJSON(i,this.privRequestSession.currentTurnAudioOffset);c=new t.SpeechRecognitionResult(this.privRequestSession.requestId,a,d.Text,d.Duration,d.Offset,d.Language,d.LanguageDetectionConfidence,d.SpeakerId,void 0,d.asJson(),u)}this.handleRecognizedCallback(c,c.offset,this.privRequestSession.sessionId)}}handleSpeechHypothesis(i){const s=e.SpeechHypothesis.fromJSON(i,this.privRequestSession.currentTurnAudioOffset),a=new t.PropertyCollection;a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,i);const c=new t.SpeechRecognitionResult(this.privRequestSession.requestId,t.ResultReason.RecognizingSpeech,s.Text,s.Duration,s.Offset,s.Language,s.LanguageDetectionConfidence,s.SpeakerId,void 0,s.asJson(),a);this.privRequestSession.onHypothesis(s.Offset),this.handleRecognizingCallback(c,s.Duration,this.privRequestSession.sessionId)}};return Bm.ConversationServiceRecognizer=r,Bm}var lE={},b5;function Iue(){return b5||(b5=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RecognizerConfig=t.SpeechResultFormat=void 0;const e=Ce(),r=Le(),n=ws();(function(s){s[s.Simple=0]="Simple",s[s.Detailed=1]="Detailed"})(t.SpeechResultFormat||(t.SpeechResultFormat={}));class i{constructor(a,c){this.privSpeechServiceConfig=a||new r.SpeechServiceConfig(new r.Context(null)),this.privParameters=c,this.privMaxRetryCount=parseInt(c.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=c.getProperty(e.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(a){this.privRecognitionMode=a,this.privRecognitionActivityTimeout=a===n.RecognitionMode.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=n.RecognitionMode[a]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==n.RecognitionMode.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(e.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2")}set recognitionEndpointVersion(a){this.parameters.setProperty(e.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,a)}get sourceLanguageModels(){const a=[];let c=!1;if(this.autoDetectSourceLanguages!==void 0)for(const u of this.autoDetectSourceLanguages.split(",")){const d=u+e.PropertyId.SpeechServiceConnection_EndpointId.toString(),h=this.parameters.getProperty(d,void 0);h!==void 0?(a.push({language:u,endpoint:h}),c=!0):a.push({language:u,endpoint:""})}return c?a:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(a){this.privEnableSpeakerId=a}}t.RecognizerConfig=i})(lE)),lE}var uE={},S5;function Nue(){return S5||(S5=1,Object.defineProperty(uE,"__esModule",{value:!0})),uE}var qm={},C5;function Oue(){if(C5)return qm;C5=1,Object.defineProperty(qm,"__esModule",{value:!0}),qm.WebsocketMessageFormatter=void 0;const t=Ve(),e=`\r
`;let r=class{toConnectionMessage(i){const s=new t.Deferred;try{if(i.messageType===t.MessageType.Text){const a=i.textContent;let c={},u=null;if(a){const d=a.split(`\r
\r
`);d&&d.length>0&&(c=this.parseHeaders(d[0]),d.length>1&&(u=d[1]))}s.resolve(new t.ConnectionMessage(i.messageType,u,c,i.id))}else if(i.messageType===t.MessageType.Binary){const a=i.binaryContent;let c={},u=null;if(!a||a.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const d=new DataView(a),h=d.getInt16(0);if(a.byteLength<h+2)throw new Error("Invalid binary message format. Header content missing.");let p="";for(let g=0;g<h;g++)p+=String.fromCharCode(d.getInt8(g+2));c=this.parseHeaders(p),a.byteLength>h+2&&(u=a.slice(2+h)),s.resolve(new t.ConnectionMessage(i.messageType,u,c,i.id))}}catch(a){s.reject(`Error formatting the message. Error: ${a}`)}return s.promise}fromConnectionMessage(i){const s=new t.Deferred;try{if(i.messageType===t.MessageType.Text){const a=`${this.makeHeaders(i)}${e}${i.textBody?i.textBody:""}`;s.resolve(new t.RawWebsocketMessage(t.MessageType.Text,a,i.id))}else if(i.messageType===t.MessageType.Binary){const a=this.makeHeaders(i),c=i.binaryBody,u=this.stringToArrayBuffer(a),d=new Int8Array(u),h=d.byteLength,p=new Int8Array(2+h+(c?c.byteLength:0));if(p[0]=h>>8&255,p[1]=h&255,p.set(d,2),c){const y=new Int8Array(c);p.set(y,2+h)}const g=p.buffer;s.resolve(new t.RawWebsocketMessage(t.MessageType.Binary,g,i.id))}}catch(a){s.reject(`Error formatting the message. ${a}`)}return s.promise}makeHeaders(i){let s="";if(i.headers)for(const a in i.headers)a&&(s+=`${a}: ${i.headers[a]}${e}`);return s}parseHeaders(i){const s={};if(i){const a=i.match(/[^\r\n]+/g);if(s){for(const c of a)if(c){const u=c.indexOf(":"),d=u>0?c.substr(0,u).trim().toLowerCase():c,h=u>0&&c.length>u+1?c.substr(u+1).trim():"";s[d]=h}}}return s}stringToArrayBuffer(i){const s=new ArrayBuffer(i.length),a=new DataView(s);for(let c=0;c<i.length;c++)a.setUint8(c,i.charCodeAt(c));return s}};return qm.WebsocketMessageFormatter=r,qm}var Vm={},x5;function jue(){if(x5)return Vm;x5=1,Object.defineProperty(Vm,"__esModule",{value:!0}),Vm.SpeechConnectionFactory=void 0;const t=$n(),e=Le(),r=Ce(),n=yo(),i=Le(),s=Si(),a=Wc(),c=ws();let u=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/stt/speech/universal/v"}async create(h,p,g){let y=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);const S=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,void 0),x=n.ConnectionFactoryBase.getHostSuffix(S),w=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://"+S+".stt.speech"+x),E={},R=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId,void 0),T=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(R?(!y||y.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(E[a.QueryParameterNames.CustomSpeechDeploymentId]=R):T&&(!y||y.search(a.QueryParameterNames.Language)===-1)&&(E[a.QueryParameterNames.Language]=T),(!y||y.search(a.QueryParameterNames.Format)===-1)&&(E[a.QueryParameterNames.Format]=h.parameters.getProperty(e.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase()),h.autoDetectSourceLanguages!==void 0&&(E[a.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(h,E,y),y){const O=new URL(y),L=O.pathname;(L===""||L==="/")&&(O.pathname=this.universalUri+h.recognitionEndpointVersion,y=await n.ConnectionFactoryBase.getRedirectUrlFromEndpoint(O.toString()))}if(!y)switch(h.recognitionMode){case c.RecognitionMode.Conversation:h.parameters.getProperty(e.ForceDictationPropertyName,"false")==="true"?y=w+this.dictationRelativeUri:h.recognitionEndpointVersion!==void 0&&parseInt(h.recognitionEndpointVersion,10)>1?y=`${w}${this.universalUri}${h.recognitionEndpointVersion}`:y=w+this.conversationRelativeUri;break;case c.RecognitionMode.Dictation:y=w+this.dictationRelativeUri;break;default:h.recognitionEndpointVersion!==void 0&&parseInt(h.recognitionEndpointVersion,10)>1?y=`${w}${this.universalUri}${h.recognitionEndpointVersion}`:y=w+this.interactiveRelativeUri;break}const M={};p.token!==void 0&&p.token!==""&&(M[p.headerName]=p.token),M[s.HeaderNames.ConnectionId]=g,M.connectionId=g;const D=h.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",z=new t.WebsocketConnection(y,E,M,new i.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(h),D,g),j=z.uri;return h.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,j),z}};return Vm.SpeechConnectionFactory=u,Vm}var Fm={},w5;function Mue(){if(w5)return Fm;w5=1,Object.defineProperty(Fm,"__esModule",{value:!0}),Fm.ConversationTranscriberConnectionFactory=void 0;const t=$n(),e=Ce(),r=Le(),n=yo(),i=Le(),s=Si(),a=Wc();let c=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/stt/speech/universal/v2",this.conversationRelativeUriV1="/speech/recognition/conversation/cognitiveservices/v1"}async create(d,h,p){let g=d.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const y=d.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,void 0),S=n.ConnectionFactoryBase.getHostSuffix(y),x=d.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+y+".stt.speech"+S),w={},E=d.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),R=d.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(E?(!g||g.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(w[a.QueryParameterNames.CustomSpeechDeploymentId]=E):R&&(!g||g.search(a.QueryParameterNames.Language)===-1)&&(w[a.QueryParameterNames.Language]=R),d.autoDetectSourceLanguages!==void 0&&(w[a.QueryParameterNames.EnableLanguageId]="true"),d.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0)==="1")g=`${x}${this.universalUri}`;else{if(this.setV2UrlParams(d,w,g),g){const O=new URL(g),L=O.pathname;(L===""||L==="/")&&(O.pathname=this.universalUri,g=await n.ConnectionFactoryBase.getRedirectUrlFromEndpoint(O.toString()))}g||(g=`${x}${this.conversationRelativeUriV1}`)}const M={};h.token!==void 0&&h.token!==""&&(M[h.headerName]=h.token),M[s.HeaderNames.ConnectionId]=p;const D=d.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",z=new t.WebsocketConnection(g,w,M,new i.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(d),D,p),j=z.uri;return d.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,j),z}setV2UrlParams(d,h,p){new Map([[e.PropertyId.Speech_SegmentationSilenceTimeoutMs,a.QueryParameterNames.SegmentationSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_EnableAudioLogging,a.QueryParameterNames.EnableAudioLogging],[e.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,a.QueryParameterNames.EndSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,a.QueryParameterNames.InitialSilenceTimeoutMs],[e.PropertyId.SpeechServiceResponse_PostProcessingOption,a.QueryParameterNames.Postprocessing],[e.PropertyId.SpeechServiceResponse_ProfanityOption,a.QueryParameterNames.Profanity],[e.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,a.QueryParameterNames.StableIntermediateThreshold]]).forEach((S,x)=>{this.setUrlParameter(x,S,d,h,p)});const y=JSON.parse(d.parameters.getProperty(r.ServicePropertiesPropertyName,"{}"));Object.keys(y).forEach(S=>{h[S]=y[S]})}};return Fm.ConversationTranscriberConnectionFactory=c,Fm}var Hm={},_5;function Due(){if(_5)return Hm;_5=1,Object.defineProperty(Hm,"__esModule",{value:!0}),Hm.TranscriberConnectionFactory=void 0;const t=$n(),e=Ce(),r=yo(),n=Le(),i=Si(),s=Wc();let a=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(u,d,h){let p=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const g=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,"centralus"),y=r.ConnectionFactoryBase.getHostSuffix(g),S="wss://transcribe."+g+".cts.speech"+y+this.multiaudioRelativeUri,x=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,S),w={};this.setQueryParams(w,u,p),p||(p=x);const E={};d.token!==void 0&&d.token!==""&&(E[d.headerName]=d.token),E[i.HeaderNames.ConnectionId]=h,u.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,p);const R=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new t.WebsocketConnection(p,w,E,new n.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),R,h))}setQueryParams(u,d,h){const p=d.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),g=d.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);p&&!(s.QueryParameterNames.CustomSpeechDeploymentId in u)&&(u[s.QueryParameterNames.CustomSpeechDeploymentId]=p),g&&!(s.QueryParameterNames.Language in u)&&(u[s.QueryParameterNames.Language]=g);const y=d.parameters.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true",S=d.parameters.getProperty(n.OutputFormatPropertyName,e.OutputFormat[e.OutputFormat.Simple])!==e.OutputFormat[e.OutputFormat.Simple];(y||S)&&(u[s.QueryParameterNames.Format]=e.OutputFormat[e.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(d,u,h)}};return Hm.TranscriberConnectionFactory=a,Hm}var Wm={},E5;function kue(){if(E5)return Wm;E5=1,Object.defineProperty(Wm,"__esModule",{value:!0}),Wm.TranslationConnectionFactory=void 0;const t=$n(),e=YV(),r=Ce(),n=yo(),i=Le(),s=Si(),a=Wc(),c=ws();let u=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/stt/speech/universal/v2",this.translationV1Uri="/speech/translation/cognitiveservices/v1"}async create(h,p,g){let y=this.getEndpointUrl(h);const S={};if(this.setQueryParams(S,h,y),y){const R=new URL(y),T=R.pathname;(T===""||T==="/")&&(R.pathname=this.universalUri,y=await n.ConnectionFactoryBase.getRedirectUrlFromEndpoint(R.toString()))}const x={};p.token!==void 0&&p.token!==""&&(x[p.headerName]=p.token),x[s.HeaderNames.ConnectionId]=g,h.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,y);const w=h.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(y,S,x,new i.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(h),w,g)}getEndpointUrl(h,p){const g=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region),y=n.ConnectionFactoryBase.getHostSuffix(g);let S=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);return S?p===!0?S:e.StringUtils.formatString(S,{region:g}):(h.parameters.getProperty("SPEECH-ForceV1Endpoint","false")==="true"?S=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+y)+this.translationV1Uri:S=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+y)+this.universalUri,p===!0?S:e.StringUtils.formatString(S,{region:g}))}setQueryParams(h,p,g){h.from=p.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage),h.to=p.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages),h.scenario=p.recognitionMode===c.RecognitionMode.Interactive?"interactive":p.recognitionMode===c.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(p,h,g),this.setUrlParameter(r.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,a.QueryParameterNames.StableTranslation,p,h,g);const y=p.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);y!==void 0&&(h.voice=y,h.features="requireVoice")}};return Wm.TranslationConnectionFactory=u,Wm}var Km={},A5;function Lue(){if(A5)return Km;A5=1,Object.defineProperty(Km,"__esModule",{value:!0}),Km.EnumTranslation=void 0;const t=Ce(),e=Le();let r=class{static implTranslateRecognitionResult(i,s=!1){let a=t.ResultReason.Canceled;switch(i){case e.RecognitionStatus.Success:a=t.ResultReason.RecognizedSpeech;break;case e.RecognitionStatus.EndOfDictation:a=s?t.ResultReason.RecognizedSpeech:t.ResultReason.NoMatch;break;case e.RecognitionStatus.NoMatch:case e.RecognitionStatus.InitialSilenceTimeout:case e.RecognitionStatus.BabbleTimeout:a=t.ResultReason.NoMatch;break;case e.RecognitionStatus.Error:case e.RecognitionStatus.BadRequest:case e.RecognitionStatus.Forbidden:default:a=t.ResultReason.Canceled;break}return a}static implTranslateCancelResult(i){let s=t.CancellationReason.EndOfStream;switch(i){case e.RecognitionStatus.Success:case e.RecognitionStatus.EndOfDictation:case e.RecognitionStatus.NoMatch:s=t.CancellationReason.EndOfStream;break;case e.RecognitionStatus.InitialSilenceTimeout:case e.RecognitionStatus.BabbleTimeout:case e.RecognitionStatus.Error:case e.RecognitionStatus.BadRequest:case e.RecognitionStatus.Forbidden:default:s=t.CancellationReason.Error;break}return s}static implTranslateCancelErrorCode(i){let s=t.CancellationErrorCode.NoError;switch(i){case e.RecognitionStatus.Error:s=t.CancellationErrorCode.ServiceError;break;case e.RecognitionStatus.TooManyRequests:s=t.CancellationErrorCode.TooManyRequests;break;case e.RecognitionStatus.BadRequest:s=t.CancellationErrorCode.BadRequestParameters;break;case e.RecognitionStatus.Forbidden:s=t.CancellationErrorCode.Forbidden;break;default:s=t.CancellationErrorCode.NoError;break}return s}static implTranslateErrorDetails(i){let s="The speech service encountered an internal error and could not continue.";switch(i){case t.CancellationErrorCode.Forbidden:s="The recognizer is using a free subscription that ran out of quota.";break;case t.CancellationErrorCode.BadRequestParameters:s="Invalid parameter or unsupported audio format in the request.";break;case t.CancellationErrorCode.TooManyRequests:s="The number of parallel requests exceeded the number of allowed concurrent transcriptions.";break}return s}};return Km.EnumTranslation=r,Km}var dE={},T5;function zue(){return T5||(T5=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionStatus=t.SynthesisStatus=void 0,(function(e){e[e.Success=0]="Success",e[e.SynthesisEnd=1]="SynthesisEnd",e[e.Error=2]="Error"})(t.SynthesisStatus||(t.SynthesisStatus={})),(function(e){e[e.Success=0]="Success",e[e.NoMatch=1]="NoMatch",e[e.InitialSilenceTimeout=2]="InitialSilenceTimeout",e[e.BabbleTimeout=3]="BabbleTimeout",e[e.Error=4]="Error",e[e.EndOfDictation=5]="EndOfDictation",e[e.TooManyRequests=6]="TooManyRequests",e[e.BadRequest=7]="BadRequest",e[e.Forbidden=8]="Forbidden"})(t.RecognitionStatus||(t.RecognitionStatus={}))})(dE)),dE}var Gm={},R5;function Uue(){if(R5)return Gm;R5=1,Object.defineProperty(Gm,"__esModule",{value:!0}),Gm.TranslationSynthesisEnd=void 0;const t=Le();let e=class sF{constructor(n){this.privSynthesisEnd=JSON.parse(n),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=t.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=t.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(n){return new sF(n)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}};return Gm.TranslationSynthesisEnd=e,Gm}var $m={},P5;function Bue(){if(P5)return $m;P5=1,Object.defineProperty($m,"__esModule",{value:!0}),$m.TranslationHypothesis=void 0;const t=tt(),e=y2();let r=class HT{constructor(i,s){this.privTranslationHypothesis=i,this.privTranslationHypothesis.Offset+=s,this.privTranslationHypothesis.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationHypothesis.Translation.TranslationStatus)}static fromJSON(i,s){return new HT(JSON.parse(i),s)}static fromTranslationResponse(i,s){t.Contracts.throwIfNullOrUndefined(i,"translationHypothesis");const a=i.SpeechHypothesis;return i.SpeechHypothesis=void 0,a.Translation=i,new HT(a,s)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){return this.privTranslationHypothesis.PrimaryLanguage?.Language}asJson(){const i={...this.privTranslationHypothesis};return i.Translation!==void 0?JSON.stringify({...i,TranslationStatus:e.TranslationStatus[i.Translation.TranslationStatus]}):JSON.stringify(i)}mapTranslationStatus(i){if(typeof i=="string")return e.TranslationStatus[i];if(typeof i=="number")return i}};return $m.TranslationHypothesis=r,$m}var Ym={},I5;function que(){if(I5)return Ym;I5=1,Object.defineProperty(Ym,"__esModule",{value:!0}),Ym.TranslationPhrase=void 0;const t=tt(),e=Le(),r=y2();let n=class WT{constructor(s,a){this.privTranslationPhrase=s,this.privTranslationPhrase.Offset+=a,this.privTranslationPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privTranslationPhrase.RecognitionStatus),this.privTranslationPhrase.Translation!==void 0&&(this.privTranslationPhrase.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationPhrase.Translation.TranslationStatus))}static fromJSON(s,a){return new WT(JSON.parse(s),a)}static fromTranslationResponse(s,a){t.Contracts.throwIfNullOrUndefined(s,"translationResponse");const c=s.SpeechPhrase;return s.SpeechPhrase=void 0,c.Translation=s,c.Text=c.DisplayText,new WT(c,a)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){return this.privTranslationPhrase.PrimaryLanguage?.Language}get Confidence(){return this.privTranslationPhrase.PrimaryLanguage?.Confidence}get Translation(){return this.privTranslationPhrase.Translation}asJson(){const s={...this.privTranslationPhrase},a={...s,RecognitionStatus:e.RecognitionStatus[s.RecognitionStatus]};return s.Translation&&(a.Translation={...s.Translation,TranslationStatus:r.TranslationStatus[s.Translation.TranslationStatus]}),JSON.stringify(a)}mapRecognitionStatus(s){if(typeof s=="string")return e.RecognitionStatus[s];if(typeof s=="number")return s}mapTranslationStatus(s){if(typeof s=="string")return r.TranslationStatus[s];if(typeof s=="number")return s}};return Ym.TranslationPhrase=n,Ym}var Xm={},N5;function Vue(){if(N5)return Xm;N5=1,Object.defineProperty(Xm,"__esModule",{value:!0}),Xm.TranslationServiceRecognizer=void 0;const t=Ve(),e=Ce(),r=Le();let n=class extends r.ConversationServiceRecognizer{constructor(s,a,c,u,d){super(s,a,c,u,d),this.privTranslationRecognizer=d,this.connectionEvents.attach(h=>{h.name==="ConnectionEstablishedEvent"&&this.privTranslationRecognizer.onConnection()})}async processTypeSpecificMessages(s){const a=new e.PropertyCollection;let c=await this.processSpeechMessages(s);if(c)return!0;const u=async h=>{if(a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,h.asJson()),this.privRequestSession.onPhraseRecognized(h.Offset+h.Duration),h.RecognitionStatus===r.RecognitionStatus.Success){const p=this.fireEventForResult(h,a);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,p)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(p.result)}catch(g){this.privErrorCallback&&this.privErrorCallback(g)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const p=r.EnumTranslation.implTranslateRecognitionResult(h.RecognitionStatus),g=new e.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,p,h.Text,h.Duration,h.Offset,h.Language,h.Confidence,void 0,h.asJson(),a);if(p===e.ResultReason.Canceled){const y=r.EnumTranslation.implTranslateCancelResult(h.RecognitionStatus),S=r.EnumTranslation.implTranslateCancelErrorCode(h.RecognitionStatus);await this.cancelRecognitionLocal(y,S,r.EnumTranslation.implTranslateErrorDetails(S))}else if(h.RecognitionStatus!==r.RecognitionStatus.EndOfDictation){const y=new e.TranslationRecognitionEventArgs(g,g.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,y)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(g)}catch(S){this.privErrorCallback&&this.privErrorCallback(S)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}c=!0}},d=h=>{a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,h.asJson());const p=this.fireEventForResult(h,a);if(this.privRequestSession.onHypothesis(p.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,p)}catch{}c=!0};switch(s.messageType===t.MessageType.Text&&a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,s.textBody),s.path.toLowerCase()){case"translation.hypothesis":d(r.TranslationHypothesis.fromJSON(s.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.response":const h=JSON.parse(s.textBody);if(h.SpeechPhrase)await u(r.TranslationPhrase.fromTranslationResponse(h,this.privRequestSession.currentTurnAudioOffset));else{const g=JSON.parse(s.textBody);g.SpeechHypothesis&&d(r.TranslationHypothesis.fromTranslationResponse(g,this.privRequestSession.currentTurnAudioOffset))}break;case"translation.phrase":await u(r.TranslationPhrase.fromJSON(s.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.synthesis":case"audio":this.sendSynthesisAudio(s.binaryBody,this.privRequestSession.sessionId),c=!0;break;case"audio.end":case"translation.synthesis.end":const p=r.TranslationSynthesisEnd.fromJSON(s.textBody);switch(p.SynthesisStatus){case r.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const g=new e.TranslationSynthesisResult(e.ResultReason.Canceled,void 0),y=new e.TranslationSynthesisEventArgs(g,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,y)}catch{}}if(this.privTranslationRecognizer.canceled){const g=new e.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,e.CancellationReason.Error,p.FailureReason,e.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,g)}catch{}}break;case r.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId);break}c=!0;break}return c}cancelRecognition(s,a,c,u,d){const h=new e.PropertyCollection;if(h.setProperty(r.CancellationErrorCodePropertyName,e.CancellationErrorCode[u]),this.privTranslationRecognizer.canceled){const p=new e.TranslationRecognitionCanceledEventArgs(s,c,d,u,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,p)}catch{}}if(this.privSuccessCallback){const p=new e.TranslationRecognitionResult(void 0,a,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,d,void 0,h);try{this.privSuccessCallback(p),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(s,a,c){try{const u=new e.TranslationRecognitionEventArgs(e.TranslationRecognitionResult.fromSpeechRecognitionResult(s),a,c);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,u)}catch{}}handleRecognizedCallback(s,a,c){try{const u=new e.TranslationRecognitionEventArgs(e.TranslationRecognitionResult.fromSpeechRecognitionResult(s),a,c);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,u)}catch{}}fireEventForResult(s,a){let c;if(s.Translation.Translations!==void 0){c=new e.Translations;for(const y of s.Translation.Translations)c.set(y.Language,y.Text||y.DisplayText)}let u,d;s instanceof r.TranslationPhrase?(s.Translation&&s.Translation.TranslationStatus===t.TranslationStatus.Success?u=e.ResultReason.TranslatedSpeech:u=e.ResultReason.RecognizedSpeech,d=s.Confidence):u=e.ResultReason.TranslatingSpeech;const h=s.Language,p=new e.TranslationRecognitionResult(c,this.privRequestSession.requestId,u,s.Text,s.Duration,s.Offset,h,d,s.Translation.FailureReason,s.asJson(),a);return new e.TranslationRecognitionEventArgs(p,s.Offset,this.privRequestSession.sessionId)}sendSynthesisAudio(s,a){const c=s===void 0?e.ResultReason.SynthesizingAudioCompleted:e.ResultReason.SynthesizingAudio,u=new e.TranslationSynthesisResult(c,s),d=new e.TranslationSynthesisEventArgs(u,a);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,d)}catch{}}};return Xm.TranslationServiceRecognizer=n,Xm}var Qm={},O5;function Fue(){if(O5)return Qm;O5=1,Object.defineProperty(Qm,"__esModule",{value:!0}),Qm.SpeechDetected=void 0;let t=class aF{constructor(r,n){this.privSpeechStartDetected=JSON.parse(r),this.privSpeechStartDetected.Offset+=n}static fromJSON(r,n){return new aF(r,n)}get Offset(){return this.privSpeechStartDetected.Offset}};return Qm.SpeechDetected=t,Qm}var Jm={},j5;function Hue(){if(j5)return Jm;j5=1,Object.defineProperty(Jm,"__esModule",{value:!0}),Jm.SpeechHypothesis=void 0;let t=class oF{constructor(r,n){this.privSpeechHypothesis=JSON.parse(r),this.updateOffset(n)}static fromJSON(r,n){return new oF(r,n)}updateOffset(r){this.privSpeechHypothesis.Offset+=r}asJson(){return JSON.stringify(this.privSpeechHypothesis)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}};return Jm.SpeechHypothesis=t,Jm}var Zm={},M5;function Wue(){if(M5)return Zm;M5=1,Object.defineProperty(Zm,"__esModule",{value:!0}),Zm.SpeechKeyword=void 0;let t=class cF{constructor(r,n){this.privSpeechKeyword=JSON.parse(r),this.privSpeechKeyword.Offset+=n}static fromJSON(r,n){return new cF(r,n)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}asJson(){return JSON.stringify(this.privSpeechKeyword)}};return Zm.SpeechKeyword=t,Zm}var ev={},D5;function Kue(){if(D5)return ev;D5=1,Object.defineProperty(ev,"__esModule",{value:!0}),ev.SpeechServiceRecognizer=void 0;const t=Ce(),e=Le();let r=class extends e.ServiceRecognizerBase{constructor(i,s,a,c,u){super(i,s,a,c,u),this.privSpeechRecognizer=u}async processTypeSpecificMessages(i){let s;const a=new t.PropertyCollection;let c=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const u=e.SpeechHypothesis.fromJSON(i.textBody,this.privRequestSession.currentTurnAudioOffset);a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,u.asJson()),s=new t.SpeechRecognitionResult(this.privRequestSession.requestId,t.ResultReason.RecognizingSpeech,u.Text,u.Duration,u.Offset,u.Language,u.LanguageDetectionConfidence,void 0,void 0,u.asJson(),a),this.privRequestSession.onHypothesis(u.Offset);const d=new t.SpeechRecognitionEventArgs(s,u.Offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,d)}catch{}c=!0;break;case"speech.phrase":const h=e.SimpleSpeechPhrase.fromJSON(i.textBody,this.privRequestSession.currentTurnAudioOffset);a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,h.asJson());const p=e.EnumTranslation.implTranslateRecognitionResult(h.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(h.Offset+h.Duration),t.ResultReason.Canceled===p){const g=e.EnumTranslation.implTranslateCancelResult(h.RecognitionStatus),y=e.EnumTranslation.implTranslateCancelErrorCode(h.RecognitionStatus);await this.cancelRecognitionLocal(g,y,e.EnumTranslation.implTranslateErrorDetails(y))}else{if(h.RecognitionStatus===e.RecognitionStatus.EndOfDictation)break;if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===t.OutputFormat[t.OutputFormat.Simple])s=new t.SpeechRecognitionResult(this.privRequestSession.requestId,p,h.DisplayText,h.Duration,h.Offset,h.Language,h.LanguageDetectionConfidence,void 0,void 0,h.asJson(),a);else{const y=e.DetailedSpeechPhrase.fromJSON(i.textBody,this.privRequestSession.currentTurnAudioOffset);a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,y.asJson()),s=new t.SpeechRecognitionResult(this.privRequestSession.requestId,p,y.RecognitionStatus===e.RecognitionStatus.Success?y.NBest[0].Display:"",y.Duration,y.Offset,y.Language,y.LanguageDetectionConfidence,void 0,void 0,y.asJson(),a)}const g=new t.SpeechRecognitionEventArgs(s,s.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,g)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(s)}catch(y){this.privErrorCallback&&this.privErrorCallback(y)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}c=!0;break}return c}cancelRecognition(i,s,a,c,u){const d=new t.PropertyCollection;if(d.setProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[c]),this.privSpeechRecognizer.canceled){const h=new t.SpeechRecognitionCanceledEventArgs(a,u,c,void 0,i);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,h)}catch{}}if(this.privSuccessCallback){const h=new t.SpeechRecognitionResult(s,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,u,void 0,d);try{this.privSuccessCallback(h),this.privSuccessCallback=void 0}catch{}}}};return ev.SpeechServiceRecognizer=r,ev}var tv={},hE={},k5;function Gue(){return k5||(k5=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.IdentityProvider=t.SpeakerDiarizationMode=void 0,(function(e){e.None="None",e.Identity="Identity",e.Anonymous="Anonymous"})(t.SpeakerDiarizationMode||(t.SpeakerDiarizationMode={})),(function(e){e.CallCenter="CallCenter"})(t.IdentityProvider||(t.IdentityProvider={}))})(hE)),hE}var L5;function $ue(){if(L5)return tv;L5=1,Object.defineProperty(tv,"__esModule",{value:!0}),tv.ConversationTranscriptionServiceRecognizer=void 0;const t=Ce(),e=Le(),r=Gue(),n=ws();let i=class extends e.ServiceRecognizerBase{constructor(a,c,u,d,h){super(a,c,u,d,h),this.privConversationTranscriber=h,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const a=this.privSpeechContext.getContext().phraseDetection||{};a.mode=n.RecognitionMode.Conversation;const c={};c.mode=r.SpeakerDiarizationMode.Anonymous,c.audioSessionId=this.privDiarizationSessionId,c.audioOffsetMs=0,c.diarizeIntermediates=this.privRecognizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceResponse_DiarizeIntermediateResults,"false")==="true",a.speakerDiarization=c,this.privSpeechContext.getContext().phraseDetection=a}}async processTypeSpecificMessages(a){let c;const u=new t.PropertyCollection;u.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,a.textBody);let d=!1;switch(a.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const h=e.SpeechHypothesis.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);c=new t.ConversationTranscriptionResult(this.privRequestSession.requestId,t.ResultReason.RecognizingSpeech,h.Text,h.Duration,h.Offset,h.Language,h.LanguageDetectionConfidence,h.SpeakerId,void 0,h.asJson(),u),this.privRequestSession.onHypothesis(h.Offset);const p=new t.ConversationTranscriptionEventArgs(c,h.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,p)}catch{}d=!0;break;case"speech.phrase":const g=e.SimpleSpeechPhrase.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset),y=e.EnumTranslation.implTranslateRecognitionResult(g.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(g.Offset+g.Duration),t.ResultReason.Canceled===y){const S=e.EnumTranslation.implTranslateCancelResult(g.RecognitionStatus),x=e.EnumTranslation.implTranslateCancelErrorCode(g.RecognitionStatus);await this.cancelRecognitionLocal(S,x,e.EnumTranslation.implTranslateErrorDetails(x))}else if(!(this.privRequestSession.isSpeechEnded&&y===t.ResultReason.NoMatch&&g.RecognitionStatus!==e.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===t.OutputFormat[t.OutputFormat.Simple])c=new t.ConversationTranscriptionResult(this.privRequestSession.requestId,y,g.DisplayText,g.Duration,g.Offset,g.Language,g.LanguageDetectionConfidence,g.SpeakerId,void 0,g.asJson(),u);else{const x=e.DetailedSpeechPhrase.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);c=new t.ConversationTranscriptionResult(this.privRequestSession.requestId,y,x.RecognitionStatus===e.RecognitionStatus.Success?x.NBest[0].Display:void 0,x.Duration,x.Offset,x.Language,x.LanguageDetectionConfidence,g.SpeakerId,void 0,x.asJson(),u)}const S=new t.ConversationTranscriptionEventArgs(c,c.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,S)}catch{}}d=!0;break}return d}cancelRecognition(a,c,u,d,h){if(new t.PropertyCollection().setProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[d]),this.privConversationTranscriber.canceled){const g=new t.ConversationTranscriptionCanceledEventArgs(u,h,d,void 0,a);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,g)}catch{}}}};return tv.ConversationTranscriptionServiceRecognizer=i,tv}var rv={},z5;function Yue(){if(z5)return rv;z5=1,Object.defineProperty(rv,"__esModule",{value:!0}),rv.TranscriptionServiceRecognizer=void 0;const t=Ve(),e=Ce(),r=Le(),n=HC();let i=class extends r.ConversationServiceRecognizer{constructor(a,c,u,d,h){super(a,c,u,d,h),this.privTranscriberRecognizer=h,this.sendPrePayloadJSONOverride=p=>this.sendTranscriptionStartJSON(p),this.privRecognizerConfig.parameters.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)==="true"&&this.privSpeechContext.setWordLevelTimings()}async sendSpeechEventAsync(a,c){if(this.privRequestSession.isRecognizing){const u=await this.fetchConnection();await this.sendSpeechEvent(u,this.createSpeechEventPayload(a,c))}}async sendMeetingSpeechEventAsync(a,c){if(this.privRequestSession.isRecognizing){const u=await this.fetchConnection();await this.sendSpeechEvent(u,this.createMeetingSpeechEventPayload(a,c))}}processTypeSpecificMessages(a){return this.processSpeechMessages(a)}handleRecognizedCallback(a,c,u){try{const d=new e.SpeechRecognitionEventArgs(a,c,u);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,d),this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch{}}handleRecognizingCallback(a,c,u){try{const d=new e.SpeechRecognitionEventArgs(a,c,u);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,d)}catch{}}cancelRecognition(a,c,u,d,h){const p=new e.PropertyCollection;if(p.setProperty(r.CancellationErrorCodePropertyName,e.CancellationErrorCode[d]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const g=new e.MeetingTranscriptionCanceledEventArgs(u,h,d,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,g)}catch{}}}else if(this.privTranscriberRecognizer.canceled){const g=new e.ConversationTranscriptionCanceledEventArgs(u,h,d,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,g)}catch{}}if(this.privSuccessCallback){const g=new e.SpeechRecognitionResult(c,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,h,void 0,p);try{this.privSuccessCallback(g),this.privSuccessCallback=void 0}catch{}}}async sendTranscriptionStartJSON(a){if(await this.sendSpeechContext(a,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const c=this.privTranscriberRecognizer.getMeetingInfo(),u=this.createMeetingSpeechEventPayload(c,"start");await this.sendSpeechEvent(a,u)}else{const c=this.privTranscriberRecognizer.getConversationInfo(),u=this.createSpeechEventPayload(c,"start");await this.sendSpeechEvent(a,u)}await this.sendWaveHeader(a)}sendSpeechEvent(a,c){const u=JSON.stringify(c);if(u)return a.send(new n.SpeechConnectionMessage(t.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",u))}createSpeechEventPayload(a,c){const u={id:"meeting",name:c,meeting:a.conversationProperties};return u.meeting.id=a.id,u.meeting.attendees=a.participants,u}createMeetingSpeechEventPayload(a,c){const u={id:"meeting",name:c,meeting:a.meetingProperties};return u.meeting.id=a.id,u.meeting.attendees=a.participants,u}};return rv.TranscriptionServiceRecognizer=i,rv}var nv={},U5;function Xue(){if(U5)return nv;U5=1,Object.defineProperty(nv,"__esModule",{value:!0}),nv.DetailedSpeechPhrase=void 0;const t=Le();let e=class lF{constructor(n,i){this.privDetailedSpeechPhrase=JSON.parse(n),this.privDetailedSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privDetailedSpeechPhrase.RecognitionStatus),this.updateOffsets(i)}static fromJSON(n,i){return new lF(n,i)}updateOffsets(n){if(this.privDetailedSpeechPhrase.Offset+=n,this.privDetailedSpeechPhrase.NBest)for(const i of this.privDetailedSpeechPhrase.NBest){if(i.Words)for(const s of i.Words)s.Offset+=n;if(i.DisplayWords)for(const s of i.DisplayWords)s.Offset+=n}}asJson(){const n={...this.privDetailedSpeechPhrase};return JSON.stringify({...n,RecognitionStatus:t.RecognitionStatus[n.RecognitionStatus]})}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}mapRecognitionStatus(n){if(typeof n=="string")return t.RecognitionStatus[n];if(typeof n=="number")return n}};return nv.DetailedSpeechPhrase=e,nv}var iv={},B5;function Que(){if(B5)return iv;B5=1,Object.defineProperty(iv,"__esModule",{value:!0}),iv.SimpleSpeechPhrase=void 0;const t=Le();let e=class uF{constructor(n,i=0){this.privSimpleSpeechPhrase=JSON.parse(n),this.privSimpleSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privSimpleSpeechPhrase.RecognitionStatus),this.updateOffset(i)}static fromJSON(n,i){return new uF(n,i)}updateOffset(n){this.privSimpleSpeechPhrase.Offset+=n}asJson(){const n={...this.privSimpleSpeechPhrase};return JSON.stringify({...n,RecognitionStatus:t.RecognitionStatus[n.RecognitionStatus]})}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}mapRecognitionStatus(n){if(typeof n=="string")return t.RecognitionStatus[n];if(typeof n=="number")return n}};return iv.SimpleSpeechPhrase=e,iv}var sv={},av={},q5;function Jue(){if(q5)return av;q5=1,Object.defineProperty(av,"__esModule",{value:!0}),av.ServiceTelemetryListener=void 0;const t=Ve(),e=S2();class r{constructor(i,s,a){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=i,this.privAudioSourceId=s,this.privAudioNodeId=a,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(i){i>0&&this.privPhraseLatencies.push(Date.now()-i)}hypothesisReceived(i){i>0&&this.privHypothesisLatencies.push(Date.now()-i)}onEvent(i){this.privIsDisposed||(i instanceof e.RecognitionTriggeredEvent&&i.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:i.eventTime,Name:"ListeningTrigger",Start:i.eventTime}),i instanceof t.AudioStreamNodeAttachingEvent&&i.audioSourceId===this.privAudioSourceId&&i.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=i.eventTime),i instanceof t.AudioStreamNodeAttachedEvent&&i.audioSourceId===this.privAudioSourceId&&i.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=i.eventTime),i instanceof t.AudioSourceErrorEvent&&i.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:i.eventTime,Error:i.error,Name:"Microphone",Start:this.privMicStartTime})),i instanceof t.AudioStreamNodeErrorEvent&&i.audioSourceId===this.privAudioSourceId&&i.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:i.eventTime,Error:i.error,Name:"Microphone",Start:this.privMicStartTime})),i instanceof t.AudioStreamNodeDetachedEvent&&i.audioSourceId===this.privAudioSourceId&&i.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:i.eventTime,Name:"Microphone",Start:this.privMicStartTime})),i instanceof e.ConnectingToServiceEvent&&i.requestId===this.privRequestId&&(this.privConnectionId=i.sessionId),i instanceof t.ConnectionStartEvent&&i.connectionId===this.privConnectionId&&(this.privConnectionStartTime=i.eventTime),i instanceof t.ConnectionEstablishedEvent&&i.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:i.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),i instanceof t.ConnectionEstablishErrorEvent&&i.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:i.eventTime,Error:this.getConnectionError(i.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),i instanceof t.ConnectionMessageReceivedEvent&&i.connectionId===this.privConnectionId&&i.message&&i.message.headers&&i.message.headers.path&&(this.privReceivedMessages[i.message.headers.path]||(this.privReceivedMessages[i.message.headers.path]=new Array),this.privReceivedMessages[i.message.headers.path].length<50&&this.privReceivedMessages[i.message.headers.path].push(i.networkReceivedTime)))}getTelemetry(){const i=new Array;this.privListeningTriggerMetric&&i.push(this.privListeningTriggerMetric),this.privMicMetric&&i.push(this.privMicMetric),this.privConnectionEstablishMetric&&i.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&i.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&i.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const s={Metrics:i,ReceivedMessages:this.privReceivedMessages},a=JSON.stringify(s);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],a}get hasTelemetry(){return Object.keys(this.privReceivedMessages).length!==0||this.privListeningTriggerMetric!==null||this.privMicMetric!==null||this.privConnectionEstablishMetric!==null||this.privPhraseLatencies.length!==0||this.privHypothesisLatencies.length!==0}dispose(){this.privIsDisposed=!0}getConnectionError(i){switch(i){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+i.toString()}}}return av.ServiceTelemetryListener=r,av}var V5;function Zue(){if(V5)return sv;V5=1,Object.defineProperty(sv,"__esModule",{value:!0}),sv.RequestSession=void 0;const t=Ve(),e=S2(),r=Jue();let n=class{constructor(s){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=s,this.privRequestId=(0,t.createNoDashGuid)(),this.privAudioNodeId=(0,t.createNoDashGuid)(),this.privTurnDeferral=new t.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(s){this.privServiceTelemetryListener&&this.privDetachables.push(s.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new r.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new e.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}async onAudioSourceAttachCompleted(s,a){this.privAudioNode=s,this.privIsAudioNodeDetached=!1,a?await this.onComplete():this.onEvent(new e.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onPreConnectionStart(s,a){this.privAuthFetchEventId=s,this.privSessionId=a,this.onEvent(new e.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}async onAuthCompleted(s){s&&await this.onComplete()}async onConnectionEstablishCompleted(s,a){if(s===200){this.onEvent(new e.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0;return}else s===403&&await this.onComplete()}async onServiceTurnEndResponse(s){this.privTurnDeferral.resolve(),!s||this.isSpeechEnded?(await this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}onSpeechContext(){this.privRequestId=(0,t.createNoDashGuid)()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new t.Deferred}onHypothesis(s){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(s)))}onPhraseRecognized(s){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(s)),this.onServiceRecognized(s)}onServiceRecognized(s){this.privLastRecoOffset=s,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(s),this.privConnectionAttempts=0}onAudioSent(s){this.privBytesSent+=s,this.privRecognitionBytesSent+=s}onRetryConnection(){this.privConnectionAttempts++}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const s of this.privDetachables)await s.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}async onStopRecognizing(){await this.onComplete()}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(s){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(s),t.Events.instance.onEvent(s)}async onComplete(){this.privIsRecognizing&&(this.privIsRecognizing=!1,await this.detachAudioNode())}async detachAudioNode(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&await this.privAudioNode.detach())}};return sv.RequestSession=n,sv}var ov={},fE={},F5;function ede(){return F5||(F5=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TentativePhraseResultsOption=t.OutputFormat=t.PhraseExtension=t.PhraseOption=void 0,(function(e){e.WordTimings="WordTimings",e.SNR="SNR",e.Pronunciation="Pronunciation",e.WordPronunciation="WordPronunciation",e.WordConfidence="WordConfidence",e.Words="Words",e.Sentiment="Sentiment",e.PronunciationAssessment="PronunciationAssessment",e.ContentAssessment="ContentAssessment",e.PhraseAMScore="PhraseAMScore",e.PhraseLMScore="PhraseLMScore",e.WordAMScore="WordAMScore",e.WordLMScore="WordLMScore",e.RuleTree="RuleTree",e.NBestTimings="NBestTimings",e.DecoderDiagnostics="DecoderDiagnostics",e.DisplayWordTimings="DisplayWordTimings",e.DisplayWords="DisplayWords"})(t.PhraseOption||(t.PhraseOption={})),(function(e){e.Graph="Graph",e.Corrections="Corrections",e.Sentiment="Sentiment"})(t.PhraseExtension||(t.PhraseExtension={})),(function(e){e.Simple="Simple",e.Detailed="Detailed"})(t.OutputFormat||(t.OutputFormat={})),(function(e){e.None="None",e.Always="Always"})(t.TentativePhraseResultsOption||(t.TentativePhraseResultsOption={}))})(fE)),fE}var H5;function tde(){if(H5)return ov;H5=1,Object.defineProperty(ov,"__esModule",{value:!0}),ov.SpeechContext=void 0;const t=ws(),e=ede();let r=class{constructor(i){this.privContext={},this.privDynamicGrammar=i}getContext(){return this.privContext}setPronunciationAssessmentParams(i,s=!1){this.privContext.phraseDetection===void 0&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment===void 0&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(i)||{},s&&(this.privContext.phraseDetection.mode=t.RecognitionMode.Conversation),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push(e.PhraseOption.PronunciationAssessment),this.privContext.phraseOutput.detailed.options.indexOf(e.PhraseOption.SNR)===-1&&this.privContext.phraseOutput.detailed.options.push(e.PhraseOption.SNR)}setDetailedOutputFormat(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format=e.OutputFormat.Detailed}setWordLevelTimings(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format=e.OutputFormat.Detailed,this.privContext.phraseOutput.detailed.options.indexOf(e.PhraseOption.WordTimings)===-1&&this.privContext.phraseOutput.detailed.options.push(e.PhraseOption.WordTimings)}setSpeakerDiarizationAudioOffsetMs(i){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=i}toJSON(){const i=this.privDynamicGrammar.generateGrammarObject();return this.privContext.dgi=i,JSON.stringify(this.privContext)}};return ov.SpeechContext=r,ov}var cv={},pE={},W5;function rde(){return W5||(W5=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SubstringMatchType=t.GroupType=void 0,(function(e){e.IntentText="IntentText",e.IntentEntity="IntentEntity",e.Generic="Generic",e.People="People",e.Place="Place",e.DynamicEntity="DynamicEntity"})(t.GroupType||(t.GroupType={})),(function(e){e.None="None",e.LeftRooted="LeftRooted",e.PartialName="PartialName",e.MiddleOfSentence="MiddleOfSentence"})(t.SubstringMatchType||(t.SubstringMatchType={}))})(pE)),pE}var K5;function nde(){if(K5)return cv;K5=1,Object.defineProperty(cv,"__esModule",{value:!0}),cv.DynamicGrammarBuilder=void 0;const t=rde();let e=class{constructor(){this.privWeight=1}addPhrase(n){this.privPhrases||(this.privPhrases=[]),n instanceof Array?this.privPhrases=this.privPhrases.concat(n):this.privPhrases.push(n)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(n){this.privGrammars||(this.privGrammars=[]),n instanceof Array?this.privGrammars=this.privGrammars.concat(n):this.privGrammars.push(n)}clearGrammars(){this.privGrammars=void 0}setWeight(n){this.privWeight=n}generateGrammarObject(){if(this.privGrammars===void 0&&this.privPhrases===void 0)return;const n={};if(n.referenceGrammars=this.privGrammars,this.privPhrases!==void 0&&this.privPhrases.length!==0){const i=[];this.privPhrases.forEach(s=>{i.push({text:s})}),n.groups=[{type:t.GroupType.Generic,items:i}],n.bias=this.privWeight}return n}};return cv.DynamicGrammarBuilder=e,cv}var lv={},uv={},dv={},mE={},G5;function dF(){return G5||(G5=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MessageDataStreamType=t.ActivityPayloadResponse=void 0;class e{constructor(n){this.privActivityResponse=JSON.parse(n)}static fromJSON(n){return new e(n)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}t.ActivityPayloadResponse=e,(function(r){r[r.None=0]="None",r[r.TextToSpeechAudio=1]="TextToSpeechAudio"})(t.MessageDataStreamType||(t.MessageDataStreamType={}))})(mE)),mE}var $5;function ide(){if($5)return dv;$5=1,Object.defineProperty(dv,"__esModule",{value:!0}),dv.DialogServiceTurnState=void 0;const t=Fg(),e=xh(),r=dF();let n=class{constructor(s,a){this.privRequestId=a,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=s,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(s,a){return s.messageDataStreamType===r.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=e.AudioOutputStream.createPullStream(),this.privAudioStream.format=a!==void 0?a:t.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){this.privAudioStream!==null&&!this.privAudioStream.isClosed&&this.privAudioStream.close()}complete(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}};return dv.DialogServiceTurnState=n,dv}var Y5;function sde(){if(Y5)return uv;Y5=1,Object.defineProperty(uv,"__esModule",{value:!0}),uv.DialogServiceTurnStateManager=void 0;const t=ga(),e=ide();let r=class{constructor(){this.privTurnMap=new Map}StartTurn(i){if(this.privTurnMap.has(i))throw new t.InvalidOperationError("Service error: There is already a turn with id:"+i);const s=new e.DialogServiceTurnState(this,i);return this.privTurnMap.set(i,s),this.privTurnMap.get(i)}GetTurn(i){return this.privTurnMap.get(i)}CompleteTurn(i){if(!this.privTurnMap.has(i))throw new t.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+i);const s=this.privTurnMap.get(i);return s.complete(),this.privTurnMap.delete(i),s}};return uv.DialogServiceTurnStateManager=r,uv}var vE={},X5;function ade(){return X5||(X5=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.InvocationSource=void 0,(function(e){e.None="None",e.VoiceActivationWithKeyword="VoiceActivationWithKeyword"})(t.InvocationSource||(t.InvocationSource={}))})(vE)),vE}var gE={},Q5;function ode(){return Q5||(Q5=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.OnRejectAction=t.KeywordDetectionType=void 0,(function(e){e.StartTrigger="StartTrigger"})(t.KeywordDetectionType||(t.KeywordDetectionType={})),(function(e){e.EndOfTurn="EndOfTurn",e.Continue="Continue"})(t.OnRejectAction||(t.OnRejectAction={}))})(gE)),gE}var J5;function cde(){if(J5)return lv;J5=1,Object.defineProperty(lv,"__esModule",{value:!0}),lv.DialogServiceAdapter=void 0;const t=$n(),e=xV(),r=Ve(),n=Fg(),i=Ce(),s=sde(),a=Le(),c=dF(),u=ade(),d=ode(),h=HC();let p=class extends a.ServiceRecognizerBase{constructor(y,S,x,w,E){super(y,S,x,w,E),this.privEvents=new r.EventSource,this.privDialogServiceConnector=E,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new s.DialogServiceTurnStateManager,this.recognizeOverride=(R,T,M)=>this.listenOnce(R,T,M),this.postConnectImplOverride=R=>this.dialogConnectImpl(R),this.configConnectionOverride=R=>this.configConnection(R),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=x,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(R=>{R.name==="ConnectionClosedEvent"&&(this.terminateMessageLoop=!0)})}async sendMessage(y){const S=(0,r.createGuid)(),x=(0,r.createNoDashGuid)(),w={context:{interactionId:S},messagePayload:JSON.parse(y),version:.5},E=JSON.stringify(w);await(await this.fetchConnection()).send(new h.SpeechConnectionMessage(r.MessageType.Text,"agent",x,"application/json",E))}async privDisconnect(){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}processTypeSpecificMessages(y){const S=new i.PropertyCollection;y.messageType===r.MessageType.Text&&S.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,y.textBody);let x,w;switch(y.path.toLowerCase()){case"speech.phrase":const R=a.SimpleSpeechPhrase.fromJSON(y.textBody,this.privRequestSession.currentTurnAudioOffset);if(this.privRequestSession.onPhraseRecognized(R.Offset+R.Duration),R.RecognitionStatus!==a.RecognitionStatus.TooManyRequests&&R.RecognitionStatus!==a.RecognitionStatus.Error){const j=this.fireEventForResult(R,S);if(this.privLastResult=j.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,j)}catch{}}w=!0;break;case"speech.hypothesis":const T=a.SpeechHypothesis.fromJSON(y.textBody,this.privRequestSession.currentTurnAudioOffset);x=new i.SpeechRecognitionResult(this.privRequestSession.requestId,i.ResultReason.RecognizingSpeech,T.Text,T.Duration,T.Offset,T.Language,T.LanguageDetectionConfidence,void 0,void 0,T.asJson(),S),this.privRequestSession.onHypothesis(T.Offset);const M=new i.SpeechRecognitionEventArgs(x,T.Offset,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,M)}catch{}w=!0;break;case"speech.keyword":const D=a.SpeechKeyword.fromJSON(y.textBody,this.privRequestSession.currentTurnAudioOffset);x=new i.SpeechRecognitionResult(this.privRequestSession.requestId,D.Status==="Accepted"?i.ResultReason.RecognizedKeyword:i.ResultReason.NoMatch,D.Text,D.Duration,D.Offset,void 0,void 0,void 0,void 0,D.asJson(),S),D.Status!=="Accepted"&&(this.privLastResult=x);const z=new i.SpeechRecognitionEventArgs(x,x.duration,x.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,z)}catch{}w=!0;break;case"audio":{const j=y.requestId.toUpperCase(),O=this.privTurnStateManager.GetTurn(j);try{y.binaryBody?O.audioStream.write(y.binaryBody):O.endAudioStream()}catch{}}w=!0;break;case"response":this.handleResponseMessage(y),w=!0;break}const E=new r.Deferred;return E.resolve(w),E.promise}async cancelRecognition(y,S,x,w,E){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&await this.privRequestSession.onStopRecognizing(),this.privDialogServiceConnector.canceled){const R=new i.PropertyCollection;R.setProperty(a.CancellationErrorCodePropertyName,i.CancellationErrorCode[w]);const T=new i.SpeechRecognitionCanceledEventArgs(x,E,w,void 0,y);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,T)}catch{}if(this.privSuccessCallback){const M=new i.SpeechRecognitionResult(void 0,i.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,E,void 0,R);try{this.privSuccessCallback(M),this.privSuccessCallback=void 0}catch{}}}}async listenOnce(y,S,x){this.privRecognizerConfig.recognitionMode=y,this.privSuccessCallback=S,this.privErrorCallback=x,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(i.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const w=this.connectImpl(),E=this.sendPreAudioMessages(),R=await this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),T=await this.privDialogAudioSource.format,M=await this.privDialogAudioSource.deviceInfo,D=new t.ReplayableAudioNode(R,T.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(D,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:M};try{await w,await E}catch(O){return await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.ConnectionFailure,O),Promise.resolve()}const z=new i.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,z),this.sendAudio(D).then(()=>{},async O=>{await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,O)})}dialogConnectImpl(y){return this.privConnectionLoop=this.startMessageLoop(),y}receiveDialogMessageOverride(){const y=new r.Deferred,S=async()=>{try{const x=this.isDisposed(),w=!this.isDisposed()&&this.terminateMessageLoop;if(x||w){y.resolve(void 0);return}const R=await(await this.fetchConnection()).read();if(!R)return S();const T=h.SpeechConnectionMessage.fromConnectionMessage(R);switch(T.path.toLowerCase()){case"turn.start":{const V=T.requestId.toUpperCase(),U=this.privRequestSession.requestId.toUpperCase();V!==U?this.privTurnStateManager.StartTurn(V):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const D=a.SpeechDetected.fromJSON(T.textBody,this.privRequestSession.currentTurnAudioOffset),z=new i.RecognitionEventArgs(D.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,z);break;case"speech.enddetected":let j;T.textBody.length>0?j=T.textBody:j="{ Offset: 0 }";const O=a.SpeechDetected.fromJSON(j,this.privRequestSession.currentTurnAudioOffset);this.privRequestSession.onServiceRecognized(O.Offset);const L=new i.RecognitionEventArgs(O.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,L);break;case"turn.end":{const V=T.requestId.toUpperCase(),U=this.privRequestSession.requestId.toUpperCase();if(V!==U)this.privTurnStateManager.CompleteTurn(V);else{const F=new i.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,F),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(q){this.privErrorCallback&&this.privErrorCallback(q)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{await this.processTypeSpecificMessages(T)||this.serviceEvents&&this.serviceEvents.onEvent(new r.ServiceEvent(T.path.toLowerCase(),T.textBody))}catch{}}return S()}catch{this.terminateMessageLoop=!0,y.resolve()}};return S().catch(x=>{r.Events.instance.onEvent(new r.BackgroundEvent(x))}),y.promise}async startMessageLoop(){this.terminateMessageLoop=!1;try{await this.receiveDialogMessageOverride()}catch(y){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,y)}return Promise.resolve()}async configConnection(y){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(await this.sendSpeechServiceConfig(y,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendAgentConfig(y),y)}async sendPreAudioMessages(){const y=await this.fetchConnection();this.addKeywordContextData(),await this.sendSpeechContext(y,!0),await this.sendAgentContext(y),await this.sendWaveHeader(y)}sendAgentConfig(y){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(i.PropertyId.Conversation_DialogType)===i.DialogServiceConfig.DialogTypes.CustomCommands){const x=this.agentConfig.get();x.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(x)}this.onEvent(new e.SendingAgentContextMessageEvent(this.agentConfig));const S=this.agentConfig.toJsonString();return this.agentConfigSent=!0,y.send(new h.SpeechConnectionMessage(r.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",S))}}sendAgentContext(y){const S=(0,r.createGuid)(),x=this.privDialogServiceConnector.properties.getProperty(i.PropertyId.Conversation_Speech_Activity_Template),E=JSON.stringify({channelData:"",context:{interactionId:S},messagePayload:typeof x===void 0?void 0:x,version:.5});return y.send(new h.SpeechConnectionMessage(r.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",E))}fireEventForResult(y,S){const x=a.EnumTranslation.implTranslateRecognitionResult(y.RecognitionStatus),w=new i.SpeechRecognitionResult(this.privRequestSession.requestId,x,y.DisplayText,y.Duration,y.Offset,y.Language,y.LanguageDetectionConfidence,void 0,void 0,y.asJson(),S);return new i.SpeechRecognitionEventArgs(w,y.Offset,this.privRequestSession.sessionId)}handleResponseMessage(y){const S=JSON.parse(y.textBody);switch(S.messageType.toLowerCase()){case"message":const x=y.requestId.toUpperCase(),w=c.ActivityPayloadResponse.fromJSON(y.textBody),E=this.privTurnStateManager.GetTurn(x);if(w.conversationId){const M=this.agentConfig.get();M.botInfo.conversationId=w.conversationId,this.agentConfig.set(M)}const R=E.processActivityPayload(w,n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(i.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),T=new i.ActivityReceivedEventArgs(w.messagePayload,R);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,T)}catch{}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new i.TurnStatusReceivedEventArgs(y.textBody))}catch{}break;default:r.Events.instance.onEvent(new r.BackgroundEvent(`Unexpected response of type ${S.messageType}. Ignoring.`));break}}onEvent(y){this.privEvents.onEvent(y),r.Events.instance.onEvent(y)}addKeywordContextData(){const y=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(y===void 0)return;const S=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),x=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),w=y.split(";"),E=S===void 0?[]:S.split(";"),R=x===void 0?[]:x.split(";"),T=[];for(let M=0;M<w.length;M++){const D={text:w[M]};M<E.length&&(D.startOffset=Number(E[M])),M<R.length&&(D.duration=Number(R[M])),T.push(D)}this.speechContext.getContext().invocationSource=u.InvocationSource.VoiceActivationWithKeyword,this.speechContext.getContext().keywordDetection=[{clientDetectedKeywords:T,onReject:{action:d.OnRejectAction.EndOfTurn},type:d.KeywordDetectionType.StartTrigger}]}};return lv.DialogServiceAdapter=p,lv}var hv={},Z5;function lde(){if(Z5)return hv;Z5=1,Object.defineProperty(hv,"__esModule",{value:!0}),hv.AgentConfig=void 0;let t=class{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(r){this.iPrivConfig=r}};return hv.AgentConfig=t,hv}var yE={},fv={},pv={},eL;function E2(){if(eL)return pv;eL=1,Object.defineProperty(pv,"__esModule",{value:!0}),pv.ConversationConnectionConfig=void 0;const t=iF();let e=class uc extends t.RestConfigBase{static get host(){return uc.privHost}static get apiVersion(){return uc.privApiVersion}static get clientAppId(){return uc.privClientAppId}static get defaultLanguageCode(){return uc.privDefaultLanguageCode}static get restPath(){return uc.privRestPath}static get webSocketPath(){return uc.privWebSocketPath}static get transcriptionEventKeys(){return uc.privTranscriptionEventKeys}};return pv.ConversationConnectionConfig=e,e.privHost="dev.microsofttranslator.com",e.privRestPath="/capito/room",e.privApiVersion="2.0",e.privDefaultLanguageCode="en-US",e.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15",e.privWebSocketPath="/capito/translate",e.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"],pv}var tL;function ude(){if(tL)return fv;tL=1,Object.defineProperty(fv,"__esModule",{value:!0}),fv.ConversationManager=void 0;const t=$n(),e=tt(),r=Ce(),n=E2();let i=class{constructor(){this.privRequestParams=n.ConversationConnectionConfig.configParams,this.privErrors=n.ConversationConnectionConfig.restErrors,this.privHost=n.ConversationConnectionConfig.host,this.privApiVersion=n.ConversationConnectionConfig.apiVersion,this.privRestPath=n.ConversationConnectionConfig.restPath,this.privRestAdapter=new t.RestMessageAdapter({})}createOrJoin(a,c,u,d){try{e.Contracts.throwIfNullOrUndefined(a,"args");const h=a.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,n.ConversationConnectionConfig.defaultLanguageCode),p=a.getProperty(r.PropertyId.ConversationTranslator_Name,"conversation_host"),g=a.getProperty(r.PropertyId.ConversationTranslator_Host,this.privHost),y=a.getProperty(r.PropertyId.ConversationTranslator_CorrelationId),S=a.getProperty(r.PropertyId.SpeechServiceConnection_Key),x=a.getProperty(r.PropertyId.SpeechServiceConnection_Region),w=a.getProperty(r.PropertyId.SpeechServiceAuthorization_Token);e.Contracts.throwIfNullOrWhitespace(h,"languageCode"),e.Contracts.throwIfNullOrWhitespace(p,"nickname"),e.Contracts.throwIfNullOrWhitespace(g,"endpointHost");const E={};E[this.privRequestParams.apiVersion]=this.privApiVersion,E[this.privRequestParams.languageCode]=h,E[this.privRequestParams.nickname]=p;const R={};y&&(R[this.privRequestParams.correlationId]=y),R[this.privRequestParams.clientAppId]=n.ConversationConnectionConfig.clientAppId,c!==void 0?E[this.privRequestParams.roomId]=c:(e.Contracts.throwIfNullOrUndefined(x,this.privErrors.authInvalidSubscriptionRegion),R[this.privRequestParams.subscriptionRegion]=x,S?R[this.privRequestParams.subscriptionKey]=S:w?R[this.privRequestParams.authorization]=`Bearer ${w}`:e.Contracts.throwIfNullOrUndefined(S,this.privErrors.authInvalidSubscriptionKey));const T={};T.headers=R,this.privRestAdapter.options=T;const M=`https://${g}${this.privRestPath}`;this.privRestAdapter.request(t.RestRequestType.Post,M,E,null).then(D=>{const z=t.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,D.headers);if(!D.ok){if(d){let O=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",D.status.toString()),L;try{L=JSON.parse(D.data),O+=` [${L.error.code}: ${L.error.message}]`}catch{O+=` [${D.data}]`}z&&(O+=` ${z}`),d(O)}return}const j=JSON.parse(D.data);if(j&&(j.requestId=z),u){try{u(j)}catch(O){d&&d(O)}u=void 0}}).catch(()=>{})}catch(h){if(d)if(h instanceof Error){const p=h;d(p.name+": "+p.message)}else d(h)}}leave(a,c){return new Promise((u,d)=>{try{e.Contracts.throwIfNullOrUndefined(a,this.privErrors.invalidArgs.replace("{arg}","config")),e.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","token"));const h=a.getProperty(r.PropertyId.ConversationTranslator_Host,this.privHost),p=a.getProperty(r.PropertyId.ConversationTranslator_CorrelationId),g={};g[this.privRequestParams.apiVersion]=this.privApiVersion,g[this.privRequestParams.sessionToken]=c;const y={};p&&(y[this.privRequestParams.correlationId]=p);const S={};S.headers=y,this.privRestAdapter.options=S;const x=`https://${h}${this.privRestPath}`;this.privRestAdapter.request(t.RestRequestType.Delete,x,g,null).then(w=>{w.ok,u()}).catch(()=>{})}catch(h){if(h instanceof Error){const p=h;d(p.name+": "+p.message)}else d(h)}})}};return fv.ConversationManager=i,fv}var Ul={},mv={},vv={},gv={},rL;function hF(){if(rL)return gv;rL=1,Object.defineProperty(gv,"__esModule",{value:!0}),gv.ConversationConnectionMessage=void 0;const t=Ve();let e=class extends t.ConnectionMessage{constructor(n,i,s,a){super(n,i,s,a);const c=JSON.parse(this.textBody);c.type!==void 0&&(this.privConversationMessageType=c.type)}get conversationMessageType(){return this.privConversationMessageType}};return gv.ConversationConnectionMessage=e,gv}var nL;function dde(){if(nL)return vv;nL=1,Object.defineProperty(vv,"__esModule",{value:!0}),vv.ConversationWebsocketMessageFormatter=void 0;const t=Ve(),e=hF();let r=class{toConnectionMessage(i){const s=new t.Deferred;try{if(i.messageType===t.MessageType.Text){const a=new e.ConversationConnectionMessage(i.messageType,i.textContent,{},i.id);s.resolve(a)}else i.messageType===t.MessageType.Binary&&s.resolve(new e.ConversationConnectionMessage(i.messageType,i.binaryContent,void 0,i.id))}catch(a){s.reject(`Error formatting the message. Error: ${a}`)}return s.promise}fromConnectionMessage(i){const s=new t.Deferred;try{if(i.messageType===t.MessageType.Text){const a=`${i.textBody?i.textBody:""}`;s.resolve(new t.RawWebsocketMessage(t.MessageType.Text,a,i.id))}}catch(a){s.reject(`Error formatting the message. ${a}`)}return s.promise}};return vv.ConversationWebsocketMessageFormatter=r,vv}var iL;function hde(){if(iL)return mv;iL=1,Object.defineProperty(mv,"__esModule",{value:!0}),mv.ConversationConnectionFactory=void 0;const t=$n(),e=Ve(),r=tt(),n=Ce(),i=yo(),s=E2(),a=dde();let c=class extends i.ConnectionFactoryBase{create(d,h,p){const g=d.parameters.getProperty(n.PropertyId.ConversationTranslator_Host,s.ConversationConnectionConfig.host),y=d.parameters.getProperty(n.PropertyId.ConversationTranslator_CorrelationId,(0,e.createGuid)()),S=`wss://${g}${s.ConversationConnectionConfig.webSocketPath}`,x=d.parameters.getProperty(n.PropertyId.ConversationTranslator_Token,void 0);r.Contracts.throwIfNullOrUndefined(x,"token");const w={};w[s.ConversationConnectionConfig.configParams.apiVersion]=s.ConversationConnectionConfig.apiVersion,w[s.ConversationConnectionConfig.configParams.token]=x,w[s.ConversationConnectionConfig.configParams.correlationId]=y;const E=d.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new t.WebsocketConnection(S,w,{},new a.ConversationWebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(d),E,p))}};return mv.ConversationConnectionFactory=c,mv}var yv={},bv={},sL;function fde(){if(sL)return bv;sL=1,Object.defineProperty(bv,"__esModule",{value:!0}),bv.ConversationRequestSession=void 0;const t=Ve();let e=class{constructor(n){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=n,this.privRequestId=(0,t.createNoDashGuid)(),this.privRequestCompletionDeferral=new t.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(n,i){this.privSessionId=i}onAuthCompleted(n){n&&this.onComplete()}onConnectionEstablishCompleted(n){n!==200&&n===403&&this.onComplete()}onServiceTurnEndResponse(n){n?this.privRequestId=(0,t.createNoDashGuid)():this.onComplete()}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const n of this.privDetachables)await n.detach()}}onComplete(){}};return bv.ConversationRequestSession=e,bv}var Tn={},aL;function fF(){if(aL)return Tn;aL=1,Object.defineProperty(Tn,"__esModule",{value:!0}),Tn.ConversationReceivedTranslationEventArgs=Tn.ParticipantsListEventArgs=Tn.ParticipantAttributeEventArgs=Tn.ParticipantEventArgs=Tn.LockRoomEventArgs=Tn.MuteAllEventArgs=void 0;const t=Ce();class e extends t.SessionEventArgs{constructor(u,d){super(d),this.privIsMuted=u}get isMuted(){return this.privIsMuted}}Tn.MuteAllEventArgs=e;class r extends t.SessionEventArgs{constructor(u,d){super(d),this.privIsLocked=u}get isMuted(){return this.privIsLocked}}Tn.LockRoomEventArgs=r;class n extends t.SessionEventArgs{constructor(u,d){super(d),this.privParticipant=u}get participant(){return this.privParticipant}}Tn.ParticipantEventArgs=n;class i extends t.SessionEventArgs{constructor(u,d,h,p){super(p),this.privKey=d,this.privValue=h,this.privParticipantId=u}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}Tn.ParticipantAttributeEventArgs=i;class s extends t.SessionEventArgs{constructor(u,d,h,p,g,y,S,x,w){super(w),this.privRoomId=u,this.privSessionToken=d,this.privTranslateTo=h,this.privProfanityFilter=p,this.privRoomProfanityFilter=g,this.privIsRoomLocked=y,this.privIsRoomLocked=S,this.privParticipants=x}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}Tn.ParticipantsListEventArgs=s;class a{constructor(u,d,h){this.privPayload=d,this.privCommand=u,this.privSessionId=h}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}return Tn.ConversationReceivedTranslationEventArgs=a,Tn}var Va={},oL;function pF(){if(oL)return Va;oL=1,Object.defineProperty(Va,"__esModule",{value:!0}),Va.ConversationTranslatorCommandTypes=Va.ConversationTranslatorMessageTypes=Va.InternalParticipants=void 0;class t{constructor(r=[],n){this.participants=r,this.meId=n}addOrUpdateParticipant(r){if(r===void 0)return;const n=this.getParticipantIndex(r.id);return n>-1?this.participants.splice(n,1,r):this.participants.push(r),this.getParticipant(r.id)}getParticipantIndex(r){return this.participants.findIndex(n=>n.id===r)}getParticipant(r){return this.participants.find(n=>n.id===r)}deleteParticipant(r){this.participants=this.participants.filter(n=>n.id!==r)}get host(){return this.participants.find(r=>r.isHost===!0)}get me(){return this.getParticipant(this.meId)}}return Va.InternalParticipants=t,Va.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"},Va.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"},Va}var bE={},Sv={},cL;function pde(){if(cL)return Sv;cL=1,Object.defineProperty(Sv,"__esModule",{value:!0}),Sv.CommandResponsePayload=void 0;const t=r=>JSON.parse(r);let e=class mF{constructor(n){this.privCommandResponse=t(n)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(n){return new mF(n)}};return Sv.CommandResponsePayload=e,Sv}var Bl={},lL;function mde(){if(lL)return Bl;lL=1,Object.defineProperty(Bl,"__esModule",{value:!0}),Bl.ParticipantPayloadResponse=Bl.ParticipantsListPayloadResponse=void 0;const t=i=>JSON.parse(i),e=i=>JSON.parse(i);class r{constructor(s){this.privParticipantsPayloadResponse=t(s)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(s){return new r(s)}}Bl.ParticipantsListPayloadResponse=r;class n{constructor(s){this.privParticipantPayloadResponse=e(s)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(s){return new n(s)}}return Bl.ParticipantPayloadResponse=n,Bl}var ql={},uL;function vde(){if(uL)return ql;uL=1,Object.defineProperty(ql,"__esModule",{value:!0}),ql.TextResponsePayload=ql.SpeechResponsePayload=void 0;const t=i=>JSON.parse(i),e=i=>JSON.parse(i);class r{constructor(s){this.privSpeechResponse=t(s)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return this.privSpeechResponse.type==="final"}static fromJSON(s){return new r(s)}}ql.SpeechResponsePayload=r;class n{constructor(s){this.privTextResponse=e(s)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(s){return new n(s)}}return ql.TextResponsePayload=n,ql}var dL;function gde(){return dL||(dL=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TextResponsePayload=t.SpeechResponsePayload=t.ParticipantPayloadResponse=t.ParticipantsListPayloadResponse=t.CommandResponsePayload=void 0;var e=pde();Object.defineProperty(t,"CommandResponsePayload",{enumerable:!0,get:function(){return e.CommandResponsePayload}});var r=mde();Object.defineProperty(t,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return r.ParticipantsListPayloadResponse}}),Object.defineProperty(t,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return r.ParticipantPayloadResponse}});var n=vde();Object.defineProperty(t,"SpeechResponsePayload",{enumerable:!0,get:function(){return n.SpeechResponsePayload}}),Object.defineProperty(t,"TextResponsePayload",{enumerable:!0,get:function(){return n.TextResponsePayload}})})(bE)),bE}var hL;function yde(){if(hL)return yv;hL=1,Object.defineProperty(yv,"__esModule",{value:!0}),yv.ConversationServiceAdapter=void 0;const t=Ve(),e=Ce(),r=Le(),n=hF(),i=fde(),s=fF(),a=pF(),c=gde();let u=class extends r.ServiceRecognizerBase{constructor(h,p,g,y,S){super(h,p,g,y,S),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=S,this.privConversationAuthentication=h,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=x=>this.conversationConnectImpl(x),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new i.ConversationRequestSession((0,t.createNoDashGuid)()),this.privConversationConnectionFactory=p,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}async dispose(h){this.privConversationIsDisposed=!0,this.privConnectionConfigPromise!==void 0&&await(await this.privConnectionConfigPromise).dispose(h),await super.dispose(h)}async sendMessage(h){return(await this.fetchConnection()).send(new n.ConversationConnectionMessage(t.MessageType.Text,h))}async sendMessageAsync(h){await(await this.fetchConnection()).send(new n.ConversationConnectionMessage(t.MessageType.Text,h))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,e.CancellationReason.Error,e.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}async processTypeSpecificMessages(){return!0}cancelRecognition(h,p,g,y,S){this.terminateMessageLoop=!0;const x=new e.ConversationTranslationCanceledEventArgs(g,S,y,void 0,h);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,x)}catch{}}async conversationConnectImpl(h){return this.privConnectionLoop=this.startMessageLoop(),h}async receiveConversationMessageOverride(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const h=new t.Deferred;try{const g=await(await this.fetchConnection()).read();if(this.isDisposed()||this.terminateMessageLoop)return h.resolve(),Promise.resolve();if(!g)return this.receiveConversationMessageOverride();const y=this.privConversationRequestSession.sessionId,S=g.conversationMessageType.toLowerCase();let x=!1;try{switch(S){case"info":case"participant_command":case"command":const w=c.CommandResponsePayload.fromJSON(g.textBody);switch(w.command.toLowerCase()){case"participantlist":const z=c.ParticipantsListPayloadResponse.fromJSON(g.textBody),j=z.participants.map(q=>({avatar:q.avatar,displayName:q.nickname,id:q.participantId,isHost:q.ishost,isMuted:q.ismuted,isUsingTts:q.usetts,preferredLanguage:q.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new s.ParticipantsListEventArgs(z.roomid,z.token,z.translateTo,z.profanityFilter,z.roomProfanityFilter,z.roomLocked,z.muteAll,j,y));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(w.participantId,a.ConversationTranslatorCommandTypes.setTranslateToLanguages,w.value,y));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(w.participantId,a.ConversationTranslatorCommandTypes.setProfanityFiltering,w.value,y));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(w.participantId,a.ConversationTranslatorCommandTypes.setMute,w.value,y));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new s.MuteAllEventArgs(w.value,y));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new e.ConversationExpirationEventArgs(w.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(w.participantId,a.ConversationTranslatorCommandTypes.setUseTTS,w.value,y));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new s.LockRoomEventArgs(w.value,y));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(w.participantId,a.ConversationTranslatorCommandTypes.changeNickname,w.value,y));break;case"joinsession":const O=c.ParticipantPayloadResponse.fromJSON(g.textBody),L={avatar:O.avatar,displayName:O.nickname,id:O.participantId,isHost:O.ishost,isMuted:O.ismuted,isUsingTts:O.usetts,preferredLanguage:O.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new s.ParticipantEventArgs(L,y));break;case"leavesession":const V={id:w.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new s.ParticipantEventArgs(V,y));break;case"disconnectsession":const U={id:w.participantId};break;case"token":const F=new r.CognitiveTokenAuthentication(()=>{const q=w.token;return Promise.resolve(q)},()=>{const q=w.token;return Promise.resolve(q)});this.authentication=F,this.privConversationServiceConnector.onToken(F);break;default:break}break;case"partial":case"final":const E=c.SpeechResponsePayload.fromJSON(g.textBody),R=S==="final"?e.ResultReason.TranslatedParticipantSpeech:e.ResultReason.TranslatingParticipantSpeech,T=new e.ConversationTranslationResult(E.participantId,this.getTranslations(E.translations),E.language,E.id,R,E.recognition,void 0,void 0,g.textBody,void 0);E.isFinal?((T.text!==void 0&&T.text.length>0||E.id===this.privLastPartialUtteranceId)&&(x=!0),x&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.final,T,y))):T.text!==void 0&&(this.privLastPartialUtteranceId=E.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.partial,T,y)));break;case"translated_message":const M=c.TextResponsePayload.fromJSON(g.textBody),D=new e.ConversationTranslationResult(M.participantId,this.getTranslations(M.translations),M.language,void 0,void 0,M.originalText,void 0,void 0,void 0,g.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.instantMessage,D,y));break;default:break}}catch{}return this.receiveConversationMessageOverride()}catch{this.terminateMessageLoop=!0}return h.promise}async startMessageLoop(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const h=this.receiveConversationMessageOverride();try{return await h}catch(p){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",e.CancellationReason.Error,e.CancellationErrorCode.RuntimeError,p),null}}configConnection(){return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise!==void 0?this.privConnectionConfigPromise.then(h=>h.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(h=>h),this.privConnectionConfigPromise)}getTranslations(h){let p;if(h!==void 0){p=new e.Translations;for(const g of h)p.set(g.lang,g.translation)}return p}};return yv.ConversationServiceAdapter=u,yv}var fL;function bde(){if(fL)return Ul;fL=1,Object.defineProperty(Ul,"__esModule",{value:!0}),Ul.ConversationTranslatorRecognizer=Ul.ConversationRecognizerFactory=void 0;const t=Le(),e=Ve(),r=tt(),n=Ce(),i=hde(),s=yde();class a{static fromConfig(d,h,p){return new c(d,h,p)}}Ul.ConversationRecognizerFactory=a;let c=class extends n.Recognizer{constructor(d,h,p){const g=h;r.Contracts.throwIfNull(g,"speechConfig");const y=d;r.Contracts.throwIfNull(y,"conversationImpl"),super(p,g.properties,new i.ConversationConnectionFactory),this.privConversation=y,this.privIsDisposed=!1,this.privProperties=g.properties.clone(),this.privConnection=n.Connection.fromRecognizer(this),this.privProperties.getProperty(n.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?(this.privSetTimeout=e.Timeout.setTimeout,this.privClearTimeout=e.Timeout.clearTimeout):typeof window<"u"?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(d){this.privConnection.connected=d}set disconnected(d){this.privConnection.disconnected=d}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(d,h,p){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfNullOrWhitespace(d,"token"),this.privReco.conversationTranslatorToken=d,this.resetConversationTimeout(),this.privReco.connectAsync(h,p)}catch(g){if(p)if(g instanceof Error){const y=g;p(y.name+": "+y.message)}else p(g)}}disconnect(d,h){try{r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{d&&d()},p=>{h&&h(p)})}catch(p){if(h)if(p instanceof Error){const g=p;h(g.name+": "+g.message)}else h(p);this.dispose(!0).catch(g=>{e.Events.instance.onEvent(new e.BackgroundEvent(g))})}}sendRequest(d,h,p){try{r.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(d,h,p)}catch(g){if(p)if(g instanceof Error){const y=g;p(y.name+": "+y.message)}else p(g);this.dispose(!0).catch(y=>{e.Events.instance.onEvent(new e.BackgroundEvent(y))})}}onToken(d){this.privConversation.onToken(d)}async close(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,await this.dispose(!0))}async dispose(d){this.privIsDisposed||d&&(this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),await super.dispose(d))}createRecognizerConfig(d){return new t.RecognizerConfig(d,this.privProperties)}createServiceRecognizer(d,h,p,g){const y=p;return new s.ConversationServiceAdapter(d,h,y,g,this)}sendMessage(d,h,p){const g=this.privReco;((S,x,w)=>{S!==void 0?S.then(()=>{try{x&&x()}catch(E){w&&w(`'Unhandled error on promise callback: ${E}'`)}},E=>{try{w&&w(E)}catch{}}):w&&w("Null promise")})(g.sendMessageAsync(d),h,p),this.resetConversationTimeout()}resetConversationTimeout(){this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}};return Ul.ConversationTranslatorRecognizer=c,Ul}var Cv={},pL;function Sde(){if(pL)return Cv;pL=1,Object.defineProperty(Cv,"__esModule",{value:!0}),Cv.TranscriberRecognizer=void 0;const t=Ve(),e=tt(),r=Ce(),n=Le(),i=ws();let s=class extends r.Recognizer{constructor(c,u){const d=c;e.Contracts.throwIfNull(d,"speechTranslationConfig");const h=u;e.Contracts.throwIfNull(h,"audioConfigImpl"),e.Contracts.throwIfNullOrWhitespace(d.speechRecognitionLanguage,r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),super(u,d.properties,new n.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return e.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(c){e.Contracts.throwIfNullOrWhitespace(c,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,c)}set conversation(c){e.Contracts.throwIfNullOrUndefined(c,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=c}getConversationInfo(){return e.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(c){e.Contracts.throwIfNullOrUndefined(c,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=c}getMeetingInfo(){return e.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(c,u){(0,t.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(i.RecognitionMode.Conversation),c,u)}stopContinuousRecognitionAsync(c,u){(0,t.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),c,u)}async close(){this.privDisposedRecognizer||await this.dispose(!0)}async pushConversationEvent(c,u){const d=this.privReco;e.Contracts.throwIfNullOrUndefined(d,"serviceRecognizer"),await d.sendSpeechEventAsync(c,u)}async pushMeetingEvent(c,u){const d=this.privReco;e.Contracts.throwIfNullOrUndefined(d,"serviceRecognizer"),await d.sendMeetingSpeechEventAsync(c,u)}async enforceAudioGating(){const d=(await this.audioConfig.format).channels;if(d===1){if(this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()!=="true")throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(d!==8)throw new Error(`Unsupported audio configuration: Detected ${d}-channel audio`)}connectMeetingCallbacks(c){this.isMeetingRecognizer=!0,this.canceled=(u,d)=>{c.canceled&&c.canceled(c,d)},this.recognizing=(u,d)=>{c.transcribing&&c.transcribing(c,d)},this.recognized=(u,d)=>{c.transcribed&&c.transcribed(c,d)},this.sessionStarted=(u,d)=>{c.sessionStarted&&c.sessionStarted(c,d)},this.sessionStopped=(u,d)=>{c.sessionStopped&&c.sessionStopped(c,d)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}async dispose(c){this.privDisposedRecognizer||(c&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(c))}createRecognizerConfig(c){return new n.RecognizerConfig(c,this.properties)}createServiceRecognizer(c,u,d,h){const p=d;return new n.TranscriptionServiceRecognizer(c,u,p,h,this)}};return Cv.TranscriberRecognizer=s,Cv}var mL;function Cde(){return mL||(mL=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.InternalParticipants=t.ConversationTranslatorMessageTypes=t.ConversationTranslatorCommandTypes=t.ParticipantsListEventArgs=t.ParticipantEventArgs=t.ParticipantAttributeEventArgs=t.MuteAllEventArgs=t.LockRoomEventArgs=t.ConversationReceivedTranslationEventArgs=t.TranscriberRecognizer=t.ConversationRecognizerFactory=t.ConversationConnectionConfig=t.ConversationManager=void 0;var e=ude();Object.defineProperty(t,"ConversationManager",{enumerable:!0,get:function(){return e.ConversationManager}});var r=E2();Object.defineProperty(t,"ConversationConnectionConfig",{enumerable:!0,get:function(){return r.ConversationConnectionConfig}});var n=bde();Object.defineProperty(t,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return n.ConversationRecognizerFactory}});var i=Sde();Object.defineProperty(t,"TranscriberRecognizer",{enumerable:!0,get:function(){return i.TranscriberRecognizer}});var s=fF();Object.defineProperty(t,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return s.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(t,"LockRoomEventArgs",{enumerable:!0,get:function(){return s.LockRoomEventArgs}}),Object.defineProperty(t,"MuteAllEventArgs",{enumerable:!0,get:function(){return s.MuteAllEventArgs}}),Object.defineProperty(t,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return s.ParticipantAttributeEventArgs}}),Object.defineProperty(t,"ParticipantEventArgs",{enumerable:!0,get:function(){return s.ParticipantEventArgs}}),Object.defineProperty(t,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return s.ParticipantsListEventArgs}});var a=pF();Object.defineProperty(t,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorCommandTypes}}),Object.defineProperty(t,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorMessageTypes}}),Object.defineProperty(t,"InternalParticipants",{enumerable:!0,get:function(){return a.InternalParticipants}})})(yE)),yE}var SE={},vL;function vF(){return vL||(vL=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisAudioMetadata=t.MetadataType=void 0,(function(r){r.WordBoundary="WordBoundary",r.Bookmark="Bookmark",r.Viseme="Viseme",r.SentenceBoundary="SentenceBoundary",r.SessionEnd="SessionEnd",r.AvatarSignal="TalkingAvatarSignal"})(t.MetadataType||(t.MetadataType={}));class e{constructor(n){this.privSynthesisAudioMetadata=JSON.parse(n)}static fromJSON(n){return new e(n)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}t.SynthesisAudioMetadata=e})(SE)),SE}var xv={},hs={},gL;function xde(){if(gL)return hs;gL=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.SynthesisStartedEvent=hs.ConnectingToSynthesisServiceEvent=hs.SynthesisTriggeredEvent=hs.SpeechSynthesisEvent=void 0;const t=Ve();class e extends t.PlatformEvent{constructor(a,c,u=t.EventType.Info){super(a,u),this.privRequestId=c}get requestId(){return this.privRequestId}}hs.SpeechSynthesisEvent=e;class r extends e{constructor(a,c,u){super("SynthesisTriggeredEvent",a),this.privSessionAudioDestinationId=c,this.privTurnAudioDestinationId=u}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}hs.SynthesisTriggeredEvent=r;class n extends e{constructor(a,c){super("ConnectingToSynthesisServiceEvent",a),this.privAuthFetchEventId=c}get authFetchEventId(){return this.privAuthFetchEventId}}hs.ConnectingToSynthesisServiceEvent=n;class i extends e{constructor(a,c){super("SynthesisStartedEvent",a),this.privAuthFetchEventId=c}get authFetchEventId(){return this.privAuthFetchEventId}}return hs.SynthesisStartedEvent=i,hs}var yL;function wde(){if(yL)return xv;yL=1,Object.defineProperty(xv,"__esModule",{value:!0}),xv.SynthesisTurn=void 0;const t=Ve(),e=xh(),r=Ce(),n=vF(),i=xde();let s=class KT{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=(0,t.createNoDashGuid)(),this.privTurnDeferral=new t.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(c){this.privStreamId=c}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(c){this.privAudioOutputFormat=c}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const c=new r.PropertyCollection;return c.setProperty(r.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),c}}async getAllReceivedAudio(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(await this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}async getAllReceivedAudioWithHeader(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const c=await this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(c),this.privReceivedAudioWithHeader}else return this.getAllReceivedAudio()}startNewSynthesis(c,u,d,h){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=c,this.privRawText=u,this.privIsSSML=d,this.privAudioOutputStream=new e.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",h!==void 0&&(this.privTurnAudioDestination=h,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new i.SynthesisTriggeredEvent(this.requestId,void 0,h===void 0?void 0:h.id()))}onPreConnectionStart(c){this.privAuthFetchEventId=c,this.onEvent(new i.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(c){c&&this.onComplete()}onConnectionEstablishCompleted(c){if(c===200){this.onEvent(new i.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}else c===403&&this.onComplete()}onServiceResponseMessage(c){const u=JSON.parse(c);this.streamId=u.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(c){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new t.Deferred;const u=JSON.parse(c);u.webrtc&&(this.privWebRTCSDP=u.webrtc.connectionString)}onAudioChunkReceived(c){this.isSynthesizing&&(this.privAudioOutputStream.write(c),this.privBytesReceived+=c.byteLength,this.privTurnAudioDestination!==void 0&&this.privTurnAudioDestination.write(c))}onTextBoundaryEvent(c){this.updateTextOffset(c.Data.text.Text,c.Type)}onVisemeMetadataReceived(c){c.Data.AnimationChunk!==void 0&&(this.privPartialVisemeAnimation+=c.Data.AnimationChunk)}onSessionEnd(c){this.privAudioDuration=c.Data.Offset}async constructSynthesisResult(){const c=await this.getAllReceivedAudioWithHeader();return new r.SpeechSynthesisResult(this.requestId,r.ResultReason.SynthesizingAudioCompleted,c,void 0,this.extraProperties,this.audioDuration)}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const c=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",c}onEvent(c){t.Events.instance.onEvent(c)}static isXmlTag(c){return c.length>=2&&c[0]==="<"&&c[c.length-1]===">"}updateTextOffset(c,u){u===n.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(c,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+c.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!KT.isXmlTag(c)&&this.updateTextOffset(c,u))):(this.privSentenceOffset=this.privRawText.indexOf(c,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+c.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!KT.isXmlTag(c)&&this.updateTextOffset(c,u)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,this.privTurnAudioDestination!==void 0&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}async readAllAudioFromStream(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{await this.privAudioOutputStream.read(this.privReceivedAudio)}catch{this.privReceivedAudio=new ArrayBuffer(0)}}}withinXmlTag(c){return this.privRawText.indexOf("<",c+1)>this.privRawText.indexOf(">",c+1)}};return xv.SynthesisTurn=s,xv}var wv={},bL;function _de(){if(bL)return wv;bL=1,Object.defineProperty(wv,"__esModule",{value:!0}),wv.SynthesisAdapterBase=void 0;const t=Ve(),e=Ce(),r=Le(),n=HC();let i=class{constructor(a,c,u,d){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!a)throw new t.ArgumentNullError("authentication");if(!c)throw new t.ArgumentNullError("connectionFactory");if(!u)throw new t.ArgumentNullError("synthesizerConfig");this.privAuthentication=a,this.privConnectionFactory=c,this.privSynthesizerConfig=u,this.privIsDisposed=!1,this.privSessionAudioDestination=d,this.privSynthesisTurn=new r.SynthesisTurn,this.privConnectionEvents=new t.EventSource,this.privServiceEvents=new t.EventSource,this.privSynthesisContext=new r.SynthesisContext,this.privAgentConfig=new r.AgentConfig,this.connectionEvents.attach(h=>{if(h.name==="ConnectionClosedEvent"){const p=h;p.statusCode!==1e3&&this.cancelSynthesisLocal(e.CancellationReason.Error,p.statusCode===1007?e.CancellationErrorCode.BadRequestParameters:e.CancellationErrorCode.ConnectionFailure,`${p.reason} websocket error code: ${p.statusCode}`)}})}get synthesizerConfig(){return this.privSynthesizerConfig}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(a){this.privActivityTemplate=a}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(a){this.privAudioOutputFormat=a,this.privSynthesisTurn.audioOutputFormat=a,this.privSessionAudioDestination!==void 0&&(this.privSessionAudioDestination.format=a),this.synthesisContext!==void 0&&(this.synthesisContext.audioOutputFormat=a)}isDisposed(){return this.privIsDisposed}async dispose(a){this.privIsDisposed=!0,this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise!==void 0&&await(await this.privConnectionConfigurationPromise).dispose(a)}async connect(){await this.connectImpl()}async sendNetworkMessage(a,c){const u=typeof c=="string"?t.MessageType.Text:t.MessageType.Binary,d=typeof c=="string"?"application/json":"";return(await this.fetchConnection()).send(new n.SpeechConnectionMessage(u,a,this.privSynthesisTurn.requestId,d,c))}async Speak(a,c,u,d,h,p){let g;if(c?g=a:g=this.privSynthesizer.buildSsml(a),this.speakOverride!==void 0)return this.speakOverride(g,u,d,h);this.privSuccessCallback=d,this.privErrorCallback=h,this.privSynthesisTurn.startNewSynthesis(u,a,c,p);try{await this.connectImpl();const y=await this.fetchConnection();await this.sendSynthesisContext(y),await this.sendSsmlMessage(y,g,u),this.onSynthesisStarted(u),this.receiveMessage()}catch(y){return this.cancelSynthesisLocal(e.CancellationReason.Error,e.CancellationErrorCode.ConnectionFailure,y),Promise.reject(y)}}async stopSpeaking(){return await this.connectImpl(),(await this.fetchConnection()).send(new n.SpeechConnectionMessage(t.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))}cancelSynthesis(a,c,u,d){const h=new e.PropertyCollection;h.setProperty(r.CancellationErrorCodePropertyName,e.CancellationErrorCode[u]);const p=new e.SpeechSynthesisResult(a,e.ResultReason.Canceled,void 0,d,h);if(this.onSynthesisCancelled(p),this.privSuccessCallback)try{this.privSuccessCallback(p)}catch{}}cancelSynthesisLocal(a,c,u){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,a,c,u))}processTypeSpecificMessages(a){return!0}async receiveMessage(){try{const c=await(await this.fetchConnection()).read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!c)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const u=n.SpeechConnectionMessage.fromConnectionMessage(c);if(u.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(u.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(u.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(u.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===u.streamId.toLowerCase()&&u.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(u.binaryBody),this.onSynthesizing(u.binaryBody),this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.write(u.binaryBody));break;case"audio.metadata":const d=r.SynthesisAudioMetadata.fromJSON(u.textBody).Metadata;for(const p of d)switch(p.Type){case r.MetadataType.WordBoundary:case r.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(p);const g=new e.SpeechSynthesisWordBoundaryEventArgs(p.Data.Offset,p.Data.Duration,p.Data.text.Text,p.Data.text.Length,p.Type===r.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,p.Data.text.BoundaryType);this.onWordBoundary(g);break;case r.MetadataType.Bookmark:const y=new e.SpeechSynthesisBookmarkEventArgs(p.Data.Offset,p.Data.Bookmark);this.onBookmarkReached(y);break;case r.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(p),p.Data.IsLastAnimation){const S=new e.SpeechSynthesisVisemeEventArgs(p.Data.Offset,p.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(S)}break;case r.MetadataType.AvatarSignal:this.onAvatarEvent(p);break;case r.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(p);break}break;case"turn.end":this.privSynthesisTurn.onServiceTurnEndResponse();let h;try{h=await this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(h)}catch(p){this.privErrorCallback&&this.privErrorCallback(p)}this.onSynthesisCompleted(h);break;default:this.processTypeSpecificMessages(u)||this.privServiceEvents&&this.serviceEvents.onEvent(new t.ServiceEvent(u.path.toLowerCase(),u.textBody))}return this.receiveMessage()}catch{}}sendSynthesisContext(a){this.setSynthesisContextSynthesisSection();const c=this.synthesisContext.toJSON();if(c)return a.send(new n.SpeechConnectionMessage(t.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",c))}setSpeechConfigSynthesisSection(){}connectImpl(a=!1){if(this.privConnectionPromise!=null)return this.privConnectionPromise.then(u=>u.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=(0,t.createNoDashGuid)(),this.privConnectionId=(0,t.createNoDashGuid)(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const c=a?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=c.then(async u=>{this.privSynthesisTurn.onAuthCompleted(!1);const d=await this.privConnectionFactory.create(this.privSynthesizerConfig,u,this.privConnectionId);d.events.attach(p=>{this.connectionEvents.onEvent(p)});const h=await d.open();return h.statusCode===200?(this.privSynthesisTurn.onConnectionEstablishCompleted(h.statusCode),Promise.resolve(d)):h.statusCode===403&&!a?this.connectImpl(!0):(this.privSynthesisTurn.onConnectionEstablishCompleted(h.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${h.statusCode},
                    ${this.privSynthesizerConfig.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Url)} Reason: ${h.reason}`))},u=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(u)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(a,c){if(c)return a.send(new n.SpeechConnectionMessage(t.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",c))}sendSsmlMessage(a,c,u){return a.send(new n.SpeechConnectionMessage(t.MessageType.Text,"ssml",u,"application/ssml+xml",c))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(a=>a.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async configureConnection(){const a=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(a):(this.setSpeechConfigSynthesisSection(),await this.sendSpeechServiceConfig(a,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),a)}onAvatarEvent(a){}onSynthesisStarted(a){}onSynthesizing(a){}onSynthesisCancelled(a){}onSynthesisCompleted(a){}onWordBoundary(a){}onVisemeReceived(a){}onBookmarkReached(a){}};return wv.SynthesisAdapterBase=i,i.telemetryDataEnabled=!0,wv}var _v={},SL;function Ede(){if(SL)return _v;SL=1,Object.defineProperty(_v,"__esModule",{value:!0}),_v.AvatarSynthesisAdapter=void 0;const t=Ce(),e=Le();let r=class extends e.SynthesisAdapterBase{constructor(i,s,a,c,u){super(i,s,a,void 0),this.privAvatarSynthesizer=c,this.privSynthesizer=c,this.privAvatarConfig=u}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:this.privAvatarConfig.videoFormat?.bitrate,codec:this.privAvatarConfig.videoFormat?.codec,crop:{bottomRight:{x:this.privAvatarConfig.videoFormat?.cropRange?.bottomRight?.x,y:this.privAvatarConfig.videoFormat?.cropRange?.bottomRight?.y},topLeft:{x:this.privAvatarConfig.videoFormat?.cropRange?.topLeft?.x,y:this.privAvatarConfig.videoFormat?.cropRange?.topLeft?.y}},resolution:{height:this.privAvatarConfig.videoFormat?.height,width:this.privAvatarConfig.videoFormat?.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(t.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarConfig.remoteIceServers??this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor,image:{url:this.privAvatarConfig.backgroundImage?.toString()}},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,photoAvatarBaseModel:this.privAvatarConfig.photoAvatarBaseModel,style:this.privAvatarConfig.style,useBuiltInVoice:this.privAvatarConfig.useBuiltInVoice}}}onAvatarEvent(i){if(this.privAvatarSynthesizer.avatarEventReceived){const s=new t.AvatarEventArgs(i.Data.Offset,i.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,s)}catch{}}}};return _v.AvatarSynthesisAdapter=r,_v}var Ev={},CL;function Ade(){if(CL)return Ev;CL=1,Object.defineProperty(Ev,"__esModule",{value:!0}),Ev.SpeechSynthesisAdapter=void 0;const t=Ce(),e=Le();let r=class extends e.SynthesisAdapterBase{constructor(i,s,a,c,u){super(i,s,a,u),this.privSpeechSynthesizer=c,this.privSynthesizer=c}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(i){const s=new t.SpeechSynthesisEventArgs(new t.SpeechSynthesisResult(i,t.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,s)}onSynthesizing(i){if(this.privSpeechSynthesizer.synthesizing)try{const s=this.privSynthesisTurn.audioOutputFormat.addHeader(i),a=new t.SpeechSynthesisEventArgs(new t.SpeechSynthesisResult(this.privSynthesisTurn.requestId,t.ResultReason.SynthesizingAudio,s));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,a)}catch{}}onSynthesisCancelled(i){if(this.privSpeechSynthesizer.SynthesisCanceled){const s=new t.SpeechSynthesisEventArgs(i);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,s)}catch{}}}onSynthesisCompleted(i){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new t.SpeechSynthesisEventArgs(i))}catch{}}onWordBoundary(i){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,i)}catch{}}onVisemeReceived(i){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,i)}catch{}}onBookmarkReached(i){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,i)}catch{}}};return Ev.SpeechSynthesisAdapter=r,Ev}var Av={},xL;function Tde(){if(xL)return Av;xL=1,Object.defineProperty(Av,"__esModule",{value:!0}),Av.SynthesisRestAdapter=void 0;const t=$n(),e=Ce(),r=yo(),n=Si();let i=class{constructor(a,c){let u=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!u){const h=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,"westus"),p=r.ConnectionFactoryBase.getHostSuffix(h);u=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,`https://${h}.tts.speech${p}`)}this.privUri=`${u}/cognitiveservices/voices/list`;const d=t.RestConfigBase.requestOptions;this.privRestAdapter=new t.RestMessageAdapter(d),this.privAuthentication=c}getVoicesList(a){return this.privRestAdapter.setHeaders(n.HeaderNames.ConnectionId,a),this.privAuthentication.fetch(a).then(c=>(this.privRestAdapter.setHeaders(c.headerName,c.token),this.privRestAdapter.request(t.RestRequestType.Get,this.privUri)))}};return Av.SynthesisRestAdapter=i,Av}var CE={},wL;function Rde(){return wL||(wL=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesizerConfig=t.SynthesisServiceType=void 0;const e=Le();var r;(function(i){i[i.Standard=0]="Standard",i[i.Custom=1]="Custom"})(r=t.SynthesisServiceType||(t.SynthesisServiceType={}));class n{constructor(s,a){this.privSynthesisServiceType=r.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=s||new e.SpeechServiceConfig(new e.Context(null)),this.privParameters=a}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(s){this.privSynthesisServiceType=s}set synthesisVideoSection(s){this.privSpeechServiceConfig.Context.synthesis={video:s}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}setContextFromJson(s){const a=JSON.parse(s);a.system&&(this.privSpeechServiceConfig.Context.system=a.system),a.os&&(this.privSpeechServiceConfig.Context.os=a.os),a.audio&&(this.privSpeechServiceConfig.Context.audio=a.audio),a.synthesis&&(this.privSpeechServiceConfig.Context.synthesis=a.synthesis)}}t.SynthesizerConfig=n})(CE)),CE}var Tv={},_L;function Pde(){if(_L)return Tv;_L=1,Object.defineProperty(Tv,"__esModule",{value:!0}),Tv.SynthesisContext=void 0;const t=Ce();let e=class{constructor(){this.privContext={}}setSection(n,i){this.privContext[n]=i}set audioOutputFormat(n){this.privAudioOutputFormat=n}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(n){const i=this.buildSynthesisContext(n);this.setSection("synthesis",i)}buildSynthesisContext(n){return{audio:{metadataOptions:{bookmarkEnabled:!!n?.bookmarkReached,punctuationBoundaryEnabled:n?.properties.getProperty(t.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!n?.wordBoundary),sentenceBoundaryEnabled:n?.properties.getProperty(t.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!n?.visemeReceived,wordBoundaryEnabled:n?.properties.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!n?.wordBoundary)},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:n?.autoDetectSourceLanguage}}}};return Tv.SynthesisContext=e,Tv}var xE={},EL;function Ide(){return EL||(EL=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.type=t.connectivity=t.Device=t.OS=t.System=t.Context=t.SpeechServiceConfig=void 0;class e{constructor(c){this.context=c}serialize(){return JSON.stringify(this,(c,u)=>{if(u&&typeof u=="object"&&!Array.isArray(u)){const d={};for(const h in u)Object.hasOwnProperty.call(u,h)&&(d[h&&h.charAt(0).toLowerCase()+h.substring(1)]=u[h]);return d}return u})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(c){this.recognition=c.toLowerCase()}}t.SpeechServiceConfig=e;class r{constructor(c){this.system=new n,this.os=c}}t.Context=r;class n{constructor(){const c="1.47.0";this.name="SpeechSDK",this.version=c,this.build="JavaScript",this.lang="JavaScript"}}t.System=n;class i{constructor(c,u,d){this.platform=c,this.name=u,this.version=d}}t.OS=i;class s{constructor(c,u,d){this.manufacturer=c,this.model=u,this.version=d}}t.Device=s,(function(a){a.Bluetooth="Bluetooth",a.Wired="Wired",a.WiFi="WiFi",a.Cellular="Cellular",a.InBuilt="InBuilt",a.Unknown="Unknown"})(t.connectivity||(t.connectivity={})),(function(a){a.Phone="Phone",a.Speaker="Speaker",a.Car="Car",a.Headset="Headset",a.Thermostat="Thermostat",a.Microphones="Microphones",a.Deskphone="Deskphone",a.RemoteControl="RemoteControl",a.Unknown="Unknown",a.File="File",a.Stream="Stream"})(t.type||(t.type={}))})(xE)),xE}var AL;function Le(){return AL||(AL=1,(function(t){var e=El&&El.__createBinding||(Object.create?(function(s,a,c,u){u===void 0&&(u=c),Object.defineProperty(s,u,{enumerable:!0,get:function(){return a[c]}})}):(function(s,a,c,u){u===void 0&&(u=c),s[u]=a[c]})),r=El&&El.__exportStar||function(s,a){for(var c in s)c!=="default"&&!Object.prototype.hasOwnProperty.call(a,c)&&e(a,s,c)};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDetectSourceLanguagesOpenRangeOptionName=t.ForceDictationPropertyName=t.ServicePropertiesPropertyName=t.CancellationErrorCodePropertyName=t.OutputFormatPropertyName=t.SpeechSynthesisAdapter=t.AvatarSynthesisAdapter=void 0,r(Rce(),t),r(Pce(),t),r(b2(),t),r(Ice(),t),r(Nce(),t),r(S2(),t),r(Rue(),t),r(Pue(),t),r(Iue(),t),r(Nue(),t),r(Oue(),t),r(jue(),t),r(Mue(),t),r(Due(),t),r(kue(),t),r(rF(),t),r(Lue(),t),r(zue(),t),r(Uue(),t),r(Bue(),t),r(que(),t),r(Vue(),t),r(Fue(),t),r(Hue(),t),r(Wue(),t),r(Kue(),t),r($ue(),t),r(Yue(),t),r(Xue(),t),r(Que(),t),r(Zue(),t),r(tde(),t),r(nde(),t),r(cde(),t),r(lde(),t),r(Cde(),t),r(vF(),t),r(wde(),t),r(_de(),t);var n=Ede();Object.defineProperty(t,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return n.AvatarSynthesisAdapter}});var i=Ade();Object.defineProperty(t,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return i.SpeechSynthesisAdapter}}),r(Tde(),t),r(Rde(),t),r(Pde(),t),r(Ide(),t),t.OutputFormatPropertyName="OutputFormat",t.CancellationErrorCodePropertyName="CancellationErrorCode",t.ServicePropertiesPropertyName="ServiceProperties",t.ForceDictationPropertyName="ForceDictation",t.AutoDetectSourceLanguagesOpenRangeOptionName="UND"})(El)),El}var TL;function Nde(){return TL||(TL=1,(function(t){var e=_l&&_l.__createBinding||(Object.create?(function(i,s,a,c){c===void 0&&(c=a),Object.defineProperty(i,c,{enumerable:!0,get:function(){return s[a]}})}):(function(i,s,a,c){c===void 0&&(c=a),i[c]=s[a]})),r=_l&&_l.__exportStar||function(i,s){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&e(s,i,a)};Object.defineProperty(t,"__esModule",{value:!0});const n=Le();new n.AgentConfig,r(Ce(),t)})(_l)),_l}var ac=Nde();class Ode{speechConfig=null;activeSynthesizer=null;constructor(){{console.warn("Azure Speech Service credentials not configured");return}}async speak(e){if(!this.speechConfig){console.warn("Speech config not initialized");return}return new Promise((r,n)=>{try{this.stop();const i=ac.AudioConfig.fromDefaultSpeakerOutput(),s=new ac.SpeechSynthesizer(this.speechConfig,i);this.activeSynthesizer=s,s.speakTextAsync(e,a=>{if(a.reason===ac.ResultReason.SynthesizingAudioCompleted)console.log(" Speech synthesis completed successfully"),this.activeSynthesizer=null,s.close(),r();else if(a.reason===ac.ResultReason.Canceled){const c=ac.CancellationDetails.fromResult(a);console.error(" Speech synthesis canceled:",c.reason),console.error("Error details:",c.errorDetails),this.activeSynthesizer=null,s.close(),n(new Error(`Speech canceled: ${c.errorDetails}`))}else console.error(" Speech synthesis failed:",a.errorDetails),this.activeSynthesizer=null,s.close(),n(new Error(a.errorDetails))},a=>{console.error(" Speech synthesis error:",a),this.activeSynthesizer=null,s.close(),n(a)})}catch(i){console.error(" Error creating synthesizer:",i),n(i)}})}stop(){if(this.activeSynthesizer)try{console.log(" Stopping active speech synthesis"),this.activeSynthesizer.close(),this.activeSynthesizer=null}catch(e){console.error("Error stopping speech:",e),this.activeSynthesizer=null}else console.log(" No active synthesizer to stop")}async speakSSML(e){if(!this.speechConfig){console.warn("Speech config not initialized");return}return new Promise((r,n)=>{try{const i=ac.AudioConfig.fromDefaultSpeakerOutput(),s=new ac.SpeechSynthesizer(this.speechConfig,i);s.speakSsmlAsync(e,a=>{a.reason===ac.ResultReason.SynthesizingAudioCompleted?(console.log(" SSML speech synthesis completed"),s.close(),r()):(console.error(" SSML speech synthesis failed:",a.errorDetails),s.close(),n(new Error(a.errorDetails)))},a=>{console.error(" SSML speech synthesis error:",a),s.close(),n(a)})}catch(i){console.error(" Error creating SSML synthesizer:",i),n(i)}})}}const gF=new Ode,jde=()=>{const{currentUser:t,logout:e}=bi(),r=Pu(),[n,i]=A.useState(!1),[s,a]=A.useState(!1),c=()=>{u()},u=async()=>{a(!0);try{await e(),r("/login")}catch(d){console.error("Error al cerrar sesin:",d)}finally{a(!1),i(!1)}};return t?m.jsxs("header",{className:"bg-white border-b border-border px-4 sm:px-6 py-4 lg:px-6 lg:py-4",children:[m.jsxs("div",{className:"flex items-center justify-between gap-2 pt-12 lg:pt-0",children:[m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h1",{className:"text-lg sm:text-2xl lg:text-2xl font-bold text-text-primary truncate",children:"Sistema de Trading"}),m.jsxs("p",{className:"text-xs sm:text-sm lg:text-sm text-text-secondary truncate",children:["Bienvenido, ",t.displayName]})]}),m.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 lg:gap-4 flex-shrink-0",children:[m.jsxs("div",{className:"hidden sm:flex items-center gap-3 px-4 py-2 rounded-lg bg-background",children:[m.jsx(Eoe,{size:32,className:"text-primary"}),m.jsxs("div",{className:"text-left",children:[m.jsx("p",{className:"text-sm font-medium text-text-primary",children:t.displayName}),m.jsx("p",{className:"text-xs text-text-secondary capitalize",children:t.role==="admin"?"Administrador":"Inversionista"})]})]}),m.jsx("button",{onClick:()=>{gF.stop(),sessionStorage.removeItem("welcomeShown"),i(!0)},className:"p-2 text-text-secondary hover:text-danger transition-colors cursor-pointer flex-shrink-0",title:"Cerrar sesin",children:m.jsx(Soe,{size:20})})]})]}),m.jsx(qC,{isOpen:n,onClose:()=>i(!1),onConfirm:c,title:"Cerrar sesin",message:"Ests seguro de que deseas cerrar sesin?",confirmText:"Cerrar sesin",cancelText:"Cancelar",isLoading:s})]}):null},wE=[{id:"mistralai/mistral-small-3.1-24b",name:"Mistral Small 3.1 24B",provider:"Mistral AI",contextWindow:128e3,active:!0},{id:"moonshotai/kimi-k2-0711",name:"Kimi K2 0711",provider:"MoonshotAI",contextWindow:33e3,active:!0},{id:"qwen/qwen3-4b",name:"Qwen3 4B",provider:"Qwen",contextWindow:41e3,active:!0},{id:"meta-llama/llama-3.2-3b-instruct",name:"Llama 3.2 3B Instruct",provider:"Meta",contextWindow:131e3,active:!0},{id:"google/gemma-3-4b",name:"Gemma 3 4B",provider:"Google",contextWindow:33e3,active:!0},{id:"google/gemma-3-12b",name:"Gemma 3 12B",provider:"Google",contextWindow:33e3,active:!0},{id:"arcee-ai/trinity-mini",name:"Trinity Mini",provider:"Arcee AI",contextWindow:131e3,active:!0},{id:"google/gemma-3n-2b",name:"Gemma 3n 2B",provider:"Google",contextWindow:8e3,active:!0},{id:"google/gemma-3n-4b",name:"Gemma 3n 4B",provider:"Google",contextWindow:8e3,active:!0}];class Mde{async getPsychologistData(e){try{const r=new Date;r.setHours(0,0,0,0);const n=new Date(r);n.setDate(n.getDate()+1),console.log(" Buscando consultas para psiclogo:",e),console.log(" Rango de fechas:",{today:r,tomorrow:n});const i=await Qt.getAll("consultations");console.log(" Total de consultas en DB:",i.length);const s=i.filter(d=>{const h=d.date.toDate(),p=d.psychologistId===e,g=h>=r&&h<n;return p&&console.log(" Consulta del psiclogo:",{id:d.id,patientName:d.patientName,date:h,isToday:g}),p&&g});console.log(" Consultas encontradas para hoy:",s.length);const a=await Qt.getAll("patients"),c=s.map(d=>{const h=a.find(g=>g.id===d.patientId),p=d.date.toDate();return{patientName:h?`${h.firstName} ${h.lastName}`:d.patientName||"Paciente desconocido",time:p.toLocaleTimeString("es-MX",{hour:"2-digit",minute:"2-digit"}),status:d.status||"programada"}});return{role:"psychologist",userName:(await Qt.getById("users",e))?.displayName||"Psiclogo",todayConsultations:s.length,consultationsList:c}}catch(r){return console.error("Error getting psychologist data:",r),{role:"psychologist",userName:"Psiclogo",todayConsultations:0,consultationsList:[]}}}async getReceptionistData(e){try{const r=new Date;r.setHours(0,0,0,0);const n=new Date(r);n.setDate(n.getDate()+1);const i=await Qt.getAll("consultations",sn("date",">=",Ee.fromDate(r)),sn("date","<",Ee.fromDate(n))),c=(await Qt.getAll("users")).filter(d=>d.role==="investor"||d.role==="psychologist").map(d=>{const h=i.filter(p=>p.psychologistId===d.uid);return{psychologistId:d.uid,psychologistName:d.displayName,todayConsultations:h.length}}).filter(d=>d.todayConsultations>0);return{role:"receptionist",userName:(await Qt.getById("users",e))?.displayName||"Recepcionista",todayConsultations:i.length,psychologistsSummary:c}}catch(r){return console.error("Error getting receptionist data:",r),{role:"receptionist",userName:"Recepcionista",todayConsultations:0,psychologistsSummary:[]}}}async getAdminData(e){try{const r=new Date;r.setHours(0,0,0,0);const n=new Date(r);n.setDate(n.getDate()+1);const i=await Qt.getAll("consultations",sn("date",">=",Ee.fromDate(r)),sn("date","<",Ee.fromDate(n)));return{role:"admin",userName:(await Qt.getById("users",e))?.displayName||"Administrador",todayConsultations:i.length}}catch(r){return console.error("Error getting admin data:",r),{role:"admin",userName:"Administrador",todayConsultations:0}}}async getUserDataContext(e){try{const r=new Date;r.setHours(0,0,0,0);const n=new Date(r);n.setDate(n.getDate()+1);const i=new Date(r.getFullYear(),r.getMonth(),1),s=await Qt.getAll("patients"),a=s.filter(S=>S.status==="active"),c=await Qt.getAll("consultations",sn("date",">=",Ee.fromDate(r)),sn("date","<",Ee.fromDate(n))),d=(await Qt.getAll("invoices",sn("issueDate",">=",Ee.fromDate(r)),sn("issueDate","<",Ee.fromDate(n)))).filter(S=>S.status==="paid").reduce((S,x)=>S+x.total,0),h=await Qt.getAll("invoices",sn("issueDate",">=",Ee.fromDate(i))),p=h.filter(S=>S.status==="paid").reduce((S,x)=>S+x.total,0),g=h.filter(S=>S.status==="pending").length,y=c.map(S=>{const x=s.find(E=>E.id===S.patientId),w=S.date.toDate();return{patientName:x?`${x.firstName} ${x.lastName}`:"Paciente desconocido",time:w.toLocaleTimeString("es-MX",{hour:"2-digit",minute:"2-digit"}),status:S.status||"programada"}});return{todayConsultations:c.length,todayRevenue:d,monthRevenue:p,totalPatients:s.length,activePatients:a.length,pendingInvoices:g,todayConsultationsList:y}}catch(r){return console.error("Error getting user data context:",r),{todayConsultations:0,todayRevenue:0,monthRevenue:0,totalPatients:0,activePatients:0,pendingInvoices:0,todayConsultationsList:[]}}}formatDataContext(e){let r=`

## DATOS ACTUALES DEL USUARIO:

`;return r+=`- Consultas hoy: ${e.todayConsultations}
`,r+=`- Ingresos hoy: $${e.todayRevenue.toLocaleString("es-MX")}
`,r+=`- Ingresos del mes: $${e.monthRevenue.toLocaleString("es-MX")}
`,r+=`- Total pacientes: ${e.totalPatients}
`,r+=`- Pacientes activos: ${e.activePatients}
`,r+=`- Facturas pendientes: ${e.pendingInvoices}
`,e.todayConsultationsList.length>0&&(r+=`
Consultas de hoy:
`,e.todayConsultationsList.forEach((n,i)=>{r+=`${i+1}. ${n.patientName} - ${n.time} (${n.status})
`})),r+=`
**INSTRUCCIN**: Cuando te pregunten sobre estos datos, responde DIRECTAMENTE con la informacin. Ejemplo: "Hoy has ganado $800" o "Tienes 3 consultas hoy". NO des instrucciones de cmo buscar la informacin en el sistema a menos que te lo pidan explcitamente.
`,r}}const RL=new Mde;class Dde{currentModelIndex=0;conversationHistory=[];userDataContext="";forbiddenKeywords=["base de datos","database","firestore","firebase","mongodb","sql","cdigo","code","typescript","javascript","react","componente","api key","token","credencial","password","contrasea","hackear","hack","infiltrar","vulnerabilidad","exploit","backend","servidor","server","arquitectura","deployment","generar cdigo","crear cdigo","escribir cdigo","reglas de firestore","security rules","authentication","como funciona internamente","estructura tcnica","implementacin","crear crud","generar crud","hacer crud","modificar base"];isForbiddenTopic(e){const r=e.toLowerCase();return this.forbiddenKeywords.some(n=>r.includes(n))}async sendMessage(e){if(this.isForbiddenTopic(e))return"Lo siento, solo puedo ayudarte con informacin sobre cmo usar el sistema como usuario. Para temas tcnicos, de seguridad o desarrollo, consulta con el administrador del sistema.";this.conversationHistory.push({id:Date.now().toString(),role:"user",content:e,timestamp:new Date});for(let r=0;r<wE.length;r++){const n=(this.currentModelIndex+r)%wE.length,i=wE[n];if(i.active)try{console.log(` Intentando con modelo: ${i.name}`);const s=await this.callOpenRouter(i.id,e);return this.isForbiddenTopic(s)?"Lo siento, solo puedo ayudarte con informacin sobre cmo usar el sistema como usuario. Para temas tcnicos, de seguridad o desarrollo, consulta con el administrador del sistema.":(this.currentModelIndex=n,this.conversationHistory.push({id:(Date.now()+1).toString(),role:"assistant",content:s,timestamp:new Date}),console.log(` Respuesta exitosa de: ${i.name}`),s)}catch(s){console.warn(` Error con ${i.name}:`,s);continue}}return console.log(" Todos los modelos fallaron, usando fallback"),this.getFallbackResponse(e)}async callOpenRouter(e,r){throw new Error("API key no configurada")}getFallbackResponse(e){const r=e.toLowerCase();return this.isForbiddenTopic(r)?"Lo siento, solo puedo ayudarte con informacin sobre cmo usar el sistema como usuario. Para temas tcnicos, de seguridad o desarrollo, consulta con el administrador del sistema.":r.includes("paciente")&&r.includes("crear")?'Para crear un paciente: Ve a "Pacientes" en el sidebar  Click "Nuevo Paciente"  Completa el formulario con nombre, apellido, email, telfono, fecha de nacimiento, direccin y contacto de emergencia  Click "Crear". Recibirs una notificacin de confirmacin.':r.includes("consulta")&&r.includes("crear")?'Para crear una consulta: Ve a "Consultas"  Click "Nueva Consulta"  Selecciona paciente, psiclogo, consultorio, fecha, hora y duracin  Click "Crear". Recibirs una notificacin.':r.includes("factura")||r.includes("cobrar")?'Las facturas se generan automticamente al cobrar una consulta. Tambin puedes crear facturas manuales en el mdulo "Facturacin". Para cobrar una consulta: ingresa el monto y mtodo de pago, se generar la factura automticamente con nmero secuencial (FAC-001, FAC-002, etc.).':r.includes("usuario")&&r.includes("invitar")?'Para invitar un usuario (solo administradores): Ve a "Gestin de Usuarios"  Click "Invitar Usuario"  Completa email, nombre y rol  Se genera un enlace nico vlido por 7 das  Comprtelo por copia o WhatsApp. Recibirs una notificacin.':r.includes("notificacion")?'Las notificaciones aparecen en la campana () del header superior derecha. Click en la campana para ver el panel de notificaciones. Click en cualquier notificacin para marcarla como leda, o usa "Marcar todas como ledas".':r.includes("rol")||r.includes("permiso")?'Roles disponibles: Administrador (acceso total), Psiclogo (pacientes, consultas, notas, facturacin), Recepcionista (citas, pacientes, consultorios sin notas clnicas), Visualizador (solo lectura). Puedes ver los permisos detallados en "Gestin de Usuarios"  "Permisos por Rol".':r.includes("buscar")||r.includes("filtrar")?"Todos los mdulos principales tienen barra de bsqueda. Puedes buscar por nombre, email, telfono, nmero de factura, etc. Tambin puedes ordenar las listas haciendo click en los encabezados de las columnas.":'Puedo ayudarte con informacin sobre cmo usar el CRM. Pregntame sobre: crear pacientes, consultas, facturas, invitar usuarios, notificaciones, roles y permisos, o cualquier funcionalidad del sistema. Tambin puedes consultar la pgina de "Ayuda" para ms informacin detallada.'}clearHistory(){this.conversationHistory=[]}async loadUserDataContext(e){try{const r=await RL.getUserDataContext(e);this.userDataContext=RL.formatDataContext(r)}catch(r){console.error("Error loading user data context:",r),this.userDataContext=""}}getHistory(){return this.conversationHistory}}const _E=new Dde,eb=43200,PL=1440,IL=Symbol.for("constructDateFrom");function A2(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&IL in t?t[IL](e):t instanceof Date?new t.constructor(e):new Date(e)}function Dc(t,e){return A2(t,t)}let kde={};function Lde(){return kde}function NL(t){const e=Dc(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function T2(t,...e){const r=A2.bind(null,t||e.find(n=>typeof n=="object"));return e.map(r)}function jb(t,e){const r=+Dc(t)-+Dc(e);return r<0?-1:r>0?1:r}function zde(t){return A2(t,Date.now())}function Ude(t,e,r){const[n,i]=T2(r?.in,t,e),s=n.getFullYear()-i.getFullYear(),a=n.getMonth()-i.getMonth();return s*12+a}function Bde(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function qde(t,e){return+Dc(t)-+Dc(e)}function Vde(t,e){const r=Dc(t);return r.setHours(23,59,59,999),r}function Fde(t,e){const r=Dc(t),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function Hde(t,e){const r=Dc(t);return+Vde(r)==+Fde(r)}function Wde(t,e,r){const[n,i,s]=T2(r?.in,t,t,e),a=jb(i,s),c=Math.abs(Ude(i,s));if(c<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-a*c);let u=jb(i,s)===-a;Hde(n)&&c===1&&jb(n,s)===1&&(u=!1);const d=a*(c-+u);return d===0?0:d}function Kde(t,e,r){const n=qde(t,e)/1e3;return Bde(r?.roundingMethod)(n)}const Gde={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$de=(t,e,r)=>{let n;const i=Gde[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Hd(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const Yde={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Xde={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Qde={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Jde={date:Hd({formats:Yde,defaultWidth:"full"}),time:Hd({formats:Xde,defaultWidth:"full"}),dateTime:Hd({formats:Qde,defaultWidth:"full"})},Zde={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ehe=(t,e,r,n)=>Zde[t];function Xs(t){return(e,r)=>{const n=r?.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,c=r?.width?String(r.width):a;i=t.formattingValues[c]||t.formattingValues[a]}else{const a=t.defaultWidth,c=r?.width?String(r.width):t.defaultWidth;i=t.values[c]||t.values[a]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const the={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},rhe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},nhe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ihe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},she={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ahe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ohe=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},che={ordinalNumber:ohe,era:Xs({values:the,defaultWidth:"wide"}),quarter:Xs({values:rhe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Xs({values:nhe,defaultWidth:"wide"}),day:Xs({values:ihe,defaultWidth:"wide"}),dayPeriod:Xs({values:she,defaultWidth:"wide",formattingValues:ahe,defaultFormattingWidth:"wide"})};function Qs(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const a=s[0],c=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(c)?uhe(c,p=>p.test(a)):lhe(c,p=>p.test(a));let d;d=t.valueCallback?t.valueCallback(u):u,d=r.valueCallback?r.valueCallback(d):d;const h=e.slice(a.length);return{value:d,rest:h}}}function lhe(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function uhe(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function yF(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],s=e.match(t.parsePattern);if(!s)return null;let a=t.valueCallback?t.valueCallback(s[0]):s[0];a=r.valueCallback?r.valueCallback(a):a;const c=e.slice(i.length);return{value:a,rest:c}}}const dhe=/^(\d+)(th|st|nd|rd)?/i,hhe=/\d+/i,fhe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},phe={any:[/^b/i,/^(a|c)/i]},mhe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},vhe={any:[/1/i,/2/i,/3/i,/4/i]},ghe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},yhe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},bhe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},She={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Che={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},xhe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},whe={ordinalNumber:yF({matchPattern:dhe,parsePattern:hhe,valueCallback:t=>parseInt(t,10)}),era:Qs({matchPatterns:fhe,defaultMatchWidth:"wide",parsePatterns:phe,defaultParseWidth:"any"}),quarter:Qs({matchPatterns:mhe,defaultMatchWidth:"wide",parsePatterns:vhe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Qs({matchPatterns:ghe,defaultMatchWidth:"wide",parsePatterns:yhe,defaultParseWidth:"any"}),day:Qs({matchPatterns:bhe,defaultMatchWidth:"wide",parsePatterns:She,defaultParseWidth:"any"}),dayPeriod:Qs({matchPatterns:Che,defaultMatchWidth:"any",parsePatterns:xhe,defaultParseWidth:"any"})},_he={code:"en-US",formatDistance:$de,formatLong:Jde,formatRelative:ehe,localize:che,match:whe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ehe(t,e,r){const n=Lde(),i=r?.locale??n.locale??_he,s=2520,a=jb(t,e);if(isNaN(a))throw new RangeError("Invalid time value");const c=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:a}),[u,d]=T2(r?.in,...a>0?[e,t]:[t,e]),h=Kde(d,u),p=(NL(d)-NL(u))/1e3,g=Math.round((h-p)/60);let y;if(g<2)return r?.includeSeconds?h<5?i.formatDistance("lessThanXSeconds",5,c):h<10?i.formatDistance("lessThanXSeconds",10,c):h<20?i.formatDistance("lessThanXSeconds",20,c):h<40?i.formatDistance("halfAMinute",0,c):h<60?i.formatDistance("lessThanXMinutes",1,c):i.formatDistance("xMinutes",1,c):g===0?i.formatDistance("lessThanXMinutes",1,c):i.formatDistance("xMinutes",g,c);if(g<45)return i.formatDistance("xMinutes",g,c);if(g<90)return i.formatDistance("aboutXHours",1,c);if(g<PL){const S=Math.round(g/60);return i.formatDistance("aboutXHours",S,c)}else{if(g<s)return i.formatDistance("xDays",1,c);if(g<eb){const S=Math.round(g/PL);return i.formatDistance("xDays",S,c)}else if(g<eb*2)return y=Math.round(g/eb),i.formatDistance("aboutXMonths",y,c)}if(y=Wde(d,u),y<12){const S=Math.round(g/eb);return i.formatDistance("xMonths",S,c)}else{const S=y%12,x=Math.trunc(y/12);return S<3?i.formatDistance("aboutXYears",x,c):S<9?i.formatDistance("overXYears",x,c):i.formatDistance("almostXYears",x+1,c)}}function Ahe(t,e){return Ehe(t,zde(t),e)}const The={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},Rhe=(t,e,r)=>{let n;const i=The[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"en "+n:"hace "+n:n},Phe={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},Ihe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Nhe={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ohe={date:Hd({formats:Phe,defaultWidth:"full"}),time:Hd({formats:Ihe,defaultWidth:"full"}),dateTime:Hd({formats:Nhe,defaultWidth:"full"})},jhe={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},Mhe={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},Dhe=(t,e,r,n)=>e.getHours()!==1?Mhe[t]:jhe[t],khe={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},Lhe={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},zhe={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},Uhe={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},Bhe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},qhe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},Vhe=(t,e)=>Number(t)+"",Fhe={ordinalNumber:Vhe,era:Xs({values:khe,defaultWidth:"wide"}),quarter:Xs({values:Lhe,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:Xs({values:zhe,defaultWidth:"wide"}),day:Xs({values:Uhe,defaultWidth:"wide"}),dayPeriod:Xs({values:Bhe,defaultWidth:"wide",formattingValues:qhe,defaultFormattingWidth:"wide"})},Hhe=/^(\d+)()?/i,Whe=/\d+/i,Khe={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},Ghe={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},$he={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},Yhe={any:[/1/i,/2/i,/3/i,/4/i]},Xhe={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},Qhe={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},Jhe={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},Zhe={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},efe={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},tfe={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},rfe={ordinalNumber:yF({matchPattern:Hhe,parsePattern:Whe,valueCallback:function(t){return parseInt(t,10)}}),era:Qs({matchPatterns:Khe,defaultMatchWidth:"wide",parsePatterns:Ghe,defaultParseWidth:"any"}),quarter:Qs({matchPatterns:$he,defaultMatchWidth:"wide",parsePatterns:Yhe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Qs({matchPatterns:Xhe,defaultMatchWidth:"wide",parsePatterns:Qhe,defaultParseWidth:"any"}),day:Qs({matchPatterns:Jhe,defaultMatchWidth:"wide",parsePatterns:Zhe,defaultParseWidth:"any"}),dayPeriod:Qs({matchPatterns:efe,defaultMatchWidth:"any",parsePatterns:tfe,defaultParseWidth:"any"})},nfe={code:"es",formatDistance:Rhe,formatLong:Ohe,formatRelative:Dhe,localize:Fhe,match:rfe,options:{weekStartsOn:1,firstWeekContainsDate:1}},ife=t=>{let e=t.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>");return e=e.replace(/\*(.+?)\*/g,"<em>$1</em>"),e=e.replace(/\n/g,"<br/>"),e},sfe=({autoOpen:t=!1,welcomeMessage:e,onClose:r})=>{const{currentUser:n}=bi(),[i,s]=A.useState(t),a="Hola! Soy tu asistente virtual del CRM. Puedo ayudarte con preguntas sobre cmo usar el sistema, crear pacientes, consultas, facturas, invitar usuarios, y ms. En qu puedo ayudarte?",[c,u]=A.useState([{id:"0",role:"assistant",content:e||a,timestamp:new Date}]),[d,h]=A.useState(""),[p,g]=A.useState(!1),y=A.useRef(null),S=A.useRef(null),x=()=>{y.current?.scrollIntoView({behavior:"smooth"})};A.useEffect(()=>{t&&s(!0)},[t]),A.useEffect(()=>{i&&n?.uid&&_E.loadUserDataContext(n.uid)},[i,n]),A.useEffect(()=>{e&&u([{id:"0",role:"assistant",content:e,timestamp:new Date}])},[e]),A.useEffect(()=>{x()},[c]),A.useEffect(()=>{i&&S.current&&S.current.focus()},[i]);const w=async()=>{if(!d.trim()||p)return;const M={id:Date.now().toString(),role:"user",content:d.trim(),timestamp:new Date};u(D=>[...D,M]),h(""),g(!0);try{const D=await _E.sendMessage(d.trim()),z={id:(Date.now()+1).toString(),role:"assistant",content:D,timestamp:new Date};u(j=>[...j,z])}catch(D){console.error("Error al enviar mensaje:",D);const z={id:(Date.now()+1).toString(),role:"assistant",content:"Lo siento, hubo un error al procesar tu pregunta. Por favor intenta de nuevo o consulta la pgina de Ayuda.",timestamp:new Date};u(j=>[...j,z])}finally{g(!1)}},E=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),w())},R=()=>{_E.clearHistory(),u([{id:"0",role:"assistant",content:e||a,timestamp:new Date}])},T=["Cmo creo un paciente?","Cmo invito un usuario?","Cmo funciona la facturacin?","Qu son las notificaciones?"];return m.jsxs(m.Fragment,{children:[!i&&m.jsx("button",{onClick:()=>s(!0),className:"fixed bottom-6 right-6 w-16 h-16 bg-primary text-white rounded-full shadow-lg hover:bg-primary-dark transition-all duration-300 flex items-center justify-center z-50 hover:scale-110","aria-label":"Abrir asistente virtual",children:m.jsx("img",{src:"/images/isotipo-blanco.png",alt:"Vaiston",className:"w-8 h-8"})}),i&&m.jsxs("div",{className:"fixed bottom-6 right-6 w-96 h-[600px] bg-white rounded-lg shadow-2xl flex flex-col z-50 border border-border",children:[m.jsxs("div",{className:"bg-primary text-white p-4 rounded-t-lg flex items-center justify-between flex-shrink-0",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center p-1.5",children:m.jsx("img",{src:"/images/isotipo-blanco.png",alt:"Vaiston",className:"w-full h-full object-contain"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold",children:"Asistente Virtual"}),m.jsx("p",{className:"text-xs opacity-90",children:"Siempre listo para ayudar"})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:R,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",title:"Limpiar chat",children:m.jsx(g2,{className:"text-sm"})}),m.jsx("button",{onClick:()=>{gF.stop(),s(!1),r?.()},className:"p-2 hover:bg-white/20 rounded-lg transition-colors","aria-label":"Minimizar asistente",children:m.jsx(Zae,{})})]})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-background",children:[c.map(M=>m.jsx("div",{className:`flex ${M.role==="user"?"justify-end":"justify-start"}`,children:m.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${M.role==="user"?"bg-primary text-white":"bg-white border border-border text-text-primary"}`,children:[m.jsx("div",{className:"text-sm whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:ife(M.content)}}),m.jsx("p",{className:`text-xs mt-1 ${M.role==="user"?"text-white/70":"text-text-secondary"}`,children:Ahe(M.timestamp,{addSuffix:!0,locale:nfe})})]})},M.id)),p&&m.jsx("div",{className:"flex justify-start",children:m.jsx("div",{className:"bg-white border border-border rounded-lg p-3",children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:"flex gap-1",children:[m.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"0ms"}}),m.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"150ms"}}),m.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),m.jsx("span",{className:"text-xs text-text-secondary",children:"Escribiendo..."})]})})}),m.jsx("div",{ref:y})]}),c.length===1&&m.jsxs("div",{className:"px-4 py-2 border-t border-border bg-white",children:[m.jsx("p",{className:"text-xs text-text-secondary mb-2",children:"Preguntas frecuentes:"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:T.map((M,D)=>m.jsx("button",{onClick:()=>{h(M),setTimeout(()=>w(),100)},className:"text-xs px-3 py-1 bg-background hover:bg-primary/10 border border-border rounded-full transition-colors",children:M},D))})]}),m.jsx("div",{className:"p-4 border-t border-border bg-white rounded-b-lg",children:m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{ref:S,type:"text",value:d,onChange:M=>h(M.target.value),onKeyPress:E,placeholder:"Escribe tu pregunta...",className:"flex-1 px-4 py-2 border border-border rounded-lg focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none text-sm",disabled:p}),m.jsx("button",{onClick:w,disabled:!d.trim()||p,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Enviar mensaje",children:m.jsx(goe,{})})]})})]})]})},ir=({children:t})=>{const{isAssistantOpen:e,welcomeMessage:r,hideAssistant:n}=Uae();return m.jsxs("div",{className:"min-h-screen bg-background overflow-x-hidden",children:[m.jsx(Goe,{}),m.jsxs("div",{className:"lg:ml-64",children:[m.jsx(jde,{}),m.jsx("main",{className:"p-3 sm:p-6 w-full",children:t})]}),m.jsx(sfe,{autoOpen:e,welcomeMessage:r,onClose:n})]})},Vl="http://localhost:3001",GT={async getAccount(){try{const t=await fetch(`${Vl}/api/trading/account`);if(!t.ok)throw new Error(`Error fetching account: ${t.statusText}`);return await t.json()}catch(t){throw console.error("Error getting account data:",t),new Error("No se pudo obtener datos de cuenta")}},async getPositions(t){try{const e=t?`${Vl}/api/trading/positions?userId=${t}`:`${Vl}/api/trading/positions`,r=await fetch(e);if(!r.ok)throw new Error(`Error fetching positions: ${r.statusText}`);return await r.json()}catch(e){throw console.error("Error getting positions:",e),new Error("No se pudo obtener posiciones")}},async getMarketStatus(){try{const t=await fetch(`${Vl}/api/trading/market-status`);if(!t.ok)throw new Error(`Error fetching market status: ${t.statusText}`);return await t.json()}catch(t){return console.error("Error getting market status:",t),{is_open:!1,next_open:"",next_close:""}}},async executeOrder(t){try{const e=await fetch(`${Vl}/api/trading/orders`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json();throw new Error(n.message||"Error ejecutando orden")}return await e.json()}catch(e){throw console.error("Error executing order:",e),e}},async getOrders(t){try{const e=t?`${Vl}/api/trading/orders?status=${t}`:`${Vl}/api/trading/orders`,r=await fetch(e);if(!r.ok)throw new Error(`Error fetching orders: ${r.statusText}`);return await r.json()}catch(e){return console.error("Error getting orders:",e),[]}}},afe=()=>{const t=Pu(),{currentUser:e}=bi(),[r,n]=A.useState(null),[i,s]=A.useState([]),[a,c]=A.useState(!0);A.useEffect(()=>{u();const S=setInterval(u,3e4);return()=>clearInterval(S)},[]);const u=async()=>{try{const[S,x]=await Promise.all([GT.getAccount(),GT.getPositions(e?.uid)]);n(S),s(x)}catch(S){console.error("Error loading dashboard:",S)}finally{c(!1)}},d=1e5,h=r?parseFloat(r.equity):d,p=h-d,g=(h-d)/d*100,y=r?parseFloat(r.cash):0;return a?m.jsx(ir,{children:m.jsx("div",{className:"flex items-center justify-center h-96",children:m.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary"})})}):m.jsx(ir,{children:m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:"Dashboard de Trading"}),m.jsx("p",{className:"text-text-secondary mt-2",children:"Resumen de tu cuenta de Alpaca Paper Trading"})]}),m.jsxs("button",{onClick:()=>t("/trading"),className:"px-6 py-3 bg-primary text-white rounded-lg font-semibold hover:bg-primary/90 transition-colors flex items-center gap-2",children:[m.jsx(ua,{}),"Ir a Trading"]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[m.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-border p-6",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[m.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:m.jsx(ua,{className:"text-2xl text-primary"})}),m.jsx("h3",{className:"text-sm font-medium text-text-secondary",children:"ROI"})]}),m.jsxs("p",{className:`text-3xl font-bold ${g>=0?"text-success":"text-danger"}`,children:[g>=0?"+":"",g.toFixed(2),"%"]}),m.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Desde $100,000 inicial"})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-border p-6",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[m.jsx("div",{className:"p-3 bg-success/10 rounded-lg",children:m.jsx(Hc,{className:"text-2xl text-success"})}),m.jsx("h3",{className:"text-sm font-medium text-text-secondary",children:"Valor de Cuenta"})]}),m.jsxs("p",{className:"text-3xl font-bold text-text-primary",children:["$",h.toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})]}),m.jsxs("p",{className:`text-sm mt-1 ${p>=0?"text-success":"text-danger"}`,children:[p>=0?"+":"","$",Math.abs(p).toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-border p-6",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[m.jsx("div",{className:"p-3 bg-info/10 rounded-lg",children:m.jsx(Ioe,{className:"text-2xl text-info"})}),m.jsx("h3",{className:"text-sm font-medium text-text-secondary",children:"Efectivo"})]}),m.jsxs("p",{className:"text-3xl font-bold text-text-primary",children:["$",y.toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})]}),m.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Disponible"})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-border p-6",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[m.jsx("div",{className:"p-3 bg-warning/10 rounded-lg",children:m.jsx(qg,{className:"text-2xl text-warning"})}),m.jsx("h3",{className:"text-sm font-medium text-text-secondary",children:"Posiciones Activas"})]}),m.jsx("p",{className:"text-3xl font-bold text-text-primary",children:i.length}),m.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"En el mercado"})]})]}),i.length>0&&m.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-border overflow-hidden",children:[m.jsx("div",{className:"p-6 border-b border-border",children:m.jsx("h2",{className:"text-xl font-semibold text-text-primary",children:"Posiciones Activas"})}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{className:"bg-bg-primary",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Smbolo"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Cantidad"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider",children:"P&L"})]})}),m.jsx("tbody",{className:"divide-y divide-border",children:i.slice(0,5).map(S=>{const x=parseFloat(S.unrealized_pl);return m.jsxs("tr",{className:"hover:bg-bg-primary transition-colors",children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("span",{className:"font-semibold text-text-primary",children:S.symbol})}),m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-text-secondary",children:[parseFloat(S.qty).toFixed(0)," acciones"]}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsxs("span",{className:`font-semibold ${x>=0?"text-success":"text-danger"}`,children:[x>=0?"+":"","$",Math.abs(x).toFixed(2)]})})]},S.symbol)})})]})}),i.length>5&&m.jsx("div",{className:"p-4 bg-bg-primary border-t border-border text-center",children:m.jsxs("button",{onClick:()=>t("/trading"),className:"text-primary hover:text-primary/80 font-semibold text-sm",children:["Ver todas las posiciones (",i.length,")"]})})]}),m.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:m.jsxs("p",{className:"text-sm text-blue-800",children:[" ",m.jsx("strong",{children:"Tip:"})," Los datos se actualizan automticamente cada 30 segundos. El mercado opera de 9:30 AM a 4:00 PM EST (8:30 AM - 3:00 PM hora de Mxico)."]})})]})})},Er=({title:t,value:e,change:r,changePercent:n,icon:i,trend:s,subtitle:a,className:c=""})=>{const u=()=>s==="up"||r&&r>0?"text-success":s==="down"||r&&r<0?"text-danger":"text-text-secondary",d=()=>s==="up"||r&&r>0?"bg-success/10":s==="down"||r&&r<0?"bg-danger/10":"bg-bg-secondary",h=()=>r===void 0?null:`${r>=0?"+":""}${r.toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})}`,p=()=>n===void 0?null:`${n>=0?"+":""}${n.toFixed(2)}%`;return m.jsxs("div",{className:`bg-white rounded-xl shadow-md p-6 border border-border hover:shadow-lg transition-all duration-300 ${c}`,children:[m.jsxs("div",{className:"flex items-start justify-between mb-4",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("p",{className:"text-sm text-text-secondary font-medium mb-1",children:t}),m.jsx("h3",{className:"text-3xl font-bold text-text-primary",children:e}),a&&m.jsx("p",{className:"text-xs text-text-secondary mt-1",children:a})]}),i&&m.jsx("div",{className:`p-3 rounded-lg ${d()}`,children:m.jsx("div",{className:`text-2xl ${u()}`,children:i})})]}),(r!==void 0||n!==void 0)&&m.jsxs("div",{className:`flex items-center gap-2 text-sm font-semibold ${u()}`,children:[r!==void 0&&m.jsx("span",{children:h()}),n!==void 0&&m.jsx("span",{className:"px-2 py-1 rounded-md bg-current/10",children:p()})]})]})},Wg=({symbol:t,interval:e="D",theme:r="light",height:n=500,showToolbar:i=!0,studies:s=[]})=>{const a=A.useRef(null);return A.useEffect(()=>{if(!a.current)return;a.current.innerHTML="";const c=document.createElement("script");return c.src="https://s3.tradingview.com/tv.js",c.async=!0,c.onload=()=>{typeof window.TradingView<"u"&&new window.TradingView.widget({autosize:!1,symbol:t,interval:e,timezone:"America/Mexico_City",theme:r,style:"1",locale:"es",toolbar_bg:"#f1f3f6",enable_publishing:!1,hide_side_toolbar:!i,allow_symbol_change:!0,container_id:a.current?.id,height:n,width:"100%",studies:s,show_popup_button:!0,popup_width:"1000",popup_height:"650"})},document.head.appendChild(c),()=>{c.parentNode&&c.parentNode.removeChild(c)}},[t,e,r,n,i,s]),m.jsx("div",{className:"w-full bg-white rounded-xl shadow-md overflow-hidden border border-border",children:m.jsx("div",{ref:a,id:`tradingview_${t}_${Date.now()}`,className:"tradingview-widget-container",style:{height:`${n}px`}})})},Kg=({positions:t,onSell:e,isLoading:r=!1})=>{const n=a=>`$${a.toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})}`,i=a=>`${a>=0?"+":""}${a.toFixed(2)}%`,s=a=>a>0?"text-success":a<0?"text-danger":"text-text-secondary";return r?m.jsx("div",{className:"bg-white rounded-xl shadow-md p-8 border border-border",children:m.jsx("div",{className:"flex items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):t.length===0?m.jsx("div",{className:"bg-white rounded-xl shadow-md p-8 border border-border text-center",children:m.jsx("p",{className:"text-text-secondary",children:"No hay posiciones abiertas"})}):m.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-border",children:m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full divide-y divide-border",children:[m.jsx("thead",{className:"bg-bg-secondary",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Smbolo"}),m.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Cantidad"}),m.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Precio Promedio"}),m.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Precio Actual"}),m.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Valor Total"}),m.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-text-secondary uppercase tracking-wider",children:"P&L"}),m.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-text-secondary uppercase tracking-wider",children:"P&L %"}),m.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Acciones"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-border",children:t.map(a=>m.jsxs("tr",{className:"hover:bg-bg-primary transition-colors",children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsxs("div",{children:[m.jsx("div",{className:"text-sm font-semibold text-text-primary",children:a.symbol}),m.jsx("div",{className:"text-xs text-text-secondary",children:a.companyName})]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-text-primary",children:a.quantity}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-text-primary",children:n(a.avgBuyPriceInMXN)}),m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:[m.jsx("div",{className:"text-sm font-semibold text-text-primary",children:n(a.currentPriceInMXN)}),m.jsx("div",{className:`text-xs ${s(a.metrics.dayChangePercent)}`,children:i(a.metrics.dayChangePercent)})]}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-semibold text-text-primary",children:n(a.metrics.totalValue)}),m.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-right text-sm font-semibold ${s(a.metrics.unrealizedGain)}`,children:n(a.metrics.unrealizedGain)}),m.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-right text-sm font-bold ${s(a.metrics.unrealizedGainPercent)}`,children:i(a.metrics.unrealizedGainPercent)}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:e&&m.jsx("button",{onClick:()=>e(a),className:"text-danger hover:text-danger/80 font-medium cursor-pointer transition-colors",children:"Vender"})})]},a.id))})]})})})},OL={BUY:"BUY"},ofe=.0025,cfe=.1,Gg=({trades:t,isLoading:e=!1})=>{const[r,n]=A.useState(""),[i,s]=A.useState("ALL"),a=h=>`$${h.toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})}`,c=h=>new Date(h.toDate()).toLocaleDateString("es-MX",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),u=t.filter(h=>{const p=h.symbol.toLowerCase().includes(r.toLowerCase()),g=i==="ALL"||h.type===i;return p&&g}),d=()=>{const h=["Fecha","Tipo","Smbolo","Cantidad","Precio USD","Precio MXN","Total MXN","Comisin","Impuesto"],p=u.map(x=>[c(x.timestamp),x.type,x.symbol,x.quantity,x.price,x.priceInMXN,x.totalCost,x.fees.commission,x.fees.tax]),g=[h.join(","),...p.map(x=>x.join(","))].join(`
`),y=new Blob([g],{type:"text/csv;charset=utf-8;"}),S=document.createElement("a");S.href=URL.createObjectURL(y),S.download=`trades_${new Date().toISOString().split("T")[0]}.csv`,S.click()};return e?m.jsx("div",{className:"bg-white rounded-xl shadow-md p-8 border border-border",children:m.jsx("div",{className:"flex items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):m.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-border",children:[m.jsx("div",{className:"p-6 border-b border-border",children:m.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[m.jsx("div",{className:"flex-1 w-full md:w-auto",children:m.jsxs("div",{className:"relative",children:[m.jsx(boe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-secondary"}),m.jsx("input",{type:"text",placeholder:"Buscar por smbolo...",value:r,onChange:h=>n(h.target.value),className:"w-full pl-10 pr-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})}),m.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[m.jsx("button",{onClick:()=>s("ALL"),className:`px-4 py-2 rounded-lg font-medium transition-colors cursor-pointer ${i==="ALL"?"bg-primary text-white":"bg-bg-secondary text-text-secondary hover:bg-bg-secondary/80"}`,children:"Todas"}),m.jsx("button",{onClick:()=>s("BUY"),className:`px-4 py-2 rounded-lg font-medium transition-colors cursor-pointer ${i==="BUY"?"bg-success text-white":"bg-bg-secondary text-text-secondary hover:bg-bg-secondary/80"}`,children:"Compras"}),m.jsx("button",{onClick:()=>s("SELL"),className:`px-4 py-2 rounded-lg font-medium transition-colors cursor-pointer ${i==="SELL"?"bg-danger text-white":"bg-bg-secondary text-text-secondary hover:bg-bg-secondary/80"}`,children:"Ventas"}),m.jsxs("button",{onClick:d,className:"px-4 py-2 rounded-lg font-medium bg-bg-secondary text-text-secondary hover:bg-bg-secondary/80 transition-colors cursor-pointer flex items-center gap-2",children:[m.jsx(m2,{}),"Exportar"]})]})]})}),m.jsx("div",{className:"overflow-x-auto",children:u.length===0?m.jsx("div",{className:"p-8 text-center text-text-secondary",children:"No se encontraron operaciones"}):m.jsxs("table",{className:"min-w-full divide-y divide-border",children:[m.jsx("thead",{className:"bg-bg-secondary",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Fecha"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Tipo"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Smbolo"}),m.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Cantidad"}),m.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Precio"}),m.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Total"}),m.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Comisin"}),m.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Impuesto"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-border",children:u.map(h=>m.jsxs("tr",{className:"hover:bg-bg-primary transition-colors",children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-text-primary",children:c(h.timestamp)}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${h.type===OL.BUY?"bg-success/10 text-success":"bg-danger/10 text-danger"}`,children:h.type===OL.BUY?"COMPRA":"VENTA"})}),m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[m.jsx("div",{className:"text-sm font-semibold text-text-primary",children:h.symbol}),h.companyName&&m.jsx("div",{className:"text-xs text-text-secondary",children:h.companyName})]}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-text-primary",children:h.quantity}),m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:[m.jsxs("div",{className:"text-sm text-text-primary",children:["$",h.price.toFixed(2)," USD"]}),m.jsxs("div",{className:"text-xs text-text-secondary",children:[a(h.priceInMXN)," MXN"]})]}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-semibold text-text-primary",children:a(h.totalCost)}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-text-secondary",children:a(h.fees.commission)}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-text-secondary",children:a(h.fees.tax)})]},h.id))})]})})]})};function bF(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=bF(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function wt(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=bF(t))&&(n&&(n+=" "),n+=e);return n}var lfe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function R2(t){if(typeof t!="string")return!1;var e=lfe;return e.includes(t)}var ufe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],dfe=new Set(ufe);function SF(t){return typeof t!="string"?!1:dfe.has(t)}function CF(t){return typeof t=="string"&&t.startsWith("data-")}function Gi(t){if(typeof t!="object"||t===null)return{};var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(SF(r)||CF(r))&&(e[r]=t[r]);return e}function WC(t){if(t==null)return null;if(A.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Gi(e)}return typeof t=="object"&&!Array.isArray(t)?Gi(t):null}function xn(t){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(SF(r)||CF(r)||R2(r))&&(e[r]=t[r]);return e}function hfe(t){return t==null?null:A.isValidElement(t)?xn(t.props):typeof t=="object"&&!Array.isArray(t)?xn(t):null}var ffe=["children","width","height","viewBox","className","style","title","desc"];function $T(){return $T=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$T.apply(null,arguments)}function pfe(t,e){if(t==null)return{};var r,n,i=mfe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function mfe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var P2=A.forwardRef((t,e)=>{var{children:r,width:n,height:i,viewBox:s,className:a,style:c,title:u,desc:d}=t,h=pfe(t,ffe),p=s||{width:n,height:i,x:0,y:0},g=wt("recharts-surface",a);return A.createElement("svg",$T({},xn(h),{className:g,width:n,height:i,style:c,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:e}),A.createElement("title",null,u),A.createElement("desc",null,d),r)}),vfe=["children","className"];function YT(){return YT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},YT.apply(null,arguments)}function gfe(t,e){if(t==null)return{};var r,n,i=yfe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function yfe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var $i=A.forwardRef((t,e)=>{var{children:r,className:n}=t,i=gfe(t,vfe),s=wt("recharts-layer",n);return A.createElement("g",YT({className:s},xn(i),{ref:e}),r)}),xF=A.createContext(null),bfe=()=>A.useContext(xF);function jt(t){return function(){return t}}const wF=Math.cos,mS=Math.sin,_s=Math.sqrt,vS=Math.PI,KC=2*vS,XT=Math.PI,QT=2*XT,Ql=1e-6,Sfe=QT-Ql;function _F(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function Cfe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return _F;const r=10**e;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class xfe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?_F:Cfe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,s,a){this._append`C${+e},${+r},${+n},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,r,n,i,s){if(e=+e,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,c=this._y1,u=n-e,d=i-r,h=a-e,p=c-r,g=h*h+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(g>Ql)if(!(Math.abs(p*u-d*h)>Ql)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let y=n-a,S=i-c,x=u*u+d*d,w=y*y+S*S,E=Math.sqrt(x),R=Math.sqrt(g),T=s*Math.tan((XT-Math.acos((x+g-w)/(2*E*R)))/2),M=T/R,D=T/E;Math.abs(M-1)>Ql&&this._append`L${e+M*h},${r+M*p}`,this._append`A${s},${s},0,0,${+(p*y>h*S)},${this._x1=e+D*u},${this._y1=r+D*d}`}}arc(e,r,n,i,s,a){if(e=+e,r=+r,n=+n,a=!!a,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(i),u=n*Math.sin(i),d=e+c,h=r+u,p=1^a,g=a?i-s:s-i;this._x1===null?this._append`M${d},${h}`:(Math.abs(this._x1-d)>Ql||Math.abs(this._y1-h)>Ql)&&this._append`L${d},${h}`,n&&(g<0&&(g=g%QT+QT),g>Sfe?this._append`A${n},${n},0,1,${p},${e-c},${r-u}A${n},${n},0,1,${p},${this._x1=d},${this._y1=h}`:g>Ql&&this._append`A${n},${n},0,${+(g>=XT)},${p},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function I2(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new xfe(e)}function N2(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function EF(t){this._context=t}EF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function GC(t){return new EF(t)}function AF(t){return t[0]}function TF(t){return t[1]}function RF(t,e){var r=jt(!0),n=null,i=GC,s=null,a=I2(c);t=typeof t=="function"?t:t===void 0?AF:jt(t),e=typeof e=="function"?e:e===void 0?TF:jt(e);function c(u){var d,h=(u=N2(u)).length,p,g=!1,y;for(n==null&&(s=i(y=a())),d=0;d<=h;++d)!(d<h&&r(p=u[d],d,u))===g&&((g=!g)?s.lineStart():s.lineEnd()),g&&s.point(+t(p,d,u),+e(p,d,u));if(y)return s=null,y+""||null}return c.x=function(u){return arguments.length?(t=typeof u=="function"?u:jt(+u),c):t},c.y=function(u){return arguments.length?(e=typeof u=="function"?u:jt(+u),c):e},c.defined=function(u){return arguments.length?(r=typeof u=="function"?u:jt(!!u),c):r},c.curve=function(u){return arguments.length?(i=u,n!=null&&(s=i(n)),c):i},c.context=function(u){return arguments.length?(u==null?n=s=null:s=i(n=u),c):n},c}function tb(t,e,r){var n=null,i=jt(!0),s=null,a=GC,c=null,u=I2(d);t=typeof t=="function"?t:t===void 0?AF:jt(+t),e=typeof e=="function"?e:jt(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?TF:jt(+r);function d(p){var g,y,S,x=(p=N2(p)).length,w,E=!1,R,T=new Array(x),M=new Array(x);for(s==null&&(c=a(R=u())),g=0;g<=x;++g){if(!(g<x&&i(w=p[g],g,p))===E)if(E=!E)y=g,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),S=g-1;S>=y;--S)c.point(T[S],M[S]);c.lineEnd(),c.areaEnd()}E&&(T[g]=+t(w,g,p),M[g]=+e(w,g,p),c.point(n?+n(w,g,p):T[g],r?+r(w,g,p):M[g]))}if(R)return c=null,R+""||null}function h(){return RF().defined(i).curve(a).context(s)}return d.x=function(p){return arguments.length?(t=typeof p=="function"?p:jt(+p),n=null,d):t},d.x0=function(p){return arguments.length?(t=typeof p=="function"?p:jt(+p),d):t},d.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:jt(+p),d):n},d.y=function(p){return arguments.length?(e=typeof p=="function"?p:jt(+p),r=null,d):e},d.y0=function(p){return arguments.length?(e=typeof p=="function"?p:jt(+p),d):e},d.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:jt(+p),d):r},d.lineX0=d.lineY0=function(){return h().x(t).y(e)},d.lineY1=function(){return h().x(t).y(r)},d.lineX1=function(){return h().x(n).y(e)},d.defined=function(p){return arguments.length?(i=typeof p=="function"?p:jt(!!p),d):i},d.curve=function(p){return arguments.length?(a=p,s!=null&&(c=a(s)),d):a},d.context=function(p){return arguments.length?(p==null?s=c=null:c=a(s=p),d):s},d}class PF{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function wfe(t){return new PF(t,!0)}function _fe(t){return new PF(t,!1)}const O2={draw(t,e){const r=_s(e/vS);t.moveTo(r,0),t.arc(0,0,r,0,KC)}},Efe={draw(t,e){const r=_s(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},IF=_s(1/3),Afe=IF*2,Tfe={draw(t,e){const r=_s(e/Afe),n=r*IF;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},Rfe={draw(t,e){const r=_s(e),n=-r/2;t.rect(n,n,r,r)}},Pfe=.8908130915292852,NF=mS(vS/10)/mS(7*vS/10),Ife=mS(KC/10)*NF,Nfe=-wF(KC/10)*NF,Ofe={draw(t,e){const r=_s(e*Pfe),n=Ife*r,i=Nfe*r;t.moveTo(0,-r),t.lineTo(n,i);for(let s=1;s<5;++s){const a=KC*s/5,c=wF(a),u=mS(a);t.lineTo(u*r,-c*r),t.lineTo(c*n-u*i,u*n+c*i)}t.closePath()}},EE=_s(3),jfe={draw(t,e){const r=-_s(e/(EE*3));t.moveTo(0,r*2),t.lineTo(-EE*r,-r),t.lineTo(EE*r,-r),t.closePath()}},zi=-.5,Ui=_s(3)/2,JT=1/_s(12),Mfe=(JT/2+1)*3,Dfe={draw(t,e){const r=_s(e/Mfe),n=r/2,i=r*JT,s=n,a=r*JT+r,c=-s,u=a;t.moveTo(n,i),t.lineTo(s,a),t.lineTo(c,u),t.lineTo(zi*n-Ui*i,Ui*n+zi*i),t.lineTo(zi*s-Ui*a,Ui*s+zi*a),t.lineTo(zi*c-Ui*u,Ui*c+zi*u),t.lineTo(zi*n+Ui*i,zi*i-Ui*n),t.lineTo(zi*s+Ui*a,zi*a-Ui*s),t.lineTo(zi*c+Ui*u,zi*u-Ui*c),t.closePath()}};function kfe(t,e){let r=null,n=I2(i);t=typeof t=="function"?t:jt(t||O2),e=typeof e=="function"?e:jt(e===void 0?64:+e);function i(){let s;if(r||(r=s=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:jt(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:jt(+s),i):e},i.context=function(s){return arguments.length?(r=s??null,i):r},i}function gS(){}function yS(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function OF(t){this._context=t}OF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:yS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:yS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Lfe(t){return new OF(t)}function jF(t){this._context=t}jF.prototype={areaStart:gS,areaEnd:gS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:yS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function zfe(t){return new jF(t)}function MF(t){this._context=t}MF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:yS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Ufe(t){return new MF(t)}function DF(t){this._context=t}DF.prototype={areaStart:gS,areaEnd:gS,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Bfe(t){return new DF(t)}function jL(t){return t<0?-1:1}function ML(t,e,r){var n=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(n||i<0&&-0),a=(r-t._y1)/(i||n<0&&-0),c=(s*i+a*n)/(n+i);return(jL(s)+jL(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(c))||0}function DL(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function AE(t,e,r){var n=t._x0,i=t._y0,s=t._x1,a=t._y1,c=(s-n)/3;t._context.bezierCurveTo(n+c,i+c*e,s-c,a-c*r,s,a)}function bS(t){this._context=t}bS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:AE(this,this._t0,DL(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,AE(this,DL(this,r=ML(this,t,e)),r);break;default:AE(this,this._t0,r=ML(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function kF(t){this._context=new LF(t)}(kF.prototype=Object.create(bS.prototype)).point=function(t,e){bS.prototype.point.call(this,e,t)};function LF(t){this._context=t}LF.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,s){this._context.bezierCurveTo(e,t,n,r,s,i)}};function qfe(t){return new bS(t)}function Vfe(t){return new kF(t)}function zF(t){this._context=t}zF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=kL(t),i=kL(e),s=0,a=1;a<r;++s,++a)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],t[a],e[a]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function kL(t){var e,r=t.length-1,n,i=new Array(r),s=new Array(r),a=new Array(r);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,s[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/s[e-1],s[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/s[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function Ffe(t){return new zF(t)}function $C(t,e){this._context=t,this._t=e}$C.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function Hfe(t){return new $C(t,.5)}function Wfe(t){return new $C(t,0)}function Kfe(t){return new $C(t,1)}function th(t,e){if((a=t.length)>1)for(var r=1,n,i,s=t[e[0]],a,c=s.length;r<a;++r)for(i=s,s=t[e[r]],n=0;n<c;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function ZT(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function Gfe(t,e){return t[e]}function $fe(t){const e=[];return e.key=t,e}function Yfe(){var t=jt([]),e=ZT,r=th,n=Gfe;function i(s){var a=Array.from(t.apply(this,arguments),$fe),c,u=a.length,d=-1,h;for(const p of s)for(c=0,++d;c<u;++c)(a[c][d]=[0,+n(p,a[c].key,d,s)]).data=p;for(c=0,h=N2(e(a));c<u;++c)a[h[c]].index=c;return r(a,h),a}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:jt(Array.from(s)),i):t},i.value=function(s){return arguments.length?(n=typeof s=="function"?s:jt(+s),i):n},i.order=function(s){return arguments.length?(e=s==null?ZT:typeof s=="function"?s:jt(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(r=s??th,i):r},i}function Xfe(t,e){if((n=t.length)>0){for(var r,n,i=0,s=t[0].length,a;i<s;++i){for(a=r=0;r<n;++r)a+=t[r][i][1]||0;if(a)for(r=0;r<n;++r)t[r][i][1]/=a}th(t,e)}}function Qfe(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,s=n.length;r<s;++r){for(var a=0,c=0;a<i;++a)c+=t[a][r][1]||0;n[r][1]+=n[r][0]=-c/2}th(t,e)}}function Jfe(t,e){if(!(!((a=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,s,a;n<s;++n){for(var c=0,u=0,d=0;c<a;++c){for(var h=t[e[c]],p=h[n][1]||0,g=h[n-1][1]||0,y=(p-g)/2,S=0;S<c;++S){var x=t[e[S]],w=x[n][1]||0,E=x[n-1][1]||0;y+=w-E}u+=p,d+=y*p}i[n-1][1]+=i[n-1][0]=r,u&&(r-=d/u)}i[n-1][1]+=i[n-1][0]=r,th(t,e)}}var TE={},RE={},LL;function Zfe(){return LL||(LL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==="__proto__"}t.isUnsafeProperty=e})(RE)),RE}var PE={},zL;function UF(){return zL||(zL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=e})(PE)),PE}var IE={},UL;function j2(){return UL||(UL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}t.toKey=e})(IE)),IE}var NE={},OE={},BL;function epe(){return BL||(BL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(e).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}t.toString=e})(OE)),OE}var qL;function M2(){return qL||(qL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=epe(),r=j2();function n(i){if(Array.isArray(i))return i.map(r.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const s=[],a=i.length;if(a===0)return s;let c=0,u="",d="",h=!1;for(i.charCodeAt(0)===46&&(s.push(""),c++);c<a;){const p=i[c];d?p==="\\"&&c+1<a?(c++,u+=i[c]):p===d?d="":u+=p:h?p==='"'||p==="'"?d=p:p==="]"?(h=!1,s.push(u),u=""):u+=p:p==="["?(h=!0,u&&(s.push(u),u="")):p==="."?u&&(s.push(u),u=""):u+=p,c++}return u&&s.push(u),s}t.toPath=n})(NE)),NE}var VL;function D2(){return VL||(VL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Zfe(),r=UF(),n=j2(),i=M2();function s(c,u,d){if(c==null)return d;switch(typeof u){case"string":{if(e.isUnsafeProperty(u))return d;const h=c[u];return h===void 0?r.isDeepKey(u)?s(c,i.toPath(u),d):d:h}case"number":case"symbol":{typeof u=="number"&&(u=n.toKey(u));const h=c[u];return h===void 0?d:h}default:{if(Array.isArray(u))return a(c,u,d);if(Object.is(u?.valueOf(),-0)?u="-0":u=String(u),e.isUnsafeProperty(u))return d;const h=c[u];return h===void 0?d:h}}}function a(c,u,d){if(u.length===0)return d;let h=c;for(let p=0;p<u.length;p++){if(h==null||e.isUnsafeProperty(u[p]))return d;h=h[u[p]]}return h===void 0?d:h}t.get=s})(TE)),TE}var jE,FL;function tpe(){return FL||(FL=1,jE=D2().get),jE}var rpe=tpe();const YC=vo(rpe);var Fi=t=>t===0?0:t>0?1:-1,Ss=t=>typeof t=="number"&&t!=+t,lo=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Ne=t=>(typeof t=="number"||t instanceof Number)&&!Ss(t),da=t=>Ne(t)||typeof t=="string",npe=0,dg=t=>{var e=++npe;return"".concat(t||"").concat(e)},kc=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ne(e)&&typeof e!="string")return n;var s;if(lo(e)){if(r==null)return n;var a=e.indexOf("%");s=r*parseFloat(e.slice(0,a))/100}else s=+e;return Ss(s)&&(s=n),i&&r!=null&&s>r&&(s=r),s},BF=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,r={},n=0;n<e;n++)if(!r[t[n]])r[t[n]]=!0;else return!0;return!1};function xr(t,e,r){return Ne(t)&&Ne(e)?t+r*(e-t):e}function qF(t,e,r){if(!(!t||!t.length))return t.find(n=>n&&(typeof e=="function"?e(n):YC(n,e))===r)}var Mr=t=>t===null||typeof t>"u",$g=t=>Mr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function ipe(t){return t!=null}function Yg(){}var spe=["type","size","sizeType"];function eR(){return eR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eR.apply(null,arguments)}function HL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function WL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HL(Object(r),!0).forEach(function(n){ape(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ape(t,e,r){return(e=ope(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ope(t){var e=cpe(t,"string");return typeof e=="symbol"?e:e+""}function cpe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lpe(t,e){if(t==null)return{};var r,n,i=upe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function upe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var VF={symbolCircle:O2,symbolCross:Efe,symbolDiamond:Tfe,symbolSquare:Rfe,symbolStar:Ofe,symbolTriangle:jfe,symbolWye:Dfe},dpe=Math.PI/180,hpe=t=>{var e="symbol".concat($g(t));return VF[e]||O2},fpe=(t,e,r)=>{if(e==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var n=18*dpe;return 1.25*t*t*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},ppe=(t,e)=>{VF["symbol".concat($g(t))]=e},k2=t=>{var{type:e="circle",size:r=64,sizeType:n="area"}=t,i=lpe(t,spe),s=WL(WL({},i),{},{type:e,size:r,sizeType:n}),a="circle";typeof e=="string"&&(a=e);var c=()=>{var g=hpe(a),y=kfe().type(g).size(fpe(r,n,a)),S=y();if(S!==null)return S},{className:u,cx:d,cy:h}=s,p=xn(s);return Ne(d)&&Ne(h)&&Ne(r)?A.createElement("path",eR({},p,{className:wt("recharts-symbols",u),transform:"translate(".concat(d,", ").concat(h,")"),d:c()})):null};k2.registerSymbol=ppe;var FF=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,L2=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(A.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{R2(i)&&(n[i]=(s=>r[i](r,s)))}),n},mpe=(t,e,r)=>n=>(t(e,r,n),null),HF=(t,e,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var n=null;return Object.keys(t).forEach(i=>{var s=t[i];R2(i)&&typeof s=="function"&&(n||(n={}),n[i]=mpe(s,e,r))}),n};function KL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function vpe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KL(Object(r),!0).forEach(function(n){gpe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gpe(t,e,r){return(e=ype(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ype(t){var e=bpe(t,"string");return typeof e=="symbol"?e:e+""}function bpe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $r(t,e){var r=vpe({},t),n=e,i=Object.keys(e),s=i.reduce((a,c)=>(a[c]===void 0&&n[c]!==void 0&&(a[c]=n[c]),a),r);return s}function SS(){return SS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},SS.apply(null,arguments)}function GL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Spe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?GL(Object(r),!0).forEach(function(n){Cpe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Cpe(t,e,r){return(e=xpe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xpe(t){var e=wpe(t,"string");return typeof e=="symbol"?e:e+""}function wpe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qi=32,_pe={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function Epe(t){var{data:e,iconType:r,inactiveColor:n}=t,i=qi/2,s=qi/6,a=qi/3,c=e.inactive?n:e.color,u=r??e.type;if(u==="none")return null;if(u==="plainline"){var d;return A.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:(d=e.payload)===null||d===void 0?void 0:d.strokeDasharray,x1:0,y1:i,x2:qi,y2:i,className:"recharts-legend-icon"})}if(u==="line")return A.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*a,",").concat(i,`
            H`).concat(qi,"M").concat(2*a,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(a,",").concat(i),className:"recharts-legend-icon"});if(u==="rect")return A.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(qi/8,"h").concat(qi,"v").concat(qi*3/4,"h").concat(-qi,"z"),className:"recharts-legend-icon"});if(A.isValidElement(e.legendIcon)){var h=Spe({},e);return delete h.legendIcon,A.cloneElement(e.legendIcon,h)}return A.createElement(k2,{fill:c,cx:i,cy:i,size:qi,sizeType:"diameter",type:u})}function Ape(t){var{payload:e,iconSize:r,layout:n,formatter:i,inactiveColor:s,iconType:a}=t,c={x:0,y:0,width:qi,height:qi},u={display:n==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((h,p)=>{var g=h.formatter||i,y=wt({"recharts-legend-item":!0,["legend-item-".concat(p)]:!0,inactive:h.inactive});if(h.type==="none")return null;var S=h.inactive?s:h.color,x=g?g(h.value,h,p):h.value;return A.createElement("li",SS({className:y,style:u,key:"legend-item-".concat(p)},HF(t,h,p)),A.createElement(P2,{width:r,height:r,viewBox:c,style:d,"aria-label":"".concat(x," legend icon")},A.createElement(Epe,{data:h,iconType:a,inactiveColor:s})),A.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},x))})}var Tpe=t=>{var e=$r(t,_pe),{payload:r,layout:n,align:i}=e;if(!r||!r.length)return null;var s={padding:0,margin:0,textAlign:n==="horizontal"?i:"left"};return A.createElement("ul",{className:"recharts-default-legend",style:s},A.createElement(Ape,SS({},e,{payload:r})))},ME={},DE={},$L;function Rpe(){return $L||($L=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){const i=new Map;for(let s=0;s<r.length;s++){const a=r[s],c=n(a);i.has(c)||i.set(c,a)}return Array.from(i.values())}t.uniqBy=e})(DE)),DE}var kE={},YL;function WF(){return YL||(YL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r}t.identity=e})(kE)),kE}var LE={},zE={},UE={},XL;function Ppe(){return XL||(XL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=e})(UE)),UE}var QL;function z2(){return QL||(QL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ppe();function r(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}t.isArrayLike=r})(zE)),zE}var BE={},JL;function Ipe(){return JL||(JL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="object"&&r!==null}t.isObjectLike=e})(BE)),BE}var ZL;function Npe(){return ZL||(ZL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=z2(),r=Ipe();function n(i){return r.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=n})(LE)),LE}var qE={},VE={},e8;function Ope(){return e8||(e8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=D2();function r(n){return function(i){return e.get(i,n)}}t.property=r})(VE)),VE}var FE={},HE={},WE={},KE={},t8;function KF(){return t8||(t8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=e})(KE)),KE}var GE={},r8;function GF(){return r8||(r8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null||typeof r!="object"&&typeof r!="function"}t.isPrimitive=e})(GE)),GE}var $E={},n8;function $F(){return n8||(n8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}t.eq=e})($E)),$E}var i8;function jpe(){return i8||(i8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KF(),r=GF(),n=$F();function i(h,p,g){return typeof g!="function"?i(h,p,()=>{}):s(h,p,function y(S,x,w,E,R,T){const M=g(S,x,w,E,R,T);return M!==void 0?!!M:s(S,x,y,T)},new Map)}function s(h,p,g,y){if(p===h)return!0;switch(typeof p){case"object":return a(h,p,g,y);case"function":return Object.keys(p).length>0?s(h,{...p},g,y):n.eq(h,p);default:return e.isObject(h)?typeof p=="string"?p==="":!0:n.eq(h,p)}}function a(h,p,g,y){if(p==null)return!0;if(Array.isArray(p))return u(h,p,g,y);if(p instanceof Map)return c(h,p,g,y);if(p instanceof Set)return d(h,p,g,y);const S=Object.keys(p);if(h==null)return S.length===0;if(S.length===0)return!0;if(y?.has(p))return y.get(p)===h;y?.set(p,h);try{for(let x=0;x<S.length;x++){const w=S[x];if(!r.isPrimitive(h)&&!(w in h)||p[w]===void 0&&h[w]!==void 0||p[w]===null&&h[w]!==null||!g(h[w],p[w],w,h,p,y))return!1}return!0}finally{y?.delete(p)}}function c(h,p,g,y){if(p.size===0)return!0;if(!(h instanceof Map))return!1;for(const[S,x]of p.entries()){const w=h.get(S);if(g(w,x,S,h,p,y)===!1)return!1}return!0}function u(h,p,g,y){if(p.length===0)return!0;if(!Array.isArray(h))return!1;const S=new Set;for(let x=0;x<p.length;x++){const w=p[x];let E=!1;for(let R=0;R<h.length;R++){if(S.has(R))continue;const T=h[R];let M=!1;if(g(T,w,x,h,p,y)&&(M=!0),M){S.add(R),E=!0;break}}if(!E)return!1}return!0}function d(h,p,g,y){return p.size===0?!0:h instanceof Set?u([...h],[...p],g,y):!1}t.isMatchWith=i,t.isSetMatch=d})(WE)),WE}var s8;function YF(){return s8||(s8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jpe();function r(n,i){return e.isMatchWith(n,i,()=>{})}t.isMatch=r})(HE)),HE}var YE={},XE={},QE={},a8;function Mpe(){return a8||(a8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}t.getSymbols=e})(QE)),QE}var JE={},o8;function XF(){return o8||(o8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}t.getTag=e})(JE)),JE}var ZE={},c8;function QF(){return c8||(c8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",s="[object Arguments]",a="[object Symbol]",c="[object Date]",u="[object Map]",d="[object Set]",h="[object Array]",p="[object Function]",g="[object ArrayBuffer]",y="[object Object]",S="[object Error]",x="[object DataView]",w="[object Uint8Array]",E="[object Uint8ClampedArray]",R="[object Uint16Array]",T="[object Uint32Array]",M="[object BigUint64Array]",D="[object Int8Array]",z="[object Int16Array]",j="[object Int32Array]",O="[object BigInt64Array]",L="[object Float32Array]",V="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=g,t.arrayTag=h,t.bigInt64ArrayTag=O,t.bigUint64ArrayTag=M,t.booleanTag=i,t.dataViewTag=x,t.dateTag=c,t.errorTag=S,t.float32ArrayTag=L,t.float64ArrayTag=V,t.functionTag=p,t.int16ArrayTag=z,t.int32ArrayTag=j,t.int8ArrayTag=D,t.mapTag=u,t.numberTag=n,t.objectTag=y,t.regexpTag=e,t.setTag=d,t.stringTag=r,t.symbolTag=a,t.uint16ArrayTag=R,t.uint32ArrayTag=T,t.uint8ArrayTag=w,t.uint8ClampedArrayTag=E})(ZE)),ZE}var eA={},l8;function Dpe(){return l8||(l8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}t.isTypedArray=e})(eA)),eA}var u8;function JF(){return u8||(u8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Mpe(),r=XF(),n=QF(),i=GF(),s=Dpe();function a(h,p){return c(h,void 0,h,new Map,p)}function c(h,p,g,y=new Map,S=void 0){const x=S?.(h,p,g,y);if(x!==void 0)return x;if(i.isPrimitive(h))return h;if(y.has(h))return y.get(h);if(Array.isArray(h)){const w=new Array(h.length);y.set(h,w);for(let E=0;E<h.length;E++)w[E]=c(h[E],E,g,y,S);return Object.hasOwn(h,"index")&&(w.index=h.index),Object.hasOwn(h,"input")&&(w.input=h.input),w}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const w=new RegExp(h.source,h.flags);return w.lastIndex=h.lastIndex,w}if(h instanceof Map){const w=new Map;y.set(h,w);for(const[E,R]of h)w.set(E,c(R,E,g,y,S));return w}if(h instanceof Set){const w=new Set;y.set(h,w);for(const E of h)w.add(c(E,void 0,g,y,S));return w}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(s.isTypedArray(h)){const w=new(Object.getPrototypeOf(h)).constructor(h.length);y.set(h,w);for(let E=0;E<h.length;E++)w[E]=c(h[E],E,g,y,S);return w}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const w=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return y.set(h,w),u(w,h,g,y,S),w}if(typeof File<"u"&&h instanceof File){const w=new File([h],h.name,{type:h.type});return y.set(h,w),u(w,h,g,y,S),w}if(typeof Blob<"u"&&h instanceof Blob){const w=new Blob([h],{type:h.type});return y.set(h,w),u(w,h,g,y,S),w}if(h instanceof Error){const w=new h.constructor;return y.set(h,w),w.message=h.message,w.name=h.name,w.stack=h.stack,w.cause=h.cause,u(w,h,g,y,S),w}if(h instanceof Boolean){const w=new Boolean(h.valueOf());return y.set(h,w),u(w,h,g,y,S),w}if(h instanceof Number){const w=new Number(h.valueOf());return y.set(h,w),u(w,h,g,y,S),w}if(h instanceof String){const w=new String(h.valueOf());return y.set(h,w),u(w,h,g,y,S),w}if(typeof h=="object"&&d(h)){const w=Object.create(Object.getPrototypeOf(h));return y.set(h,w),u(w,h,g,y,S),w}return h}function u(h,p,g=h,y,S){const x=[...Object.keys(p),...e.getSymbols(p)];for(let w=0;w<x.length;w++){const E=x[w],R=Object.getOwnPropertyDescriptor(h,E);(R==null||R.writable)&&(h[E]=c(p[E],E,g,y,S))}}function d(h){switch(r.getTag(h)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=a,t.cloneDeepWithImpl=c,t.copyProperties=u})(XE)),XE}var d8;function kpe(){return d8||(d8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=JF();function r(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}t.cloneDeep=r})(YE)),YE}var h8;function Lpe(){return h8||(h8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YF(),r=kpe();function n(i){return i=r.cloneDeep(i),s=>e.isMatch(s,i)}t.matches=n})(FE)),FE}var tA={},rA={},nA={},f8;function zpe(){return f8||(f8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=JF(),r=QF();function n(i,s){return e.cloneDeepWith(i,(a,c,u,d)=>{const h=s?.(a,c,u,d);if(h!==void 0)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new i.constructor(i?.valueOf());return e.copyProperties(p,i),p}case r.argumentsTag:{const p={};return e.copyProperties(p,i),p.length=i.length,p[Symbol.iterator]=i[Symbol.iterator],p}default:return}})}t.cloneDeepWith=n})(nA)),nA}var p8;function Upe(){return p8||(p8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zpe();function r(n){return e.cloneDeepWith(n)}t.cloneDeep=r})(rA)),rA}var iA={},sA={},m8;function ZF(){return m8||(m8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return e.test(n)}}t.isIndex=r})(sA)),sA}var aA={},v8;function Bpe(){return v8||(v8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XF();function r(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}t.isArguments=r})(aA)),aA}var g8;function qpe(){return g8||(g8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UF(),r=ZF(),n=Bpe(),i=M2();function s(a,c){let u;if(Array.isArray(c)?u=c:typeof c=="string"&&e.isDeepKey(c)&&a?.[c]==null?u=i.toPath(c):u=[c],u.length===0)return!1;let d=a;for(let h=0;h<u.length;h++){const p=u[h];if((d==null||!Object.hasOwn(d,p))&&!((Array.isArray(d)||n.isArguments(d))&&r.isIndex(p)&&p<d.length))return!1;d=d[p]}return!0}t.has=s})(iA)),iA}var y8;function Vpe(){return y8||(y8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YF(),r=j2(),n=Upe(),i=D2(),s=qpe();function a(c,u){switch(typeof c){case"object":{Object.is(c?.valueOf(),-0)&&(c="-0");break}case"number":{c=r.toKey(c);break}}return u=n.cloneDeep(u),function(d){const h=i.get(d,c);return h===void 0?s.has(d,c):u===void 0?h===void 0:e.isMatch(h,u)}}t.matchesProperty=a})(tA)),tA}var b8;function Fpe(){return b8||(b8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WF(),r=Ope(),n=Lpe(),i=Vpe();function s(a){if(a==null)return e.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?i.matchesProperty(a[0],a[1]):n.matches(a);case"string":case"symbol":case"number":return r.property(a)}}t.iteratee=s})(qE)),qE}var S8;function Hpe(){return S8||(S8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Rpe(),r=WF(),n=Npe(),i=Fpe();function s(a,c=r.identity){return n.isArrayLikeObject(a)?e.uniqBy(Array.from(a),i.iteratee(c)):[]}t.uniqBy=s})(ME)),ME}var oA,C8;function Wpe(){return C8||(C8=1,oA=Hpe().uniqBy),oA}var Kpe=Wpe();const x8=vo(Kpe);function eH(t,e,r){return e===!0?x8(t,r):typeof e=="function"?x8(t,e):t}var cA={exports:{}},lA={},uA={exports:{}},dA={};var w8;function Gpe(){if(w8)return dA;w8=1;var t=dh();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,i=t.useEffect,s=t.useLayoutEffect,a=t.useDebugValue;function c(p,g){var y=g(),S=n({inst:{value:y,getSnapshot:g}}),x=S[0].inst,w=S[1];return s(function(){x.value=y,x.getSnapshot=g,u(x)&&w({inst:x})},[p,y,g]),i(function(){return u(x)&&w({inst:x}),p(function(){u(x)&&w({inst:x})})},[p]),a(y),y}function u(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!r(p,y)}catch{return!0}}function d(p,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return dA.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,dA}var _8;function $pe(){return _8||(_8=1,uA.exports=Gpe()),uA.exports}var E8;function Ype(){if(E8)return lA;E8=1;var t=dh(),e=$pe();function r(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,a=t.useEffect,c=t.useMemo,u=t.useDebugValue;return lA.useSyncExternalStoreWithSelector=function(d,h,p,g,y){var S=s(null);if(S.current===null){var x={hasValue:!1,value:null};S.current=x}else x=S.current;S=c(function(){function E(z){if(!R){if(R=!0,T=z,z=g(z),y!==void 0&&x.hasValue){var j=x.value;if(y(j,z))return M=j}return M=z}if(j=M,n(T,z))return j;var O=g(z);return y!==void 0&&y(j,O)?(T=z,j):(T=z,M=O)}var R=!1,T,M,D=p===void 0?null:p;return[function(){return E(h())},D===null?void 0:function(){return E(D())}]},[h,p,g,y]);var w=i(d,S[0],S[1]);return a(function(){x.hasValue=!0,x.value=w},[w]),u(w),w},lA}var A8;function Xpe(){return A8||(A8=1,cA.exports=Ype()),cA.exports}var Qpe=Xpe(),U2=A.createContext(null),Jpe=t=>t,Tr=()=>{var t=A.useContext(U2);return t?t.store.dispatch:Jpe},Mb=()=>{},Zpe=()=>Mb,eme=(t,e)=>t===e;function Oe(t){var e=A.useContext(U2);return Qpe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:Zpe,e?e.store.getState:Mb,e?e.store.getState:Mb,e?t:Mb,eme)}function tme(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function rme(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function nme(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var T8=t=>Array.isArray(t)?t:[t];function ime(t){const e=Array.isArray(t[0])?t[0]:t;return nme(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function sme(t,e){const r=[],{length:n}=t;for(let i=0;i<n;i++)r.push(t[i].apply(null,e));return r}var ame=class{constructor(t){this.value=t}deref(){return this.value}},ome=typeof WeakRef<"u"?WeakRef:ame,cme=0,R8=1;function rb(){return{s:cme,v:void 0,o:null,p:null}}function tH(t,e={}){let r=rb();const{resultEqualityCheck:n}=e;let i,s=0;function a(){let c=r;const{length:u}=arguments;for(let p=0,g=u;p<g;p++){const y=arguments[p];if(typeof y=="function"||typeof y=="object"&&y!==null){let S=c.o;S===null&&(c.o=S=new WeakMap);const x=S.get(y);x===void 0?(c=rb(),S.set(y,c)):c=x}else{let S=c.p;S===null&&(c.p=S=new Map);const x=S.get(y);x===void 0?(c=rb(),S.set(y,c)):c=x}}const d=c;let h;if(c.s===R8)h=c.v;else if(h=t.apply(null,arguments),s++,n){const p=i?.deref?.()??i;p!=null&&n(p,h)&&(h=p,s!==0&&s--),i=typeof h=="object"&&h!==null||typeof h=="function"?new ome(h):h}return d.s=R8,d.v=h,h}return a.clearCache=()=>{r=rb(),a.resetResultsCount()},a.resultsCount=()=>s,a.resetResultsCount=()=>{s=0},a}function lme(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...i)=>{let s=0,a=0,c,u={},d=i.pop();typeof d=="object"&&(u=d,d=i.pop()),tme(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const h={...r,...u},{memoize:p,memoizeOptions:g=[],argsMemoize:y=tH,argsMemoizeOptions:S=[]}=h,x=T8(g),w=T8(S),E=ime(i),R=p(function(){return s++,d.apply(null,arguments)},...x),T=y(function(){a++;const D=sme(E,arguments);return c=R.apply(null,D),c},...w);return Object.assign(T,{resultFunc:d,memoizedResultFunc:R,dependencies:E,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>c,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:p,argsMemoize:y})};return Object.assign(n,{withTypes:()=>n}),n}var ie=lme(tH),ume=Object.assign((t,e=ie)=>{rme(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(s=>t[s]);return e(n,(...s)=>s.reduce((a,c,u)=>(a[r[u]]=c,a),{}))},{withTypes:()=>ume}),hA={},fA={},pA={},P8;function dme(){return P8||(P8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,s)=>{if(n!==i){const a=e(n),c=e(i);if(a===c&&a===0){if(n<i)return s==="desc"?1:-1;if(n>i)return s==="desc"?-1:1}return s==="desc"?c-a:a-c}return 0};t.compareValues=r})(pA)),pA}var mA={},vA={},I8;function rH(){return I8||(I8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=e})(vA)),vA}var N8;function hme(){return N8||(N8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rH(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,a){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||a!=null&&Object.hasOwn(a,s)}t.isKey=i})(mA)),mA}var O8;function fme(){return O8||(O8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dme(),r=hme(),n=M2();function i(s,a,c,u){if(s==null)return[];c=u?void 0:c,Array.isArray(s)||(s=Object.values(s)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(c)||(c=c==null?[]:[c]),c=c.map(y=>String(y));const d=(y,S)=>{let x=y;for(let w=0;w<S.length&&x!=null;++w)x=x[S[w]];return x},h=(y,S)=>S==null||y==null?S:typeof y=="object"&&"key"in y?Object.hasOwn(S,y.key)?S[y.key]:d(S,y.path):typeof y=="function"?y(S):Array.isArray(y)?d(S,y):typeof S=="object"?S[y]:S,p=a.map(y=>(Array.isArray(y)&&y.length===1&&(y=y[0]),y==null||typeof y=="function"||Array.isArray(y)||r.isKey(y)?y:{key:y,path:n.toPath(y)}));return s.map(y=>({original:y,criteria:p.map(S=>h(S,y))})).slice().sort((y,S)=>{for(let x=0;x<p.length;x++){const w=e.compareValues(y.criteria[x],S.criteria[x],c[x]);if(w!==0)return w}return 0}).map(y=>y.original)}t.orderBy=i})(fA)),fA}var gA={},j8;function pme(){return j8||(j8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n=1){const i=[],s=Math.floor(n),a=(c,u)=>{for(let d=0;d<c.length;d++){const h=c[d];Array.isArray(h)&&u<s?a(h,u+1):i.push(h)}};return a(r,0),i}t.flatten=e})(gA)),gA}var yA={},M8;function nH(){return M8||(M8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ZF(),r=z2(),n=KF(),i=$F();function s(a,c,u){return n.isObject(u)&&(typeof c=="number"&&r.isArrayLike(u)&&e.isIndex(c)&&c<u.length||typeof c=="string"&&c in u)?i.eq(u[c],a):!1}t.isIterateeCall=s})(yA)),yA}var D8;function mme(){return D8||(D8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=fme(),r=pme(),n=nH();function i(s,...a){const c=a.length;return c>1&&n.isIterateeCall(s,a[0],a[1])?a=[]:c>2&&n.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),e.orderBy(s,r.flatten(a),["asc"])}t.sortBy=i})(hA)),hA}var bA,k8;function vme(){return k8||(k8=1,bA=mme().sortBy),bA}var gme=vme();const XC=vo(gme);var iH=t=>t.legend.settings,yme=t=>t.legend.size,bme=t=>t.legend.payload,Sme=ie([bme,iH],(t,e)=>{var{itemSorter:r}=e,n=t.flat(1);return r?XC(n,r):n});function Cme(){return Oe(Sme)}var nb=1;function sH(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,r]=A.useState({height:0,left:0,top:0,width:0}),n=A.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),a={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(a.height-e.height)>nb||Math.abs(a.left-e.left)>nb||Math.abs(a.top-e.top)>nb||Math.abs(a.width-e.width)>nb)&&r({height:a.height,left:a.left,top:a.top,width:a.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,n]}function nn(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var xme=typeof Symbol=="function"&&Symbol.observable||"@@observable",L8=xme,SA=()=>Math.random().toString(36).substring(7).split("").join("."),wme={INIT:`@@redux/INIT${SA()}`,REPLACE:`@@redux/REPLACE${SA()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${SA()}`},CS=wme;function B2(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function aH(t,e,r){if(typeof t!="function")throw new Error(nn(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(nn(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(nn(1));return r(aH)(t,e)}let n=t,i=e,s=new Map,a=s,c=0,u=!1;function d(){a===s&&(a=new Map,s.forEach((w,E)=>{a.set(E,w)}))}function h(){if(u)throw new Error(nn(3));return i}function p(w){if(typeof w!="function")throw new Error(nn(4));if(u)throw new Error(nn(5));let E=!0;d();const R=c++;return a.set(R,w),function(){if(E){if(u)throw new Error(nn(6));E=!1,d(),a.delete(R),s=null}}}function g(w){if(!B2(w))throw new Error(nn(7));if(typeof w.type>"u")throw new Error(nn(8));if(typeof w.type!="string")throw new Error(nn(17));if(u)throw new Error(nn(9));try{u=!0,i=n(i,w)}finally{u=!1}return(s=a).forEach(R=>{R()}),w}function y(w){if(typeof w!="function")throw new Error(nn(10));n=w,g({type:CS.REPLACE})}function S(){const w=p;return{subscribe(E){if(typeof E!="object"||E===null)throw new Error(nn(11));function R(){const M=E;M.next&&M.next(h())}return R(),{unsubscribe:w(R)}},[L8](){return this}}}return g({type:CS.INIT}),{dispatch:g,subscribe:p,getState:h,replaceReducer:y,[L8]:S}}function _me(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:CS.INIT})>"u")throw new Error(nn(12));if(typeof r(void 0,{type:CS.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(nn(13))})}function oH(t){const e=Object.keys(t),r={};for(let s=0;s<e.length;s++){const a=e[s];typeof t[a]=="function"&&(r[a]=t[a])}const n=Object.keys(r);let i;try{_me(r)}catch(s){i=s}return function(a={},c){if(i)throw i;let u=!1;const d={};for(let h=0;h<n.length;h++){const p=n[h],g=r[p],y=a[p],S=g(y,c);if(typeof S>"u")throw c&&c.type,new Error(nn(14));d[p]=S,u=u||S!==y}return u=u||n.length!==Object.keys(a).length,u?d:a}}function xS(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function Eme(...t){return e=>(r,n)=>{const i=e(r,n);let s=()=>{throw new Error(nn(15))};const a={getState:i.getState,dispatch:(u,...d)=>s(u,...d)},c=t.map(u=>u(a));return s=xS(...c)(i.dispatch),{...i,dispatch:s}}}function cH(t){return B2(t)&&"type"in t&&typeof t.type=="string"}var lH=Symbol.for("immer-nothing"),z8=Symbol.for("immer-draftable"),In=Symbol.for("immer-state");function fs(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var mi=Object,rh=mi.getPrototypeOf,wS="constructor",QC="prototype",tR="configurable",_S="enumerable",Db="writable",hg="value",uo=t=>!!t&&!!t[In];function Cs(t){return t?uH(t)||JC(t)||!!t[z8]||!!t[wS]?.[z8]||ZC(t)||ex(t):!1}var Ame=mi[QC][wS].toString(),U8=new WeakMap;function uH(t){if(!t||!q2(t))return!1;const e=rh(t);if(e===null||e===mi[QC])return!0;const r=mi.hasOwnProperty.call(e,wS)&&e[wS];if(r===Object)return!0;if(!kd(r))return!1;let n=U8.get(r);return n===void 0&&(n=Function.toString.call(r),U8.set(r,n)),n===Ame}function Xg(t,e,r=!0){Qg(t)===0?(r?Reflect.ownKeys(t):mi.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((n,i)=>e(i,n,t))}function Qg(t){const e=t[In];return e?e.type_:JC(t)?1:ZC(t)?2:ex(t)?3:0}var B8=(t,e,r=Qg(t))=>r===2?t.has(e):mi[QC].hasOwnProperty.call(t,e),rR=(t,e,r=Qg(t))=>r===2?t.get(e):t[e],ES=(t,e,r,n=Qg(t))=>{n===2?t.set(e,r):n===3?t.add(r):t[e]=r};function Tme(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var JC=Array.isArray,ZC=t=>t instanceof Map,ex=t=>t instanceof Set,q2=t=>typeof t=="object",kd=t=>typeof t=="function",CA=t=>typeof t=="boolean",Fa=t=>t.copy_||t.base_,V2=t=>t.modified_?t.copy_:t.base_;function nR(t,e){if(ZC(t))return new Map(t);if(ex(t))return new Set(t);if(JC(t))return Array[QC].slice.call(t);const r=uH(t);if(e===!0||e==="class_only"&&!r){const n=mi.getOwnPropertyDescriptors(t);delete n[In];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const a=i[s],c=n[a];c[Db]===!1&&(c[Db]=!0,c[tR]=!0),(c.get||c.set)&&(n[a]={[tR]:!0,[Db]:!0,[_S]:c[_S],[hg]:t[a]})}return mi.create(rh(t),n)}else{const n=rh(t);if(n!==null&&r)return{...t};const i=mi.create(n);return mi.assign(i,t)}}function F2(t,e=!1){return tx(t)||uo(t)||!Cs(t)||(Qg(t)>1&&mi.defineProperties(t,{set:ib,add:ib,clear:ib,delete:ib}),mi.freeze(t),e&&Xg(t,(r,n)=>{F2(n,!0)},!1)),t}function Rme(){fs(2)}var ib={[hg]:Rme};function tx(t){return t===null||!q2(t)?!0:mi.isFrozen(t)}var AS="MapSet",iR="Patches",dH={};function nh(t){const e=dH[t];return e||fs(0,t),e}var Pme=t=>!!dH[t],fg,hH=()=>fg,Ime=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Pme(AS)?nh(AS):void 0});function q8(t,e){e&&(t.patchPlugin_=nh(iR),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function sR(t){aR(t),t.drafts_.forEach(Nme),t.drafts_=null}function aR(t){t===fg&&(fg=t.parent_)}var V8=t=>fg=Ime(fg,t);function Nme(t){const e=t[In];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function F8(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];if(t!==void 0&&t!==r){r[In].modified_&&(sR(e),fs(4)),Cs(t)&&(t=H8(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(r[In].base_,t,e)}else t=H8(e,r);return Ome(e,t,!0),sR(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==lH?t:void 0}function H8(t,e){if(tx(e))return e;const r=e[In];if(!r)return H2(e,t.handledSet_,t);if(!rx(r,t))return e;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(t);mH(r,t)}return r.copy_}function Ome(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&F2(e,r)}function fH(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var rx=(t,e)=>t.scope_===e,jme=[];function pH(t,e,r,n){const i=Fa(t),s=t.type_;if(n!==void 0&&rR(i,n,s)===e){ES(i,n,r,s);return}if(!t.draftLocations_){const c=t.draftLocations_=new Map;Xg(i,(u,d)=>{if(uo(d)){const h=c.get(d)||[];h.push(u),c.set(d,h)}})}const a=t.draftLocations_.get(e)??jme;for(const c of a)ES(i,c,r,s)}function Mme(t,e,r){t.callbacks_.push(function(i){const s=e;if(!s||!rx(s,i))return;i.mapSetPlugin_?.fixSetContents(s);const a=V2(s);pH(t,s.draft_??s,a,r),mH(s,i)})}function mH(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||(t.assigned_?.size??0)>0)){const{patchPlugin_:n}=e;if(n){const i=n.getPath(t);i&&n.generatePatches_(t,i,e)}fH(t)}}function Dme(t,e,r){const{scope_:n}=t;if(uo(r)){const i=r[In];rx(i,n)&&i.callbacks_.push(function(){kb(t);const a=V2(i);pH(t,r,a,e)})}else Cs(r)&&t.callbacks_.push(function(){const s=Fa(t);rR(s,e,t.type_)===r&&n.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&H2(rR(t.copy_,e,t.type_),n.handledSet_,n)})}function H2(t,e,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||uo(t)||e.has(t)||!Cs(t)||tx(t)||(e.add(t),Xg(t,(n,i)=>{if(uo(i)){const s=i[In];if(rx(s,r)){const a=V2(s);ES(t,n,a,t.type_),fH(s)}}else Cs(i)&&H2(i,e,r)})),t}function kme(t,e){const r=JC(t),n={type_:r?1:0,scope_:e?e.scope_:hH(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,s=W2;r&&(i=[n],s=pg);const{revoke:a,proxy:c}=Proxy.revocable(i,s);return n.draft_=c,n.revoke_=a,[c,n]}var W2={get(t,e){if(e===In)return t;const r=Fa(t);if(!B8(r,e,t.type_))return Lme(t,r,e);const n=r[e];if(t.finalized_||!Cs(n))return n;if(n===xA(t.base_,e)){kb(t);const i=t.type_===1?+e:e,s=cR(t.scope_,n,t,i);return t.copy_[i]=s}return n},has(t,e){return e in Fa(t)},ownKeys(t){return Reflect.ownKeys(Fa(t))},set(t,e,r){const n=vH(Fa(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const i=xA(Fa(t),e),s=i?.[In];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_.set(e,!1),!0;if(Tme(r,i)&&(r!==void 0||B8(t.base_,e,t.type_)))return!0;kb(t),oR(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_.set(e,!0),Dme(t,e,r)),!0},deleteProperty(t,e){return kb(t),xA(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),oR(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Fa(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{[Db]:!0,[tR]:t.type_!==1||e!=="length",[_S]:n[_S],[hg]:r[e]}},defineProperty(){fs(11)},getPrototypeOf(t){return rh(t.base_)},setPrototypeOf(){fs(12)}},pg={};Xg(W2,(t,e)=>{pg[t]=function(){const r=arguments;return r[0]=r[0][0],e.apply(this,r)}});pg.deleteProperty=function(t,e){return pg.set.call(this,t,e,void 0)};pg.set=function(t,e,r){return W2.set.call(this,t[0],e,r,t[0])};function xA(t,e){const r=t[In];return(r?Fa(r):t)[e]}function Lme(t,e,r){const n=vH(e,r);return n?hg in n?n[hg]:n.get?.call(t.draft_):void 0}function vH(t,e){if(!(e in t))return;let r=rh(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=rh(r)}}function oR(t){t.modified_||(t.modified_=!0,t.parent_&&oR(t.parent_))}function kb(t){t.copy_||(t.assigned_=new Map,t.copy_=nR(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var zme=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,i)=>{if(kd(r)&&!kd(n)){const a=n;n=r;const c=this;return function(d=a,...h){return c.produce(d,p=>n.call(this,p,...h))}}kd(n)||fs(6),i!==void 0&&!kd(i)&&fs(7);let s;if(Cs(r)){const a=V8(this),c=cR(a,r,void 0);let u=!0;try{s=n(c),u=!1}finally{u?sR(a):aR(a)}return q8(a,i),F8(s,a)}else if(!r||!q2(r)){if(s=n(r),s===void 0&&(s=r),s===lH&&(s=void 0),this.autoFreeze_&&F2(s,!0),i){const a=[],c=[];nh(iR).generateReplacementPatches_(r,s,{patches_:a,inversePatches_:c}),i(a,c)}return s}else fs(1,r)},this.produceWithPatches=(r,n)=>{if(kd(r))return(c,...u)=>this.produceWithPatches(c,d=>r(d,...u));let i,s;return[this.produce(r,n,(c,u)=>{i=c,s=u}),i,s]},CA(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),CA(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),CA(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Cs(e)||fs(8),uo(e)&&(e=ys(e));const r=V8(this),n=cR(r,e,void 0);return n[In].isManual_=!0,aR(r),n}finishDraft(e,r){const n=e&&e[In];(!n||!n.isManual_)&&fs(9);const{scope_:i}=n;return q8(i,r),F8(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(r=r.slice(n+1));const i=nh(iR).applyPatches_;return uo(e)?i(e,r):this.produce(e,s=>i(s,r))}};function cR(t,e,r,n){const[i,s]=ZC(e)?nh(AS).proxyMap_(e,r):ex(e)?nh(AS).proxySet_(e,r):kme(e,r);return(r?.scope_??hH()).drafts_.push(i),s.callbacks_=r?.callbacks_??[],s.key_=n,r&&n!==void 0?Mme(r,s,n):s.callbacks_.push(function(u){u.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:d}=u;s.modified_&&d&&d.generatePatches_(s,[],u)}),i}function ys(t){return uo(t)||fs(10,t),gH(t)}function gH(t){if(!Cs(t)||tx(t))return t;const e=t[In];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=nR(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=nR(t,!0);return Xg(r,(i,s)=>{ES(r,i,gH(s))},n),e&&(e.finalized_=!1),r}var Ume=new zme,yH=Ume.produce;function bH(t){return({dispatch:r,getState:n})=>i=>s=>typeof s=="function"?s(r,n,t):i(s)}var Bme=bH(),qme=bH,Vme=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?xS:xS.apply(null,arguments)};function Yi(t,e){function r(...n){if(e){let i=e(...n);if(!i)throw new Error(vi(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>cH(n)&&n.type===t,r}var SH=class Fv extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Fv.prototype)}static get[Symbol.species](){return Fv}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Fv(...e[0].concat(this)):new Fv(...e.concat(this))}};function W8(t){return Cs(t)?yH(t,()=>{}):t}function sb(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function Fme(t){return typeof t=="boolean"}var Hme=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let a=new SH;return r&&(Fme(r)?a.push(Bme):a.push(qme(r.extraArgument))),a},CH="RTK_autoBatch",Ft=()=>t=>({payload:t,meta:{[CH]:!0}}),K8=t=>e=>{setTimeout(e,t)},xH=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let i=!0,s=!1,a=!1;const c=new Set,u=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:K8(10):t.type==="callback"?t.queueNotification:K8(t.timeout),d=()=>{a=!1,s&&(s=!1,c.forEach(h=>h()))};return Object.assign({},n,{subscribe(h){const p=()=>i&&h(),g=n.subscribe(p);return c.add(h),()=>{g(),c.delete(h)}},dispatch(h){try{return i=!h?.meta?.[CH],s=!i,s&&(a||(a=!0,u(d))),n.dispatch(h)}finally{i=!0}}})},Wme=t=>function(r){const{autoBatch:n=!0}=r??{};let i=new SH(t);return n&&i.push(xH(typeof n=="object"?n:void 0)),i};function Kme(t){const e=Hme(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:s=void 0,enhancers:a=void 0}=t||{};let c;if(typeof r=="function")c=r;else if(B2(r))c=oH(r);else throw new Error(vi(1));let u;typeof n=="function"?u=n(e):u=e();let d=xS;i&&(d=Vme({trace:!1,...typeof i=="object"&&i}));const h=Eme(...u),p=Wme(h);let g=typeof a=="function"?a(p):p();const y=d(...g);return aH(c,s,y)}function wH(t){const e={},r=[];let n;const i={addCase(s,a){const c=typeof s=="string"?s:s.type;if(!c)throw new Error(vi(28));if(c in e)throw new Error(vi(29));return e[c]=a,i},addAsyncThunk(s,a){return a.pending&&(e[s.pending.type]=a.pending),a.rejected&&(e[s.rejected.type]=a.rejected),a.fulfilled&&(e[s.fulfilled.type]=a.fulfilled),a.settled&&r.push({matcher:s.settled,reducer:a.settled}),i},addMatcher(s,a){return r.push({matcher:s,reducer:a}),i},addDefaultCase(s){return n=s,i}};return t(i),[e,r,n]}function Gme(t){return typeof t=="function"}function $me(t,e){let[r,n,i]=wH(e),s;if(Gme(t))s=()=>W8(t());else{const c=W8(t);s=()=>c}function a(c=s(),u){let d=[r[u.type],...n.filter(({matcher:h})=>h(u)).map(({reducer:h})=>h)];return d.filter(h=>!!h).length===0&&(d=[i]),d.reduce((h,p)=>{if(p)if(uo(h)){const y=p(h,u);return y===void 0?h:y}else{if(Cs(h))return yH(h,g=>p(g,u));{const g=p(h,u);if(g===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return h},c)}return a.getInitialState=s,a}var Yme="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Xme=(t=21)=>{let e="",r=t;for(;r--;)e+=Yme[Math.random()*64|0];return e},Qme=Symbol.for("rtk-slice-createasyncthunk");function Jme(t,e){return`${t}/${e}`}function Zme({creators:t}={}){const e=t?.asyncThunk?.[Qme];return function(n){const{name:i,reducerPath:s=i}=n;if(!i)throw new Error(vi(11));const a=(typeof n.reducers=="function"?n.reducers(tve()):n.reducers)||{},c=Object.keys(a),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(T,M){const D=typeof T=="string"?T:T.type;if(!D)throw new Error(vi(12));if(D in u.sliceCaseReducersByType)throw new Error(vi(13));return u.sliceCaseReducersByType[D]=M,d},addMatcher(T,M){return u.sliceMatchers.push({matcher:T,reducer:M}),d},exposeAction(T,M){return u.actionCreators[T]=M,d},exposeCaseReducer(T,M){return u.sliceCaseReducersByName[T]=M,d}};c.forEach(T=>{const M=a[T],D={reducerName:T,type:Jme(i,T),createNotation:typeof n.reducers=="function"};nve(M)?sve(D,M,d,e):rve(D,M,d)});function h(){const[T={},M=[],D=void 0]=typeof n.extraReducers=="function"?wH(n.extraReducers):[n.extraReducers],z={...T,...u.sliceCaseReducersByType};return $me(n.initialState,j=>{for(let O in z)j.addCase(O,z[O]);for(let O of u.sliceMatchers)j.addMatcher(O.matcher,O.reducer);for(let O of M)j.addMatcher(O.matcher,O.reducer);D&&j.addDefaultCase(D)})}const p=T=>T,g=new Map,y=new WeakMap;let S;function x(T,M){return S||(S=h()),S(T,M)}function w(){return S||(S=h()),S.getInitialState()}function E(T,M=!1){function D(j){let O=j[T];return typeof O>"u"&&M&&(O=sb(y,D,w)),O}function z(j=p){const O=sb(g,M,()=>new WeakMap);return sb(O,j,()=>{const L={};for(const[V,U]of Object.entries(n.selectors??{}))L[V]=eve(U,j,()=>sb(y,j,w),M);return L})}return{reducerPath:T,getSelectors:z,get selectors(){return z(D)},selectSlice:D}}const R={name:i,reducer:x,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:w,...E(s),injectInto(T,{reducerPath:M,...D}={}){const z=M??s;return T.inject({reducerPath:z,reducer:x},D),{...R,...E(z,!0)}}};return R}}function eve(t,e,r,n){function i(s,...a){let c=e(s);return typeof c>"u"&&n&&(c=r()),t(c,...a)}return i.unwrapped=t,i}var Yn=Zme();function tve(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function rve({type:t,reducerName:e,createNotation:r},n,i){let s,a;if("reducer"in n){if(r&&!ive(n))throw new Error(vi(17));s=n.reducer,a=n.prepare}else s=n;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,a?Yi(t,a):Yi(t))}function nve(t){return t._reducerDefinitionType==="asyncThunk"}function ive(t){return t._reducerDefinitionType==="reducerWithPrepare"}function sve({type:t,reducerName:e},r,n,i){if(!i)throw new Error(vi(18));const{payloadCreator:s,fulfilled:a,pending:c,rejected:u,settled:d,options:h}=r,p=i(t,s,h);n.exposeAction(e,p),a&&n.addCase(p.fulfilled,a),c&&n.addCase(p.pending,c),u&&n.addCase(p.rejected,u),d&&n.addMatcher(p.settled,d),n.exposeCaseReducer(e,{fulfilled:a||ab,pending:c||ab,rejected:u||ab,settled:d||ab})}function ab(){}var ave="task",_H="listener",EH="completed",K2="cancelled",ove=`task-${K2}`,cve=`task-${EH}`,lR=`${_H}-${K2}`,lve=`${_H}-${EH}`,nx=class{constructor(t){this.code=t,this.message=`${ave} ${K2} (reason: ${t})`}name="TaskAbortError";message},G2=(t,e)=>{if(typeof t!="function")throw new TypeError(vi(32))},TS=()=>{},AH=(t,e=TS)=>(t.catch(e),t),TH=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),uu=(t,e)=>{const r=t.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},du=t=>{if(t.aborted){const{reason:e}=t;throw new nx(e)}};function RH(t,e){let r=TS;return new Promise((n,i)=>{const s=()=>i(new nx(t.reason));if(t.aborted){s();return}r=TH(t,s),e.finally(()=>r()).then(n,i)}).finally(()=>{r=TS})}var uve=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof nx?"cancelled":"rejected",error:r}}finally{e?.()}},RS=t=>e=>AH(RH(t,e).then(r=>(du(t),r))),PH=t=>{const e=RS(t);return r=>e(new Promise(n=>setTimeout(n,r)))},{assign:Wd}=Object,G8={},ix="listenerMiddleware",dve=(t,e)=>{const r=n=>TH(t,()=>uu(n,t.reason));return(n,i)=>{G2(n);const s=new AbortController;r(s);const a=uve(async()=>{du(t),du(s.signal);const c=await n({pause:RS(s.signal),delay:PH(s.signal),signal:s.signal});return du(s.signal),c},()=>uu(s,cve));return i?.autoJoin&&e.push(a.catch(TS)),{result:RS(t)(a),cancel(){uu(s,ove)}}}},hve=(t,e)=>{const r=async(n,i)=>{du(e);let s=()=>{};const c=[new Promise((u,d)=>{let h=t({predicate:n,effect:(p,g)=>{g.unsubscribe(),u([p,g.getState(),g.getOriginalState()])}});s=()=>{h(),d()}})];i!=null&&c.push(new Promise(u=>setTimeout(u,i,null)));try{const u=await RH(e,Promise.race(c));return du(e),u}finally{s()}};return(n,i)=>AH(r(n,i))},IH=t=>{let{type:e,actionCreator:r,matcher:n,predicate:i,effect:s}=t;if(e)i=Yi(e).match;else if(r)e=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(vi(21));return G2(s),{predicate:i,type:e,effect:s}},NH=Wd(t=>{const{type:e,predicate:r,effect:n}=IH(t);return{id:Xme(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(vi(22))}}},{withTypes:()=>NH}),$8=(t,e)=>{const{type:r,effect:n,predicate:i}=IH(e);return Array.from(t.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===i)&&s.effect===n)},uR=t=>{t.pending.forEach(e=>{uu(e,lR)})},fve=(t,e)=>()=>{for(const r of e.keys())uR(r);t.clear()},Y8=(t,e,r)=>{try{t(e,r)}catch(n){setTimeout(()=>{throw n},0)}},OH=Wd(Yi(`${ix}/add`),{withTypes:()=>OH}),pve=Yi(`${ix}/removeAll`),jH=Wd(Yi(`${ix}/remove`),{withTypes:()=>jH}),mve=(...t)=>{console.error(`${ix}/error`,...t)},Jg=(t={})=>{const e=new Map,r=new Map,n=y=>{const S=r.get(y)??0;r.set(y,S+1)},i=y=>{const S=r.get(y)??1;S===1?r.delete(y):r.set(y,S-1)},{extra:s,onError:a=mve}=t;G2(a);const c=y=>(y.unsubscribe=()=>e.delete(y.id),e.set(y.id,y),S=>{y.unsubscribe(),S?.cancelActive&&uR(y)}),u=y=>{const S=$8(e,y)??NH(y);return c(S)};Wd(u,{withTypes:()=>u});const d=y=>{const S=$8(e,y);return S&&(S.unsubscribe(),y.cancelActive&&uR(S)),!!S};Wd(d,{withTypes:()=>d});const h=async(y,S,x,w)=>{const E=new AbortController,R=hve(u,E.signal),T=[];try{y.pending.add(E),n(y),await Promise.resolve(y.effect(S,Wd({},x,{getOriginalState:w,condition:(M,D)=>R(M,D).then(Boolean),take:R,delay:PH(E.signal),pause:RS(E.signal),extra:s,signal:E.signal,fork:dve(E.signal,T),unsubscribe:y.unsubscribe,subscribe:()=>{e.set(y.id,y)},cancelActiveListeners:()=>{y.pending.forEach((M,D,z)=>{M!==E&&(uu(M,lR),z.delete(M))})},cancel:()=>{uu(E,lR),y.pending.delete(E)},throwIfCancelled:()=>{du(E.signal)}})))}catch(M){M instanceof nx||Y8(a,M,{raisedBy:"effect"})}finally{await Promise.all(T),uu(E,lve),i(y),y.pending.delete(E)}},p=fve(e,r);return{middleware:y=>S=>x=>{if(!cH(x))return S(x);if(OH.match(x))return u(x.payload);if(pve.match(x)){p();return}if(jH.match(x))return d(x.payload);let w=y.getState();const E=()=>{if(w===G8)throw new Error(vi(23));return w};let R;try{if(R=S(x),e.size>0){const T=y.getState(),M=Array.from(e.values());for(const D of M){let z=!1;try{z=D.predicate(x,T,w)}catch(j){z=!1,Y8(a,j,{raisedBy:"predicate"})}z&&h(D,x,y,E)}}}finally{w=G8}return R},startListening:u,stopListening:d,clearListeners:p}};function vi(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var vve={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},MH=Yn({name:"chartLayout",initialState:vve,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var r,n,i,s;t.margin.top=(r=e.payload.top)!==null&&r!==void 0?r:0,t.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:gve,setLayout:yve,setChartSize:bve,setScale:Sve}=MH.actions,Cve=MH.reducer;function DH(t,e,r){return Array.isArray(t)&&t&&e+r!==0?t.slice(e,r+1):t}function X8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ld(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?X8(Object(r),!0).forEach(function(n){xve(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xve(t,e,r){return(e=wve(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wve(t){var e=_ve(t,"string");return typeof e=="symbol"?e:e+""}function _ve(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gr(t,e,r){return Mr(t)||Mr(e)?r:da(e)?YC(t,e,r):typeof e=="function"?e(t):r}var Eve=(t,e,r)=>{if(e&&r){var{width:n,height:i}=r,{align:s,verticalAlign:a,layout:c}=e;if((c==="vertical"||c==="horizontal"&&a==="middle")&&s!=="center"&&Ne(t[s]))return Ld(Ld({},t),{},{[s]:t[s]+(n||0)});if((c==="horizontal"||c==="vertical"&&s==="center")&&a!=="middle"&&Ne(t[a]))return Ld(Ld({},t),{},{[a]:t[a]+(i||0)})}return t},ya=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",kH=(t,e,r,n)=>{if(n)return t.map(c=>c.coordinate);var i,s,a=t.map(c=>(c.coordinate===e&&(i=!0),c.coordinate===r&&(s=!0),c.coordinate));return i||a.push(e),s||a.push(r),a},LH=(t,e,r)=>{if(!t)return null;var{duplicateDomain:n,type:i,range:s,scale:a,realScaleType:c,isCategorical:u,categoricalDomain:d,tickCount:h,ticks:p,niceTicks:g,axisType:y}=t;if(!a)return null;var S=c==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,x=i==="category"&&a.bandwidth?a.bandwidth()/S:0;if(x=y==="angleAxis"&&s&&s.length>=2?Fi(s[0]-s[1])*2*x:x,p||g){var w=(p||g||[]).map((E,R)=>{var T=n?n.indexOf(E):E;return{coordinate:a(T)+x,value:E,offset:x,index:R}});return w.filter(E=>!Ss(E.coordinate))}return u&&d?d.map((E,R)=>({coordinate:a(E)+x,value:E,index:R,offset:x})):a.ticks&&h!=null?a.ticks(h).map((E,R)=>({coordinate:a(E)+x,value:E,offset:x,index:R})):a.domain().map((E,R)=>({coordinate:a(E)+x,value:n?n[E]:E,index:R,offset:x}))},Q8=1e-4,Ave=t=>{var e=t.domain();if(!(!e||e.length<=2)){var r=e.length,n=t.range(),i=Math.min(n[0],n[1])-Q8,s=Math.max(n[0],n[1])+Q8,a=t(e[0]),c=t(e[r-1]);(a<i||a>s||c<i||c>s)&&t.domain([e[0],e[r-1]])}},Tve=t=>{var e=t.length;if(!(e<=0))for(var r=0,n=t[0].length;r<n;++r)for(var i=0,s=0,a=0;a<e;++a){var c=Ss(t[a][r][1])?t[a][r][0]:t[a][r][1];c>=0?(t[a][r][0]=i,t[a][r][1]=i+c,i=t[a][r][1]):(t[a][r][0]=s,t[a][r][1]=s+c,s=t[a][r][1])}},Rve=t=>{var e=t.length;if(!(e<=0))for(var r=0,n=t[0].length;r<n;++r)for(var i=0,s=0;s<e;++s){var a=Ss(t[s][r][1])?t[s][r][0]:t[s][r][1];a>=0?(t[s][r][0]=i,t[s][r][1]=i+a,i=t[s][r][1]):(t[s][r][0]=0,t[s][r][1]=0)}},Pve={sign:Tve,expand:Xfe,none:th,silhouette:Qfe,wiggle:Jfe,positive:Rve},Ive=(t,e,r)=>{var n=Pve[r],i=Yfe().keys(e).value((s,a)=>Number(Gr(s,a,0))).order(ZT).offset(n);return i(t)};function Nve(t){return t==null?void 0:String(t)}function PS(t){var{axis:e,ticks:r,bandSize:n,entry:i,index:s,dataKey:a}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Mr(i[e.dataKey])){var c=qF(r,"value",i[e.dataKey]);if(c)return c.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var u=Gr(i,Mr(a)?e.dataKey:a);return Mr(u)?null:e.scale(u)}var Ove=t=>{var e=t.flat(2).filter(Ne);return[Math.min(...e),Math.max(...e)]},jve=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],Mve=(t,e,r)=>{if(t!=null)return jve(Object.keys(t).reduce((n,i)=>{var s=t[i],{stackedData:a}=s,c=a.reduce((u,d)=>{var h=DH(d,e,r),p=Ove(h);return[Math.min(u[0],p[0]),Math.max(u[1],p[1])]},[1/0,-1/0]);return[Math.min(c[0],n[0]),Math.max(c[1],n[1])]},[1/0,-1/0]))},J8=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Z8=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ih=(t,e,r)=>{if(t&&t.scale&&t.scale.bandwidth){var n=t.scale.bandwidth();if(!r||n>0)return n}if(t&&e&&e.length>=2){for(var i=XC(e,h=>h.coordinate),s=1/0,a=1,c=i.length;a<c;a++){var u=i[a],d=i[a-1];s=Math.min((u.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function ez(t){var{tooltipEntrySettings:e,dataKey:r,payload:n,value:i,name:s}=t;return Ld(Ld({},e),{},{dataKey:r,payload:n,value:i,name:s})}function sx(t,e){if(t)return String(t);if(typeof e=="string")return e}var Dve=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},kve=(t,e)=>e==="centric"?t.angle:t.radius,bo=t=>t.layout.width,So=t=>t.layout.height,Lve=t=>t.layout.scale,zH=t=>t.layout.margin,ax=ie(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),ox=ie(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),zve="data-recharts-item-index",Uve="data-recharts-item-data-key",Zg=60;function tz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ob(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tz(Object(r),!0).forEach(function(n){Bve(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Bve(t,e,r){return(e=qve(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qve(t){var e=Vve(t,"string");return typeof e=="symbol"?e:e+""}function Vve(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fve=t=>t.brush.height;function Hve(t){var e=ox(t);return e.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Zg;return r+i}return r},0)}function Wve(t){var e=ox(t);return e.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Zg;return r+i}return r},0)}function Kve(t){var e=ax(t);return e.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function Gve(t){var e=ax(t);return e.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var un=ie([bo,So,zH,Fve,Hve,Wve,Kve,Gve,iH,yme],(t,e,r,n,i,s,a,c,u,d)=>{var h={left:(r.left||0)+i,right:(r.right||0)+s},p={top:(r.top||0)+a,bottom:(r.bottom||0)+c},g=ob(ob({},p),h),y=g.bottom;g.bottom+=n,g=Eve(g,u,d);var S=t-g.left-g.right,x=e-g.top-g.bottom;return ob(ob({brushBottom:y},g),{},{width:Math.max(S,0),height:Math.max(x,0)})}),$ve=ie(un,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),UH=ie(bo,So,(t,e)=>({x:0,y:0,width:t,height:e})),Yve=A.createContext(null),wn=()=>A.useContext(Yve)!=null,cx=t=>t.brush,lx=ie([cx,un,zH],(t,e,r)=>({height:t.height,x:Ne(t.x)?t.x:e.left,y:Ne(t.y)?t.y:e.top+e.height+e.brushBottom-(r?.bottom||0),width:Ne(t.width)?t.width:e.width})),wA={},_A={},EA={},rz;function Xve(){return rz||(rz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n,{signal:i,edges:s}={}){let a,c=null;const u=s!=null&&s.includes("leading"),d=s==null||s.includes("trailing"),h=()=>{c!==null&&(r.apply(a,c),a=void 0,c=null)},p=()=>{d&&h(),x()};let g=null;const y=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,p()},n)},S=()=>{g!==null&&(clearTimeout(g),g=null)},x=()=>{S(),a=void 0,c=null},w=()=>{h()},E=function(...R){if(i?.aborted)return;a=this,c=R;const T=g==null;y(),u&&T&&h()};return E.schedule=y,E.cancel=x,E.flush=w,i?.addEventListener("abort",x,{once:!0}),E}t.debounce=e})(EA)),EA}var nz;function Qve(){return nz||(nz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Xve();function r(n,i=0,s={}){typeof s!="object"&&(s={});const{leading:a=!1,trailing:c=!0,maxWait:u}=s,d=Array(2);a&&(d[0]="leading"),c&&(d[1]="trailing");let h,p=null;const g=e.debounce(function(...x){h=n.apply(this,x),p=null},i,{edges:d}),y=function(...x){return u!=null&&(p===null&&(p=Date.now()),Date.now()-p>=u)?(h=n.apply(this,x),p=Date.now(),g.cancel(),g.schedule(),h):(g.apply(this,x),h)},S=()=>(g.flush(),h);return y.cancel=g.cancel,y.flush=S,y}t.debounce=r})(_A)),_A}var iz;function Jve(){return iz||(iz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Qve();function r(n,i=0,s={}){const{leading:a=!0,trailing:c=!0}=s;return e.debounce(n,i,{leading:a,maxWait:i,trailing:c})}t.throttle=r})(wA)),wA}var AA,sz;function Zve(){return sz||(sz=1,AA=Jve().throttle),AA}var ege=Zve();const tge=vo(ege);var IS=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;console.warn(r.replace(/%s/g,()=>i[a++]))}},BH=(t,e,r)=>{var{width:n="100%",height:i="100%",aspect:s,maxHeight:a}=r,c=lo(n)?t:Number(n),u=lo(i)?e:Number(i);return s&&s>0&&(c?u=c/s:u&&(c=u*s),a&&u!=null&&u>a&&(u=a)),{calculatedWidth:c,calculatedHeight:u}},rge={width:0,height:0,overflow:"visible"},nge={width:0,overflowX:"visible"},ige={height:0,overflowY:"visible"},sge={},age=t=>{var{width:e,height:r}=t,n=lo(e),i=lo(r);return n&&i?rge:n?nge:i?ige:sge};function oge(t){var{width:e,height:r,aspect:n}=t,i=e,s=r;return i===void 0&&s===void 0?(i="100%",s="100%"):i===void 0?i=n&&n>0?void 0:"100%":s===void 0&&(s=n&&n>0?void 0:"100%"),{width:i,height:s}}function ar(t){return Number.isFinite(t)}function ha(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function dR(){return dR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dR.apply(null,arguments)}function az(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function oz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?az(Object(r),!0).forEach(function(n){cge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):az(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cge(t,e,r){return(e=lge(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lge(t){var e=uge(t,"string");return typeof e=="symbol"?e:e+""}function uge(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qH=A.createContext({width:-1,height:-1});function dge(t){return ha(t.width)&&ha(t.height)}function VH(t){var{children:e,width:r,height:n}=t,i=A.useMemo(()=>({width:r,height:n}),[r,n]);return dge(i)?A.createElement(qH.Provider,{value:i},e):null}var $2=()=>A.useContext(qH),hge=A.forwardRef((t,e)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:i,height:s,minWidth:a=0,minHeight:c,maxHeight:u,children:d,debounce:h=0,id:p,className:g,onResize:y,style:S={}}=t,x=A.useRef(null),w=A.useRef();w.current=y,A.useImperativeHandle(e,()=>x.current);var[E,R]=A.useState({containerWidth:n.width,containerHeight:n.height}),T=A.useCallback((O,L)=>{R(V=>{var U=Math.round(O),F=Math.round(L);return V.containerWidth===U&&V.containerHeight===F?V:{containerWidth:U,containerHeight:F}})},[]);A.useEffect(()=>{if(x.current==null||typeof ResizeObserver>"u")return Yg;var O=F=>{var q,{width:ve,height:Ae}=F[0].contentRect;T(ve,Ae),(q=w.current)===null||q===void 0||q.call(w,ve,Ae)};h>0&&(O=tge(O,h,{trailing:!0,leading:!1}));var L=new ResizeObserver(O),{width:V,height:U}=x.current.getBoundingClientRect();return T(V,U),L.observe(x.current),()=>{L.disconnect()}},[T,h]);var{containerWidth:M,containerHeight:D}=E;IS(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:z,calculatedHeight:j}=BH(M,D,{width:i,height:s,aspect:r,maxHeight:u});return IS(z!=null&&z>0||j!=null&&j>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,z,j,i,s,a,c,r),A.createElement("div",{id:p?"".concat(p):void 0,className:wt("recharts-responsive-container",g),style:oz(oz({},S),{},{width:i,height:s,minWidth:a,minHeight:c,maxHeight:u}),ref:x},A.createElement("div",{style:age({width:i,height:s})},A.createElement(VH,{width:z,height:j},d)))}),FH=A.forwardRef((t,e)=>{var r=$2();if(ha(r.width)&&ha(r.height))return t.children;var{width:n,height:i}=oge({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:a}=BH(void 0,void 0,{width:n,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return Ne(s)&&Ne(a)?A.createElement(VH,{width:s,height:a},t.children):A.createElement(hge,dR({},t,{width:n,height:i,ref:e}))});function HH(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var ux=()=>{var t,e=wn(),r=Oe($ve),n=Oe(lx),i=(t=Oe(cx))===null||t===void 0?void 0:t.padding;return!e||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},fge={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},WH=()=>{var t;return(t=Oe(un))!==null&&t!==void 0?t:fge},Y2=()=>Oe(bo),X2=()=>Oe(So),pge=()=>Oe(t=>t.layout.margin),Rt=t=>t.layout.layoutType,wh=()=>Oe(Rt),mge=()=>{var t=wh();if(t==="horizontal"||t==="vertical")return t},vge=()=>{var t=wh();return t!==void 0},dx=t=>{var e=Tr(),r=wn(),{width:n,height:i}=t,s=$2(),a=n,c=i;return s&&(a=s.width>0?s.width:n,c=s.height>0?s.height:i),A.useEffect(()=>{!r&&ha(a)&&ha(c)&&e(bve({width:a,height:c}))},[e,r,a,c]),null},KH=Symbol.for("immer-nothing"),cz=Symbol.for("immer-draftable"),yi=Symbol.for("immer-state");function ps(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var mg=Object.getPrototypeOf;function sh(t){return!!t&&!!t[yi]}function wu(t){return t?GH(t)||Array.isArray(t)||!!t[cz]||!!t.constructor?.[cz]||ey(t)||fx(t):!1}var gge=Object.prototype.constructor.toString(),lz=new WeakMap;function GH(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=lz.get(r);return n===void 0&&(n=Function.toString.call(r),lz.set(r,n)),n===gge}function NS(t,e,r=!0){hx(t)===0?(r?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((n,i)=>e(i,n,t))}function hx(t){const e=t[yi];return e?e.type_:Array.isArray(t)?1:ey(t)?2:fx(t)?3:0}function hR(t,e){return hx(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function $H(t,e,r){const n=hx(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function yge(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function ey(t){return t instanceof Map}function fx(t){return t instanceof Set}function Jl(t){return t.copy_||t.base_}function fR(t,e){if(ey(t))return new Map(t);if(fx(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=GH(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[yi];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const a=i[s],c=n[a];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(n[a]={configurable:!0,writable:!0,enumerable:c.enumerable,value:t[a]})}return Object.create(mg(t),n)}else{const n=mg(t);if(n!==null&&r)return{...t};const i=Object.create(n);return Object.assign(i,t)}}function Q2(t,e=!1){return px(t)||sh(t)||!wu(t)||(hx(t)>1&&Object.defineProperties(t,{set:cb,add:cb,clear:cb,delete:cb}),Object.freeze(t),e&&Object.values(t).forEach(r=>Q2(r,!0))),t}function bge(){ps(2)}var cb={value:bge};function px(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var Sge={};function _u(t){const e=Sge[t];return e||ps(0,t),e}var vg;function YH(){return vg}function Cge(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function uz(t,e){e&&(_u("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function pR(t){mR(t),t.drafts_.forEach(xge),t.drafts_=null}function mR(t){t===vg&&(vg=t.parent_)}function dz(t){return vg=Cge(vg,t)}function xge(t){const e=t[yi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function hz(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[yi].modified_&&(pR(e),ps(4)),wu(t)&&(t=OS(e,t),e.parent_||jS(e,t)),e.patches_&&_u("Patches").generateReplacementPatches_(r[yi].base_,t,e.patches_,e.inversePatches_)):t=OS(e,r,[]),pR(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==KH?t:void 0}function OS(t,e,r){if(px(e))return e;const n=t.immer_.shouldUseStrictIteration(),i=e[yi];if(!i)return NS(e,(s,a)=>fz(t,i,e,s,a,r),n),e;if(i.scope_!==t)return e;if(!i.modified_)return jS(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let a=s,c=!1;i.type_===3&&(a=new Set(s),s.clear(),c=!0),NS(a,(u,d)=>fz(t,i,s,u,d,r,c),n),jS(t,s,!1),r&&t.patches_&&_u("Patches").generatePatches_(i,r,t.patches_,t.inversePatches_)}return i.copy_}function fz(t,e,r,n,i,s,a){if(i==null||typeof i!="object"&&!a)return;const c=px(i);if(!(c&&!a)){if(sh(i)){const u=s&&e&&e.type_!==3&&!hR(e.assigned_,n)?s.concat(n):void 0,d=OS(t,i,u);if($H(r,n,d),sh(d))t.canAutoFreeze_=!1;else return}else a&&r.add(i);if(wu(i)&&!c){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[n]===i&&c)return;OS(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(ey(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&jS(t,i)}}}function jS(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Q2(e,r)}function wge(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:YH(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,s=J2;r&&(i=[n],s=gg);const{revoke:a,proxy:c}=Proxy.revocable(i,s);return n.draft_=c,n.revoke_=a,c}var J2={get(t,e){if(e===yi)return t;const r=Jl(t);if(!hR(r,e))return _ge(t,r,e);const n=r[e];return t.finalized_||!wu(n)?n:n===TA(t.base_,e)?(RA(t),t.copy_[e]=gR(n,t)):n},has(t,e){return e in Jl(t)},ownKeys(t){return Reflect.ownKeys(Jl(t))},set(t,e,r){const n=XH(Jl(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const i=TA(Jl(t),e),s=i?.[yi];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(yge(r,i)&&(r!==void 0||hR(t.base_,e)))return!0;RA(t),vR(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return TA(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,RA(t),vR(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Jl(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){ps(11)},getPrototypeOf(t){return mg(t.base_)},setPrototypeOf(){ps(12)}},gg={};NS(J2,(t,e)=>{gg[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});gg.deleteProperty=function(t,e){return gg.set.call(this,t,e,void 0)};gg.set=function(t,e,r){return J2.set.call(this,t[0],e,r,t[0])};function TA(t,e){const r=t[yi];return(r?Jl(r):t)[e]}function _ge(t,e,r){const n=XH(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function XH(t,e){if(!(e in t))return;let r=mg(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=mg(r)}}function vR(t){t.modified_||(t.modified_=!0,t.parent_&&vR(t.parent_))}function RA(t){t.copy_||(t.copy_=fR(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Ege=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const s=r;r=e;const a=this;return function(u=s,...d){return a.produce(u,h=>r.call(this,h,...d))}}typeof r!="function"&&ps(6),n!==void 0&&typeof n!="function"&&ps(7);let i;if(wu(e)){const s=dz(this),a=gR(e,void 0);let c=!0;try{i=r(a),c=!1}finally{c?pR(s):mR(s)}return uz(s,n),hz(i,s)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===KH&&(i=void 0),this.autoFreeze_&&Q2(i,!0),n){const s=[],a=[];_u("Patches").generateReplacementPatches_(e,i,s,a),n(s,a)}return i}else ps(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(a,...c)=>this.produceWithPatches(a,u=>e(u,...c));let n,i;return[this.produce(e,r,(a,c)=>{n=a,i=c}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){wu(t)||ps(8),sh(t)&&(t=Age(t));const e=dz(this),r=gR(t,void 0);return r[yi].isManual_=!0,mR(e),r}finishDraft(t,e){const r=t&&t[yi];(!r||!r.isManual_)&&ps(9);const{scope_:n}=r;return uz(n,e),hz(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));const n=_u("Patches").applyPatches_;return sh(t)?n(t,e):this.produce(t,i=>n(i,e))}};function gR(t,e){const r=ey(t)?_u("MapSet").proxyMap_(t,e):fx(t)?_u("MapSet").proxySet_(t,e):wge(t,e);return(e?e.scope_:YH()).drafts_.push(r),r}function Age(t){return sh(t)||ps(10,t),QH(t)}function QH(t){if(!wu(t)||px(t))return t;const e=t[yi];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=fR(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=fR(t,!0);return NS(r,(i,s)=>{$H(r,i,QH(s))},n),e&&(e.finalized_=!1),r}var Tge=new Ege;Tge.produce;var Rge={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},JH=Yn({name:"legend",initialState:Rge,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Ft()},replaceLegendPayload:{reducer(t,e){var{prev:r,next:n}=e.payload,i=ys(t).payload.indexOf(r);i>-1&&(t.payload[i]=n)},prepare:Ft()},removeLegendPayload:{reducer(t,e){var r=ys(t).payload.indexOf(e.payload);r>-1&&t.payload.splice(r,1)},prepare:Ft()}}}),{setLegendSize:pz,setLegendSettings:Pge,addLegendPayload:Ige,replaceLegendPayload:Nge,removeLegendPayload:Oge}=JH.actions,jge=JH.reducer,Mge=["contextPayload"];function yR(){return yR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yR.apply(null,arguments)}function mz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ah(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mz(Object(r),!0).forEach(function(n){Dge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Dge(t,e,r){return(e=kge(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kge(t){var e=Lge(t,"string");return typeof e=="symbol"?e:e+""}function Lge(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zge(t,e){if(t==null)return{};var r,n,i=Uge(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Uge(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Bge(t){return t.value}function qge(t){var{contextPayload:e}=t,r=zge(t,Mge),n=eH(e,t.payloadUniqBy,Bge),i=ah(ah({},r),{},{payload:n});return A.isValidElement(t.content)?A.cloneElement(t.content,i):typeof t.content=="function"?A.createElement(t.content,i):A.createElement(Tpe,i)}function Vge(t,e,r,n,i,s){var{layout:a,align:c,verticalAlign:u}=e,d,h;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(c==="center"&&a==="vertical"?d={left:((n||0)-s.width)/2}:d=c==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(u==="middle"?h={top:((i||0)-s.height)/2}:h=u==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),ah(ah({},d),h)}function Fge(t){var e=Tr();return A.useEffect(()=>{e(Pge(t))},[e,t]),null}function Hge(t){var e=Tr();return A.useEffect(()=>(e(pz(t)),()=>{e(pz({width:0,height:0}))}),[e,t]),null}function Wge(t,e,r,n){return t==="vertical"&&Ne(e)?{height:e}:t==="horizontal"?{width:r||n}:null}var Kge={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function ZH(t){var e=$r(t,Kge),r=Cme(),n=bfe(),i=pge(),{width:s,height:a,wrapperStyle:c,portal:u}=e,[d,h]=sH([r]),p=Y2(),g=X2();if(p==null||g==null)return null;var y=p-(i?.left||0)-(i?.right||0),S=Wge(e.layout,a,s,y),x=u?c:ah(ah({position:"absolute",width:S?.width||s||"auto",height:S?.height||a||"auto"},Vge(c,e,i,p,g,d)),c),w=u??n;if(w==null||r==null)return null;var E=A.createElement("div",{className:"recharts-legend-wrapper",style:x,ref:h},A.createElement(Fge,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!u&&A.createElement(Hge,{width:d.width,height:d.height}),A.createElement(qge,yR({},e,S,{margin:i,chartWidth:p,chartHeight:g,contextPayload:r})));return uC.createPortal(E,w)}ZH.displayName="Legend";function bR(){return bR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bR.apply(null,arguments)}function vz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function PA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vz(Object(r),!0).forEach(function(n){Gge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Gge(t,e,r){return(e=$ge(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $ge(t){var e=Yge(t,"string");return typeof e=="symbol"?e:e+""}function Yge(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xge(t){return Array.isArray(t)&&da(t[0])&&da(t[1])?t.join(" ~ "):t}var Qge=t=>{var{separator:e=" : ",contentStyle:r={},itemStyle:n={},labelStyle:i={},payload:s,formatter:a,itemSorter:c,wrapperClassName:u,labelClassName:d,label:h,labelFormatter:p,accessibilityLayer:g=!1}=t,y=()=>{if(s&&s.length){var D={padding:0,margin:0},z=(c?XC(s,c):s).map((j,O)=>{if(j.type==="none")return null;var L=j.formatter||a||Xge,{value:V,name:U}=j,F=V,q=U;if(L){var ve=L(V,U,j,O,s);if(Array.isArray(ve))[F,q]=ve;else if(ve!=null)F=ve;else return null}var Ae=PA({display:"block",paddingTop:4,paddingBottom:4,color:j.color||"#000"},n);return A.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(O),style:Ae},da(q)?A.createElement("span",{className:"recharts-tooltip-item-name"},q):null,da(q)?A.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,A.createElement("span",{className:"recharts-tooltip-item-value"},F),A.createElement("span",{className:"recharts-tooltip-item-unit"},j.unit||""))});return A.createElement("ul",{className:"recharts-tooltip-item-list",style:D},z)}return null},S=PA({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),x=PA({margin:0},i),w=!Mr(h),E=w?h:"",R=wt("recharts-default-tooltip",u),T=wt("recharts-tooltip-label",d);w&&p&&s!==void 0&&s!==null&&(E=p(h,s));var M=g?{role:"status","aria-live":"assertive"}:{};return A.createElement("div",bR({className:R,style:S},M),A.createElement("p",{className:T,style:x},A.isValidElement(E)?E:"".concat(E)),y())},Rv="recharts-tooltip-wrapper",Jge={visibility:"hidden"};function Zge(t){var{coordinate:e,translateX:r,translateY:n}=t;return wt(Rv,{["".concat(Rv,"-right")]:Ne(r)&&e&&Ne(e.x)&&r>=e.x,["".concat(Rv,"-left")]:Ne(r)&&e&&Ne(e.x)&&r<e.x,["".concat(Rv,"-bottom")]:Ne(n)&&e&&Ne(e.y)&&n>=e.y,["".concat(Rv,"-top")]:Ne(n)&&e&&Ne(e.y)&&n<e.y})}function gz(t){var{allowEscapeViewBox:e,coordinate:r,key:n,offsetTopLeft:i,position:s,reverseDirection:a,tooltipDimension:c,viewBox:u,viewBoxDimension:d}=t;if(s&&Ne(s[n]))return s[n];var h=r[n]-c-(i>0?i:0),p=r[n]+i;if(e[n])return a[n]?h:p;var g=u[n];if(g==null)return 0;if(a[n]){var y=h,S=g;return y<S?Math.max(p,g):Math.max(h,g)}if(d==null)return 0;var x=p+c,w=g+d;return x>w?Math.max(h,g):Math.max(p,g)}function eye(t){var{translateX:e,translateY:r,useTranslate3d:n}=t;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function tye(t){var{allowEscapeViewBox:e,coordinate:r,offsetTopLeft:n,position:i,reverseDirection:s,tooltipBox:a,useTranslate3d:c,viewBox:u}=t,d,h,p;return a.height>0&&a.width>0&&r?(h=gz({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:a.width,viewBox:u,viewBoxDimension:u.width}),p=gz({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:a.height,viewBox:u,viewBoxDimension:u.height}),d=eye({translateX:h,translateY:p,useTranslate3d:c})):d=Jge,{cssProperties:d,cssClasses:Zge({translateX:h,translateY:p,coordinate:r})}}function yz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function lb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yz(Object(r),!0).forEach(function(n){SR(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function SR(t,e,r){return(e=rye(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rye(t){var e=nye(t,"string");return typeof e=="symbol"?e:e+""}function nye(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class iye extends A.PureComponent{constructor(){super(...arguments),SR(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),SR(this,"handleKeyDown",e=>{if(e.key==="Escape"){var r,n,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,r;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:s,coordinate:a,hasPayload:c,isAnimationActive:u,offset:d,position:h,reverseDirection:p,useTranslate3d:g,viewBox:y,wrapperStyle:S,lastBoundingBox:x,innerRef:w,hasPortalFromProps:E}=this.props,{cssClasses:R,cssProperties:T}=tye({allowEscapeViewBox:r,coordinate:a,offsetTopLeft:d,position:h,reverseDirection:p,tooltipBox:{height:x.height,width:x.width},useTranslate3d:g,viewBox:y}),M=E?{}:lb(lb({transition:u&&e?"transform ".concat(n,"ms ").concat(i):void 0},T),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&c?"visible":"hidden",position:"absolute",top:0,left:0}),D=lb(lb({},M),{},{visibility:!this.state.dismissed&&e&&c?"visible":"hidden"},S);return A.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:R,style:D,ref:w},s)}}var eW=()=>{var t;return(t=Oe(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function CR(){return CR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},CR.apply(null,arguments)}function bz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Sz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bz(Object(r),!0).forEach(function(n){sye(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function sye(t,e,r){return(e=aye(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aye(t){var e=oye(t,"string");return typeof e=="symbol"?e:e+""}function oye(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Cz={curveBasisClosed:zfe,curveBasisOpen:Ufe,curveBasis:Lfe,curveBumpX:wfe,curveBumpY:_fe,curveLinearClosed:Bfe,curveLinear:GC,curveMonotoneX:qfe,curveMonotoneY:Vfe,curveNatural:Ffe,curveStep:Hfe,curveStepAfter:Kfe,curveStepBefore:Wfe},MS=t=>ar(t.x)&&ar(t.y),xz=t=>t.base!=null&&MS(t.base)&&MS(t),Pv=t=>t.x,Iv=t=>t.y,cye=(t,e)=>{if(typeof t=="function")return t;var r="curve".concat($g(t));return(r==="curveMonotone"||r==="curveBump")&&e?Cz["".concat(r).concat(e==="vertical"?"Y":"X")]:Cz[r]||GC},lye=t=>{var{type:e="linear",points:r=[],baseLine:n,layout:i,connectNulls:s=!1}=t,a=cye(e,i),c=s?r.filter(MS):r,u;if(Array.isArray(n)){var d=r.map((y,S)=>Sz(Sz({},y),{},{base:n[S]}));i==="vertical"?u=tb().y(Iv).x1(Pv).x0(y=>y.base.x):u=tb().x(Pv).y1(Iv).y0(y=>y.base.y);var h=u.defined(xz).curve(a),p=s?d.filter(xz):d;return h(p)}i==="vertical"&&Ne(n)?u=tb().y(Iv).x1(Pv).x0(n):Ne(n)?u=tb().x(Pv).y1(Iv).y0(n):u=RF().x(Pv).y(Iv);var g=u.defined(MS).curve(a);return g(c)},Jv=t=>{var{className:e,points:r,path:n,pathRef:i}=t;if((!r||!r.length)&&!n)return null;var s=r&&r.length?lye(t):n;return A.createElement("path",CR({},Gi(t),L2(t),{className:wt("recharts-curve",e),d:s===null?void 0:s,ref:i}))},uye=["x","y","top","left","width","height","className"];function xR(){return xR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xR.apply(null,arguments)}function wz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function dye(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wz(Object(r),!0).forEach(function(n){hye(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hye(t,e,r){return(e=fye(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fye(t){var e=pye(t,"string");return typeof e=="symbol"?e:e+""}function pye(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mye(t,e){if(t==null)return{};var r,n,i=vye(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function vye(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var gye=(t,e,r,n,i,s)=>"M".concat(t,",").concat(i,"v").concat(n,"M").concat(s,",").concat(e,"h").concat(r),yye=t=>{var{x:e=0,y:r=0,top:n=0,left:i=0,width:s=0,height:a=0,className:c}=t,u=mye(t,uye),d=dye({x:e,y:r,top:n,left:i,width:s,height:a},u);return!Ne(e)||!Ne(r)||!Ne(s)||!Ne(a)||!Ne(n)||!Ne(i)?null:A.createElement("path",xR({},xn(d),{className:wt("recharts-cross",c),d:gye(e,r,s,a,n,i)}))};function bye(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function _z(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ez(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_z(Object(r),!0).forEach(function(n){Sye(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_z(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Sye(t,e,r){return(e=Cye(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cye(t){var e=xye(t,"string");return typeof e=="symbol"?e:e+""}function xye(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wye=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),tW=(t,e,r)=>t.map(n=>"".concat(wye(n)," ").concat(e,"ms ").concat(r)).join(","),_ye=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((r,n)=>r.filter(i=>n.includes(i))),yg=(t,e)=>Object.keys(e).reduce((r,n)=>Ez(Ez({},r),{},{[n]:t(n,e[n])}),{});function Az(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Or(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Az(Object(r),!0).forEach(function(n){Eye(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Az(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Eye(t,e,r){return(e=Aye(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Aye(t){var e=Tye(t,"string");return typeof e=="symbol"?e:e+""}function Tye(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var DS=(t,e,r)=>t+(e-t)*r,wR=t=>{var{from:e,to:r}=t;return e!==r},rW=(t,e,r)=>{var n=yg((i,s)=>{if(wR(s)){var[a,c]=t(s.from,s.to,s.velocity);return Or(Or({},s),{},{from:a,velocity:c})}return s},e);return r<1?yg((i,s)=>wR(s)?Or(Or({},s),{},{velocity:DS(s.velocity,n[i].velocity,r),from:DS(s.from,n[i].from,r)}):s,e):rW(t,n,r-1)};function Rye(t,e,r,n,i,s){var a,c=n.reduce((g,y)=>Or(Or({},g),{},{[y]:{from:t[y],velocity:0,to:e[y]}}),{}),u=()=>yg((g,y)=>y.from,c),d=()=>!Object.values(c).filter(wR).length,h=null,p=g=>{a||(a=g);var y=g-a,S=y/r.dt;c=rW(r,c,S),i(Or(Or(Or({},t),e),u())),a=g,d()||(h=s.setTimeout(p))};return()=>(h=s.setTimeout(p),()=>{var g;(g=h)===null||g===void 0||g()})}function Pye(t,e,r,n,i,s,a){var c=null,u=i.reduce((p,g)=>Or(Or({},p),{},{[g]:[t[g],e[g]]}),{}),d,h=p=>{d||(d=p);var g=(p-d)/n,y=yg((x,w)=>DS(...w,r(g)),u);if(s(Or(Or(Or({},t),e),y)),g<1)c=a.setTimeout(h);else{var S=yg((x,w)=>DS(...w,r(1)),u);s(Or(Or(Or({},t),e),S))}};return()=>(c=a.setTimeout(h),()=>{var p;(p=c)===null||p===void 0||p()})}const Iye=(t,e,r,n,i,s)=>{var a=_ye(t,e);return r==null?()=>(i(Or(Or({},t),e)),()=>{}):r.isStepper===!0?Rye(t,e,r,a,i,s):Pye(t,e,r,n,a,i,s)};var kS=1e-4,nW=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],iW=(t,e)=>t.map((r,n)=>r*e**n).reduce((r,n)=>r+n),Tz=(t,e)=>r=>{var n=nW(t,e);return iW(n,r)},Nye=(t,e)=>r=>{var n=nW(t,e),i=[...n.map((s,a)=>s*a).slice(1),0];return iW(i,r)},Oye=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i,s=r[0].split("(");if(s[0]==="cubic-bezier"&&((i=s[1])===null||i===void 0?void 0:i.split(")")[0].split(",").length)===4){var a=s[1].split(")")[0].split(",").map(c=>parseFloat(c));return[a[0],a[1],a[2],a[3]]}}}return r.length===4?r:[0,0,1,1]},jye=(t,e,r,n)=>{var i=Tz(t,r),s=Tz(e,n),a=Nye(t,r),c=d=>d>1?1:d<0?0:d,u=d=>{for(var h=d>1?1:d,p=h,g=0;g<8;++g){var y=i(p)-h,S=a(p);if(Math.abs(y-h)<kS||S<kS)return s(p);p=c(p-y/S)}return s(p)};return u.isStepper=!1,u},Rz=function(){return jye(...Oye(...arguments))},Mye=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=e,s=(a,c,u)=>{var d=-(a-c)*r,h=u*n,p=u+(d-h)*i/1e3,g=u*i/1e3+a;return Math.abs(g-c)<kS&&Math.abs(p)<kS?[c,0]:[g,p]};return s.isStepper=!0,s.dt=i,s},Dye=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Rz(t);case"spring":return Mye();default:if(t.split("(")[0]==="cubic-bezier")return Rz(t)}return typeof t=="function"?t:null};function kye(t){var e,r=()=>null,n=!1,i=null,s=a=>{if(!n){if(Array.isArray(a)){if(!a.length)return;var c=a,[u,...d]=c;if(typeof u=="number"){i=t.setTimeout(s.bind(null,d),u);return}s(u),i=t.setTimeout(s.bind(null,d));return}typeof a=="string"&&(e=a,r(e)),typeof a=="object"&&(e=a,r(e)),typeof a=="function"&&a()}};return{stop:()=>{n=!0},start:a=>{n=!1,i&&(i(),i=null),s(a)},subscribe:a=>(r=a,()=>{r=()=>null}),getTimeoutController:()=>t}}class Lye{setTimeout(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,s=a=>{a-n>=r?e(a):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{i!=null&&cancelAnimationFrame(i)}}}function zye(){return kye(new Lye)}var Uye=A.createContext(zye);function Bye(t,e){var r=A.useContext(Uye);return A.useMemo(()=>e??r(t),[t,e,r])}var qye=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),_h={devToolsEnabled:!1,isSsr:qye()},Vye={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},Pz={t:0},IA={t:1};function mx(t){var e=$r(t,Vye),{isActive:r,canBegin:n,duration:i,easing:s,begin:a,onAnimationEnd:c,onAnimationStart:u,children:d}=e,h=r==="auto"?!_h.isSsr:r,p=Bye(e.animationId,e.animationManager),[g,y]=A.useState(h?Pz:IA),S=A.useRef(null);return A.useEffect(()=>{h||y(IA)},[h]),A.useEffect(()=>{if(!h||!n)return Yg;var x=Iye(Pz,IA,Dye(s),i,y,p.getTimeoutController()),w=()=>{S.current=x()};return p.start([u,a,w,i,c]),()=>{p.stop(),S.current&&S.current(),c()}},[h,n,i,s,a,u,c,p]),d(g.t)}function vx(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=A.useRef(dg(e)),n=A.useRef(t);return n.current!==t&&(r.current=dg(e),n.current=t),r.current}var Fye=["radius"],Hye=["radius"];function Iz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Nz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Iz(Object(r),!0).forEach(function(n){Wye(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Iz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Wye(t,e,r){return(e=Kye(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kye(t){var e=Gye(t,"string");return typeof e=="symbol"?e:e+""}function Gye(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LS(){return LS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},LS.apply(null,arguments)}function Oz(t,e){if(t==null)return{};var r,n,i=$ye(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function $ye(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var jz=(t,e,r,n,i)=>{var s=Math.min(Math.abs(r)/2,Math.abs(n)/2),a=n>=0?1:-1,c=r>=0?1:-1,u=n>=0&&r>=0||n<0&&r<0?1:0,d;if(s>0&&i instanceof Array){for(var h=[0,0,0,0],p=0,g=4;p<g;p++)h[p]=i[p]>s?s:i[p];d="M".concat(t,",").concat(e+a*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(t+c*h[0],",").concat(e)),d+="L ".concat(t+r-c*h[1],",").concat(e),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(t+r,",").concat(e+a*h[1])),d+="L ".concat(t+r,",").concat(e+n-a*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(t+r-c*h[2],",").concat(e+n)),d+="L ".concat(t+c*h[3],",").concat(e+n),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(e+n-a*h[3])),d+="Z"}else if(s>0&&i===+i&&i>0){var y=Math.min(s,i);d="M ".concat(t,",").concat(e+a*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+c*y,",").concat(e,`
            L `).concat(t+r-c*y,",").concat(e,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+r,",").concat(e+a*y,`
            L `).concat(t+r,",").concat(e+n-a*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+r-c*y,",").concat(e+n,`
            L `).concat(t+c*y,",").concat(e+n,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t,",").concat(e+n-a*y," Z")}else d="M ".concat(t,",").concat(e," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return d},Mz={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},sW=t=>{var e=$r(t,Mz),r=A.useRef(null),[n,i]=A.useState(-1);A.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var ae=r.current.getTotalLength();ae&&i(ae)}catch{}},[]);var{x:s,y:a,width:c,height:u,radius:d,className:h}=e,{animationEasing:p,animationDuration:g,animationBegin:y,isAnimationActive:S,isUpdateAnimationActive:x}=e,w=A.useRef(c),E=A.useRef(u),R=A.useRef(s),T=A.useRef(a),M=A.useMemo(()=>({x:s,y:a,width:c,height:u,radius:d}),[s,a,c,u,d]),D=vx(M,"rectangle-");if(s!==+s||a!==+a||c!==+c||u!==+u||c===0||u===0)return null;var z=wt("recharts-rectangle",h);if(!x){var j=xn(e),{radius:O}=j,L=Oz(j,Fye);return A.createElement("path",LS({},L,{radius:typeof d=="number"?d:void 0,className:z,d:jz(s,a,c,u,d)}))}var V=w.current,U=E.current,F=R.current,q=T.current,ve="0px ".concat(n===-1?1:n,"px"),Ae="".concat(n,"px 0px"),Y=tW(["strokeDasharray"],g,typeof p=="string"?p:Mz.animationEasing);return A.createElement(mx,{animationId:D,key:D,canBegin:n>0,duration:g,easing:p,isActive:x,begin:y},ae=>{var pe=xr(V,c,ae),me=xr(U,u,ae),_e=xr(F,s,ae),H=xr(q,a,ae);r.current&&(w.current=pe,E.current=me,R.current=_e,T.current=H);var G;S?ae>0?G={transition:Y,strokeDasharray:Ae}:G={strokeDasharray:ve}:G={strokeDasharray:Ae};var le=xn(e),{radius:X}=le,ge=Oz(le,Hye);return A.createElement("path",LS({},ge,{radius:typeof d=="number"?d:void 0,className:z,d:jz(_e,H,pe,me,d),ref:r,style:Nz(Nz({},G),e.style)}))})};function Dz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function kz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Dz(Object(r),!0).forEach(function(n){Yye(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Yye(t,e,r){return(e=Xye(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xye(t){var e=Qye(t,"string");return typeof e=="symbol"?e:e+""}function Qye(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zS=Math.PI/180,Jye=t=>t*180/Math.PI,cn=(t,e,r,n)=>({x:t+Math.cos(-zS*n)*r,y:e+Math.sin(-zS*n)*r}),Zye=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},e0e=(t,e)=>{var{x:r,y:n}=t,{x:i,y:s}=e;return Math.sqrt((r-i)**2+(n-s)**2)},t0e=(t,e)=>{var{x:r,y:n}=t,{cx:i,cy:s}=e,a=e0e({x:r,y:n},{x:i,y:s});if(a<=0)return{radius:a,angle:0};var c=(r-i)/a,u=Math.acos(c);return n>s&&(u=2*Math.PI-u),{radius:a,angle:Jye(u),angleInRadian:u}},r0e=t=>{var{startAngle:e,endAngle:r}=t,n=Math.floor(e/360),i=Math.floor(r/360),s=Math.min(n,i);return{startAngle:e-s*360,endAngle:r-s*360}},n0e=(t,e)=>{var{startAngle:r,endAngle:n}=e,i=Math.floor(r/360),s=Math.floor(n/360),a=Math.min(i,s);return t+a*360},i0e=(t,e)=>{var{chartX:r,chartY:n}=t,{radius:i,angle:s}=t0e({x:r,y:n},e),{innerRadius:a,outerRadius:c}=e;if(i<a||i>c||i===0)return null;var{startAngle:u,endAngle:d}=r0e(e),h=s,p;if(u<=d){for(;h>d;)h-=360;for(;h<u;)h+=360;p=h>=u&&h<=d}else{for(;h>u;)h-=360;for(;h<d;)h+=360;p=h>=d&&h<=u}return p?kz(kz({},e),{},{radius:i,angle:n0e(h,e)}):null};function aW(t){var{cx:e,cy:r,radius:n,startAngle:i,endAngle:s}=t,a=cn(e,r,n,i),c=cn(e,r,n,s);return{points:[a,c],cx:e,cy:r,radius:n,startAngle:i,endAngle:s}}function _R(){return _R=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_R.apply(null,arguments)}var s0e=(t,e)=>{var r=Fi(e-t),n=Math.min(Math.abs(e-t),359.999);return r*n},ub=t=>{var{cx:e,cy:r,radius:n,angle:i,sign:s,isExternal:a,cornerRadius:c,cornerIsExternal:u}=t,d=c*(a?1:-1)+n,h=Math.asin(c/d)/zS,p=u?i:i+s*h,g=cn(e,r,d,p),y=cn(e,r,n,p),S=u?i-s*h:i,x=cn(e,r,d*Math.cos(h*zS),S);return{center:g,circleTangency:y,lineTangency:x,theta:h}},oW=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:i,startAngle:s,endAngle:a}=t,c=s0e(s,a),u=s+c,d=cn(e,r,i,s),h=cn(e,r,i,u),p="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(s>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(n>0){var g=cn(e,r,n,s),y=cn(e,r,n,u);p+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(s<=u),`,
            `).concat(g.x,",").concat(g.y," Z")}else p+="L ".concat(e,",").concat(r," Z");return p},a0e=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:i,cornerRadius:s,forceCornerRadius:a,cornerIsExternal:c,startAngle:u,endAngle:d}=t,h=Fi(d-u),{circleTangency:p,lineTangency:g,theta:y}=ub({cx:e,cy:r,radius:i,angle:u,sign:h,cornerRadius:s,cornerIsExternal:c}),{circleTangency:S,lineTangency:x,theta:w}=ub({cx:e,cy:r,radius:i,angle:d,sign:-h,cornerRadius:s,cornerIsExternal:c}),E=c?Math.abs(u-d):Math.abs(u-d)-y-w;if(E<0)return a?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):oW({cx:e,cy:r,innerRadius:n,outerRadius:i,startAngle:u,endAngle:d});var R="M ".concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(E>180),",").concat(+(h<0),",").concat(S.x,",").concat(S.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(x.x,",").concat(x.y,`
  `);if(n>0){var{circleTangency:T,lineTangency:M,theta:D}=ub({cx:e,cy:r,radius:n,angle:u,sign:h,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),{circleTangency:z,lineTangency:j,theta:O}=ub({cx:e,cy:r,radius:n,angle:d,sign:-h,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),L=c?Math.abs(u-d):Math.abs(u-d)-D-O;if(L<0&&s===0)return"".concat(R,"L").concat(e,",").concat(r,"Z");R+="L".concat(j.x,",").concat(j.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(z.x,",").concat(z.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(L>180),",").concat(+(h>0),",").concat(T.x,",").concat(T.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(M.x,",").concat(M.y,"Z")}else R+="L".concat(e,",").concat(r,"Z");return R},o0e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},cW=t=>{var e=$r(t,o0e),{cx:r,cy:n,innerRadius:i,outerRadius:s,cornerRadius:a,forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:h,className:p}=e;if(s<i||d===h)return null;var g=wt("recharts-sector",p),y=s-i,S=kc(a,y,0,!0),x;return S>0&&Math.abs(d-h)<360?x=a0e({cx:r,cy:n,innerRadius:i,outerRadius:s,cornerRadius:Math.min(S,y/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:h}):x=oW({cx:r,cy:n,innerRadius:i,outerRadius:s,startAngle:d,endAngle:h}),A.createElement("path",_R({},xn(e),{className:g,d:x}))};function c0e(t,e,r){if(t==="horizontal")return[{x:e.x,y:r.top},{x:e.x,y:r.top+r.height}];if(t==="vertical")return[{x:r.left,y:e.y},{x:r.left+r.width,y:e.y}];if(FF(e)){if(t==="centric"){var{cx:n,cy:i,innerRadius:s,outerRadius:a,angle:c}=e,u=cn(n,i,s,c),d=cn(n,i,a,c);return[{x:u.x,y:u.y},{x:d.x,y:d.y}]}return aW(e)}}var NA={},OA={},jA={},Lz;function l0e(){return Lz||(Lz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rH();function r(n){return e.isSymbol(n)?NaN:Number(n)}t.toNumber=r})(jA)),jA}var zz;function u0e(){return zz||(zz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=l0e();function r(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}t.toFinite=r})(OA)),OA}var Uz;function d0e(){return Uz||(Uz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nH(),r=u0e();function n(i,s,a){a&&typeof a!="number"&&e.isIterateeCall(i,s,a)&&(s=a=void 0),i=r.toFinite(i),s===void 0?(s=i,i=0):s=r.toFinite(s),a=a===void 0?i<s?1:-1:r.toFinite(a);const c=Math.max(Math.ceil((s-i)/(a||1)),0),u=new Array(c);for(let d=0;d<c;d++)u[d]=i,i+=a;return u}t.range=n})(NA)),NA}var MA,Bz;function h0e(){return Bz||(Bz=1,MA=d0e().range),MA}var f0e=h0e();const lW=vo(f0e);function Tc(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function p0e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Z2(t){let e,r,n;t.length!==2?(e=Tc,r=(c,u)=>Tc(t(c),u),n=(c,u)=>t(c)-u):(e=t===Tc||t===p0e?t:m0e,r=t,n=t);function i(c,u,d=0,h=c.length){if(d<h){if(e(u,u)!==0)return h;do{const p=d+h>>>1;r(c[p],u)<0?d=p+1:h=p}while(d<h)}return d}function s(c,u,d=0,h=c.length){if(d<h){if(e(u,u)!==0)return h;do{const p=d+h>>>1;r(c[p],u)<=0?d=p+1:h=p}while(d<h)}return d}function a(c,u,d=0,h=c.length){const p=i(c,u,d,h-1);return p>d&&n(c[p-1],u)>-n(c[p],u)?p-1:p}return{left:i,center:a,right:s}}function m0e(){return 0}function uW(t){return t===null?NaN:+t}function*v0e(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const g0e=Z2(Tc),ty=g0e.right;Z2(uW).center;class qz extends Map{constructor(e,r=S0e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(Vz(this,e))}has(e){return super.has(Vz(this,e))}set(e,r){return super.set(y0e(this,e),r)}delete(e){return super.delete(b0e(this,e))}}function Vz({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function y0e({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function b0e({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function S0e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function C0e(t=Tc){if(t===Tc)return dW;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function dW(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const x0e=Math.sqrt(50),w0e=Math.sqrt(10),_0e=Math.sqrt(2);function US(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),a=s>=x0e?10:s>=w0e?5:s>=_0e?2:1;let c,u,d;return i<0?(d=Math.pow(10,-i)/a,c=Math.round(t*d),u=Math.round(e*d),c/d<t&&++c,u/d>e&&--u,d=-d):(d=Math.pow(10,i)*a,c=Math.round(t/d),u=Math.round(e/d),c*d<t&&++c,u*d>e&&--u),u<c&&.5<=r&&r<2?US(t,e,r*2):[c,u,d]}function ER(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,s,a]=n?US(e,t,r):US(t,e,r);if(!(s>=i))return[];const c=s-i+1,u=new Array(c);if(n)if(a<0)for(let d=0;d<c;++d)u[d]=(s-d)/-a;else for(let d=0;d<c;++d)u[d]=(s-d)*a;else if(a<0)for(let d=0;d<c;++d)u[d]=(i+d)/-a;else for(let d=0;d<c;++d)u[d]=(i+d)*a;return u}function AR(t,e,r){return e=+e,t=+t,r=+r,US(t,e,r)[2]}function TR(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?AR(e,t,r):AR(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function Fz(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Hz(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function hW(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?dW:C0e(i);n>r;){if(n-r>600){const u=n-r+1,d=e-r+1,h=Math.log(u),p=.5*Math.exp(2*h/3),g=.5*Math.sqrt(h*p*(u-p)/u)*(d-u/2<0?-1:1),y=Math.max(r,Math.floor(e-d*p/u+g)),S=Math.min(n,Math.floor(e+(u-d)*p/u+g));hW(t,e,y,S,i)}const s=t[e];let a=r,c=n;for(Nv(t,r,e),i(t[n],s)>0&&Nv(t,r,n);a<c;){for(Nv(t,a,c),++a,--c;i(t[a],s)<0;)++a;for(;i(t[c],s)>0;)--c}i(t[r],s)===0?Nv(t,r,c):(++c,Nv(t,c,n)),c<=e&&(r=c+1),e<=c&&(n=c-1)}return t}function Nv(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function E0e(t,e,r){if(t=Float64Array.from(v0e(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return Hz(t);if(e>=1)return Fz(t);var n,i=(n-1)*e,s=Math.floor(i),a=Fz(hW(t,s).subarray(0,s+1)),c=Hz(t.subarray(s+1));return a+(c-a)*(i-s)}}function A0e(t,e,r=uW){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,s=Math.floor(i),a=+r(t[s],s,t),c=+r(t[s+1],s+1,t);return a+(c-a)*(i-s)}}function T0e(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,s=new Array(i);++n<i;)s[n]=t+n*r;return s}function Qi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Co(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const RR=Symbol("implicit");function eI(){var t=new qz,e=[],r=[],n=RR;function i(s){let a=t.get(s);if(a===void 0){if(n!==RR)return n;t.set(s,a=e.push(s)-1)}return r[a%r.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new qz;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(r=Array.from(s),i):r.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return eI(e,r).unknown(n)},Qi.apply(i,arguments),i}function tI(){var t=eI().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,s,a,c=!1,u=0,d=0,h=.5;delete t.unknown;function p(){var g=e().length,y=i<n,S=y?i:n,x=y?n:i;s=(x-S)/Math.max(1,g-u+d*2),c&&(s=Math.floor(s)),S+=(x-S-s*(g-u))*h,a=s*(1-u),c&&(S=Math.round(S),a=Math.round(a));var w=T0e(g).map(function(E){return S+s*E});return r(y?w.reverse():w)}return t.domain=function(g){return arguments.length?(e(g),p()):e()},t.range=function(g){return arguments.length?([n,i]=g,n=+n,i=+i,p()):[n,i]},t.rangeRound=function(g){return[n,i]=g,n=+n,i=+i,c=!0,p()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(g){return arguments.length?(c=!!g,p()):c},t.padding=function(g){return arguments.length?(u=Math.min(1,d=+g),p()):u},t.paddingInner=function(g){return arguments.length?(u=Math.min(1,g),p()):u},t.paddingOuter=function(g){return arguments.length?(d=+g,p()):d},t.align=function(g){return arguments.length?(h=Math.max(0,Math.min(1,g)),p()):h},t.copy=function(){return tI(e(),[n,i]).round(c).paddingInner(u).paddingOuter(d).align(h)},Qi.apply(p(),arguments)}function fW(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return fW(e())},t}function R0e(){return fW(tI.apply(null,arguments).paddingInner(1))}function rI(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function pW(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function ry(){}var bg=.7,BS=1/bg,Kd="\\s*([+-]?\\d+)\\s*",Sg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ca="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",P0e=/^#([0-9a-f]{3,8})$/,I0e=new RegExp(`^rgb\\(${Kd},${Kd},${Kd}\\)$`),N0e=new RegExp(`^rgb\\(${ca},${ca},${ca}\\)$`),O0e=new RegExp(`^rgba\\(${Kd},${Kd},${Kd},${Sg}\\)$`),j0e=new RegExp(`^rgba\\(${ca},${ca},${ca},${Sg}\\)$`),M0e=new RegExp(`^hsl\\(${Sg},${ca},${ca}\\)$`),D0e=new RegExp(`^hsla\\(${Sg},${ca},${ca},${Sg}\\)$`),Wz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rI(ry,Cg,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Kz,formatHex:Kz,formatHex8:k0e,formatHsl:L0e,formatRgb:Gz,toString:Gz});function Kz(){return this.rgb().formatHex()}function k0e(){return this.rgb().formatHex8()}function L0e(){return mW(this).formatHsl()}function Gz(){return this.rgb().formatRgb()}function Cg(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=P0e.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?$z(e):r===3?new Hn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?db(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?db(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=I0e.exec(t))?new Hn(e[1],e[2],e[3],1):(e=N0e.exec(t))?new Hn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=O0e.exec(t))?db(e[1],e[2],e[3],e[4]):(e=j0e.exec(t))?db(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=M0e.exec(t))?Qz(e[1],e[2]/100,e[3]/100,1):(e=D0e.exec(t))?Qz(e[1],e[2]/100,e[3]/100,e[4]):Wz.hasOwnProperty(t)?$z(Wz[t]):t==="transparent"?new Hn(NaN,NaN,NaN,0):null}function $z(t){return new Hn(t>>16&255,t>>8&255,t&255,1)}function db(t,e,r,n){return n<=0&&(t=e=r=NaN),new Hn(t,e,r,n)}function z0e(t){return t instanceof ry||(t=Cg(t)),t?(t=t.rgb(),new Hn(t.r,t.g,t.b,t.opacity)):new Hn}function PR(t,e,r,n){return arguments.length===1?z0e(t):new Hn(t,e,r,n??1)}function Hn(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}rI(Hn,PR,pW(ry,{brighter(t){return t=t==null?BS:Math.pow(BS,t),new Hn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?bg:Math.pow(bg,t),new Hn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Hn(hu(this.r),hu(this.g),hu(this.b),qS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yz,formatHex:Yz,formatHex8:U0e,formatRgb:Xz,toString:Xz}));function Yz(){return`#${nu(this.r)}${nu(this.g)}${nu(this.b)}`}function U0e(){return`#${nu(this.r)}${nu(this.g)}${nu(this.b)}${nu((isNaN(this.opacity)?1:this.opacity)*255)}`}function Xz(){const t=qS(this.opacity);return`${t===1?"rgb(":"rgba("}${hu(this.r)}, ${hu(this.g)}, ${hu(this.b)}${t===1?")":`, ${t})`}`}function qS(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function hu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function nu(t){return t=hu(t),(t<16?"0":"")+t.toString(16)}function Qz(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new ms(t,e,r,n)}function mW(t){if(t instanceof ms)return new ms(t.h,t.s,t.l,t.opacity);if(t instanceof ry||(t=Cg(t)),!t)return new ms;if(t instanceof ms)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),s=Math.max(e,r,n),a=NaN,c=s-i,u=(s+i)/2;return c?(e===s?a=(r-n)/c+(r<n)*6:r===s?a=(n-e)/c+2:a=(e-r)/c+4,c/=u<.5?s+i:2-s-i,a*=60):c=u>0&&u<1?0:a,new ms(a,c,u,t.opacity)}function B0e(t,e,r,n){return arguments.length===1?mW(t):new ms(t,e,r,n??1)}function ms(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}rI(ms,B0e,pW(ry,{brighter(t){return t=t==null?BS:Math.pow(BS,t),new ms(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?bg:Math.pow(bg,t),new ms(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new Hn(DA(t>=240?t-240:t+120,i,n),DA(t,i,n),DA(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new ms(Jz(this.h),hb(this.s),hb(this.l),qS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=qS(this.opacity);return`${t===1?"hsl(":"hsla("}${Jz(this.h)}, ${hb(this.s)*100}%, ${hb(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Jz(t){return t=(t||0)%360,t<0?t+360:t}function hb(t){return Math.max(0,Math.min(1,t||0))}function DA(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const nI=t=>()=>t;function q0e(t,e){return function(r){return t+r*e}}function V0e(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function F0e(t){return(t=+t)==1?vW:function(e,r){return r-e?V0e(e,r,t):nI(isNaN(e)?r:e)}}function vW(t,e){var r=e-t;return r?q0e(t,r):nI(isNaN(t)?e:t)}const Zz=(function t(e){var r=F0e(e);function n(i,s){var a=r((i=PR(i)).r,(s=PR(s)).r),c=r(i.g,s.g),u=r(i.b,s.b),d=vW(i.opacity,s.opacity);return function(h){return i.r=a(h),i.g=c(h),i.b=u(h),i.opacity=d(h),i+""}}return n.gamma=t,n})(1);function H0e(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(s){for(i=0;i<r;++i)n[i]=t[i]*(1-s)+e[i]*s;return n}}function W0e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function K0e(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),s=new Array(r),a;for(a=0;a<n;++a)i[a]=Eh(t[a],e[a]);for(;a<r;++a)s[a]=e[a];return function(c){for(a=0;a<n;++a)s[a]=i[a](c);return s}}function G0e(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function VS(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function $0e(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=Eh(t[i],e[i]):n[i]=e[i];return function(s){for(i in r)n[i]=r[i](s);return n}}var IR=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kA=new RegExp(IR.source,"g");function Y0e(t){return function(){return t}}function X0e(t){return function(e){return t(e)+""}}function Q0e(t,e){var r=IR.lastIndex=kA.lastIndex=0,n,i,s,a=-1,c=[],u=[];for(t=t+"",e=e+"";(n=IR.exec(t))&&(i=kA.exec(e));)(s=i.index)>r&&(s=e.slice(r,s),c[a]?c[a]+=s:c[++a]=s),(n=n[0])===(i=i[0])?c[a]?c[a]+=i:c[++a]=i:(c[++a]=null,u.push({i:a,x:VS(n,i)})),r=kA.lastIndex;return r<e.length&&(s=e.slice(r),c[a]?c[a]+=s:c[++a]=s),c.length<2?u[0]?X0e(u[0].x):Y0e(e):(e=u.length,function(d){for(var h=0,p;h<e;++h)c[(p=u[h]).i]=p.x(d);return c.join("")})}function Eh(t,e){var r=typeof e,n;return e==null||r==="boolean"?nI(e):(r==="number"?VS:r==="string"?(n=Cg(e))?(e=n,Zz):Q0e:e instanceof Cg?Zz:e instanceof Date?G0e:W0e(e)?H0e:Array.isArray(e)?K0e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?$0e:VS)(t,e)}function iI(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function J0e(t,e){e===void 0&&(e=t,t=Eh);for(var r=0,n=e.length-1,i=e[0],s=new Array(n<0?0:n);r<n;)s[r]=t(i,i=e[++r]);return function(a){var c=Math.max(0,Math.min(n-1,Math.floor(a*=n)));return s[c](a-c)}}function Z0e(t){return function(){return t}}function FS(t){return+t}var e9=[0,1];function Rn(t){return t}function NR(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:Z0e(isNaN(e)?NaN:.5)}function ebe(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function tbe(t,e,r){var n=t[0],i=t[1],s=e[0],a=e[1];return i<n?(n=NR(i,n),s=r(a,s)):(n=NR(n,i),s=r(s,a)),function(c){return s(n(c))}}function rbe(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),s=new Array(n),a=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<n;)i[a]=NR(t[a],t[a+1]),s[a]=r(e[a],e[a+1]);return function(c){var u=ty(t,c,1,n)-1;return s[u](i[u](c))}}function ny(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function gx(){var t=e9,e=e9,r=Eh,n,i,s,a=Rn,c,u,d;function h(){var g=Math.min(t.length,e.length);return a!==Rn&&(a=ebe(t[0],t[g-1])),c=g>2?rbe:tbe,u=d=null,p}function p(g){return g==null||isNaN(g=+g)?s:(u||(u=c(t.map(n),e,r)))(n(a(g)))}return p.invert=function(g){return a(i((d||(d=c(e,t.map(n),VS)))(g)))},p.domain=function(g){return arguments.length?(t=Array.from(g,FS),h()):t.slice()},p.range=function(g){return arguments.length?(e=Array.from(g),h()):e.slice()},p.rangeRound=function(g){return e=Array.from(g),r=iI,h()},p.clamp=function(g){return arguments.length?(a=g?!0:Rn,h()):a!==Rn},p.interpolate=function(g){return arguments.length?(r=g,h()):r},p.unknown=function(g){return arguments.length?(s=g,p):s},function(g,y){return n=g,i=y,h()}}function sI(){return gx()(Rn,Rn)}function nbe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function HS(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function oh(t){return t=HS(Math.abs(t)),t?t[1]:NaN}function ibe(t,e){return function(r,n){for(var i=r.length,s=[],a=0,c=t[0],u=0;i>0&&c>0&&(u+c+1>n&&(c=Math.max(1,n-u)),s.push(r.substring(i-=c,i+c)),!((u+=c+1)>n));)c=t[a=(a+1)%t.length];return s.reverse().join(e)}}function sbe(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var abe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xg(t){if(!(e=abe.exec(t)))throw new Error("invalid format: "+t);var e;return new aI({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}xg.prototype=aI.prototype;function aI(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}aI.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function obe(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var gW;function cbe(t,e){var r=HS(t,e);if(!r)return t+"";var n=r[0],i=r[1],s=i-(gW=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=n.length;return s===a?n:s>a?n+new Array(s-a+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+HS(t,Math.max(0,e+s-1))[0]}function t9(t,e){var r=HS(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const r9={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:nbe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>t9(t*100,e),r:t9,s:cbe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function n9(t){return t}var i9=Array.prototype.map,s9=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function lbe(t){var e=t.grouping===void 0||t.thousands===void 0?n9:ibe(i9.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?n9:sbe(i9.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function d(p){p=xg(p);var g=p.fill,y=p.align,S=p.sign,x=p.symbol,w=p.zero,E=p.width,R=p.comma,T=p.precision,M=p.trim,D=p.type;D==="n"?(R=!0,D="g"):r9[D]||(T===void 0&&(T=12),M=!0,D="g"),(w||g==="0"&&y==="=")&&(w=!0,g="0",y="=");var z=x==="$"?r:x==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",j=x==="$"?n:/[%p]/.test(D)?a:"",O=r9[D],L=/[defgprs%]/.test(D);T=T===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function V(U){var F=z,q=j,ve,Ae,Y;if(D==="c")q=O(U)+q,U="";else{U=+U;var ae=U<0||1/U<0;if(U=isNaN(U)?u:O(Math.abs(U),T),M&&(U=obe(U)),ae&&+U==0&&S!=="+"&&(ae=!1),F=(ae?S==="("?S:c:S==="-"||S==="("?"":S)+F,q=(D==="s"?s9[8+gW/3]:"")+q+(ae&&S==="("?")":""),L){for(ve=-1,Ae=U.length;++ve<Ae;)if(Y=U.charCodeAt(ve),48>Y||Y>57){q=(Y===46?i+U.slice(ve+1):U.slice(ve))+q,U=U.slice(0,ve);break}}}R&&!w&&(U=e(U,1/0));var pe=F.length+U.length+q.length,me=pe<E?new Array(E-pe+1).join(g):"";switch(R&&w&&(U=e(me+U,me.length?E-q.length:1/0),me=""),y){case"<":U=F+U+q+me;break;case"=":U=F+me+U+q;break;case"^":U=me.slice(0,pe=me.length>>1)+F+U+q+me.slice(pe);break;default:U=me+F+U+q;break}return s(U)}return V.toString=function(){return p+""},V}function h(p,g){var y=d((p=xg(p),p.type="f",p)),S=Math.max(-8,Math.min(8,Math.floor(oh(g)/3)))*3,x=Math.pow(10,-S),w=s9[8+S/3];return function(E){return y(x*E)+w}}return{format:d,formatPrefix:h}}var fb,oI,yW;ube({thousands:",",grouping:[3],currency:["$",""]});function ube(t){return fb=lbe(t),oI=fb.format,yW=fb.formatPrefix,fb}function dbe(t){return Math.max(0,-oh(Math.abs(t)))}function hbe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(oh(e)/3)))*3-oh(Math.abs(t)))}function fbe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,oh(e)-oh(t))+1}function bW(t,e,r,n){var i=TR(t,e,r),s;switch(n=xg(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=hbe(i,a))&&(n.precision=s),yW(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=fbe(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=dbe(i))&&(n.precision=s-(n.type==="%")*2);break}}return oI(n)}function Kc(t){var e=t.domain;return t.ticks=function(r){var n=e();return ER(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return bW(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,s=n.length-1,a=n[i],c=n[s],u,d,h=10;for(c<a&&(d=a,a=c,c=d,d=i,i=s,s=d);h-- >0;){if(d=AR(a,c,r),d===u)return n[i]=a,n[s]=c,e(n);if(d>0)a=Math.floor(a/d)*d,c=Math.ceil(c/d)*d;else if(d<0)a=Math.ceil(a*d)/d,c=Math.floor(c*d)/d;else break;u=d}return t},t}function SW(){var t=sI();return t.copy=function(){return ny(t,SW())},Qi.apply(t,arguments),Kc(t)}function CW(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,FS),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return CW(t).unknown(e)},t=arguments.length?Array.from(t,FS):[0,1],Kc(r)}function xW(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],s=t[n],a;return s<i&&(a=r,r=n,n=a,a=i,i=s,s=a),t[r]=e.floor(i),t[n]=e.ceil(s),t}function a9(t){return Math.log(t)}function o9(t){return Math.exp(t)}function pbe(t){return-Math.log(-t)}function mbe(t){return-Math.exp(-t)}function vbe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function gbe(t){return t===10?vbe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function ybe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function c9(t){return(e,r)=>-t(-e,r)}function cI(t){const e=t(a9,o9),r=e.domain;let n=10,i,s;function a(){return i=ybe(n),s=gbe(n),r()[0]<0?(i=c9(i),s=c9(s),t(pbe,mbe)):t(a9,o9),e}return e.base=function(c){return arguments.length?(n=+c,a()):n},e.domain=function(c){return arguments.length?(r(c),a()):r()},e.ticks=c=>{const u=r();let d=u[0],h=u[u.length-1];const p=h<d;p&&([d,h]=[h,d]);let g=i(d),y=i(h),S,x;const w=c==null?10:+c;let E=[];if(!(n%1)&&y-g<w){if(g=Math.floor(g),y=Math.ceil(y),d>0){for(;g<=y;++g)for(S=1;S<n;++S)if(x=g<0?S/s(-g):S*s(g),!(x<d)){if(x>h)break;E.push(x)}}else for(;g<=y;++g)for(S=n-1;S>=1;--S)if(x=g>0?S/s(-g):S*s(g),!(x<d)){if(x>h)break;E.push(x)}E.length*2<w&&(E=ER(d,h,w))}else E=ER(g,y,Math.min(y-g,w)).map(s);return p?E.reverse():E},e.tickFormat=(c,u)=>{if(c==null&&(c=10),u==null&&(u=n===10?"s":","),typeof u!="function"&&(!(n%1)&&(u=xg(u)).precision==null&&(u.trim=!0),u=oI(u)),c===1/0)return u;const d=Math.max(1,n*c/e.ticks().length);return h=>{let p=h/s(Math.round(i(h)));return p*n<n-.5&&(p*=n),p<=d?u(h):""}},e.nice=()=>r(xW(r(),{floor:c=>s(Math.floor(i(c))),ceil:c=>s(Math.ceil(i(c)))})),e}function wW(){const t=cI(gx()).domain([1,10]);return t.copy=()=>ny(t,wW()).base(t.base()),Qi.apply(t,arguments),t}function l9(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function u9(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function lI(t){var e=1,r=t(l9(e),u9(e));return r.constant=function(n){return arguments.length?t(l9(e=+n),u9(e)):e},Kc(r)}function _W(){var t=lI(gx());return t.copy=function(){return ny(t,_W()).constant(t.constant())},Qi.apply(t,arguments)}function d9(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function bbe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Sbe(t){return t<0?-t*t:t*t}function uI(t){var e=t(Rn,Rn),r=1;function n(){return r===1?t(Rn,Rn):r===.5?t(bbe,Sbe):t(d9(r),d9(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},Kc(e)}function dI(){var t=uI(gx());return t.copy=function(){return ny(t,dI()).exponent(t.exponent())},Qi.apply(t,arguments),t}function Cbe(){return dI.apply(null,arguments).exponent(.5)}function h9(t){return Math.sign(t)*t*t}function xbe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function EW(){var t=sI(),e=[0,1],r=!1,n;function i(s){var a=xbe(t(s));return isNaN(a)?n:r?Math.round(a):a}return i.invert=function(s){return t.invert(h9(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,FS)).map(h9)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(r=!!s,i):r},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return EW(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Qi.apply(i,arguments),Kc(i)}function AW(){var t=[],e=[],r=[],n;function i(){var a=0,c=Math.max(1,e.length);for(r=new Array(c-1);++a<c;)r[a-1]=A0e(t,a/c);return s}function s(a){return a==null||isNaN(a=+a)?n:e[ty(r,a)]}return s.invertExtent=function(a){var c=e.indexOf(a);return c<0?[NaN,NaN]:[c>0?r[c-1]:t[0],c<r.length?r[c]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let c of a)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(Tc),i()},s.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return AW().domain(t).range(e).unknown(n)},Qi.apply(s,arguments)}function TW(){var t=0,e=1,r=1,n=[.5],i=[0,1],s;function a(u){return u!=null&&u<=u?i[ty(n,u,0,r)]:s}function c(){var u=-1;for(n=new Array(r);++u<r;)n[u]=((u+1)*e-(u-r)*t)/(r+1);return a}return a.domain=function(u){return arguments.length?([t,e]=u,t=+t,e=+e,c()):[t,e]},a.range=function(u){return arguments.length?(r=(i=Array.from(u)).length-1,c()):i.slice()},a.invertExtent=function(u){var d=i.indexOf(u);return d<0?[NaN,NaN]:d<1?[t,n[0]]:d>=r?[n[r-1],e]:[n[d-1],n[d]]},a.unknown=function(u){return arguments.length&&(s=u),a},a.thresholds=function(){return n.slice()},a.copy=function(){return TW().domain([t,e]).range(i).unknown(s)},Qi.apply(Kc(a),arguments)}function RW(){var t=[.5],e=[0,1],r,n=1;function i(s){return s!=null&&s<=s?e[ty(t,s,0,n)]:r}return i.domain=function(s){return arguments.length?(t=Array.from(s),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return RW().domain(t).range(e).unknown(r)},Qi.apply(i,arguments)}const LA=new Date,zA=new Date;function Dr(t,e,r,n){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const a=i(s),c=i.ceil(s);return s-a<c-s?a:c},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,c)=>{const u=[];if(s=i.ceil(s),c=c==null?1:Math.floor(c),!(s<a)||!(c>0))return u;let d;do u.push(d=new Date(+s)),e(s,c),t(s);while(d<s&&s<a);return u},i.filter=s=>Dr(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,c)=>{if(a>=a)if(c<0)for(;++c<=0;)for(;e(a,-1),!s(a););else for(;--c>=0;)for(;e(a,1),!s(a););}),r&&(i.count=(s,a)=>(LA.setTime(+s),zA.setTime(+a),t(LA),t(zA),Math.floor(r(LA,zA))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(n?a=>n(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const WS=Dr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);WS.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Dr(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):WS);WS.range;const Xa=1e3,Hi=Xa*60,Qa=Hi*60,ho=Qa*24,hI=ho*7,f9=ho*30,UA=ho*365,iu=Dr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Xa)},(t,e)=>(e-t)/Xa,t=>t.getUTCSeconds());iu.range;const fI=Dr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Xa)},(t,e)=>{t.setTime(+t+e*Hi)},(t,e)=>(e-t)/Hi,t=>t.getMinutes());fI.range;const pI=Dr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Hi)},(t,e)=>(e-t)/Hi,t=>t.getUTCMinutes());pI.range;const mI=Dr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Xa-t.getMinutes()*Hi)},(t,e)=>{t.setTime(+t+e*Qa)},(t,e)=>(e-t)/Qa,t=>t.getHours());mI.range;const vI=Dr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Qa)},(t,e)=>(e-t)/Qa,t=>t.getUTCHours());vI.range;const iy=Dr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Hi)/ho,t=>t.getDate()-1);iy.range;const yx=Dr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ho,t=>t.getUTCDate()-1);yx.range;const PW=Dr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ho,t=>Math.floor(t/ho));PW.range;function Du(t){return Dr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Hi)/hI)}const bx=Du(0),KS=Du(1),wbe=Du(2),_be=Du(3),ch=Du(4),Ebe=Du(5),Abe=Du(6);bx.range;KS.range;wbe.range;_be.range;ch.range;Ebe.range;Abe.range;function ku(t){return Dr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/hI)}const Sx=ku(0),GS=ku(1),Tbe=ku(2),Rbe=ku(3),lh=ku(4),Pbe=ku(5),Ibe=ku(6);Sx.range;GS.range;Tbe.range;Rbe.range;lh.range;Pbe.range;Ibe.range;const gI=Dr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());gI.range;const yI=Dr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());yI.range;const fo=Dr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());fo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Dr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});fo.range;const po=Dr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());po.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Dr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});po.range;function IW(t,e,r,n,i,s){const a=[[iu,1,Xa],[iu,5,5*Xa],[iu,15,15*Xa],[iu,30,30*Xa],[s,1,Hi],[s,5,5*Hi],[s,15,15*Hi],[s,30,30*Hi],[i,1,Qa],[i,3,3*Qa],[i,6,6*Qa],[i,12,12*Qa],[n,1,ho],[n,2,2*ho],[r,1,hI],[e,1,f9],[e,3,3*f9],[t,1,UA]];function c(d,h,p){const g=h<d;g&&([d,h]=[h,d]);const y=p&&typeof p.range=="function"?p:u(d,h,p),S=y?y.range(d,+h+1):[];return g?S.reverse():S}function u(d,h,p){const g=Math.abs(h-d)/p,y=Z2(([,,w])=>w).right(a,g);if(y===a.length)return t.every(TR(d/UA,h/UA,p));if(y===0)return WS.every(Math.max(TR(d,h,p),1));const[S,x]=a[g/a[y-1][2]<a[y][2]/g?y-1:y];return S.every(x)}return[c,u]}const[Nbe,Obe]=IW(po,yI,Sx,PW,vI,pI),[jbe,Mbe]=IW(fo,gI,bx,iy,mI,fI);function BA(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function qA(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ov(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function Dbe(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,s=t.days,a=t.shortDays,c=t.months,u=t.shortMonths,d=jv(i),h=Mv(i),p=jv(s),g=Mv(s),y=jv(a),S=Mv(a),x=jv(c),w=Mv(c),E=jv(u),R=Mv(u),T={a:ae,A:pe,b:me,B:_e,c:null,d:b9,e:b9,f:iSe,g:pSe,G:vSe,H:tSe,I:rSe,j:nSe,L:NW,m:sSe,M:aSe,p:H,q:G,Q:x9,s:w9,S:oSe,u:cSe,U:lSe,V:uSe,w:dSe,W:hSe,x:null,X:null,y:fSe,Y:mSe,Z:gSe,"%":C9},M={a:le,A:X,b:ge,B:be,c:null,d:S9,e:S9,f:CSe,g:NSe,G:jSe,H:ySe,I:bSe,j:SSe,L:jW,m:xSe,M:wSe,p:we,q:Ke,Q:x9,s:w9,S:_Se,u:ESe,U:ASe,V:TSe,w:RSe,W:PSe,x:null,X:null,y:ISe,Y:OSe,Z:MSe,"%":C9},D={a:V,A:U,b:F,B:q,c:ve,d:g9,e:g9,f:Qbe,g:v9,G:m9,H:y9,I:y9,j:Gbe,L:Xbe,m:Kbe,M:$be,p:L,q:Wbe,Q:Zbe,s:eSe,S:Ybe,u:Bbe,U:qbe,V:Vbe,w:Ube,W:Fbe,x:Ae,X:Y,y:v9,Y:m9,Z:Hbe,"%":Jbe};T.x=z(r,T),T.X=z(n,T),T.c=z(e,T),M.x=z(r,M),M.X=z(n,M),M.c=z(e,M);function z(se,je){return function(Ue){var fe=[],Pt=-1,Ge=0,yt=se.length,Dt,vt,Ci;for(Ue instanceof Date||(Ue=new Date(+Ue));++Pt<yt;)se.charCodeAt(Pt)===37&&(fe.push(se.slice(Ge,Pt)),(vt=p9[Dt=se.charAt(++Pt)])!=null?Dt=se.charAt(++Pt):vt=Dt==="e"?" ":"0",(Ci=je[Dt])&&(Dt=Ci(Ue,vt)),fe.push(Dt),Ge=Pt+1);return fe.push(se.slice(Ge,Pt)),fe.join("")}}function j(se,je){return function(Ue){var fe=Ov(1900,void 0,1),Pt=O(fe,se,Ue+="",0),Ge,yt;if(Pt!=Ue.length)return null;if("Q"in fe)return new Date(fe.Q);if("s"in fe)return new Date(fe.s*1e3+("L"in fe?fe.L:0));if(je&&!("Z"in fe)&&(fe.Z=0),"p"in fe&&(fe.H=fe.H%12+fe.p*12),fe.m===void 0&&(fe.m="q"in fe?fe.q:0),"V"in fe){if(fe.V<1||fe.V>53)return null;"w"in fe||(fe.w=1),"Z"in fe?(Ge=qA(Ov(fe.y,0,1)),yt=Ge.getUTCDay(),Ge=yt>4||yt===0?GS.ceil(Ge):GS(Ge),Ge=yx.offset(Ge,(fe.V-1)*7),fe.y=Ge.getUTCFullYear(),fe.m=Ge.getUTCMonth(),fe.d=Ge.getUTCDate()+(fe.w+6)%7):(Ge=BA(Ov(fe.y,0,1)),yt=Ge.getDay(),Ge=yt>4||yt===0?KS.ceil(Ge):KS(Ge),Ge=iy.offset(Ge,(fe.V-1)*7),fe.y=Ge.getFullYear(),fe.m=Ge.getMonth(),fe.d=Ge.getDate()+(fe.w+6)%7)}else("W"in fe||"U"in fe)&&("w"in fe||(fe.w="u"in fe?fe.u%7:"W"in fe?1:0),yt="Z"in fe?qA(Ov(fe.y,0,1)).getUTCDay():BA(Ov(fe.y,0,1)).getDay(),fe.m=0,fe.d="W"in fe?(fe.w+6)%7+fe.W*7-(yt+5)%7:fe.w+fe.U*7-(yt+6)%7);return"Z"in fe?(fe.H+=fe.Z/100|0,fe.M+=fe.Z%100,qA(fe)):BA(fe)}}function O(se,je,Ue,fe){for(var Pt=0,Ge=je.length,yt=Ue.length,Dt,vt;Pt<Ge;){if(fe>=yt)return-1;if(Dt=je.charCodeAt(Pt++),Dt===37){if(Dt=je.charAt(Pt++),vt=D[Dt in p9?je.charAt(Pt++):Dt],!vt||(fe=vt(se,Ue,fe))<0)return-1}else if(Dt!=Ue.charCodeAt(fe++))return-1}return fe}function L(se,je,Ue){var fe=d.exec(je.slice(Ue));return fe?(se.p=h.get(fe[0].toLowerCase()),Ue+fe[0].length):-1}function V(se,je,Ue){var fe=y.exec(je.slice(Ue));return fe?(se.w=S.get(fe[0].toLowerCase()),Ue+fe[0].length):-1}function U(se,je,Ue){var fe=p.exec(je.slice(Ue));return fe?(se.w=g.get(fe[0].toLowerCase()),Ue+fe[0].length):-1}function F(se,je,Ue){var fe=E.exec(je.slice(Ue));return fe?(se.m=R.get(fe[0].toLowerCase()),Ue+fe[0].length):-1}function q(se,je,Ue){var fe=x.exec(je.slice(Ue));return fe?(se.m=w.get(fe[0].toLowerCase()),Ue+fe[0].length):-1}function ve(se,je,Ue){return O(se,e,je,Ue)}function Ae(se,je,Ue){return O(se,r,je,Ue)}function Y(se,je,Ue){return O(se,n,je,Ue)}function ae(se){return a[se.getDay()]}function pe(se){return s[se.getDay()]}function me(se){return u[se.getMonth()]}function _e(se){return c[se.getMonth()]}function H(se){return i[+(se.getHours()>=12)]}function G(se){return 1+~~(se.getMonth()/3)}function le(se){return a[se.getUTCDay()]}function X(se){return s[se.getUTCDay()]}function ge(se){return u[se.getUTCMonth()]}function be(se){return c[se.getUTCMonth()]}function we(se){return i[+(se.getUTCHours()>=12)]}function Ke(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var je=z(se+="",T);return je.toString=function(){return se},je},parse:function(se){var je=j(se+="",!1);return je.toString=function(){return se},je},utcFormat:function(se){var je=z(se+="",M);return je.toString=function(){return se},je},utcParse:function(se){var je=j(se+="",!0);return je.toString=function(){return se},je}}}var p9={"-":"",_:" ",0:"0"},Yr=/^\s*\d+/,kbe=/^%/,Lbe=/[\\^$*+?|[\]().{}]/g;function ft(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",s=i.length;return n+(s<r?new Array(r-s+1).join(e)+i:i)}function zbe(t){return t.replace(Lbe,"\\$&")}function jv(t){return new RegExp("^(?:"+t.map(zbe).join("|")+")","i")}function Mv(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function Ube(t,e,r){var n=Yr.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function Bbe(t,e,r){var n=Yr.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function qbe(t,e,r){var n=Yr.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function Vbe(t,e,r){var n=Yr.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function Fbe(t,e,r){var n=Yr.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function m9(t,e,r){var n=Yr.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function v9(t,e,r){var n=Yr.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Hbe(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Wbe(t,e,r){var n=Yr.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function Kbe(t,e,r){var n=Yr.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function g9(t,e,r){var n=Yr.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function Gbe(t,e,r){var n=Yr.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function y9(t,e,r){var n=Yr.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function $be(t,e,r){var n=Yr.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function Ybe(t,e,r){var n=Yr.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function Xbe(t,e,r){var n=Yr.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function Qbe(t,e,r){var n=Yr.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Jbe(t,e,r){var n=kbe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function Zbe(t,e,r){var n=Yr.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function eSe(t,e,r){var n=Yr.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function b9(t,e){return ft(t.getDate(),e,2)}function tSe(t,e){return ft(t.getHours(),e,2)}function rSe(t,e){return ft(t.getHours()%12||12,e,2)}function nSe(t,e){return ft(1+iy.count(fo(t),t),e,3)}function NW(t,e){return ft(t.getMilliseconds(),e,3)}function iSe(t,e){return NW(t,e)+"000"}function sSe(t,e){return ft(t.getMonth()+1,e,2)}function aSe(t,e){return ft(t.getMinutes(),e,2)}function oSe(t,e){return ft(t.getSeconds(),e,2)}function cSe(t){var e=t.getDay();return e===0?7:e}function lSe(t,e){return ft(bx.count(fo(t)-1,t),e,2)}function OW(t){var e=t.getDay();return e>=4||e===0?ch(t):ch.ceil(t)}function uSe(t,e){return t=OW(t),ft(ch.count(fo(t),t)+(fo(t).getDay()===4),e,2)}function dSe(t){return t.getDay()}function hSe(t,e){return ft(KS.count(fo(t)-1,t),e,2)}function fSe(t,e){return ft(t.getFullYear()%100,e,2)}function pSe(t,e){return t=OW(t),ft(t.getFullYear()%100,e,2)}function mSe(t,e){return ft(t.getFullYear()%1e4,e,4)}function vSe(t,e){var r=t.getDay();return t=r>=4||r===0?ch(t):ch.ceil(t),ft(t.getFullYear()%1e4,e,4)}function gSe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ft(e/60|0,"0",2)+ft(e%60,"0",2)}function S9(t,e){return ft(t.getUTCDate(),e,2)}function ySe(t,e){return ft(t.getUTCHours(),e,2)}function bSe(t,e){return ft(t.getUTCHours()%12||12,e,2)}function SSe(t,e){return ft(1+yx.count(po(t),t),e,3)}function jW(t,e){return ft(t.getUTCMilliseconds(),e,3)}function CSe(t,e){return jW(t,e)+"000"}function xSe(t,e){return ft(t.getUTCMonth()+1,e,2)}function wSe(t,e){return ft(t.getUTCMinutes(),e,2)}function _Se(t,e){return ft(t.getUTCSeconds(),e,2)}function ESe(t){var e=t.getUTCDay();return e===0?7:e}function ASe(t,e){return ft(Sx.count(po(t)-1,t),e,2)}function MW(t){var e=t.getUTCDay();return e>=4||e===0?lh(t):lh.ceil(t)}function TSe(t,e){return t=MW(t),ft(lh.count(po(t),t)+(po(t).getUTCDay()===4),e,2)}function RSe(t){return t.getUTCDay()}function PSe(t,e){return ft(GS.count(po(t)-1,t),e,2)}function ISe(t,e){return ft(t.getUTCFullYear()%100,e,2)}function NSe(t,e){return t=MW(t),ft(t.getUTCFullYear()%100,e,2)}function OSe(t,e){return ft(t.getUTCFullYear()%1e4,e,4)}function jSe(t,e){var r=t.getUTCDay();return t=r>=4||r===0?lh(t):lh.ceil(t),ft(t.getUTCFullYear()%1e4,e,4)}function MSe(){return"+0000"}function C9(){return"%"}function x9(t){return+t}function w9(t){return Math.floor(+t/1e3)}var Pd,DW,kW;DSe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function DSe(t){return Pd=Dbe(t),DW=Pd.format,Pd.parse,kW=Pd.utcFormat,Pd.utcParse,Pd}function kSe(t){return new Date(t)}function LSe(t){return t instanceof Date?+t:+new Date(+t)}function bI(t,e,r,n,i,s,a,c,u,d){var h=sI(),p=h.invert,g=h.domain,y=d(".%L"),S=d(":%S"),x=d("%I:%M"),w=d("%I %p"),E=d("%a %d"),R=d("%b %d"),T=d("%B"),M=d("%Y");function D(z){return(u(z)<z?y:c(z)<z?S:a(z)<z?x:s(z)<z?w:n(z)<z?i(z)<z?E:R:r(z)<z?T:M)(z)}return h.invert=function(z){return new Date(p(z))},h.domain=function(z){return arguments.length?g(Array.from(z,LSe)):g().map(kSe)},h.ticks=function(z){var j=g();return t(j[0],j[j.length-1],z??10)},h.tickFormat=function(z,j){return j==null?D:d(j)},h.nice=function(z){var j=g();return(!z||typeof z.range!="function")&&(z=e(j[0],j[j.length-1],z??10)),z?g(xW(j,z)):h},h.copy=function(){return ny(h,bI(t,e,r,n,i,s,a,c,u,d))},h}function zSe(){return Qi.apply(bI(jbe,Mbe,fo,gI,bx,iy,mI,fI,iu,DW).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function USe(){return Qi.apply(bI(Nbe,Obe,po,yI,Sx,yx,vI,pI,iu,kW).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Cx(){var t=0,e=1,r,n,i,s,a=Rn,c=!1,u;function d(p){return p==null||isNaN(p=+p)?u:a(i===0?.5:(p=(s(p)-r)*i,c?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([t,e]=p,r=s(t=+t),n=s(e=+e),i=r===n?0:1/(n-r),d):[t,e]},d.clamp=function(p){return arguments.length?(c=!!p,d):c},d.interpolator=function(p){return arguments.length?(a=p,d):a};function h(p){return function(g){var y,S;return arguments.length?([y,S]=g,a=p(y,S),d):[a(0),a(1)]}}return d.range=h(Eh),d.rangeRound=h(iI),d.unknown=function(p){return arguments.length?(u=p,d):u},function(p){return s=p,r=p(t),n=p(e),i=r===n?0:1/(n-r),d}}function Gc(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function LW(){var t=Kc(Cx()(Rn));return t.copy=function(){return Gc(t,LW())},Co.apply(t,arguments)}function zW(){var t=cI(Cx()).domain([1,10]);return t.copy=function(){return Gc(t,zW()).base(t.base())},Co.apply(t,arguments)}function UW(){var t=lI(Cx());return t.copy=function(){return Gc(t,UW()).constant(t.constant())},Co.apply(t,arguments)}function SI(){var t=uI(Cx());return t.copy=function(){return Gc(t,SI()).exponent(t.exponent())},Co.apply(t,arguments)}function BSe(){return SI.apply(null,arguments).exponent(.5)}function BW(){var t=[],e=Rn;function r(n){if(n!=null&&!isNaN(n=+n))return e((ty(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Tc),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,s)=>E0e(t,s/n))},r.copy=function(){return BW(e).domain(t)},Co.apply(r,arguments)}function xx(){var t=0,e=.5,r=1,n=1,i,s,a,c,u,d=Rn,h,p=!1,g;function y(x){return isNaN(x=+x)?g:(x=.5+((x=+h(x))-s)*(n*x<n*s?c:u),d(p?Math.max(0,Math.min(1,x)):x))}y.domain=function(x){return arguments.length?([t,e,r]=x,i=h(t=+t),s=h(e=+e),a=h(r=+r),c=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),n=s<i?-1:1,y):[t,e,r]},y.clamp=function(x){return arguments.length?(p=!!x,y):p},y.interpolator=function(x){return arguments.length?(d=x,y):d};function S(x){return function(w){var E,R,T;return arguments.length?([E,R,T]=w,d=J0e(x,[E,R,T]),y):[d(0),d(.5),d(1)]}}return y.range=S(Eh),y.rangeRound=S(iI),y.unknown=function(x){return arguments.length?(g=x,y):g},function(x){return h=x,i=x(t),s=x(e),a=x(r),c=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),n=s<i?-1:1,y}}function qW(){var t=Kc(xx()(Rn));return t.copy=function(){return Gc(t,qW())},Co.apply(t,arguments)}function VW(){var t=cI(xx()).domain([.1,1,10]);return t.copy=function(){return Gc(t,VW()).base(t.base())},Co.apply(t,arguments)}function FW(){var t=lI(xx());return t.copy=function(){return Gc(t,FW()).constant(t.constant())},Co.apply(t,arguments)}function CI(){var t=uI(xx());return t.copy=function(){return Gc(t,CI()).exponent(t.exponent())},Co.apply(t,arguments)}function qSe(){return CI.apply(null,arguments).exponent(.5)}const Hv=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:tI,scaleDiverging:qW,scaleDivergingLog:VW,scaleDivergingPow:CI,scaleDivergingSqrt:qSe,scaleDivergingSymlog:FW,scaleIdentity:CW,scaleImplicit:RR,scaleLinear:SW,scaleLog:wW,scaleOrdinal:eI,scalePoint:R0e,scalePow:dI,scaleQuantile:AW,scaleQuantize:TW,scaleRadial:EW,scaleSequential:LW,scaleSequentialLog:zW,scaleSequentialPow:SI,scaleSequentialQuantile:BW,scaleSequentialSqrt:BSe,scaleSequentialSymlog:UW,scaleSqrt:Cbe,scaleSymlog:_W,scaleThreshold:RW,scaleTime:zSe,scaleUtc:USe,tickFormat:bW},Symbol.toStringTag,{value:"Module"}));var $c=t=>t.chartData,VSe=ie([$c],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),wx=(t,e,r,n)=>n?VSe(t):$c(t);function Lc(t){if(Array.isArray(t)&&t.length===2){var[e,r]=t;if(ar(e)&&ar(r))return!0}return!1}function _9(t,e,r){return r?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function HW(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,n]=t,i,s;if(ar(r))i=r;else if(typeof r=="function")return;if(ar(n))s=n;else if(typeof n=="function")return;var a=[i,s];if(Lc(a))return a}}function FSe(t,e,r){if(!(!r&&e==null)){if(typeof t=="function"&&e!=null)try{var n=t(e,r);if(Lc(n))return _9(n,e,r)}catch{}if(Array.isArray(t)&&t.length===2){var[i,s]=t,a,c;if(i==="auto")e!=null&&(a=Math.min(...e));else if(Ne(i))a=i;else if(typeof i=="function")try{e!=null&&(a=i(e?.[0]))}catch{}else if(typeof i=="string"&&J8.test(i)){var u=J8.exec(i);if(u==null||e==null)a=void 0;else{var d=+u[1];a=e[0]-d}}else a=e?.[0];if(s==="auto")e!=null&&(c=Math.max(...e));else if(Ne(s))c=s;else if(typeof s=="function")try{e!=null&&(c=s(e?.[1]))}catch{}else if(typeof s=="string"&&Z8.test(s)){var h=Z8.exec(s);if(h==null||e==null)c=void 0;else{var p=+h[1];c=e[1]+p}}else c=e?.[1];var g=[a,c];if(Lc(g))return e==null?g:_9(g,e,r)}}}var Ah=1e9,HSe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},wI,Ht=!0,Xi="[DecimalError] ",fu=Xi+"Invalid argument: ",xI=Xi+"Exponent out of range: ",Th=Math.floor,Zl=Math.pow,WSe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,hi,Wr=1e7,Ut=7,WW=9007199254740991,$S=Th(WW/Ut),Re={};Re.absoluteValue=Re.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Re.comparedTo=Re.cmp=function(t){var e,r,n,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(n=s.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return n===i?0:n>i^s.s<0?1:-1};Re.decimalPlaces=Re.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Ut;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};Re.dividedBy=Re.div=function(t){return to(this,new this.constructor(t))};Re.dividedToIntegerBy=Re.idiv=function(t){var e=this,r=e.constructor;return Ot(to(e,new r(t),0,1),r.precision)};Re.equals=Re.eq=function(t){return!this.cmp(t)};Re.exponent=function(){return Ar(this)};Re.greaterThan=Re.gt=function(t){return this.cmp(t)>0};Re.greaterThanOrEqualTo=Re.gte=function(t){return this.cmp(t)>=0};Re.isInteger=Re.isint=function(){return this.e>this.d.length-2};Re.isNegative=Re.isneg=function(){return this.s<0};Re.isPositive=Re.ispos=function(){return this.s>0};Re.isZero=function(){return this.s===0};Re.lessThan=Re.lt=function(t){return this.cmp(t)<0};Re.lessThanOrEqualTo=Re.lte=function(t){return this.cmp(t)<1};Re.logarithm=Re.log=function(t){var e,r=this,n=r.constructor,i=n.precision,s=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(hi))throw Error(Xi+"NaN");if(r.s<1)throw Error(Xi+(r.s?"NaN":"-Infinity"));return r.eq(hi)?new n(0):(Ht=!1,e=to(wg(r,s),wg(t,s),s),Ht=!0,Ot(e,i))};Re.minus=Re.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?$W(e,t):KW(e,(t.s=-t.s,t))};Re.modulo=Re.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(Xi+"NaN");return r.s?(Ht=!1,e=to(r,t,0,1).times(t),Ht=!0,r.minus(e)):Ot(new n(r),i)};Re.naturalExponential=Re.exp=function(){return GW(this)};Re.naturalLogarithm=Re.ln=function(){return wg(this)};Re.negated=Re.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Re.plus=Re.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?KW(e,t):$W(e,(t.s=-t.s,t))};Re.precision=Re.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(fu+t);if(e=Ar(i)+1,n=i.d.length-1,r=n*Ut+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};Re.squareRoot=Re.sqrt=function(){var t,e,r,n,i,s,a,c=this,u=c.constructor;if(c.s<1){if(!c.s)return new u(0);throw Error(Xi+"NaN")}for(t=Ar(c),Ht=!1,i=Math.sqrt(+c),i==0||i==1/0?(e=Zs(c.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Th((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new u(e)):n=new u(i.toString()),r=u.precision,i=a=r+3;;)if(s=n,n=s.plus(to(c,s,a+2)).times(.5),Zs(s.d).slice(0,a)===(e=Zs(n.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(Ot(s,r+1,0),s.times(s).eq(c)){n=s;break}}else if(e!="9999")break;a+=4}return Ht=!0,Ot(n,r)};Re.times=Re.mul=function(t){var e,r,n,i,s,a,c,u,d,h=this,p=h.constructor,g=h.d,y=(t=new p(t)).d;if(!h.s||!t.s)return new p(0);for(t.s*=h.s,r=h.e+t.e,u=g.length,d=y.length,u<d&&(s=g,g=y,y=s,a=u,u=d,d=a),s=[],a=u+d,n=a;n--;)s.push(0);for(n=d;--n>=0;){for(e=0,i=u+n;i>n;)c=s[i]+y[n]*g[i-n-1]+e,s[i--]=c%Wr|0,e=c/Wr|0;s[i]=(s[i]+e)%Wr|0}for(;!s[--a];)s.pop();return e?++r:s.shift(),t.d=s,t.e=r,Ht?Ot(t,p.precision):t};Re.toDecimalPlaces=Re.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(fa(t,0,Ah),e===void 0?e=n.rounding:fa(e,0,8),Ot(r,t+Ar(r)+1,e))};Re.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Eu(n,!0):(fa(t,0,Ah),e===void 0?e=i.rounding:fa(e,0,8),n=Ot(new i(n),t+1,e),r=Eu(n,!0,t+1)),r};Re.toFixed=function(t,e){var r,n,i=this,s=i.constructor;return t===void 0?Eu(i):(fa(t,0,Ah),e===void 0?e=s.rounding:fa(e,0,8),n=Ot(new s(i),t+Ar(i)+1,e),r=Eu(n.abs(),!1,t+Ar(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Re.toInteger=Re.toint=function(){var t=this,e=t.constructor;return Ot(new e(t),Ar(t)+1,e.rounding)};Re.toNumber=function(){return+this};Re.toPower=Re.pow=function(t){var e,r,n,i,s,a,c=this,u=c.constructor,d=12,h=+(t=new u(t));if(!t.s)return new u(hi);if(c=new u(c),!c.s){if(t.s<1)throw Error(Xi+"Infinity");return c}if(c.eq(hi))return c;if(n=u.precision,t.eq(hi))return Ot(c,n);if(e=t.e,r=t.d.length-1,a=e>=r,s=c.s,a){if((r=h<0?-h:h)<=WW){for(i=new u(hi),e=Math.ceil(n/Ut+4),Ht=!1;r%2&&(i=i.times(c),A9(i.d,e)),r=Th(r/2),r!==0;)c=c.times(c),A9(c.d,e);return Ht=!0,t.s<0?new u(hi).div(i):Ot(i,n)}}else if(s<0)throw Error(Xi+"NaN");return s=s<0&&t.d[Math.max(e,r)]&1?-1:1,c.s=1,Ht=!1,i=t.times(wg(c,n+d)),Ht=!0,i=GW(i),i.s=s,i};Re.toPrecision=function(t,e){var r,n,i=this,s=i.constructor;return t===void 0?(r=Ar(i),n=Eu(i,r<=s.toExpNeg||r>=s.toExpPos)):(fa(t,1,Ah),e===void 0?e=s.rounding:fa(e,0,8),i=Ot(new s(i),t,e),r=Ar(i),n=Eu(i,t<=r||r<=s.toExpNeg,t)),n};Re.toSignificantDigits=Re.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(fa(t,1,Ah),e===void 0?e=n.rounding:fa(e,0,8)),Ot(new n(r),t,e)};Re.toString=Re.valueOf=Re.val=Re.toJSON=Re[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ar(t),r=t.constructor;return Eu(t,e<=r.toExpNeg||e>=r.toExpPos)};function KW(t,e){var r,n,i,s,a,c,u,d,h=t.constructor,p=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),Ht?Ot(e,p):e;if(u=t.d,d=e.d,a=t.e,i=e.e,u=u.slice(),s=a-i,s){for(s<0?(n=u,s=-s,c=d.length):(n=d,i=a,c=u.length),a=Math.ceil(p/Ut),c=a>c?a+1:c+1,s>c&&(s=c,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(c=u.length,s=d.length,c-s<0&&(s=c,n=d,d=u,u=n),r=0;s;)r=(u[--s]=u[s]+d[s]+r)/Wr|0,u[s]%=Wr;for(r&&(u.unshift(r),++i),c=u.length;u[--c]==0;)u.pop();return e.d=u,e.e=i,Ht?Ot(e,p):e}function fa(t,e,r){if(t!==~~t||t<e||t>r)throw Error(fu+t)}function Zs(t){var e,r,n,i=t.length-1,s="",a=t[0];if(i>0){for(s+=a,e=1;e<i;e++)n=t[e]+"",r=Ut-n.length,r&&(s+=hc(r)),s+=n;a=t[e],n=a+"",r=Ut-n.length,r&&(s+=hc(r))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var to=(function(){function t(n,i){var s,a=0,c=n.length;for(n=n.slice();c--;)s=n[c]*i+a,n[c]=s%Wr|0,a=s/Wr|0;return a&&n.unshift(a),n}function e(n,i,s,a){var c,u;if(s!=a)u=s>a?1:-1;else for(c=u=0;c<s;c++)if(n[c]!=i[c]){u=n[c]>i[c]?1:-1;break}return u}function r(n,i,s){for(var a=0;s--;)n[s]-=a,a=n[s]<i[s]?1:0,n[s]=a*Wr+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,a){var c,u,d,h,p,g,y,S,x,w,E,R,T,M,D,z,j,O,L=n.constructor,V=n.s==i.s?1:-1,U=n.d,F=i.d;if(!n.s)return new L(n);if(!i.s)throw Error(Xi+"Division by zero");for(u=n.e-i.e,j=F.length,D=U.length,y=new L(V),S=y.d=[],d=0;F[d]==(U[d]||0);)++d;if(F[d]>(U[d]||0)&&--u,s==null?R=s=L.precision:a?R=s+(Ar(n)-Ar(i))+1:R=s,R<0)return new L(0);if(R=R/Ut+2|0,d=0,j==1)for(h=0,F=F[0],R++;(d<D||h)&&R--;d++)T=h*Wr+(U[d]||0),S[d]=T/F|0,h=T%F|0;else{for(h=Wr/(F[0]+1)|0,h>1&&(F=t(F,h),U=t(U,h),j=F.length,D=U.length),M=j,x=U.slice(0,j),w=x.length;w<j;)x[w++]=0;O=F.slice(),O.unshift(0),z=F[0],F[1]>=Wr/2&&++z;do h=0,c=e(F,x,j,w),c<0?(E=x[0],j!=w&&(E=E*Wr+(x[1]||0)),h=E/z|0,h>1?(h>=Wr&&(h=Wr-1),p=t(F,h),g=p.length,w=x.length,c=e(p,x,g,w),c==1&&(h--,r(p,j<g?O:F,g))):(h==0&&(c=h=1),p=F.slice()),g=p.length,g<w&&p.unshift(0),r(x,p,w),c==-1&&(w=x.length,c=e(F,x,j,w),c<1&&(h++,r(x,j<w?O:F,w))),w=x.length):c===0&&(h++,x=[0]),S[d++]=h,c&&x[0]?x[w++]=U[M]||0:(x=[U[M]],w=1);while((M++<D||x[0]!==void 0)&&R--)}return S[0]||S.shift(),y.e=u,Ot(y,a?s+Ar(y)+1:s)}})();function GW(t,e){var r,n,i,s,a,c,u=0,d=0,h=t.constructor,p=h.precision;if(Ar(t)>16)throw Error(xI+Ar(t));if(!t.s)return new h(hi);for(Ht=!1,c=p,a=new h(.03125);t.abs().gte(.1);)t=t.times(a),d+=5;for(n=Math.log(Zl(2,d))/Math.LN10*2+5|0,c+=n,r=i=s=new h(hi),h.precision=c;;){if(i=Ot(i.times(t),c),r=r.times(++u),a=s.plus(to(i,r,c)),Zs(a.d).slice(0,c)===Zs(s.d).slice(0,c)){for(;d--;)s=Ot(s.times(s),c);return h.precision=p,e==null?(Ht=!0,Ot(s,p)):s}s=a}}function Ar(t){for(var e=t.e*Ut,r=t.d[0];r>=10;r/=10)e++;return e}function VA(t,e,r){if(e>t.LN10.sd())throw Ht=!0,r&&(t.precision=r),Error(Xi+"LN10 precision limit exceeded");return Ot(new t(t.LN10),e)}function hc(t){for(var e="";t--;)e+="0";return e}function wg(t,e){var r,n,i,s,a,c,u,d,h,p=1,g=10,y=t,S=y.d,x=y.constructor,w=x.precision;if(y.s<1)throw Error(Xi+(y.s?"NaN":"-Infinity"));if(y.eq(hi))return new x(0);if(e==null?(Ht=!1,d=w):d=e,y.eq(10))return e==null&&(Ht=!0),VA(x,d);if(d+=g,x.precision=d,r=Zs(S),n=r.charAt(0),s=Ar(y),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)y=y.times(t),r=Zs(y.d),n=r.charAt(0),p++;s=Ar(y),n>1?(y=new x("0."+r),s++):y=new x(n+"."+r.slice(1))}else return u=VA(x,d+2,w).times(s+""),y=wg(new x(n+"."+r.slice(1)),d-g).plus(u),x.precision=w,e==null?(Ht=!0,Ot(y,w)):y;for(c=a=y=to(y.minus(hi),y.plus(hi),d),h=Ot(y.times(y),d),i=3;;){if(a=Ot(a.times(h),d),u=c.plus(to(a,new x(i),d)),Zs(u.d).slice(0,d)===Zs(c.d).slice(0,d))return c=c.times(2),s!==0&&(c=c.plus(VA(x,d+2,w).times(s+""))),c=to(c,new x(p),d),x.precision=w,e==null?(Ht=!0,Ot(c,w)):c;c=u,i+=2}}function E9(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=Th(r/Ut),t.d=[],n=(r+1)%Ut,r<0&&(n+=Ut),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=Ut;n<i;)t.d.push(+e.slice(n,n+=Ut));e=e.slice(n),n=Ut-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),Ht&&(t.e>$S||t.e<-$S))throw Error(xI+r)}else t.s=0,t.e=0,t.d=[0];return t}function Ot(t,e,r){var n,i,s,a,c,u,d,h,p=t.d;for(a=1,s=p[0];s>=10;s/=10)a++;if(n=e-a,n<0)n+=Ut,i=e,d=p[h=0];else{if(h=Math.ceil((n+1)/Ut),s=p.length,h>=s)return t;for(d=s=p[h],a=1;s>=10;s/=10)a++;n%=Ut,i=n-Ut+a}if(r!==void 0&&(s=Zl(10,a-i-1),c=d/s%10|0,u=e<0||p[h+1]!==void 0||d%s,u=r<4?(c||u)&&(r==0||r==(t.s<0?3:2)):c>5||c==5&&(r==4||u||r==6&&(n>0?i>0?d/Zl(10,a-i):0:p[h-1])%10&1||r==(t.s<0?8:7))),e<1||!p[0])return u?(s=Ar(t),p.length=1,e=e-s-1,p[0]=Zl(10,(Ut-e%Ut)%Ut),t.e=Th(-e/Ut)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(n==0?(p.length=h,s=1,h--):(p.length=h+1,s=Zl(10,Ut-n),p[h]=i>0?(d/Zl(10,a-i)%Zl(10,i)|0)*s:0),u)for(;;)if(h==0){(p[0]+=s)==Wr&&(p[0]=1,++t.e);break}else{if(p[h]+=s,p[h]!=Wr)break;p[h--]=0,s=1}for(n=p.length;p[--n]===0;)p.pop();if(Ht&&(t.e>$S||t.e<-$S))throw Error(xI+Ar(t));return t}function $W(t,e){var r,n,i,s,a,c,u,d,h,p,g=t.constructor,y=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),Ht?Ot(e,y):e;if(u=t.d,p=e.d,n=e.e,d=t.e,u=u.slice(),a=d-n,a){for(h=a<0,h?(r=u,a=-a,c=p.length):(r=p,n=d,c=u.length),i=Math.max(Math.ceil(y/Ut),c)+2,a>i&&(a=i,r.length=1),r.reverse(),i=a;i--;)r.push(0);r.reverse()}else{for(i=u.length,c=p.length,h=i<c,h&&(c=i),i=0;i<c;i++)if(u[i]!=p[i]){h=u[i]<p[i];break}a=0}for(h&&(r=u,u=p,p=r,e.s=-e.s),c=u.length,i=p.length-c;i>0;--i)u[c++]=0;for(i=p.length;i>a;){if(u[--i]<p[i]){for(s=i;s&&u[--s]===0;)u[s]=Wr-1;--u[s],u[i]+=Wr}u[i]-=p[i]}for(;u[--c]===0;)u.pop();for(;u[0]===0;u.shift())--n;return u[0]?(e.d=u,e.e=n,Ht?Ot(e,y):e):new g(0)}function Eu(t,e,r){var n,i=Ar(t),s=Zs(t.d),a=s.length;return e?(r&&(n=r-a)>0?s=s.charAt(0)+"."+s.slice(1)+hc(n):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+hc(-i-1)+s,r&&(n=r-a)>0&&(s+=hc(n))):i>=a?(s+=hc(i+1-a),r&&(n=r-i-1)>0&&(s=s+"."+hc(n))):((n=i+1)<a&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-a)>0&&(i+1===a&&(s+="."),s+=hc(n))),t.s<0?"-"+s:s}function A9(t,e){if(t.length>e)return t.length=e,!0}function YW(t){var e,r,n;function i(s){var a=this;if(!(a instanceof i))return new i(s);if(a.constructor=i,s instanceof i){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(fu+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return E9(a,s.toString())}else if(typeof s!="string")throw Error(fu+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,WSe.test(s))E9(a,s);else throw Error(fu+s)}if(i.prototype=Re,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=YW,i.config=i.set=KSe,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function KSe(t){if(!t||typeof t!="object")throw Error(Xi+"Object expected");var e,r,n,i=["precision",1,Ah,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(Th(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(fu+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(fu+r+": "+n);return this}var wI=YW(HSe);hi=new wI(1);const xt=wI;var GSe=t=>t,XW={},QW=t=>t===XW,T9=t=>function e(){return arguments.length===0||arguments.length===1&&QW(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},JW=(t,e)=>t===1?e:T9(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=n.filter(a=>a!==XW).length;return s>=t?e(...n):JW(t-s,T9(function(){for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];var d=n.map(h=>QW(h)?c.shift():h);return e(...d,...c)}))}),$Se=t=>JW(t.length,t),OR=(t,e)=>{for(var r=[],n=t;n<e;++n)r[n-t]=n;return r},YSe=$Se((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(r=>e[r]).map(t)),XSe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return GSe;var i=r.reverse(),s=i[0],a=i.slice(1);return function(){return a.reduce((c,u)=>u(c),s(...arguments))}},jR=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join("");function ZW(t){var e;return t===0?e=1:e=Math.floor(new xt(t).abs().log(10).toNumber())+1,e}function eK(t,e,r){for(var n=new xt(t),i=0,s=[];n.lt(e)&&i<1e5;)s.push(n.toNumber()),n=n.add(r),i++;return s}var tK=t=>{var[e,r]=t,[n,i]=[e,r];return e>r&&([n,i]=[r,e]),[n,i]},rK=(t,e,r)=>{if(t.lte(0))return new xt(0);var n=ZW(t.toNumber()),i=new xt(10).pow(n),s=t.div(i),a=n!==1?.05:.1,c=new xt(Math.ceil(s.div(a).toNumber())).add(r).mul(a),u=c.mul(i);return e?new xt(u.toNumber()):new xt(Math.ceil(u.toNumber()))},QSe=(t,e,r)=>{var n=new xt(1),i=new xt(t);if(!i.isint()&&r){var s=Math.abs(t);s<1?(n=new xt(10).pow(ZW(t)-1),i=new xt(Math.floor(i.div(n).toNumber())).mul(n)):s>1&&(i=new xt(Math.floor(t)))}else t===0?i=new xt(Math.floor((e-1)/2)):r||(i=new xt(Math.floor(t)));var a=Math.floor((e-1)/2),c=XSe(YSe(u=>i.add(new xt(u-a).mul(n)).toNumber()),OR);return c(0,e)},nK=function(e,r,n,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-e)/(n-1)))return{step:new xt(0),tickMin:new xt(0),tickMax:new xt(0)};var a=rK(new xt(r).sub(e).div(n-1),i,s),c;e<=0&&r>=0?c=new xt(0):(c=new xt(e).add(r).div(2),c=c.sub(new xt(c).mod(a)));var u=Math.ceil(c.sub(e).div(a).toNumber()),d=Math.ceil(new xt(r).sub(c).div(a).toNumber()),h=u+d+1;return h>n?nK(e,r,n,i,s+1):(h<n&&(d=r>0?d+(n-h):d,u=r>0?u:u+(n-h)),{step:a,tickMin:c.sub(new xt(u).mul(a)),tickMax:c.add(new xt(d).mul(a))})},JSe=function(e){var[r,n]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),[c,u]=tK([r,n]);if(c===-1/0||u===1/0){var d=u===1/0?[c,...OR(0,i-1).map(()=>1/0)]:[...OR(0,i-1).map(()=>-1/0),u];return r>n?jR(d):d}if(c===u)return QSe(c,i,s);var{step:h,tickMin:p,tickMax:g}=nK(c,u,a,s,0),y=eK(p,g.add(new xt(.1).mul(h)),h);return r>n?jR(y):y},ZSe=function(e,r){var[n,i]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,c]=tK([n,i]);if(a===-1/0||c===1/0)return[n,i];if(a===c)return[a];var u=Math.max(r,2),d=rK(new xt(c).sub(a).div(u-1),s,0),h=[...eK(new xt(a),new xt(c),d),c];return s===!1&&(h=h.map(p=>Math.round(p))),n>i?jR(h):h},eCe=t=>t.rootProps.barCategoryGap,_x=t=>t.rootProps.stackOffset,iK=t=>t.rootProps.reverseStackOrder,_I=t=>t.options.chartName,EI=t=>t.rootProps.syncId,sK=t=>t.rootProps.syncMethod,AI=t=>t.options.eventEmitter,tCe=t=>t.rootProps.baseValue,Sn={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Wa={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},li={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Ex=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},rCe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Wa.angleAxisId,includeHidden:!1,name:void 0,reversed:Wa.reversed,scale:Wa.scale,tick:Wa.tick,tickCount:void 0,ticks:void 0,type:Wa.type,unit:void 0},nCe={allowDataOverflow:li.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:li.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:li.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:li.scale,tick:li.tick,tickCount:li.tickCount,ticks:void 0,type:li.type,unit:void 0},iCe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Wa.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Wa.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Wa.scale,tick:Wa.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},sCe={allowDataOverflow:li.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:li.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:li.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:li.scale,tick:li.tick,tickCount:li.tickCount,ticks:void 0,type:"category",unit:void 0},TI=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?iCe:rCe,RI=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?sCe:nCe,Ax=t=>t.polarOptions,PI=ie([bo,So,un],Zye),aK=ie([Ax,PI],(t,e)=>{if(t!=null)return kc(t.innerRadius,e,0)}),oK=ie([Ax,PI],(t,e)=>{if(t!=null)return kc(t.outerRadius,e,e*.8)}),aCe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:r}=t;return[e,r]},cK=ie([Ax],aCe);ie([TI,cK],Ex);var lK=ie([PI,aK,oK],(t,e,r)=>{if(!(t==null||e==null||r==null))return[e,r]});ie([RI,lK],Ex);var uK=ie([Rt,Ax,aK,oK,bo,So],(t,e,r,n,i,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||r==null||n==null)){var{cx:a,cy:c,startAngle:u,endAngle:d}=e;return{cx:kc(a,i,i/2),cy:kc(c,s,s/2),innerRadius:r,outerRadius:n,startAngle:u,endAngle:d,clockWise:!1}}}),kr=(t,e)=>e,Tx=(t,e,r)=>r;function II(t){return t?.id}function dK(t,e,r){var{chartData:n=[]}=e,{allowDuplicatedCategory:i,dataKey:s}=r,a=new Map;return t.forEach(c=>{var u,d=(u=c.data)!==null&&u!==void 0?u:n;if(!(d==null||d.length===0)){var h=II(c);d.forEach((p,g)=>{var y=s==null||i?g:String(Gr(p,s,null)),S=Gr(p,c.dataKey,0),x;a.has(y)?x=a.get(y):x={},Object.assign(x,{[h]:S}),a.set(y,x)})}}),Array.from(a.values())}function NI(t){return t.stackId!=null&&t.dataKey!=null}var Rx=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function Px(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function oCe(t,e){if(t.length===e.length){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return!1}var Lr=t=>{var e=Rt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Rh=t=>t.tooltip.settings.axisId;function R9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function YS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?R9(Object(r),!0).forEach(function(n){cCe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cCe(t,e,r){return(e=lCe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lCe(t){var e=uCe(t,"string");return typeof e=="symbol"?e:e+""}function uCe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MR=[0,"auto"],Vr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},hK=(t,e)=>t.cartesianAxis.xAxis[e],xo=(t,e)=>{var r=hK(t,e);return r??Vr},Fr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:MR,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Zg},fK=(t,e)=>t.cartesianAxis.yAxis[e],wo=(t,e)=>{var r=fK(t,e);return r??Fr},dCe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},OI=(t,e)=>{var r=t.cartesianAxis.zAxis[e];return r??dCe},Nn=(t,e,r)=>{switch(e){case"xAxis":return xo(t,r);case"yAxis":return wo(t,r);case"zAxis":return OI(t,r);case"angleAxis":return TI(t,r);case"radiusAxis":return RI(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},hCe=(t,e,r)=>{switch(e){case"xAxis":return xo(t,r);case"yAxis":return wo(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},sy=(t,e,r)=>{switch(e){case"xAxis":return xo(t,r);case"yAxis":return wo(t,r);case"angleAxis":return TI(t,r);case"radiusAxis":return RI(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},pK=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function mK(t,e){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===e;case"yAxis":return"yAxisId"in r&&r.yAxisId===e;case"zAxis":return"zAxisId"in r&&r.zAxisId===e;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===e;default:return!1}}}var jI=t=>t.graphicalItems.cartesianItems,fCe=ie([kr,Tx],mK),vK=(t,e,r)=>t.filter(r).filter(n=>e?.includeHidden===!0?!0:!n.hide),ay=ie([jI,Nn,fCe],vK,{memoizeOptions:{resultEqualityCheck:Px}}),gK=ie([ay],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(NI)),yK=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),pCe=ie([ay],yK),bK=t=>t.map(e=>e.data).filter(Boolean).flat(1),mCe=ie([ay],bK,{memoizeOptions:{resultEqualityCheck:Px}}),SK=(t,e)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=e;return t.length>0?t:r.slice(n,i+1)},MI=ie([mCe,wx],SK),CK=(t,e,r)=>e?.dataKey!=null?t.map(n=>({value:Gr(n,e.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>t.map(i=>({value:Gr(i,n)}))):t.map(n=>({value:n})),Ix=ie([MI,Nn,ay],CK);function xK(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function Lb(t){if(da(t)||t instanceof Date){var e=Number(t);if(ar(e))return e}}function P9(t){if(Array.isArray(t)){var e=[Lb(t[0]),Lb(t[1])];return Lc(e)?e:void 0}var r=Lb(t);if(r!=null)return[r,r]}function mo(t){return t.map(Lb).filter(ipe)}function vCe(t,e,r){return!r||typeof e!="number"||Ss(e)?[]:r.length?mo(r.flatMap(n=>{var i=Gr(t,n.dataKey),s,a;if(Array.isArray(i)?[s,a]=i:s=a=i,!(!ar(s)||!ar(a)))return[e-s,e+a]})):[]}var zr=t=>{var e=Lr(t),r=Rh(t);return sy(t,e,r)},oy=ie([zr],t=>t?.dataKey),gCe=ie([gK,wx,zr],dK),wK=(t,e,r,n)=>{var i={},s=e.reduce((a,c)=>(c.stackId==null||(a[c.stackId]==null&&(a[c.stackId]=[]),a[c.stackId].push(c)),a),i);return Object.fromEntries(Object.entries(s).map(a=>{var[c,u]=a,d=n?[...u].reverse():u,h=d.map(II);return[c,{stackedData:Ive(t,h,r),graphicalItems:d}]}))},DR=ie([gCe,gK,_x,iK],wK),_K=(t,e,r,n)=>{var{dataStartIndex:i,dataEndIndex:s}=e;if(n==null&&r!=="zAxis"){var a=Mve(t,i,s);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},yCe=ie([Nn],t=>t.allowDataOverflow),DI=t=>{var e;if(t==null||!("domain"in t))return MR;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var r=mo(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:MR},EK=ie([Nn],DI),AK=ie([EK,yCe],HW),bCe=ie([DR,$c,kr,AK],_K,{memoizeOptions:{resultEqualityCheck:Rx}}),kI=t=>t.errorBars,SCe=(t,e,r)=>t.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>xK(r,n)),XS=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var s=i.flat(),a=Math.min(...s),c=Math.max(...s);return[a,c]}},TK=(t,e,r,n,i)=>{var s,a;if(r.length>0&&t.forEach(c=>{r.forEach(u=>{var d,h,p=(d=n[u.id])===null||d===void 0?void 0:d.filter(E=>xK(i,E)),g=Gr(c,(h=e.dataKey)!==null&&h!==void 0?h:u.dataKey),y=vCe(c,g,p);if(y.length>=2){var S=Math.min(...y),x=Math.max(...y);(s==null||S<s)&&(s=S),(a==null||x>a)&&(a=x)}var w=P9(g);w!=null&&(s=s==null?w[0]:Math.min(s,w[0]),a=a==null?w[1]:Math.max(a,w[1]))})}),e?.dataKey!=null&&t.forEach(c=>{var u=P9(Gr(c,e.dataKey));u!=null&&(s=s==null?u[0]:Math.min(s,u[0]),a=a==null?u[1]:Math.max(a,u[1]))}),ar(s)&&ar(a))return[s,a]},CCe=ie([MI,Nn,pCe,kI,kr],TK,{memoizeOptions:{resultEqualityCheck:Rx}});function xCe(t){var{value:e}=t;if(da(e)||e instanceof Date)return e}var wCe=(t,e,r)=>{var n=t.map(xCe).filter(i=>i!=null);return r&&(e.dataKey==null||e.allowDuplicatedCategory&&BF(n))?lW(0,t.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},RK=t=>t.referenceElements.dots,Ph=(t,e,r)=>t.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===r:n.yAxisId===r),_Ce=ie([RK,kr,Tx],Ph),PK=t=>t.referenceElements.areas,ECe=ie([PK,kr,Tx],Ph),IK=t=>t.referenceElements.lines,ACe=ie([IK,kr,Tx],Ph),NK=(t,e)=>{var r=mo(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},TCe=ie(_Ce,kr,NK),OK=(t,e)=>{var r=mo(t.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},RCe=ie([ECe,kr],OK);function PCe(t){var e;if(t.x!=null)return mo([t.x]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.x);return r==null||r.length===0?[]:mo(r)}function ICe(t){var e;if(t.y!=null)return mo([t.y]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.y);return r==null||r.length===0?[]:mo(r)}var jK=(t,e)=>{var r=t.flatMap(n=>e==="xAxis"?PCe(n):ICe(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},NCe=ie([ACe,kr],jK),OCe=ie(TCe,NCe,RCe,(t,e,r)=>XS(t,r,e)),MK=(t,e,r,n,i,s,a,c)=>{if(r!=null)return r;var u=a==="vertical"&&c==="xAxis"||a==="horizontal"&&c==="yAxis",d=u?XS(n,s,i):XS(s,i);return FSe(e,d,t.allowDataOverflow)},jCe=ie([Nn,EK,AK,bCe,CCe,OCe,Rt,kr],MK,{memoizeOptions:{resultEqualityCheck:Rx}}),MCe=[0,1],DK=(t,e,r,n,i,s,a)=>{if(!((t==null||r==null||r.length===0)&&a===void 0)){var{dataKey:c,type:u}=t,d=ya(e,s);if(d&&c==null){var h;return lW(0,(h=r?.length)!==null&&h!==void 0?h:0)}return u==="category"?wCe(n,t,d):i==="expand"?MCe:a}},LI=ie([Nn,Rt,MI,Ix,_x,kr,jCe],DK),kK=(t,e,r,n,i)=>{if(t!=null){var{scale:s,type:a}=t;if(s==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":a==="category"?"band":"linear";if(typeof s=="string"){var c="scale".concat($g(s));return c in Hv?c:"point"}}},cy=ie([Nn,Rt,pK,_I,kr],kK);function DCe(t){if(t!=null){if(t in Hv)return Hv[t]();var e="scale".concat($g(t));if(e in Hv)return Hv[e]()}}function zI(t,e,r,n){if(!(r==null||n==null)){if(typeof t.scale=="function")return t.scale.copy().domain(r).range(n);var i=DCe(e);if(i!=null){var s=i.domain(r).range(n);return Ave(s),s}}}var LK=(t,e,r)=>{var n=DI(e);if(!(r!=="auto"&&r!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Lc(t))return JSe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Lc(t))return ZSe(t,e.tickCount,e.allowDecimals)}},UI=ie([LI,sy,cy],LK),zK=(t,e,r,n)=>{if(n!=="angleAxis"&&t?.type==="number"&&Lc(e)&&Array.isArray(r)&&r.length>0){var i=e[0],s=r[0],a=e[1],c=r[r.length-1];return[Math.min(i,s),Math.max(a,c)]}return e},kCe=ie([Nn,LI,UI,kr],zK),LCe=ie(Ix,Nn,(t,e)=>{if(!(!e||e.type!=="number")){var r=1/0,n=Array.from(mo(t.map(c=>c.value))).sort((c,u)=>c-u);if(n.length<2)return 1/0;var i=n[n.length-1]-n[0];if(i===0)return 1/0;for(var s=0;s<n.length-1;s++){var a=n[s+1]-n[s];r=Math.min(r,a)}return r/i}}),UK=ie(LCe,Rt,eCe,un,(t,e,r,n)=>n,(t,e,r,n,i)=>{if(!ar(t))return 0;var s=e==="vertical"?n.height:n.width;if(i==="gap")return t*s/2;if(i==="no-gap"){var a=kc(r,t*s),c=t*s/2;return c-a-(c-a)/s*a}return 0}),zCe=(t,e)=>{var r=xo(t,e);return r==null||typeof r.padding!="string"?0:UK(t,"xAxis",e,r.padding)},UCe=(t,e)=>{var r=wo(t,e);return r==null||typeof r.padding!="string"?0:UK(t,"yAxis",e,r.padding)},BCe=ie(xo,zCe,(t,e)=>{var r,n;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((r=i.left)!==null&&r!==void 0?r:0)+e,right:((n=i.right)!==null&&n!==void 0?n:0)+e}}),qCe=ie(wo,UCe,(t,e)=>{var r,n;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((r=i.top)!==null&&r!==void 0?r:0)+e,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+e}}),VCe=ie([un,BCe,lx,cx,(t,e,r)=>r],(t,e,r,n,i)=>{var{padding:s}=n;return i?[s.left,r.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),FCe=ie([un,Rt,qCe,lx,cx,(t,e,r)=>r],(t,e,r,n,i,s)=>{var{padding:a}=i;return s?[n.height-a.bottom,a.top]:e==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),ly=(t,e,r,n)=>{var i;switch(e){case"xAxis":return VCe(t,r,n);case"yAxis":return FCe(t,r,n);case"zAxis":return(i=OI(t,r))===null||i===void 0?void 0:i.range;case"angleAxis":return cK(t);case"radiusAxis":return lK(t,r);default:return}},BK=ie([Nn,ly],Ex),Ih=ie([Nn,cy,kCe,BK],zI);ie([ay,kI,kr],SCe);function qK(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var Nx=(t,e)=>e,Ox=(t,e,r)=>r,HCe=ie(ax,Nx,Ox,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(qK)),WCe=ie(ox,Nx,Ox,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(qK)),VK=(t,e)=>({width:t.width,height:e.height}),KCe=(t,e)=>{var r=typeof e.width=="number"?e.width:Zg;return{width:r,height:t.height}},GCe=ie(un,xo,VK),$Ce=(t,e,r)=>{switch(e){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},YCe=(t,e,r)=>{switch(e){case"left":return t.left;case"right":return r-t.right;default:return 0}},XCe=ie(So,un,HCe,Nx,Ox,(t,e,r,n,i)=>{var s={},a;return r.forEach(c=>{var u=VK(e,c);a==null&&(a=$Ce(e,n,t));var d=n==="top"&&!i||n==="bottom"&&i;s[c.id]=a-Number(d)*u.height,a+=(d?-1:1)*u.height}),s}),QCe=ie(bo,un,WCe,Nx,Ox,(t,e,r,n,i)=>{var s={},a;return r.forEach(c=>{var u=KCe(e,c);a==null&&(a=YCe(e,n,t));var d=n==="left"&&!i||n==="right"&&i;s[c.id]=a-Number(d)*u.width,a+=(d?-1:1)*u.width}),s}),JCe=(t,e)=>{var r=xo(t,e);if(r!=null)return XCe(t,r.orientation,r.mirror)},ZCe=ie([un,xo,JCe,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var i=r?.[n];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),exe=(t,e)=>{var r=wo(t,e);if(r!=null)return QCe(t,r.orientation,r.mirror)},txe=ie([un,wo,exe,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var i=r?.[n];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),rxe=ie(un,wo,(t,e)=>{var r=typeof e.width=="number"?e.width:Zg;return{width:r,height:t.height}}),FK=(t,e,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:s,dataKey:a}=r,c=ya(t,n),u=e.map(d=>d.value);if(a&&c&&s==="category"&&i&&BF(u))return u}},BI=ie([Rt,Ix,Nn,kr],FK),HK=(t,e,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:s}=r,a=ya(t,n);if(a&&(i==="number"||s!=="auto"))return e.map(c=>c.value)}},qI=ie([Rt,Ix,sy,kr],HK),I9=ie([Rt,hCe,cy,Ih,BI,qI,ly,UI,kr],(t,e,r,n,i,s,a,c,u)=>{if(e!=null){var d=ya(t,u);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:u,categoricalDomain:s,duplicateDomain:i,isCategorical:d,niceTicks:c,range:a,realScaleType:r,scale:n}}}),nxe=(t,e,r,n,i,s,a,c,u)=>{if(!(e==null||n==null)){var d=ya(t,u),{type:h,ticks:p,tickCount:g}=e,y=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,S=h==="category"&&n.bandwidth?n.bandwidth()/y:0;S=u==="angleAxis"&&s!=null&&s.length>=2?Fi(s[0]-s[1])*2*S:S;var x=p||i;if(x){var w=x.map((E,R)=>{var T=a?a.indexOf(E):E;return{index:R,coordinate:n(T)+S,value:E,offset:S}});return w.filter(E=>ar(E.coordinate))}return d&&c?c.map((E,R)=>({coordinate:n(E)+S,value:E,index:R,offset:S})).filter(E=>ar(E.coordinate)):n.ticks?n.ticks(g).map(E=>({coordinate:n(E)+S,value:E,offset:S})):n.domain().map((E,R)=>({coordinate:n(E)+S,value:a?a[E]:E,index:R,offset:S}))}},WK=ie([Rt,sy,cy,Ih,UI,ly,BI,qI,kr],nxe),ixe=(t,e,r,n,i,s,a)=>{if(!(e==null||r==null||n==null||n[0]===n[1])){var c=ya(t,a),{tickCount:u}=e,d=0;return d=a==="angleAxis"&&n?.length>=2?Fi(n[0]-n[1])*2*d:d,c&&s?s.map((h,p)=>({coordinate:r(h)+d,value:h,index:p,offset:d})):r.ticks?r.ticks(u).map(h=>({coordinate:r(h)+d,value:h,offset:d})):r.domain().map((h,p)=>({coordinate:r(h)+d,value:i?i[h]:h,index:p,offset:d}))}},jx=ie([Rt,sy,Ih,ly,BI,qI,kr],ixe),Mx=ie(Nn,Ih,(t,e)=>{if(!(t==null||e==null))return YS(YS({},t),{},{scale:e})}),sxe=ie([Nn,cy,LI,BK],zI);ie((t,e,r)=>OI(t,r),sxe,(t,e)=>{if(!(t==null||e==null))return YS(YS({},t),{},{scale:e})});var axe=ie([Rt,ax,ox],(t,e,r)=>{switch(t){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),KK=t=>t.options.defaultTooltipEventType,GK=t=>t.options.validateTooltipEventTypes;function $K(t,e,r){if(t==null)return e;var n=t?"axis":"item";return r==null?e:r.includes(n)?n:e}function VI(t,e){var r=KK(t),n=GK(t);return $K(e,r,n)}function oxe(t){return Oe(e=>VI(e,t))}var YK=(t,e)=>{var r,n=Number(e);if(!(Ss(n)||e==null))return n>=0?t==null||(r=t[n])===null||r===void 0?void 0:r.value:void 0},cxe=t=>t.tooltip.settings,bc={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},lxe={itemInteraction:{click:bc,hover:bc},axisInteraction:{click:bc,hover:bc},keyboardInteraction:bc,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},XK=Yn({name:"tooltip",initialState:lxe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Ft()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:r,next:n}=e.payload,i=ys(t).tooltipItemPayloads.indexOf(r);i>-1&&(t.tooltipItemPayloads[i]=n)},prepare:Ft()},removeTooltipEntrySettings:{reducer(t,e){var r=ys(t).tooltipItemPayloads.indexOf(e.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},prepare:Ft()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:uxe,replaceTooltipEntrySettings:dxe,removeTooltipEntrySettings:hxe,setTooltipSettingsState:fxe,setActiveMouseOverItemIndex:pxe,mouseLeaveItem:WNe,mouseLeaveChart:QK,setActiveClickItemIndex:KNe,setMouseOverAxisIndex:JK,setMouseClickAxisIndex:mxe,setSyncInteraction:kR,setKeyboardInteraction:LR}=XK.actions,vxe=XK.reducer;function N9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?N9(Object(r),!0).forEach(function(n){gxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gxe(t,e,r){return(e=yxe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yxe(t){var e=bxe(t,"string");return typeof e=="symbol"?e:e+""}function bxe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sxe(t,e,r){return e==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function Cxe(t){return t.index!=null}var ZK=(t,e,r,n)=>{if(e==null)return bc;var i=Sxe(t,e,r);if(i==null)return bc;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(Cxe(i)){if(s)return pb(pb({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return pb(pb({},bc),{},{coordinate:i.coordinate})};function xxe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var r=Number(t);return Number.isFinite(r)?r:void 0}function wxe(t,e){var r=xxe(t),n=e[0],i=e[1];if(r===void 0)return!1;var s=Math.min(n,i),a=Math.max(n,i);return r>=s&&r<=a}function _xe(t,e,r){if(r==null||e==null)return!0;var n=Gr(t,e);return n==null||!Lc(r)?!0:wxe(n,r)}var FI=(t,e,r,n)=>{var i=t?.index;if(i==null)return null;var s=Number(i);if(!ar(s))return i;var a=0,c=1/0;e.length>0&&(c=e.length-1);var u=Math.max(a,Math.min(s,c)),d=e[u];return d==null||_xe(d,r,n)?String(u):null},eG=(t,e,r,n,i,s,a,c)=>{if(!(s==null||c==null)){var u=a[0],d=u==null?void 0:c(u.positions,s);if(d!=null)return d;var h=i?.[Number(s)];if(h)switch(r){case"horizontal":return{x:h.coordinate,y:(n.top+e)/2};default:return{x:(n.left+t)/2,y:h.coordinate}}}},tG=(t,e,r,n)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return r==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&n!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(s=>{var a;return((a=s.settings)===null||a===void 0?void 0:a.dataKey)===i})},uy=t=>t.options.tooltipPayloadSearcher,Nh=t=>t.tooltip;function O9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function j9(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?O9(Object(r),!0).forEach(function(n){Exe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Exe(t,e,r){return(e=Axe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Axe(t){var e=Txe(t,"string");return typeof e=="symbol"?e:e+""}function Txe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rxe(t,e){return t??e}var rG=(t,e,r,n,i,s,a)=>{if(!(e==null||s==null)){var{chartData:c,computedData:u,dataStartIndex:d,dataEndIndex:h}=r,p=[];return t.reduce((g,y)=>{var S,{dataDefinedOnItem:x,settings:w}=y,E=Rxe(x,c),R=Array.isArray(E)?DH(E,d,h):E,T=(S=w?.dataKey)!==null&&S!==void 0?S:n,M=w?.nameKey,D;if(n&&Array.isArray(R)&&!Array.isArray(R[0])&&a==="axis"?D=qF(R,n,i):D=s(R,e,u,M),Array.isArray(D))D.forEach(j=>{var O=j9(j9({},w),{},{name:j.name,unit:j.unit,color:void 0,fill:void 0});g.push(ez({tooltipEntrySettings:O,dataKey:j.dataKey,payload:j.payload,value:Gr(j.payload,j.dataKey),name:j.name}))});else{var z;g.push(ez({tooltipEntrySettings:w,dataKey:T,payload:D,value:Gr(D,T),name:(z=Gr(D,M))!==null&&z!==void 0?z:w?.name}))}return g},p)}},HI=ie([zr,Rt,pK,_I,Lr],kK),Pxe=ie([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),Ixe=ie([Lr,Rh],mK),dy=ie([Pxe,zr,Ixe],vK,{memoizeOptions:{resultEqualityCheck:Px}}),Nxe=ie([dy],t=>t.filter(NI)),Oxe=ie([dy],bK,{memoizeOptions:{resultEqualityCheck:Px}}),Oh=ie([Oxe,$c],SK),jxe=ie([Nxe,$c,zr],dK),WI=ie([Oh,zr,dy],CK),nG=ie([zr],DI),Mxe=ie([zr],t=>t.allowDataOverflow),iG=ie([nG,Mxe],HW),Dxe=ie([dy],t=>t.filter(NI)),kxe=ie([jxe,Dxe,_x,iK],wK),Lxe=ie([kxe,$c,Lr,iG],_K),zxe=ie([dy],yK),Uxe=ie([Oh,zr,zxe,kI,Lr],TK,{memoizeOptions:{resultEqualityCheck:Rx}}),Bxe=ie([RK,Lr,Rh],Ph),qxe=ie([Bxe,Lr],NK),Vxe=ie([PK,Lr,Rh],Ph),Fxe=ie([Vxe,Lr],OK),Hxe=ie([IK,Lr,Rh],Ph),Wxe=ie([Hxe,Lr],jK),Kxe=ie([qxe,Wxe,Fxe],XS),Gxe=ie([zr,nG,iG,Lxe,Uxe,Kxe,Rt,Lr],MK),hy=ie([zr,Rt,Oh,WI,_x,Lr,Gxe],DK),$xe=ie([hy,zr,HI],LK),Yxe=ie([zr,hy,$xe,Lr],zK),sG=t=>{var e=Lr(t),r=Rh(t),n=!1;return ly(t,e,r,n)},aG=ie([zr,sG],Ex),oG=ie([zr,HI,Yxe,aG],zI),Xxe=ie([Rt,WI,zr,Lr],FK),Qxe=ie([Rt,WI,zr,Lr],HK),Jxe=(t,e,r,n,i,s,a,c)=>{if(e){var{type:u}=e,d=ya(t,c);if(n){var h=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,p=u==="category"&&n.bandwidth?n.bandwidth()/h:0;return p=c==="angleAxis"&&i!=null&&i?.length>=2?Fi(i[0]-i[1])*2*p:p,d&&a?a.map((g,y)=>({coordinate:n(g)+p,value:g,index:y,offset:p})):n.domain().map((g,y)=>({coordinate:n(g)+p,value:s?s[g]:g,index:y,offset:p}))}}},_o=ie([Rt,zr,HI,oG,sG,Xxe,Qxe,Lr],Jxe),KI=ie([KK,GK,cxe],(t,e,r)=>$K(r.shared,t,e)),cG=t=>t.tooltip.settings.trigger,GI=t=>t.tooltip.settings.defaultIndex,fy=ie([Nh,KI,cG,GI],ZK),_g=ie([fy,Oh,oy,hy],FI),lG=ie([_o,_g],YK),Zxe=ie([fy],t=>{if(t)return t.dataKey});ie([fy],t=>{if(t)return t.graphicalItemId});var uG=ie([Nh,KI,cG,GI],tG),e1e=ie([bo,So,Rt,un,_o,GI,uG,uy],eG),t1e=ie([fy,e1e],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),r1e=ie([fy],t=>t.active),n1e=ie([uG,_g,$c,oy,lG,uy,KI],rG),i1e=ie([n1e],t=>{if(t!=null){var e=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(e))}});function M9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function D9(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?M9(Object(r),!0).forEach(function(n){s1e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function s1e(t,e,r){return(e=a1e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a1e(t){var e=o1e(t,"string");return typeof e=="symbol"?e:e+""}function o1e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var c1e=()=>Oe(zr),l1e=()=>{var t=c1e(),e=Oe(_o),r=Oe(oG);return ih(!t||!r?void 0:D9(D9({},t),{},{scale:r}),e)};function k9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Id(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?k9(Object(r),!0).forEach(function(n){u1e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function u1e(t,e,r){return(e=d1e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d1e(t){var e=h1e(t,"string");return typeof e=="symbol"?e:e+""}function h1e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var f1e=(t,e,r,n)=>{var i=e.find(s=>s&&s.index===r);if(i){if(t==="horizontal")return{x:i.coordinate,y:n.chartY};if(t==="vertical")return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},p1e=(t,e,r,n)=>{var i=e.find(d=>d&&d.index===r);if(i){if(t==="centric"){var s=i.coordinate,{radius:a}=n;return Id(Id(Id({},n),cn(n.cx,n.cy,a,s)),{},{angle:s,radius:a})}var c=i.coordinate,{angle:u}=n;return Id(Id(Id({},n),cn(n.cx,n.cy,c,u)),{},{angle:u,radius:c})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function m1e(t,e){var{chartX:r,chartY:n}=t;return r>=e.left&&r<=e.left+e.width&&n>=e.top&&n<=e.top+e.height}var dG=(t,e,r,n,i)=>{var s,a=-1,c=(s=e?.length)!==null&&s!==void 0?s:0;if(c<=1||t==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var u=0;u<c;u++){var d=u>0?r[u-1].coordinate:r[c-1].coordinate,h=r[u].coordinate,p=u>=c-1?r[0].coordinate:r[u+1].coordinate,g=void 0;if(Fi(h-d)!==Fi(p-h)){var y=[];if(Fi(p-h)===Fi(i[1]-i[0])){g=p;var S=h+i[1]-i[0];y[0]=Math.min(S,(S+d)/2),y[1]=Math.max(S,(S+d)/2)}else{g=d;var x=p+i[1]-i[0];y[0]=Math.min(h,(x+h)/2),y[1]=Math.max(h,(x+h)/2)}var w=[Math.min(h,(g+h)/2),Math.max(h,(g+h)/2)];if(t>w[0]&&t<=w[1]||t>=y[0]&&t<=y[1]){({index:a}=r[u]);break}}else{var E=Math.min(d,p),R=Math.max(d,p);if(t>(E+h)/2&&t<=(R+h)/2){({index:a}=r[u]);break}}}else if(e){for(var T=0;T<c;T++)if(T===0&&t<=(e[T].coordinate+e[T+1].coordinate)/2||T>0&&T<c-1&&t>(e[T].coordinate+e[T-1].coordinate)/2&&t<=(e[T].coordinate+e[T+1].coordinate)/2||T===c-1&&t>(e[T].coordinate+e[T-1].coordinate)/2){({index:a}=e[T]);break}}return a},hG=()=>Oe(_I),$I=(t,e)=>e,fG=(t,e,r)=>r,YI=(t,e,r,n)=>n,v1e=ie(_o,t=>XC(t,e=>e.coordinate)),XI=ie([Nh,$I,fG,YI],ZK),QI=ie([XI,Oh,oy,hy],FI),g1e=(t,e,r)=>{if(e!=null){var n=Nh(t);return e==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},pG=ie([Nh,$I,fG,YI],tG),QS=ie([bo,So,Rt,un,_o,YI,pG,uy],eG),y1e=ie([XI,QS],(t,e)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:e}),mG=ie([_o,QI],YK),b1e=ie([pG,QI,$c,oy,mG,uy,$I],rG),S1e=ie([XI,QI],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),C1e=(t,e,r,n,i,s,a)=>{if(!(!t||!r||!n||!i)&&m1e(t,a)){var c=Dve(t,e),u=dG(c,s,i,r,n),d=f1e(e,i,u,t);return{activeIndex:String(u),activeCoordinate:d}}},x1e=(t,e,r,n,i,s,a)=>{if(!(!t||!n||!i||!s||!r)){var c=i0e(t,r);if(c){var u=kve(c,e),d=dG(u,a,s,n,i),h=p1e(e,s,d,c);return{activeIndex:String(d),activeCoordinate:h}}}},w1e=(t,e,r,n,i,s,a,c)=>{if(!(!t||!e||!n||!i||!s))return e==="horizontal"||e==="vertical"?C1e(t,e,n,i,s,a,c):x1e(t,e,r,n,i,s,a)},_1e=ie(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,r)=>r,(t,e,r)=>{if(e!=null){var n=t[e];if(n!=null)return r?n.panoramaElementId:n.elementId}}),E1e=ie(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(n=>parseInt(n,10)).concat(Object.values(Sn)),r=Array.from(new Set(e));return r.sort((n,i)=>n-i)},{memoizeOptions:{resultEqualityCheck:oCe}});function L9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function z9(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?L9(Object(r),!0).forEach(function(n){A1e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function A1e(t,e,r){return(e=T1e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function T1e(t){var e=R1e(t,"string");return typeof e=="symbol"?e:e+""}function R1e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var P1e={},I1e={zIndexMap:Object.values(Sn).reduce((t,e)=>z9(z9({},t),{},{[e]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),P1e)},N1e=new Set(Object.values(Sn));function O1e(t){return N1e.has(t)}var vG=Yn({name:"zIndex",initialState:I1e,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]?t.zIndexMap[r].consumers+=1:t.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Ft()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(t.zIndexMap[r].consumers-=1,t.zIndexMap[r].consumers<=0&&!O1e(r)&&delete t.zIndexMap[r])},prepare:Ft()},registerZIndexPortalId:{reducer:(t,e)=>{var{zIndex:r,elementId:n,isPanorama:i}=e.payload;t.zIndexMap[r]?i?t.zIndexMap[r].panoramaElementId=n:t.zIndexMap[r].elementId=n:t.zIndexMap[r]={consumers:0,elementId:i?void 0:n,panoramaElementId:i?n:void 0}},prepare:Ft()},unregisterZIndexPortalId:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(e.payload.isPanorama?t.zIndexMap[r].panoramaElementId=void 0:t.zIndexMap[r].elementId=void 0)},prepare:Ft()}}}),{registerZIndexPortal:j1e,unregisterZIndexPortal:M1e,registerZIndexPortalId:D1e,unregisterZIndexPortalId:k1e}=vG.actions,L1e=vG.reducer;function ba(t){var{zIndex:e,children:r}=t,n=vge(),i=n&&e!==void 0&&e!==0,s=wn(),a=Tr();A.useLayoutEffect(()=>i?(a(j1e({zIndex:e})),()=>{a(M1e({zIndex:e}))}):Yg,[a,e,i]);var c=Oe(d=>_1e(d,e,s));if(!i)return r;if(!c)return null;var u=document.getElementById(c);return u?uC.createPortal(r,u):null}function zR(){return zR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zR.apply(null,arguments)}function U9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function mb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?U9(Object(r),!0).forEach(function(n){z1e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function z1e(t,e,r){return(e=U1e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function U1e(t){var e=B1e(t,"string");return typeof e=="symbol"?e:e+""}function B1e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function q1e(t){var{cursor:e,cursorComp:r,cursorProps:n}=t;return A.isValidElement(e)?A.cloneElement(e,n):A.createElement(r,n)}function V1e(t){var e,{coordinate:r,payload:n,index:i,offset:s,tooltipAxisBandSize:a,layout:c,cursor:u,tooltipEventType:d,chartName:h}=t,p=r,g=n,y=i;if(!u||!p||h!=="ScatterChart"&&d!=="axis")return null;var S,x,w;if(h==="ScatterChart")S=p,x=yye,w=Sn.cursorLine;else if(h==="BarChart")S=bye(c,p,s,a),x=sW,w=Sn.cursorRectangle;else if(c==="radial"&&FF(p)){var{cx:E,cy:R,radius:T,startAngle:M,endAngle:D}=aW(p);S={cx:E,cy:R,startAngle:M,endAngle:D,innerRadius:T,outerRadius:T},x=cW,w=Sn.cursorLine}else S={points:c0e(c,p,s)},x=Jv,w=Sn.cursorLine;var z=typeof u=="object"&&"className"in u?u.className:void 0,j=mb(mb(mb(mb({stroke:"#ccc",pointerEvents:"none"},s),S),WC(u)),{},{payload:g,payloadIndex:y,className:wt("recharts-tooltip-cursor",z)});return A.createElement(ba,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:w},A.createElement(q1e,{cursor:u,cursorComp:x,cursorProps:j}))}function F1e(t){var e=l1e(),r=WH(),n=wh(),i=hG();return e==null||r==null||n==null||i==null?null:A.createElement(V1e,zR({},t,{offset:r,layout:n,tooltipAxisBandSize:e,chartName:i}))}var gG=A.createContext(null),H1e=()=>A.useContext(gG),FA={exports:{}},B9;function W1e(){return B9||(B9=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(u,d,h){this.fn=u,this.context=d,this.once=h||!1}function s(u,d,h,p,g){if(typeof h!="function")throw new TypeError("The listener must be a function");var y=new i(h,p||u,g),S=r?r+d:d;return u._events[S]?u._events[S].fn?u._events[S]=[u._events[S],y]:u._events[S].push(y):(u._events[S]=y,u._eventsCount++),u}function a(u,d){--u._eventsCount===0?u._events=new n:delete u._events[d]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var d=[],h,p;if(this._eventsCount===0)return d;for(p in h=this._events)e.call(h,p)&&d.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},c.prototype.listeners=function(d){var h=r?r+d:d,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,y=p.length,S=new Array(y);g<y;g++)S[g]=p[g].fn;return S},c.prototype.listenerCount=function(d){var h=r?r+d:d,p=this._events[h];return p?p.fn?1:p.length:0},c.prototype.emit=function(d,h,p,g,y,S){var x=r?r+d:d;if(!this._events[x])return!1;var w=this._events[x],E=arguments.length,R,T;if(w.fn){switch(w.once&&this.removeListener(d,w.fn,void 0,!0),E){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,h),!0;case 3:return w.fn.call(w.context,h,p),!0;case 4:return w.fn.call(w.context,h,p,g),!0;case 5:return w.fn.call(w.context,h,p,g,y),!0;case 6:return w.fn.call(w.context,h,p,g,y,S),!0}for(T=1,R=new Array(E-1);T<E;T++)R[T-1]=arguments[T];w.fn.apply(w.context,R)}else{var M=w.length,D;for(T=0;T<M;T++)switch(w[T].once&&this.removeListener(d,w[T].fn,void 0,!0),E){case 1:w[T].fn.call(w[T].context);break;case 2:w[T].fn.call(w[T].context,h);break;case 3:w[T].fn.call(w[T].context,h,p);break;case 4:w[T].fn.call(w[T].context,h,p,g);break;default:if(!R)for(D=1,R=new Array(E-1);D<E;D++)R[D-1]=arguments[D];w[T].fn.apply(w[T].context,R)}}return!0},c.prototype.on=function(d,h,p){return s(this,d,h,p,!1)},c.prototype.once=function(d,h,p){return s(this,d,h,p,!0)},c.prototype.removeListener=function(d,h,p,g){var y=r?r+d:d;if(!this._events[y])return this;if(!h)return a(this,y),this;var S=this._events[y];if(S.fn)S.fn===h&&(!g||S.once)&&(!p||S.context===p)&&a(this,y);else{for(var x=0,w=[],E=S.length;x<E;x++)(S[x].fn!==h||g&&!S[x].once||p&&S[x].context!==p)&&w.push(S[x]);w.length?this._events[y]=w.length===1?w[0]:w:a(this,y)}return this},c.prototype.removeAllListeners=function(d){var h;return d?(h=r?r+d:d,this._events[h]&&a(this,h)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c})(FA)),FA.exports}var K1e=W1e();const G1e=vo(K1e);var Eg=new G1e,UR="recharts.syncEvent.tooltip",q9="recharts.syncEvent.brush";function yG(t,e){if(e){var r=Number.parseInt(e,10);if(!Ss(r))return t?.[r]}}var $1e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},bG=Yn({name:"options",initialState:$1e,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Y1e=bG.reducer,{createEventEmitter:X1e}=bG.actions;function Q1e(t){return t.tooltip.syncInteraction}var J1e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},SG=Yn({name:"chartData",initialState:J1e,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:r,endIndex:n}=e.payload;r!=null&&(t.dataStartIndex=r),n!=null&&(t.dataEndIndex=n)}}}),{setChartData:V9,setDataStartEndIndexes:Z1e,setComputedData:GNe}=SG.actions,ewe=SG.reducer,twe=["x","y"];function F9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Nd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?F9(Object(r),!0).forEach(function(n){rwe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rwe(t,e,r){return(e=nwe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nwe(t){var e=iwe(t,"string");return typeof e=="symbol"?e:e+""}function iwe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function swe(t,e){if(t==null)return{};var r,n,i=awe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function awe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function owe(){var t=Oe(EI),e=Oe(AI),r=Tr(),n=Oe(sK),i=Oe(_o),s=wh(),a=ux(),c=Oe(u=>u.rootProps.className);A.useEffect(()=>{if(t==null)return Yg;var u=(d,h,p)=>{if(e!==p&&t===d){if(n==="index"){var g;if(a&&h!==null&&h!==void 0&&(g=h.payload)!==null&&g!==void 0&&g.coordinate&&h.payload.sourceViewBox){var y=h.payload.coordinate,{x:S,y:x}=y,w=swe(y,twe),{x:E,y:R,width:T,height:M}=h.payload.sourceViewBox,D=Nd(Nd({},w),{},{x:a.x+(T?(S-E)/T:0)*a.width,y:a.y+(M?(x-R)/M:0)*a.height});r(Nd(Nd({},h),{},{payload:Nd(Nd({},h.payload),{},{coordinate:D})}))}else r(h);return}if(i!=null){var z;if(typeof n=="function"){var j={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},O=n(i,j);z=i[O]}else n==="value"&&(z=i.find(Y=>String(Y.value)===h.payload.label));var{coordinate:L}=h.payload;if(z==null||h.payload.active===!1||L==null||a==null){r(kR({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:V,y:U}=L,F=Math.min(V,a.x+a.width),q=Math.min(U,a.y+a.height),ve={x:s==="horizontal"?z.coordinate:F,y:s==="horizontal"?q:z.coordinate},Ae=kR({active:h.payload.active,coordinate:ve,dataKey:h.payload.dataKey,index:String(z.index),label:h.payload.label,sourceViewBox:h.payload.sourceViewBox,graphicalItemId:h.payload.graphicalItemId});r(Ae)}}};return Eg.on(UR,u),()=>{Eg.off(UR,u)}},[c,r,e,t,n,i,s,a])}function cwe(){var t=Oe(EI),e=Oe(AI),r=Tr();A.useEffect(()=>{if(t==null)return Yg;var n=(i,s,a)=>{e!==a&&t===i&&r(Z1e(s))};return Eg.on(q9,n),()=>{Eg.off(q9,n)}},[r,e,t])}function lwe(){var t=Tr();A.useEffect(()=>{t(X1e())},[t]),owe(),cwe()}function uwe(t,e,r,n,i,s){var a=Oe(y=>g1e(y,t,e)),c=Oe(AI),u=Oe(EI),d=Oe(sK),h=Oe(Q1e),p=h?.active,g=ux();A.useEffect(()=>{if(!p&&u!=null&&c!=null){var y=kR({active:s,coordinate:r,dataKey:a,index:i,label:typeof n=="number"?String(n):n,sourceViewBox:g,graphicalItemId:void 0});Eg.emit(UR,u,y,c)}},[p,r,a,i,n,c,u,d,s,g])}function H9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function W9(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?H9(Object(r),!0).forEach(function(n){dwe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dwe(t,e,r){return(e=hwe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hwe(t){var e=fwe(t,"string");return typeof e=="symbol"?e:e+""}function fwe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pwe(t){return t.dataKey}function mwe(t,e){return A.isValidElement(t)?A.cloneElement(t,e):typeof t=="function"?A.createElement(t,e):A.createElement(Qge,e)}var K9=[],vwe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function CG(t){var e,r,n=$r(t,vwe),{active:i,allowEscapeViewBox:s,animationDuration:a,animationEasing:c,content:u,filterNull:d,isAnimationActive:h,offset:p,payloadUniqBy:g,position:y,reverseDirection:S,useTranslate3d:x,wrapperStyle:w,cursor:E,shared:R,trigger:T,defaultIndex:M,portal:D,axisId:z}=n,j=Tr(),O=typeof M=="number"?String(M):M;A.useEffect(()=>{j(fxe({shared:R,trigger:T,axisId:z,active:i,defaultIndex:O}))},[j,R,T,z,i,O]);var L=ux(),V=eW(),U=oxe(R),{activeIndex:F,isActive:q}=(e=Oe(we=>S1e(we,U,T,O)))!==null&&e!==void 0?e:{},ve=Oe(we=>b1e(we,U,T,O)),Ae=Oe(we=>mG(we,U,T,O)),Y=Oe(we=>y1e(we,U,T,O)),ae=ve,pe=H1e(),me=(r=i??q)!==null&&r!==void 0?r:!1,[_e,H]=sH([ae,me]),G=U==="axis"?Ae:void 0;uwe(U,T,Y,G,F,me);var le=D??pe;if(le==null||L==null||U==null)return null;var X=ae??K9;me||(X=K9),d&&X.length&&(X=eH(X.filter(we=>we.value!=null&&(we.hide!==!0||n.includeHidden)),g,pwe));var ge=X.length>0,be=A.createElement(iye,{allowEscapeViewBox:s,animationDuration:a,animationEasing:c,isAnimationActive:h,active:me,coordinate:Y,hasPayload:ge,offset:p,position:y,reverseDirection:S,useTranslate3d:x,viewBox:L,wrapperStyle:w,lastBoundingBox:_e,innerRef:H,hasPortalFromProps:!!D},mwe(u,W9(W9({},n),{},{payload:X,label:G,active:me,activeIndex:F,coordinate:Y,accessibilityLayer:V})));return A.createElement(A.Fragment,null,uC.createPortal(be,le),me&&A.createElement(F1e,{cursor:E,tooltipEventType:U,coordinate:Y,payload:X,index:F}))}function gwe(t,e,r){return(e=ywe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ywe(t){var e=bwe(t,"string");return typeof e=="symbol"?e:e+""}function bwe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Swe{constructor(e){gwe(this,"cache",new Map),this.maxSize=e}get(e){var r=this.cache.get(e);return r!==void 0&&(this.cache.delete(e),this.cache.set(e,r)),r}set(e,r){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(e,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function G9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Cwe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?G9(Object(r),!0).forEach(function(n){xwe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xwe(t,e,r){return(e=wwe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wwe(t){var e=_we(t,"string");return typeof e=="symbol"?e:e+""}function _we(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ewe={cacheSize:2e3,enableCache:!0},xG=Cwe({},Ewe),$9=new Swe(xG.cacheSize),Awe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Y9="recharts_measurement_span";function Twe(t,e){var r=e.fontSize||"",n=e.fontFamily||"",i=e.fontWeight||"",s=e.fontStyle||"",a=e.letterSpacing||"",c=e.textTransform||"";return"".concat(t,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(s,"|").concat(a,"|").concat(c)}var X9=(t,e)=>{try{var r=document.getElementById(Y9);r||(r=document.createElement("span"),r.setAttribute("id",Y9),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,Awe,e),r.textContent="".concat(t);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Zv=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||_h.isSsr)return{width:0,height:0};if(!xG.enableCache)return X9(e,r);var n=Twe(e,r),i=$9.get(n);if(i)return i;var s=X9(e,r);return $9.set(n,s),s},Q9=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,J9=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Rwe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Pwe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,wG={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Iwe=Object.keys(wG),zd="NaN";function Nwe(t,e){return t*wG[e]}class Bn{static parse(e){var r,[,n,i]=(r=Pwe.exec(e))!==null&&r!==void 0?r:[];return new Bn(parseFloat(n),i??"")}constructor(e,r){this.num=e,this.unit=r,this.num=e,this.unit=r,Ss(e)&&(this.unit=""),r!==""&&!Rwe.test(r)&&(this.num=NaN,this.unit=""),Iwe.includes(r)&&(this.num=Nwe(e,r),this.unit="px")}add(e){return this.unit!==e.unit?new Bn(NaN,""):new Bn(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Bn(NaN,""):new Bn(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Bn(NaN,""):new Bn(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Bn(NaN,""):new Bn(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ss(this.num)}}function _G(t){if(t.includes(zd))return zd;for(var e=t;e.includes("*")||e.includes("/");){var r,[,n,i,s]=(r=Q9.exec(e))!==null&&r!==void 0?r:[],a=Bn.parse(n??""),c=Bn.parse(s??""),u=i==="*"?a.multiply(c):a.divide(c);if(u.isNaN())return zd;e=e.replace(Q9,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,[,h,p,g]=(d=J9.exec(e))!==null&&d!==void 0?d:[],y=Bn.parse(h??""),S=Bn.parse(g??""),x=p==="+"?y.add(S):y.subtract(S);if(x.isNaN())return zd;e=e.replace(J9,x.toString())}return e}var Z9=/\(([^()]*)\)/;function Owe(t){for(var e=t,r;(r=Z9.exec(e))!=null;){var[,n]=r;e=e.replace(Z9,_G(n))}return e}function jwe(t){var e=t.replace(/\s+/g,"");return e=Owe(e),e=_G(e),e}function Mwe(t){try{return jwe(t)}catch{return zd}}function HA(t){var e=Mwe(t.slice(5,-1));return e===zd?"":e}var Dwe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],kwe=["dx","dy","angle","className","breakAll"];function BR(){return BR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},BR.apply(null,arguments)}function eU(t,e){if(t==null)return{};var r,n,i=Lwe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Lwe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var EG=/[ \f\n\r\t\v\u2028\u2029]+/,AG=t=>{var{children:e,breakAll:r,style:n}=t;try{var i=[];Mr(e)||(r?i=e.toString().split(""):i=e.toString().split(EG));var s=i.map(c=>({word:c,width:Zv(c,n).width})),a=r?0:Zv("",n).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}};function zwe(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var TG=(t,e,r,n)=>t.reduce((i,s)=>{var{word:a,width:c}=s,u=i[i.length-1];if(u&&c!=null&&(e==null||n||u.width+c+r<Number(e)))u.words.push(a),u.width+=c+r;else{var d={words:[a],width:c};i.push(d)}return i},[]),RG=t=>t.reduce((e,r)=>e.width>r.width?e:r),Uwe="",tU=(t,e,r,n,i,s,a,c)=>{var u=t.slice(0,e),d=AG({breakAll:r,style:n,children:u+Uwe});if(!d)return[!1,[]];var h=TG(d.wordsWithComputedWidth,s,a,c),p=h.length>i||RG(h).width>Number(s);return[p,h]},Bwe=(t,e,r,n,i)=>{var{maxLines:s,children:a,style:c,breakAll:u}=t,d=Ne(s),h=String(a),p=TG(e,n,r,i);if(!d||i)return p;var g=p.length>s||RG(p).width>Number(n);if(!g)return p;for(var y=0,S=h.length-1,x=0,w;y<=S&&x<=h.length-1;){var E=Math.floor((y+S)/2),R=E-1,[T,M]=tU(h,R,u,c,s,n,r,i),[D]=tU(h,E,u,c,s,n,r,i);if(!T&&!D&&(y=E+1),T&&D&&(S=E-1),!T&&D){w=M;break}x++}return w||p},rU=t=>{var e=Mr(t)?[]:t.toString().split(EG);return[{words:e,width:void 0}]},qwe=t=>{var{width:e,scaleToFit:r,children:n,style:i,breakAll:s,maxLines:a}=t;if((e||r)&&!_h.isSsr){var c,u,d=AG({breakAll:s,children:n,style:i});if(d){var{wordsWithComputedWidth:h,spaceWidth:p}=d;c=h,u=p}else return rU(n);return Bwe({breakAll:s,children:n,maxLines:a,style:i},c,u,e,!!r)}return rU(n)},PG="#808080",Vwe={angle:0,breakAll:!1,capHeight:"0.71em",fill:PG,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},JI=A.forwardRef((t,e)=>{var r=$r(t,Vwe),{x:n,y:i,lineHeight:s,capHeight:a,fill:c,scaleToFit:u,textAnchor:d,verticalAnchor:h}=r,p=eU(r,Dwe),g=A.useMemo(()=>qwe({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:u,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,u,p.style,p.width]),{dx:y,dy:S,angle:x,className:w,breakAll:E}=p,R=eU(p,kwe);if(!da(n)||!da(i)||g.length===0)return null;var T=Number(n)+(Ne(y)?y:0),M=Number(i)+(Ne(S)?S:0);if(!ar(T)||!ar(M))return null;var D;switch(h){case"start":D=HA("calc(".concat(a,")"));break;case"middle":D=HA("calc(".concat((g.length-1)/2," * -").concat(s," + (").concat(a," / 2))"));break;default:D=HA("calc(".concat(g.length-1," * -").concat(s,")"));break}var z=[];if(u){var j=g[0].width,{width:O}=p;z.push("scale(".concat(Ne(O)&&Ne(j)?O/j:1,")"))}return x&&z.push("rotate(".concat(x,", ").concat(T,", ").concat(M,")")),z.length&&(R.transform=z.join(" ")),A.createElement("text",BR({},xn(R),{ref:e,x:T,y:M,className:wt("recharts-text",w),textAnchor:d,fill:c.includes("url")?PG:c}),g.map((L,V)=>{var U=L.words.join(E?"":" ");return A.createElement("tspan",{x:T,dy:V===0?D:s,key:"".concat(U,"-").concat(V)},U)}))});JI.displayName="Text";var Fwe=["labelRef"];function Hwe(t,e){if(t==null)return{};var r,n,i=Wwe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Wwe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function nU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function dr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nU(Object(r),!0).forEach(function(n){Kwe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Kwe(t,e,r){return(e=Gwe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gwe(t){var e=$we(t,"string");return typeof e=="symbol"?e:e+""}function $we(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ka(){return Ka=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ka.apply(null,arguments)}var IG=A.createContext(null),Ywe=t=>{var{x:e,y:r,upperWidth:n,lowerWidth:i,width:s,height:a,children:c}=t,u=A.useMemo(()=>({x:e,y:r,upperWidth:n,lowerWidth:i,width:s,height:a}),[e,r,n,i,s,a]);return A.createElement(IG.Provider,{value:u},c)},NG=()=>{var t=A.useContext(IG),e=ux();return t||HH(e)},Xwe=A.createContext(null),Qwe=()=>{var t=A.useContext(Xwe),e=Oe(uK);return t||e},Jwe=t=>{var{value:e,formatter:r}=t,n=Mr(t.children)?e:t.children;return typeof r=="function"?r(n):n},ZI=t=>t!=null&&typeof t=="function",Zwe=(t,e)=>{var r=Fi(e-t),n=Math.min(Math.abs(e-t),360);return r*n},e_e=(t,e,r,n,i)=>{var{offset:s,className:a}=t,{cx:c,cy:u,innerRadius:d,outerRadius:h,startAngle:p,endAngle:g,clockWise:y}=i,S=(d+h)/2,x=Zwe(p,g),w=x>=0?1:-1,E,R;switch(e){case"insideStart":E=p+w*s,R=y;break;case"insideEnd":E=g-w*s,R=!y;break;case"end":E=g+w*s,R=y;break;default:throw new Error("Unsupported position ".concat(e))}R=x<=0?R:!R;var T=cn(c,u,S,E),M=cn(c,u,S,E+(R?1:-1)*359),D="M".concat(T.x,",").concat(T.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(R?0:1,`,
    `).concat(M.x,",").concat(M.y),z=Mr(t.id)?dg("recharts-radial-line-"):t.id;return A.createElement("text",Ka({},n,{dominantBaseline:"central",className:wt("recharts-radial-bar-label",a)}),A.createElement("defs",null,A.createElement("path",{id:z,d:D})),A.createElement("textPath",{xlinkHref:"#".concat(z)},r))},t_e=(t,e,r)=>{var{cx:n,cy:i,innerRadius:s,outerRadius:a,startAngle:c,endAngle:u}=t,d=(c+u)/2;if(r==="outside"){var{x:h,y:p}=cn(n,i,a+e,d);return{x:h,y:p,textAnchor:h>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(s+a)/2,{x:y,y:S}=cn(n,i,g,d);return{x:y,y:S,textAnchor:"middle",verticalAnchor:"middle"}},qR=t=>"cx"in t&&Ne(t.cx),r_e=(t,e)=>{var{parentViewBox:r,offset:n,position:i}=t,s;r!=null&&!qR(r)&&(s=r);var{x:a,y:c,upperWidth:u,lowerWidth:d,height:h}=e,p=a,g=a+(u-d)/2,y=(p+g)/2,S=(u+d)/2,x=p+u/2,w=h>=0?1:-1,E=w*n,R=w>0?"end":"start",T=w>0?"start":"end",M=u>=0?1:-1,D=M*n,z=M>0?"end":"start",j=M>0?"start":"end";if(i==="top"){var O={x:p+u/2,y:c-E,textAnchor:"middle",verticalAnchor:R};return dr(dr({},O),s?{height:Math.max(c-s.y,0),width:u}:{})}if(i==="bottom"){var L={x:g+d/2,y:c+h+E,textAnchor:"middle",verticalAnchor:T};return dr(dr({},L),s?{height:Math.max(s.y+s.height-(c+h),0),width:d}:{})}if(i==="left"){var V={x:y-D,y:c+h/2,textAnchor:z,verticalAnchor:"middle"};return dr(dr({},V),s?{width:Math.max(V.x-s.x,0),height:h}:{})}if(i==="right"){var U={x:y+S+D,y:c+h/2,textAnchor:j,verticalAnchor:"middle"};return dr(dr({},U),s?{width:Math.max(s.x+s.width-U.x,0),height:h}:{})}var F=s?{width:S,height:h}:{};return i==="insideLeft"?dr({x:y+D,y:c+h/2,textAnchor:j,verticalAnchor:"middle"},F):i==="insideRight"?dr({x:y+S-D,y:c+h/2,textAnchor:z,verticalAnchor:"middle"},F):i==="insideTop"?dr({x:p+u/2,y:c+E,textAnchor:"middle",verticalAnchor:T},F):i==="insideBottom"?dr({x:g+d/2,y:c+h-E,textAnchor:"middle",verticalAnchor:R},F):i==="insideTopLeft"?dr({x:p+D,y:c+E,textAnchor:j,verticalAnchor:T},F):i==="insideTopRight"?dr({x:p+u-D,y:c+E,textAnchor:z,verticalAnchor:T},F):i==="insideBottomLeft"?dr({x:g+D,y:c+h-E,textAnchor:j,verticalAnchor:R},F):i==="insideBottomRight"?dr({x:g+d-D,y:c+h-E,textAnchor:z,verticalAnchor:R},F):i&&typeof i=="object"&&(Ne(i.x)||lo(i.x))&&(Ne(i.y)||lo(i.y))?dr({x:a+kc(i.x,S),y:c+kc(i.y,h),textAnchor:"end",verticalAnchor:"end"},F):dr({x,y:c+h/2,textAnchor:"middle",verticalAnchor:"middle"},F)},n_e={angle:0,offset:5,zIndex:Sn.label,position:"middle",textBreakAll:!1};function fc(t){var e=$r(t,n_e),{viewBox:r,position:n,value:i,children:s,content:a,className:c="",textBreakAll:u,labelRef:d}=e,h=Qwe(),p=NG(),g=n==="center"?p:h??p,y,S,x;if(r==null?y=g:qR(r)?y=r:y=HH(r),!y||Mr(i)&&Mr(s)&&!A.isValidElement(a)&&typeof a!="function")return null;var w=dr(dr({},e),{},{viewBox:y});if(A.isValidElement(a)){var{labelRef:E}=w,R=Hwe(w,Fwe);return A.cloneElement(a,R)}if(typeof a=="function"){if(S=A.createElement(a,w),A.isValidElement(S))return S}else S=Jwe(e);var T=xn(e);if(qR(y)){if(n==="insideStart"||n==="insideEnd"||n==="end")return e_e(e,n,S,T,y);x=t_e(y,e.offset,e.position)}else x=r_e(e,y);return A.createElement(ba,{zIndex:e.zIndex},A.createElement(JI,Ka({ref:d,className:wt("recharts-label",c)},T,x,{textAnchor:zwe(T.textAnchor)?T.textAnchor:x.textAnchor,breakAll:u}),S))}fc.displayName="Label";var i_e=(t,e,r)=>{if(!t)return null;var n={viewBox:e,labelRef:r};return t===!0?A.createElement(fc,Ka({key:"label-implicit"},n)):da(t)?A.createElement(fc,Ka({key:"label-implicit",value:t},n)):A.isValidElement(t)?t.type===fc?A.cloneElement(t,dr({key:"label-implicit"},n)):A.createElement(fc,Ka({key:"label-implicit",content:t},n)):ZI(t)?A.createElement(fc,Ka({key:"label-implicit",content:t},n)):t&&typeof t=="object"?A.createElement(fc,Ka({},t,{key:"label-implicit"},n)):null};function s_e(t){var{label:e,labelRef:r}=t,n=NG();return i_e(e,n,r)||null}var WA={},KA={},iU;function a_e(){return iU||(iU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r[r.length-1]}t.last=e})(KA)),KA}var GA={},sU;function o_e(){return sU||(sU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=e})(GA)),GA}var aU;function c_e(){return aU||(aU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=a_e(),r=o_e(),n=z2();function i(s){if(n.isArrayLike(s))return e.last(r.toArray(s))}t.last=i})(WA)),WA}var $A,oU;function l_e(){return oU||(oU=1,$A=c_e().last),$A}var u_e=l_e();const d_e=vo(u_e);var h_e=["valueAccessor"],f_e=["dataKey","clockWise","id","textBreakAll","zIndex"];function JS(){return JS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},JS.apply(null,arguments)}function cU(t,e){if(t==null)return{};var r,n,i=p_e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function p_e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var m_e=t=>Array.isArray(t.value)?d_e(t.value):t.value,OG=A.createContext(void 0),jG=OG.Provider,MG=A.createContext(void 0);MG.Provider;function v_e(){return A.useContext(OG)}function g_e(){return A.useContext(MG)}function zb(t){var{valueAccessor:e=m_e}=t,r=cU(t,h_e),{dataKey:n,clockWise:i,id:s,textBreakAll:a,zIndex:c}=r,u=cU(r,f_e),d=v_e(),h=g_e(),p=d||h;return!p||!p.length?null:A.createElement(ba,{zIndex:c??Sn.label},A.createElement($i,{className:"recharts-label-list"},p.map((g,y)=>{var S,x=Mr(n)?e(g,y):Gr(g&&g.payload,n),w=Mr(s)?{}:{id:"".concat(s,"-").concat(y)};return A.createElement(fc,JS({key:"label-".concat(y)},xn(g),u,w,{fill:(S=r.fill)!==null&&S!==void 0?S:g.fill,parentViewBox:g.parentViewBox,value:x,textBreakAll:a,viewBox:g.viewBox,index:y,zIndex:0}))})))}zb.displayName="LabelList";function DG(t){var{label:e}=t;return e?e===!0?A.createElement(zb,{key:"labelList-implicit"}):A.isValidElement(e)||ZI(e)?A.createElement(zb,{key:"labelList-implicit",content:e}):typeof e=="object"?A.createElement(zb,JS({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function VR(){return VR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},VR.apply(null,arguments)}var kG=t=>{var{cx:e,cy:r,r:n,className:i}=t,s=wt("recharts-dot",i);return Ne(e)&&Ne(r)&&Ne(n)?A.createElement("circle",VR({},Gi(t),L2(t),{className:s,cx:e,cy:r,r:n})):null},y_e={radiusAxis:{},angleAxis:{}},LG=Yn({name:"polarAxis",initialState:y_e,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:$Ne,removeRadiusAxis:YNe,addAngleAxis:XNe,removeAngleAxis:QNe}=LG.actions,b_e=LG.reducer,eN=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,YA={},lU;function S_e(){return lU||(lU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}t.isPlainObject=e})(YA)),YA}var XA,uU;function C_e(){return uU||(uU=1,XA=S_e().isPlainObject),XA}var x_e=C_e();const w_e=vo(x_e);function dU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function hU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dU(Object(r),!0).forEach(function(n){__e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function __e(t,e,r){return(e=E_e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function E_e(t){var e=A_e(t,"string");return typeof e=="symbol"?e:e+""}function A_e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZS(){return ZS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ZS.apply(null,arguments)}var fU=(t,e,r,n,i)=>{var s=r-n,a;return a="M ".concat(t,",").concat(e),a+="L ".concat(t+r,",").concat(e),a+="L ".concat(t+r-s/2,",").concat(e+i),a+="L ".concat(t+r-s/2-n,",").concat(e+i),a+="L ".concat(t,",").concat(e," Z"),a},T_e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},R_e=t=>{var e=$r(t,T_e),{x:r,y:n,upperWidth:i,lowerWidth:s,height:a,className:c}=e,{animationEasing:u,animationDuration:d,animationBegin:h,isUpdateAnimationActive:p}=e,g=A.useRef(null),[y,S]=A.useState(-1),x=A.useRef(i),w=A.useRef(s),E=A.useRef(a),R=A.useRef(r),T=A.useRef(n),M=vx(t,"trapezoid-");if(A.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var ve=g.current.getTotalLength();ve&&S(ve)}catch{}},[]),r!==+r||n!==+n||i!==+i||s!==+s||a!==+a||i===0&&s===0||a===0)return null;var D=wt("recharts-trapezoid",c);if(!p)return A.createElement("g",null,A.createElement("path",ZS({},xn(e),{className:D,d:fU(r,n,i,s,a)})));var z=x.current,j=w.current,O=E.current,L=R.current,V=T.current,U="0px ".concat(y===-1?1:y,"px"),F="".concat(y,"px 0px"),q=tW(["strokeDasharray"],d,u);return A.createElement(mx,{animationId:M,key:M,canBegin:y>0,duration:d,easing:u,isActive:p,begin:h},ve=>{var Ae=xr(z,i,ve),Y=xr(j,s,ve),ae=xr(O,a,ve),pe=xr(L,r,ve),me=xr(V,n,ve);g.current&&(x.current=Ae,w.current=Y,E.current=ae,R.current=pe,T.current=me);var _e=ve>0?{transition:q,strokeDasharray:F}:{strokeDasharray:U};return A.createElement("path",ZS({},xn(e),{className:D,d:fU(pe,me,Ae,Y,ae),ref:g,style:hU(hU({},_e),e.style)}))})},P_e=["option","shapeType","propTransformer","activeClassName"];function I_e(t,e){if(t==null)return{};var r,n,i=N_e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function N_e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function pU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function eC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pU(Object(r),!0).forEach(function(n){O_e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function O_e(t,e,r){return(e=j_e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function j_e(t){var e=M_e(t,"string");return typeof e=="symbol"?e:e+""}function M_e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function D_e(t,e){return eC(eC({},e),t)}function k_e(t,e){return t==="symbols"}function mU(t){var{shapeType:e,elementProps:r}=t;switch(e){case"rectangle":return A.createElement(sW,r);case"trapezoid":return A.createElement(R_e,r);case"sector":return A.createElement(cW,r);case"symbols":if(k_e(e))return A.createElement(k2,r);break;case"curve":return A.createElement(Jv,r);default:return null}}function L_e(t){return A.isValidElement(t)?t.props:t}function z_e(t){var{option:e,shapeType:r,propTransformer:n=D_e,activeClassName:i="recharts-active-shape"}=t,s=I_e(t,P_e),a;if(A.isValidElement(e))a=A.cloneElement(e,eC(eC({},s),L_e(e)));else if(typeof e=="function")a=e(s,s.index);else if(w_e(e)&&typeof e!="boolean"){var c=n(e,s);a=A.createElement(mU,{shapeType:r,elementProps:c})}else{var u=s;a=A.createElement(mU,{shapeType:r,elementProps:u})}return s.isActive?A.createElement($i,{className:i},a):a}function zG(t){var{tooltipEntrySettings:e}=t,r=Tr(),n=wn(),i=A.useRef(null);return A.useLayoutEffect(()=>{n||(i.current===null?r(uxe(e)):i.current!==e&&r(dxe({prev:i.current,next:e})),i.current=e)},[e,r,n]),A.useLayoutEffect(()=>()=>{i.current&&(r(hxe(i.current)),i.current=null)},[r]),null}function UG(t){var{legendPayload:e}=t,r=Tr(),n=wn(),i=A.useRef(null);return A.useLayoutEffect(()=>{n||(i.current===null?r(Ige(e)):i.current!==e&&r(Nge({prev:i.current,next:e})),i.current=e)},[r,n,e]),A.useLayoutEffect(()=>()=>{i.current&&(r(Oge(i.current)),i.current=null)},[r]),null}var QA,U_e=()=>{var[t]=A.useState(()=>dg("uid-"));return t},B_e=(QA=MX.useId)!==null&&QA!==void 0?QA:U_e;function BG(t,e){var r=B_e();return e||(t?"".concat(t,"-").concat(r):r)}var q_e=A.createContext(void 0),qG=t=>{var{id:e,type:r,children:n}=t,i=BG("recharts-".concat(r),e);return A.createElement(q_e.Provider,{value:i},n(i))},V_e={cartesianItems:[],polarItems:[]},VG=Yn({name:"graphicalItems",initialState:V_e,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Ft()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:r,next:n}=e.payload,i=ys(t).cartesianItems.indexOf(r);i>-1&&(t.cartesianItems[i]=n)},prepare:Ft()},removeCartesianGraphicalItem:{reducer(t,e){var r=ys(t).cartesianItems.indexOf(e.payload);r>-1&&t.cartesianItems.splice(r,1)},prepare:Ft()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Ft()},removePolarGraphicalItem:{reducer(t,e){var r=ys(t).polarItems.indexOf(e.payload);r>-1&&t.polarItems.splice(r,1)},prepare:Ft()}}}),{addCartesianGraphicalItem:F_e,replaceCartesianGraphicalItem:H_e,removeCartesianGraphicalItem:W_e,addPolarGraphicalItem:JNe,removePolarGraphicalItem:ZNe}=VG.actions,K_e=VG.reducer,G_e=t=>{var e=Tr(),r=A.useRef(null);return A.useLayoutEffect(()=>{r.current===null?e(F_e(t)):r.current!==t&&e(H_e({prev:r.current,next:t})),r.current=t},[e,t]),A.useLayoutEffect(()=>()=>{r.current&&(e(W_e(r.current)),r.current=null)},[e]),null},FG=A.memo(G_e),$_e=["points"];function vU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function JA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vU(Object(r),!0).forEach(function(n){Y_e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Y_e(t,e,r){return(e=X_e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function X_e(t){var e=Q_e(t,"string");return typeof e=="symbol"?e:e+""}function Q_e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tC(){return tC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tC.apply(null,arguments)}function J_e(t,e){if(t==null)return{};var r,n,i=Z_e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Z_e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function eEe(t){var{option:e,dotProps:r,className:n}=t;if(A.isValidElement(e))return A.cloneElement(e,r);if(typeof e=="function")return e(r);var i=wt(n,typeof e!="boolean"?e.className:""),s=r??{},{points:a}=s,c=J_e(s,$_e);return A.createElement(kG,tC({},c,{className:i}))}function tEe(t,e){return t==null?!1:e?!0:t.length===1}function HG(t){var{points:e,dot:r,className:n,dotClassName:i,dataKey:s,baseProps:a,needClip:c,clipPathId:u,zIndex:d=Sn.scatter}=t;if(!tEe(e,r))return null;var h=eN(r),p=hfe(r),g=e.map((S,x)=>{var w,E,R=JA(JA(JA({r:3},a),p),{},{index:x,cx:(w=S.x)!==null&&w!==void 0?w:void 0,cy:(E=S.y)!==null&&E!==void 0?E:void 0,dataKey:s,value:S.value,payload:S.payload,points:e});return A.createElement(eEe,{key:"dot-".concat(x),option:r,dotProps:R,className:i})}),y={};return c&&u!=null&&(y.clipPath="url(#clipPath-".concat(h?"":"dots-").concat(u,")")),A.createElement(ba,{zIndex:d},A.createElement($i,tC({className:n},y),g))}function gU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function yU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gU(Object(r),!0).forEach(function(n){rEe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rEe(t,e,r){return(e=nEe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nEe(t){var e=iEe(t,"string");return typeof e=="symbol"?e:e+""}function iEe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sEe={xAxis:{},yAxis:{},zAxis:{}},WG=Yn({name:"cartesianAxis",initialState:sEe,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Ft()},replaceXAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.xAxis[r.id],t.xAxis[n.id]=n)},prepare:Ft()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Ft()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Ft()},replaceYAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.yAxis[r.id],t.yAxis[n.id]=n)},prepare:Ft()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Ft()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Ft()},replaceZAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.zAxis[r.id],t.zAxis[n.id]=n)},prepare:Ft()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Ft()},updateYAxisWidth(t,e){var{id:r,width:n}=e.payload,i=t.yAxis[r];if(i){var s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==i.width&&Math.abs(n-s[0])<=1)return;var a=[...s,n].slice(-3);t.yAxis[r]=yU(yU({},t.yAxis[r]),{},{width:n,widthHistory:a})}}}}),{addXAxis:aEe,replaceXAxis:oEe,removeXAxis:cEe,addYAxis:lEe,replaceYAxis:uEe,removeYAxis:dEe,addZAxis:eOe,replaceZAxis:tOe,removeZAxis:rOe,updateYAxisWidth:hEe}=WG.actions,fEe=WG.reducer,pEe=ie([un],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),mEe=ie([pEe,bo,So],(t,e,r)=>{if(!(!t||e==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),Dx=()=>Oe(mEe),vEe=()=>Oe(i1e);function bU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ZA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bU(Object(r),!0).forEach(function(n){gEe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gEe(t,e,r){return(e=yEe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yEe(t){var e=bEe(t,"string");return typeof e=="symbol"?e:e+""}function bEe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var SEe=t=>{var{point:e,childIndex:r,mainColor:n,activeDot:i,dataKey:s,clipPath:a}=t;if(i===!1||e.x==null||e.y==null)return null;var c={index:r,dataKey:s,cx:e.x,cy:e.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},u=ZA(ZA(ZA({},c),WC(i)),L2(i)),d;return A.isValidElement(i)?d=A.cloneElement(i,u):typeof i=="function"?d=i(u):d=A.createElement(kG,u),A.createElement($i,{className:"recharts-active-dot",clipPath:a},d)};function FR(t){var{points:e,mainColor:r,activeDot:n,itemDataKey:i,clipPath:s,zIndex:a=Sn.activeDot}=t,c=Oe(_g),u=vEe();if(e==null||u==null)return null;var d=e.find(h=>u.includes(h.payload));return Mr(d)?null:A.createElement(ba,{zIndex:a},A.createElement(SEe,{point:d,childIndex:Number(c),mainColor:r,dataKey:i,activeDot:n,clipPath:s}))}var CEe={},KG=Yn({name:"errorBars",initialState:CEe,reducers:{addErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]||(t[r]=[]),t[r].push(n)},replaceErrorBar:(t,e)=>{var{itemId:r,prev:n,next:i}=e.payload;t[r]&&(t[r]=t[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?i:s))},removeErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]&&(t[r]=t[r].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:nOe,replaceErrorBar:iOe,removeErrorBar:sOe}=KG.actions,xEe=KG.reducer,wEe=["children"];function _Ee(t,e){if(t==null)return{};var r,n,i=EEe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function EEe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var AEe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},TEe=A.createContext(AEe);function REe(t){var{children:e}=t,r=_Ee(t,wEe);return A.createElement(TEe.Provider,{value:r},e)}function tN(t,e){var r,n,i=Oe(d=>xo(d,t)),s=Oe(d=>wo(d,e)),a=(r=i?.allowDataOverflow)!==null&&r!==void 0?r:Vr.allowDataOverflow,c=(n=s?.allowDataOverflow)!==null&&n!==void 0?n:Fr.allowDataOverflow,u=a||c;return{needClip:u,needClipX:a,needClipY:c}}function GG(t){var{xAxisId:e,yAxisId:r,clipPathId:n}=t,i=Dx(),{needClipX:s,needClipY:a,needClip:c}=tN(e,r);if(!c||!i)return null;var{x:u,y:d,width:h,height:p}=i;return A.createElement("clipPath",{id:"clipPath-".concat(n)},A.createElement("rect",{x:s?u:u-h/2,y:a?d:d-p/2,width:s?h:h*2,height:a?p:p*2}))}var eT={exports:{}},tT={};var SU;function PEe(){if(SU)return tT;SU=1;var t=dh();function e(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var r=typeof Object.is=="function"?Object.is:e,n=t.useSyncExternalStore,i=t.useRef,s=t.useEffect,a=t.useMemo,c=t.useDebugValue;return tT.useSyncExternalStoreWithSelector=function(u,d,h,p,g){var y=i(null);if(y.current===null){var S={hasValue:!1,value:null};y.current=S}else S=y.current;y=a(function(){function w(D){if(!E){if(E=!0,R=D,D=p(D),g!==void 0&&S.hasValue){var z=S.value;if(g(z,D))return T=z}return T=D}if(z=T,r(R,D))return z;var j=p(D);return g!==void 0&&g(z,j)?(R=D,z):(R=D,T=j)}var E=!1,R,T,M=h===void 0?null:h;return[function(){return w(d())},M===null?void 0:function(){return w(M())}]},[d,h,p,g]);var x=n(u,y[0],y[1]);return s(function(){S.hasValue=!0,S.value=x},[x]),c(x),x},tT}var CU;function IEe(){return CU||(CU=1,eT.exports=PEe()),eT.exports}IEe();function NEe(t){t()}function OEe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){NEe(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=e={callback:r,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!n||t===null||(n=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var xU={notify(){},get:()=>[]};function jEe(t,e){let r,n=xU,i=0,s=!1;function a(x){h();const w=n.subscribe(x);let E=!1;return()=>{E||(E=!0,w(),p())}}function c(){n.notify()}function u(){S.onStateChange&&S.onStateChange()}function d(){return s}function h(){i++,r||(r=t.subscribe(u),n=OEe())}function p(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=xU)}function g(){s||(s=!0,h())}function y(){s&&(s=!1,p())}const S={addNestedSub:a,notifyNestedSubs:c,handleChangeWrapper:u,isSubscribed:d,trySubscribe:g,tryUnsubscribe:y,getListeners:()=>n};return S}var MEe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",DEe=MEe(),kEe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",LEe=kEe(),zEe=()=>DEe||LEe?A.useLayoutEffect:A.useEffect,UEe=zEe();function wU(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function BEe(t,e){if(wU(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(e,r[i])||!wU(t[r[i]],e[r[i]]))return!1;return!0}var qEe=Symbol.for("react-redux-context"),VEe=typeof globalThis<"u"?globalThis:{};function FEe(){if(!A.createContext)return{};const t=VEe[qEe]??=new Map;let e=t.get(A.createContext);return e||(e=A.createContext(null),t.set(A.createContext,e)),e}var HEe=FEe();function WEe(t){const{children:e,context:r,serverState:n,store:i}=t,s=A.useMemo(()=>{const u=jEe(i);return{store:i,subscription:u,getServerState:n?()=>n:void 0}},[i,n]),a=A.useMemo(()=>i.getState(),[i]);UEe(()=>{const{subscription:u}=s;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),a!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[s,a]);const c=r||HEe;return A.createElement(c.Provider,{value:s},e)}var KEe=WEe,GEe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function $Ee(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function kx(t,e){var r=new Set([...Object.keys(t),...Object.keys(e)]);for(var n of r)if(GEe.has(n)){if(t[n]==null&&e[n]==null)continue;if(!BEe(t[n],e[n]))return!1}else if(!$Ee(t[n],e[n]))return!1;return!0}var YEe=t=>{var{chartData:e}=t,r=Tr(),n=wn();return A.useEffect(()=>n?()=>{}:(r(V9(e)),()=>{r(V9(void 0))}),[e,r,n]),null},_U={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},$G=Yn({name:"brush",initialState:_U,reducers:{setBrushSettings(t,e){return e.payload==null?_U:e.payload}}}),{setBrushSettings:aOe}=$G.actions,XEe=$G.reducer;function QEe(t,e,r){return(e=JEe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JEe(t){var e=ZEe(t,"string");return typeof e=="symbol"?e:e+""}function ZEe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class rN{static create(e){return new rN(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(n)switch(n){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(r){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}isInRange(e){var r=this.range(),n=r[0],i=r[r.length-1];return n<=i?e>=n&&e<=i:e>=i&&e<=n}}QEe(rN,"EPS",1e-4);function eAe(t){return(t%180+180)%180}var tAe=function(e){var{width:r,height:n}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=eAe(i),a=s*Math.PI/180,c=Math.atan(n/r),u=a>c&&a<Math.PI-c?n/Math.sin(a):r/Math.cos(a);return Math.abs(u)},rAe={dots:[],areas:[],lines:[]},YG=Yn({name:"referenceElements",initialState:rAe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var r=ys(t).dots.findIndex(n=>n===e.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var r=ys(t).areas.findIndex(n=>n===e.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var r=ys(t).lines.findIndex(n=>n===e.payload);r!==-1&&t.lines.splice(r,1)}}}),{addDot:oOe,removeDot:cOe,addArea:lOe,removeArea:uOe,addLine:dOe,removeLine:hOe}=YG.actions,nAe=YG.reducer,iAe=A.createContext(void 0),sAe=t=>{var{children:e}=t,[r]=A.useState("".concat(dg("recharts"),"-clip")),n=Dx();if(n==null)return null;var{x:i,y:s,width:a,height:c}=n;return A.createElement(iAe.Provider,{value:r},A.createElement("defs",null,A.createElement("clipPath",{id:r},A.createElement("rect",{x:i,y:s,height:c,width:a}))),e)};function XG(t,e){if(e<1)return[];if(e===1)return t;for(var r=[],n=0;n<t.length;n+=e)r.push(t[n]);return r}function aAe(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return tAe(n,r)}function oAe(t,e,r){var n=r==="width",{x:i,y:s,width:a,height:c}=t;return e===1?{start:n?i:s,end:n?i+a:s+c}:{start:n?i+a:s+c,end:n?i:s}}function rC(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var s=r();return t*(e-t*s/2-n)>=0&&t*(e+t*s/2-i)<=0}function cAe(t,e){return XG(t,e+1)}function lAe(t,e,r,n,i){for(var s=(n||[]).slice(),{start:a,end:c}=e,u=0,d=1,h=a,p=function(){var S=n?.[u];if(S===void 0)return{v:XG(n,d)};var x=u,w,E=()=>(w===void 0&&(w=r(S,x)),w),R=S.coordinate,T=u===0||rC(t,R,E,h,c);T||(u=0,h=a,d+=1),T&&(h=R+t*(E()/2+i),u+=d)},g;d<=s.length;)if(g=p(),g)return g.v;return[]}function EU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EU(Object(r),!0).forEach(function(n){uAe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uAe(t,e,r){return(e=dAe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dAe(t){var e=hAe(t,"string");return typeof e=="symbol"?e:e+""}function hAe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fAe(t,e,r,n,i){for(var s=(n||[]).slice(),a=s.length,{start:c}=e,{end:u}=e,d=function(g){var y=s[g],S,x=()=>(S===void 0&&(S=r(y,g)),S);if(g===a-1){var w=t*(y.coordinate+t*x()/2-u);s[g]=y=pn(pn({},y),{},{tickCoord:w>0?y.coordinate-w*t:y.coordinate})}else s[g]=y=pn(pn({},y),{},{tickCoord:y.coordinate});if(y.tickCoord!=null){var E=rC(t,y.tickCoord,x,c,u);E&&(u=y.tickCoord-t*(x()/2+i),s[g]=pn(pn({},y),{},{isShow:!0}))}},h=a-1;h>=0;h--)d(h);return s}function pAe(t,e,r,n,i,s){var a=(n||[]).slice(),c=a.length,{start:u,end:d}=e;if(s){var h=n[c-1],p=r(h,c-1),g=t*(h.coordinate+t*p/2-d);if(a[c-1]=h=pn(pn({},h),{},{tickCoord:g>0?h.coordinate-g*t:h.coordinate}),h.tickCoord!=null){var y=rC(t,h.tickCoord,()=>p,u,d);y&&(d=h.tickCoord-t*(p/2+i),a[c-1]=pn(pn({},h),{},{isShow:!0}))}}for(var S=s?c-1:c,x=function(R){var T=a[R],M,D=()=>(M===void 0&&(M=r(T,R)),M);if(R===0){var z=t*(T.coordinate-t*D()/2-u);a[R]=T=pn(pn({},T),{},{tickCoord:z<0?T.coordinate-z*t:T.coordinate})}else a[R]=T=pn(pn({},T),{},{tickCoord:T.coordinate});if(T.tickCoord!=null){var j=rC(t,T.tickCoord,D,u,d);j&&(u=T.tickCoord+t*(D()/2+i),a[R]=pn(pn({},T),{},{isShow:!0}))}},w=0;w<S;w++)x(w);return a}function nN(t,e,r){var{tick:n,ticks:i,viewBox:s,minTickGap:a,orientation:c,interval:u,tickFormatter:d,unit:h,angle:p}=t;if(!i||!i.length||!n)return[];if(Ne(u)||_h.isSsr){var g;return(g=cAe(i,Ne(u)?u:0))!==null&&g!==void 0?g:[]}var y=[],S=c==="top"||c==="bottom"?"width":"height",x=h&&S==="width"?Zv(h,{fontSize:e,letterSpacing:r}):{width:0,height:0},w=(T,M)=>{var D=typeof d=="function"?d(T.value,M):T.value;return S==="width"?aAe(Zv(D,{fontSize:e,letterSpacing:r}),x,p):Zv(D,{fontSize:e,letterSpacing:r})[S]},E=i.length>=2?Fi(i[1].coordinate-i[0].coordinate):1,R=oAe(s,E,S);return u==="equidistantPreserveStart"?lAe(E,R,w,i,a):(u==="preserveStart"||u==="preserveStartEnd"?y=pAe(E,R,w,i,a,u==="preserveStartEnd"):y=fAe(E,R,w,i,a),y.filter(T=>T.isShow))}var mAe=t=>{var{ticks:e,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:s=0}=t,a=0;if(e){Array.from(e).forEach(h=>{if(h){var p=h.getBoundingClientRect();p.width>a&&(a=p.width)}});var c=r?r.getBoundingClientRect().width:0,u=i+s,d=a+u+c+(r?n:0);return Math.round(d)}return 0},vAe=["axisLine","width","height","className","hide","ticks","axisType"];function gAe(t,e){if(t==null)return{};var r,n,i=yAe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function yAe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Au(){return Au=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Au.apply(null,arguments)}function AU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Cr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AU(Object(r),!0).forEach(function(n){bAe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bAe(t,e,r){return(e=SAe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SAe(t){var e=CAe(t,"string");return typeof e=="symbol"?e:e+""}function CAe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ro={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Sn.axis};function xAe(t){var{x:e,y:r,width:n,height:i,orientation:s,mirror:a,axisLine:c,otherSvgProps:u}=t;if(!c)return null;var d=Cr(Cr(Cr({},u),Gi(c)),{},{fill:"none"});if(s==="top"||s==="bottom"){var h=+(s==="top"&&!a||s==="bottom"&&a);d=Cr(Cr({},d),{},{x1:e,y1:r+h*i,x2:e+n,y2:r+h*i})}else{var p=+(s==="left"&&!a||s==="right"&&a);d=Cr(Cr({},d),{},{x1:e+p*n,y1:r,x2:e+p*n,y2:r+i})}return A.createElement("line",Au({},d,{className:wt("recharts-cartesian-axis-line",YC(c,"className"))}))}function wAe(t,e,r,n,i,s,a,c,u){var d,h,p,g,y,S,x=c?-1:1,w=t.tickSize||a,E=Ne(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":d=h=t.coordinate,g=r+ +!c*i,p=g-x*w,S=p-x*u,y=E;break;case"left":p=g=t.coordinate,h=e+ +!c*n,d=h-x*w,y=d-x*u,S=E;break;case"right":p=g=t.coordinate,h=e+ +c*n,d=h+x*w,y=d+x*u,S=E;break;default:d=h=t.coordinate,g=r+ +c*i,p=g+x*w,S=p+x*u,y=E;break}return{line:{x1:d,y1:p,x2:h,y2:g},tick:{x:y,y:S}}}function _Ae(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function EAe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function AAe(t){var{option:e,tickProps:r,value:n}=t,i,s=wt(r.className,"recharts-cartesian-axis-tick-value");if(A.isValidElement(e))i=A.cloneElement(e,Cr(Cr({},r),{},{className:s}));else if(typeof e=="function")i=e(Cr(Cr({},r),{},{className:s}));else{var a="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(a=wt(a,e?.className)),i=A.createElement(JI,Au({},r,{className:a}),n)}return i}var TAe=A.forwardRef((t,e)=>{var{ticks:r=[],tick:n,tickLine:i,stroke:s,tickFormatter:a,unit:c,padding:u,tickTextProps:d,orientation:h,mirror:p,x:g,y,width:S,height:x,tickSize:w,tickMargin:E,fontSize:R,letterSpacing:T,getTicksConfig:M,events:D,axisType:z}=t,j=nN(Cr(Cr({},M),{},{ticks:r}),R,T),O=_Ae(h,p),L=EAe(h,p),V=Gi(M),U=WC(n),F={};typeof i=="object"&&(F=i);var q=Cr(Cr({},V),{},{fill:"none"},F),ve=j.map(ae=>Cr({entry:ae},wAe(ae,g,y,S,x,h,w,p,E))),Ae=ve.map(ae=>{var{entry:pe,line:me}=ae;return A.createElement($i,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(pe.value,"-").concat(pe.coordinate,"-").concat(pe.tickCoord)},i&&A.createElement("line",Au({},q,me,{className:wt("recharts-cartesian-axis-tick-line",YC(i,"className"))})))}),Y=ve.map((ae,pe)=>{var{entry:me,tick:_e}=ae,H=Cr(Cr(Cr(Cr({textAnchor:O,verticalAnchor:L},V),{},{stroke:"none",fill:s},U),_e),{},{index:pe,payload:me,visibleTicksCount:j.length,tickFormatter:a,padding:u},d);return A.createElement($i,Au({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(me.value,"-").concat(me.coordinate,"-").concat(me.tickCoord)},HF(D,me,pe)),n&&A.createElement(AAe,{option:n,tickProps:H,value:"".concat(typeof a=="function"?a(me.value,pe):me.value).concat(c||"")}))});return A.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(z,"-ticks")},Y.length>0&&A.createElement(ba,{zIndex:Sn.label},A.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(z,"-tick-labels"),ref:e},Y)),Ae.length>0&&A.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(z,"-tick-lines")},Ae))}),RAe=A.forwardRef((t,e)=>{var{axisLine:r,width:n,height:i,className:s,hide:a,ticks:c,axisType:u}=t,d=gAe(t,vAe),[h,p]=A.useState(""),[g,y]=A.useState(""),S=A.useRef(null);A.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var w;return mAe({ticks:S.current,label:(w=t.labelRef)===null||w===void 0?void 0:w.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var x=A.useCallback(w=>{if(w){var E=w.getElementsByClassName("recharts-cartesian-axis-tick-value");S.current=E;var R=E[0];if(R){var T=window.getComputedStyle(R),M=T.fontSize,D=T.letterSpacing;(M!==h||D!==g)&&(p(M),y(D))}}},[h,g]);return a||n!=null&&n<=0||i!=null&&i<=0?null:A.createElement(ba,{zIndex:t.zIndex},A.createElement($i,{className:wt("recharts-cartesian-axis",s)},A.createElement(xAe,{x:t.x,y:t.y,width:n,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:r,otherSvgProps:Gi(t)}),A.createElement(TAe,{ref:x,axisType:u,events:d,fontSize:h,getTicksConfig:t,height:t.height,letterSpacing:g,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:c,unit:t.unit,width:t.width,x:t.x,y:t.y}),A.createElement(Ywe,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},A.createElement(s_e,{label:t.label,labelRef:t.labelRef}),t.children)))}),iN=A.forwardRef((t,e)=>{var r=$r(t,ro);return A.createElement(RAe,Au({},r,{ref:e}))});iN.displayName="CartesianAxis";var PAe=["x1","y1","x2","y2","key"],IAe=["offset"],NAe=["xAxisId","yAxisId"],OAe=["xAxisId","yAxisId"];function TU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function gn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TU(Object(r),!0).forEach(function(n){jAe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jAe(t,e,r){return(e=MAe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function MAe(t){var e=DAe(t,"string");return typeof e=="symbol"?e:e+""}function DAe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function su(){return su=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},su.apply(null,arguments)}function nC(t,e){if(t==null)return{};var r,n,i=kAe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function kAe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var LAe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:r,x:n,y:i,width:s,height:a,ry:c}=t;return A.createElement("rect",{x:n,y:i,ry:c,width:s,height:a,stroke:"none",fill:e,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function QG(t){var{option:e,lineItemProps:r}=t,n;if(A.isValidElement(e))n=A.cloneElement(e,r);else if(typeof e=="function")n=e(r);else{var i,{x1:s,y1:a,x2:c,y2:u,key:d}=r,h=nC(r,PAe),p=(i=Gi(h))!==null&&i!==void 0?i:{},{offset:g}=p,y=nC(p,IAe);n=A.createElement("line",su({},y,{x1:s,y1:a,x2:c,y2:u,fill:"none",key:d}))}return n}function zAe(t){var{x:e,width:r,horizontal:n=!0,horizontalPoints:i}=t;if(!n||!i||!i.length)return null;var{xAxisId:s,yAxisId:a}=t,c=nC(t,NAe),u=i.map((d,h)=>{var p=gn(gn({},c),{},{x1:e,y1:d,x2:e+r,y2:d,key:"line-".concat(h),index:h});return A.createElement(QG,{key:"line-".concat(h),option:n,lineItemProps:p})});return A.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}function UAe(t){var{y:e,height:r,vertical:n=!0,verticalPoints:i}=t;if(!n||!i||!i.length)return null;var{xAxisId:s,yAxisId:a}=t,c=nC(t,OAe),u=i.map((d,h)=>{var p=gn(gn({},c),{},{x1:d,y1:e,x2:d,y2:e+r,key:"line-".concat(h),index:h});return A.createElement(QG,{option:n,lineItemProps:p,key:"line-".concat(h)})});return A.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}function BAe(t){var{horizontalFill:e,fillOpacity:r,x:n,y:i,width:s,height:a,horizontalPoints:c,horizontal:u=!0}=t;if(!u||!e||!e.length||c==null)return null;var d=c.map(p=>Math.round(p+i-i)).sort((p,g)=>p-g);i!==d[0]&&d.unshift(0);var h=d.map((p,g)=>{var y=!d[g+1],S=y?i+a-p:d[g+1]-p;if(S<=0)return null;var x=g%e.length;return A.createElement("rect",{key:"react-".concat(g),y:p,x:n,height:S,width:s,stroke:"none",fill:e[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function qAe(t){var{vertical:e=!0,verticalFill:r,fillOpacity:n,x:i,y:s,width:a,height:c,verticalPoints:u}=t;if(!e||!r||!r.length)return null;var d=u.map(p=>Math.round(p+i-i)).sort((p,g)=>p-g);i!==d[0]&&d.unshift(0);var h=d.map((p,g)=>{var y=!d[g+1],S=y?i+a-p:d[g+1]-p;if(S<=0)return null;var x=g%r.length;return A.createElement("rect",{key:"react-".concat(g),x:p,y:s,width:S,height:c,stroke:"none",fill:r[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var VAe=(t,e)=>{var{xAxis:r,width:n,height:i,offset:s}=t;return kH(nN(gn(gn(gn({},ro),r),{},{ticks:LH(r),viewBox:{x:0,y:0,width:n,height:i}})),s.left,s.left+s.width,e)},FAe=(t,e)=>{var{yAxis:r,width:n,height:i,offset:s}=t;return kH(nN(gn(gn(gn({},ro),r),{},{ticks:LH(r),viewBox:{x:0,y:0,width:n,height:i}})),s.top,s.top+s.height,e)},HAe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Sn.grid};function sN(t){var e=Y2(),r=X2(),n=WH(),i=gn(gn({},$r(t,HAe)),{},{x:Ne(t.x)?t.x:n.left,y:Ne(t.y)?t.y:n.top,width:Ne(t.width)?t.width:n.width,height:Ne(t.height)?t.height:n.height}),{xAxisId:s,yAxisId:a,x:c,y:u,width:d,height:h,syncWithTicks:p,horizontalValues:g,verticalValues:y}=i,S=wn(),x=Oe(L=>I9(L,"xAxis",s,S)),w=Oe(L=>I9(L,"yAxis",a,S));if(!ha(d)||!ha(h)||!Ne(c)||!Ne(u))return null;var E=i.verticalCoordinatesGenerator||VAe,R=i.horizontalCoordinatesGenerator||FAe,{horizontalPoints:T,verticalPoints:M}=i;if((!T||!T.length)&&typeof R=="function"){var D=g&&g.length,z=R({yAxis:w?gn(gn({},w),{},{ticks:D?g:w.ticks}):void 0,width:e??d,height:r??h,offset:n},D?!0:p);IS(Array.isArray(z),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof z,"]")),Array.isArray(z)&&(T=z)}if((!M||!M.length)&&typeof E=="function"){var j=y&&y.length,O=E({xAxis:x?gn(gn({},x),{},{ticks:j?y:x.ticks}):void 0,width:e??d,height:r??h,offset:n},j?!0:p);IS(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof O,"]")),Array.isArray(O)&&(M=O)}return A.createElement(ba,{zIndex:i.zIndex},A.createElement("g",{className:"recharts-cartesian-grid"},A.createElement(LAe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),A.createElement(BAe,su({},i,{horizontalPoints:T})),A.createElement(qAe,su({},i,{verticalPoints:M})),A.createElement(zAe,su({},i,{offset:n,horizontalPoints:T,xAxis:x,yAxis:w})),A.createElement(UAe,su({},i,{offset:n,verticalPoints:M,xAxis:x,yAxis:w}))))}sN.displayName="CartesianGrid";var JG=(t,e,r,n)=>Mx(t,"xAxis",e,n),ZG=(t,e,r,n)=>jx(t,"xAxis",e,n),e$=(t,e,r,n)=>Mx(t,"yAxis",r,n),t$=(t,e,r,n)=>jx(t,"yAxis",r,n),WAe=ie([Rt,JG,e$,ZG,t$],(t,e,r,n,i)=>ya(t,"xAxis")?ih(e,n,!1):ih(r,i,!1)),KAe=(t,e,r,n,i)=>i;function GAe(t){return t.type==="line"}var $Ae=ie([jI,KAe],(t,e)=>t.filter(GAe).find(r=>r.id===e)),YAe=ie([Rt,JG,e$,ZG,t$,$Ae,WAe,wx],(t,e,r,n,i,s,a,c)=>{var{chartData:u,dataStartIndex:d,dataEndIndex:h}=c;if(!(s==null||e==null||r==null||n==null||i==null||n.length===0||i.length===0||a==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:p,data:g}=s,y;if(g!=null&&g.length>0?y=g:y=u?.slice(d,h+1),y!=null)return mTe({layout:t,xAxis:e,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataKey:p,bandSize:a,displayedData:y})}});function r$(t){var e=WC(t),r=3,n=2;if(e!=null){var{r:i,strokeWidth:s}=e,a=Number(i),c=Number(s);return(Number.isNaN(a)||a<0)&&(a=r),(Number.isNaN(c)||c<0)&&(c=n),{r:a,strokeWidth:c}}return{r,strokeWidth:n}}var XAe=["id"],QAe=["type","layout","connectNulls","needClip","shape"],JAe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Ag(){return Ag=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ag.apply(null,arguments)}function RU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ys(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RU(Object(r),!0).forEach(function(n){ZAe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ZAe(t,e,r){return(e=eTe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eTe(t){var e=tTe(t,"string");return typeof e=="symbol"?e:e+""}function tTe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aN(t,e){if(t==null)return{};var r,n,i=rTe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function rTe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var nTe=t=>{var{dataKey:e,name:r,stroke:n,legendType:i,hide:s}=t;return[{inactive:s,dataKey:e,type:i,color:n,value:sx(r,e),payload:t}]},iTe=A.memo(t=>{var{dataKey:e,data:r,stroke:n,strokeWidth:i,fill:s,name:a,hide:c,unit:u,tooltipType:d}=t,h={dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:s,dataKey:e,nameKey:void 0,name:sx(a,e),hide:c,type:d,color:n,unit:u}};return A.createElement(zG,{tooltipEntrySettings:h})}),n$=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function sTe(t,e){for(var r=t.length%2!==0?[...t,0]:t,n=[],i=0;i<e;++i)n=[...n,...r];return n}var aTe=(t,e,r)=>{var n=r.reduce((p,g)=>p+g);if(!n)return n$(e,t);for(var i=Math.floor(t/n),s=t%n,a=e-t,c=[],u=0,d=0;u<r.length;d+=r[u],++u)if(d+r[u]>s){c=[...r.slice(0,u),s-d];break}var h=c.length%2===0?[0,a]:[a];return[...sTe(r,i),...c,...h].map(p=>"".concat(p,"px")).join(", ")};function oTe(t){var{clipPathId:e,points:r,props:n}=t,{dot:i,dataKey:s,needClip:a}=n,{id:c}=n,u=aN(n,XAe),d=Gi(u);return A.createElement(HG,{points:r,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:d,needClip:a,clipPathId:e})}function cTe(t){var{showLabels:e,children:r,points:n}=t,i=A.useMemo(()=>n?.map(s=>{var a,c,u={x:(a=s.x)!==null&&a!==void 0?a:0,y:(c=s.y)!==null&&c!==void 0?c:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Ys(Ys({},u),{},{value:s.value,payload:s.payload,viewBox:u,parentViewBox:void 0,fill:void 0})}),[n]);return A.createElement(jG,{value:e?i:void 0},r)}function PU(t){var{clipPathId:e,pathRef:r,points:n,strokeDasharray:i,props:s}=t,{type:a,layout:c,connectNulls:u,needClip:d,shape:h}=s,p=aN(s,QAe),g=Ys(Ys({},xn(p)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(e,")"):void 0,points:n,type:a,layout:c,connectNulls:u,strokeDasharray:i??s.strokeDasharray});return A.createElement(A.Fragment,null,n?.length>1&&A.createElement(z_e,Ag({shapeType:"curve",option:h},g,{pathRef:r})),A.createElement(oTe,{points:n,clipPathId:e,props:s}))}function lTe(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function uTe(t){var{clipPathId:e,props:r,pathRef:n,previousPointsRef:i,longestAnimatedLengthRef:s}=t,{points:a,strokeDasharray:c,isAnimationActive:u,animationBegin:d,animationDuration:h,animationEasing:p,animateNewValues:g,width:y,height:S,onAnimationEnd:x,onAnimationStart:w}=r,E=i.current,R=vx(a,"recharts-line-"),T=A.useRef(R),[M,D]=A.useState(!1),z=!M,j=A.useCallback(()=>{typeof x=="function"&&x(),D(!1)},[x]),O=A.useCallback(()=>{typeof w=="function"&&w(),D(!0)},[w]),L=lTe(n.current),V=A.useRef(0);T.current!==R&&(V.current=s.current,T.current=R);var U=V.current;return A.createElement(cTe,{points:a,showLabels:z},r.children,A.createElement(mx,{animationId:R,begin:d,duration:h,isActive:u,easing:p,onAnimationEnd:j,onAnimationStart:O,key:R},F=>{var q=xr(U,L+U,F),ve=Math.min(q,L),Ae;if(u)if(c){var Y="".concat(c).split(/[,\s]+/gim).map(me=>parseFloat(me));Ae=aTe(ve,L,Y)}else Ae=n$(L,ve);else Ae=c==null?void 0:String(c);if(F>0&&L>0&&(i.current=a,s.current=Math.max(s.current,ve)),E){var ae=E.length/a.length,pe=F===1?a:a.map((me,_e)=>{var H=Math.floor(_e*ae);if(E[H]){var G=E[H];return Ys(Ys({},me),{},{x:xr(G.x,me.x,F),y:xr(G.y,me.y,F)})}return g?Ys(Ys({},me),{},{x:xr(y*2,me.x,F),y:xr(S/2,me.y,F)}):Ys(Ys({},me),{},{x:me.x,y:me.y})});return i.current=pe,A.createElement(PU,{props:r,points:pe,clipPathId:e,pathRef:n,strokeDasharray:Ae})}return A.createElement(PU,{props:r,points:a,clipPathId:e,pathRef:n,strokeDasharray:Ae})}),A.createElement(DG,{label:r.label}))}function dTe(t){var{clipPathId:e,props:r}=t,n=A.useRef(null),i=A.useRef(0),s=A.useRef(null);return A.createElement(uTe,{props:r,clipPathId:e,previousPointsRef:n,longestAnimatedLengthRef:i,pathRef:s})}var hTe=(t,e)=>{var r,n;return{x:(r=t.x)!==null&&r!==void 0?r:void 0,y:(n=t.y)!==null&&n!==void 0?n:void 0,value:t.value,errorVal:Gr(t.payload,e)}};class fTe extends A.Component{render(){var{hide:e,dot:r,points:n,className:i,xAxisId:s,yAxisId:a,top:c,left:u,width:d,height:h,id:p,needClip:g,zIndex:y}=this.props;if(e)return null;var S=wt("recharts-line",i),x=p,{r:w,strokeWidth:E}=r$(r),R=eN(r),T=w*2+E,M=g?"url(#clipPath-".concat(R?"":"dots-").concat(x,")"):void 0;return A.createElement(ba,{zIndex:y},A.createElement($i,{className:S},g&&A.createElement("defs",null,A.createElement(GG,{clipPathId:x,xAxisId:s,yAxisId:a}),!R&&A.createElement("clipPath",{id:"clipPath-dots-".concat(x)},A.createElement("rect",{x:u-T/2,y:c-T/2,width:d+T,height:h+T}))),A.createElement(REe,{xAxisId:s,yAxisId:a,data:n,dataPointFormatter:hTe,errorBarOffset:0},A.createElement(dTe,{props:this.props,clipPathId:x}))),A.createElement(FR,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:M}))}}var i$={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Sn.line,type:"linear"};function pTe(t){var e=$r(t,i$),{activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:s,animationEasing:a,connectNulls:c,dot:u,hide:d,isAnimationActive:h,label:p,legendType:g,xAxisId:y,yAxisId:S,id:x}=e,w=aN(e,JAe),{needClip:E}=tN(y,S),R=Dx(),T=wh(),M=wn(),D=Oe(V=>YAe(V,y,S,M,x));if(T!=="horizontal"&&T!=="vertical"||D==null||R==null)return null;var{height:z,width:j,x:O,y:L}=R;return A.createElement(fTe,Ag({},w,{id:x,connectNulls:c,dot:u,activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:s,animationEasing:a,isAnimationActive:h,hide:d,label:p,legendType:g,xAxisId:y,yAxisId:S,points:D,layout:T,height:z,width:j,left:O,top:L,needClip:E}))}function mTe(t){var{layout:e,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:s,dataKey:a,bandSize:c,displayedData:u}=t;return u.map((d,h)=>{var p=Gr(d,a);if(e==="horizontal"){var g=PS({axis:r,ticks:i,bandSize:c,entry:d,index:h}),y=Mr(p)?null:n.scale(p);return{x:g,y,value:p,payload:d}}var S=Mr(p)?null:r.scale(p),x=PS({axis:n,ticks:s,bandSize:c,entry:d,index:h});return S==null||x==null?null:{x:S,y:x,value:p,payload:d}}).filter(Boolean)}function vTe(t){var e=$r(t,i$),r=wn();return A.createElement(qG,{id:e.id,type:"line"},n=>A.createElement(A.Fragment,null,A.createElement(UG,{legendPayload:nTe(e)}),A.createElement(iTe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType}),A.createElement(FG,{type:"line",id:n,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:r}),A.createElement(pTe,Ag({},e,{id:n}))))}var HR=A.memo(vTe,kx);HR.displayName="Line";var s$=(t,e,r,n)=>Mx(t,"xAxis",e,n),a$=(t,e,r,n)=>jx(t,"xAxis",e,n),o$=(t,e,r,n)=>Mx(t,"yAxis",r,n),c$=(t,e,r,n)=>jx(t,"yAxis",r,n),gTe=ie([Rt,s$,o$,a$,c$],(t,e,r,n,i)=>ya(t,"xAxis")?ih(e,n,!1):ih(r,i,!1)),yTe=(t,e,r,n,i)=>i,l$=ie([jI,yTe],(t,e)=>t.filter(r=>r.type==="area").find(r=>r.id===e)),bTe=(t,e,r,n,i)=>{var s,a=l$(t,e,r,n,i);if(a!=null){var c=Rt(t),u=ya(c,"xAxis"),d;if(u?d=DR(t,"yAxis",r,n):d=DR(t,"xAxis",e,n),d!=null){var{stackId:h}=a,p=II(a);if(!(h==null||p==null)){var g=(s=d[h])===null||s===void 0?void 0:s.stackedData;return g?.find(y=>y.key===p)}}}},STe=ie([Rt,s$,o$,a$,c$,bTe,wx,gTe,l$,tCe],(t,e,r,n,i,s,a,c,u,d)=>{var{chartData:h,dataStartIndex:p,dataEndIndex:g}=a;if(!(u==null||t!=="horizontal"&&t!=="vertical"||e==null||r==null||n==null||i==null||n.length===0||i.length===0||c==null)){var{data:y}=u,S;if(y&&y.length>0?S=y:S=h?.slice(p,g+1),S!=null)return UTe({layout:t,xAxis:e,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataStartIndex:p,areaSettings:u,stackedData:s,displayedData:S,chartBaseValue:d,bandSize:c})}}),CTe=["id"],xTe=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function pu(){return pu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pu.apply(null,arguments)}function u$(t,e){if(t==null)return{};var r,n,i=wTe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function wTe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function IU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ud(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IU(Object(r),!0).forEach(function(n){_Te(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _Te(t,e,r){return(e=ETe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ETe(t){var e=ATe(t,"string");return typeof e=="symbol"?e:e+""}function ATe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iC(t,e){return t&&t!=="none"?t:e}var TTe=t=>{var{dataKey:e,name:r,stroke:n,fill:i,legendType:s,hide:a}=t;return[{inactive:a,dataKey:e,type:s,color:iC(n,i),value:sx(r,e),payload:t}]},RTe=A.memo(t=>{var{dataKey:e,data:r,stroke:n,strokeWidth:i,fill:s,name:a,hide:c,unit:u,tooltipType:d}=t,h={dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:s,dataKey:e,nameKey:void 0,name:sx(a,e),hide:c,type:d,color:iC(n,s),unit:u}};return A.createElement(zG,{tooltipEntrySettings:h})});function PTe(t){var{clipPathId:e,points:r,props:n}=t,{needClip:i,dot:s,dataKey:a}=n,c=Gi(n);return A.createElement(HG,{points:r,dot:s,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:a,baseProps:c,needClip:i,clipPathId:e})}function ITe(t){var{showLabels:e,children:r,points:n}=t,i=n.map(s=>{var a,c,u={x:(a=s.x)!==null&&a!==void 0?a:0,y:(c=s.y)!==null&&c!==void 0?c:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Ud(Ud({},u),{},{value:s.value,payload:s.payload,parentViewBox:void 0,viewBox:u,fill:void 0})});return A.createElement(jG,{value:e?i:void 0},r)}function NU(t){var{points:e,baseLine:r,needClip:n,clipPathId:i,props:s}=t,{layout:a,type:c,stroke:u,connectNulls:d,isRange:h}=s,{id:p}=s,g=u$(s,CTe),y=Gi(g),S=xn(g);return A.createElement(A.Fragment,null,e?.length>1&&A.createElement($i,{clipPath:n?"url(#clipPath-".concat(i,")"):void 0},A.createElement(Jv,pu({},S,{id:p,points:e,connectNulls:d,type:c,baseLine:r,layout:a,stroke:"none",className:"recharts-area-area"})),u!=="none"&&A.createElement(Jv,pu({},y,{className:"recharts-area-curve",layout:a,type:c,connectNulls:d,fill:"none",points:e})),u!=="none"&&h&&A.createElement(Jv,pu({},y,{className:"recharts-area-curve",layout:a,type:c,connectNulls:d,fill:"none",points:r}))),A.createElement(PTe,{points:e,props:g,clipPathId:i}))}function NTe(t){var{alpha:e,baseLine:r,points:n,strokeWidth:i}=t,s=n[0].y,a=n[n.length-1].y;if(!ar(s)||!ar(a))return null;var c=e*Math.abs(s-a),u=Math.max(...n.map(d=>d.x||0));return Ne(r)?u=Math.max(r,u):r&&Array.isArray(r)&&r.length&&(u=Math.max(...r.map(d=>d.x||0),u)),Ne(u)?A.createElement("rect",{x:0,y:s<a?s:s-c,width:u+(i?parseInt("".concat(i),10):1),height:Math.floor(c)}):null}function OTe(t){var{alpha:e,baseLine:r,points:n,strokeWidth:i}=t,s=n[0].x,a=n[n.length-1].x;if(!ar(s)||!ar(a))return null;var c=e*Math.abs(s-a),u=Math.max(...n.map(d=>d.y||0));return Ne(r)?u=Math.max(r,u):r&&Array.isArray(r)&&r.length&&(u=Math.max(...r.map(d=>d.y||0),u)),Ne(u)?A.createElement("rect",{x:s<a?s:s-c,y:0,width:c,height:Math.floor(u+(i?parseInt("".concat(i),10):1))}):null}function jTe(t){var{alpha:e,layout:r,points:n,baseLine:i,strokeWidth:s}=t;return r==="vertical"?A.createElement(NTe,{alpha:e,points:n,baseLine:i,strokeWidth:s}):A.createElement(OTe,{alpha:e,points:n,baseLine:i,strokeWidth:s})}function MTe(t){var{needClip:e,clipPathId:r,props:n,previousPointsRef:i,previousBaselineRef:s}=t,{points:a,baseLine:c,isAnimationActive:u,animationBegin:d,animationDuration:h,animationEasing:p,onAnimationStart:g,onAnimationEnd:y}=n,S=A.useMemo(()=>({points:a,baseLine:c}),[a,c]),x=vx(S,"recharts-area-"),w=mge(),[E,R]=A.useState(!1),T=!E,M=A.useCallback(()=>{typeof y=="function"&&y(),R(!1)},[y]),D=A.useCallback(()=>{typeof g=="function"&&g(),R(!0)},[g]);if(w==null)return null;var z=i.current,j=s.current;return A.createElement(ITe,{showLabels:T,points:a},n.children,A.createElement(mx,{animationId:x,begin:d,duration:h,isActive:u,easing:p,onAnimationEnd:M,onAnimationStart:D,key:x},O=>{if(z){var L=z.length/a.length,V=O===1?a:a.map((F,q)=>{var ve=Math.floor(q*L);if(z[ve]){var Ae=z[ve];return Ud(Ud({},F),{},{x:xr(Ae.x,F.x,O),y:xr(Ae.y,F.y,O)})}return F}),U;return Ne(c)?U=xr(j,c,O):Mr(c)||Ss(c)?U=xr(j,0,O):U=c.map((F,q)=>{var ve=Math.floor(q*L);if(Array.isArray(j)&&j[ve]){var Ae=j[ve];return Ud(Ud({},F),{},{x:xr(Ae.x,F.x,O),y:xr(Ae.y,F.y,O)})}return F}),O>0&&(i.current=V,s.current=U),A.createElement(NU,{points:V,baseLine:U,needClip:e,clipPathId:r,props:n})}return O>0&&(i.current=a,s.current=c),A.createElement($i,null,u&&A.createElement("defs",null,A.createElement("clipPath",{id:"animationClipPath-".concat(r)},A.createElement(jTe,{alpha:O,points:a,baseLine:c,layout:w,strokeWidth:n.strokeWidth}))),A.createElement($i,{clipPath:"url(#animationClipPath-".concat(r,")")},A.createElement(NU,{points:a,baseLine:c,needClip:e,clipPathId:r,props:n})))}),A.createElement(DG,{label:n.label}))}function DTe(t){var{needClip:e,clipPathId:r,props:n}=t,i=A.useRef(null),s=A.useRef();return A.createElement(MTe,{needClip:e,clipPathId:r,props:n,previousPointsRef:i,previousBaselineRef:s})}class kTe extends A.PureComponent{render(){var{hide:e,dot:r,points:n,className:i,top:s,left:a,needClip:c,xAxisId:u,yAxisId:d,width:h,height:p,id:g,baseLine:y,zIndex:S}=this.props;if(e)return null;var x=wt("recharts-area",i),w=g,{r:E,strokeWidth:R}=r$(r),T=eN(r),M=E*2+R,D=c?"url(#clipPath-".concat(T?"":"dots-").concat(w,")"):void 0;return A.createElement(ba,{zIndex:S},A.createElement($i,{className:x},c&&A.createElement("defs",null,A.createElement(GG,{clipPathId:w,xAxisId:u,yAxisId:d}),!T&&A.createElement("clipPath",{id:"clipPath-dots-".concat(w)},A.createElement("rect",{x:a-M/2,y:s-M/2,width:h+M,height:p+M}))),A.createElement(DTe,{needClip:c,clipPathId:w,props:this.props})),A.createElement(FR,{points:n,mainColor:iC(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:D}),this.props.isRange&&Array.isArray(y)&&A.createElement(FR,{points:y,mainColor:iC(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:D}))}}var d$={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:Sn.area};function LTe(t){var e,r=$r(t,d$),{activeDot:n,animationBegin:i,animationDuration:s,animationEasing:a,connectNulls:c,dot:u,fill:d,fillOpacity:h,hide:p,isAnimationActive:g,legendType:y,stroke:S,xAxisId:x,yAxisId:w}=r,E=u$(r,xTe),R=wh(),T=hG(),{needClip:M}=tN(x,w),D=wn(),{points:z,isRange:j,baseLine:O}=(e=Oe(ve=>STe(ve,x,w,D,t.id)))!==null&&e!==void 0?e:{},L=Dx();if(R!=="horizontal"&&R!=="vertical"||L==null||T!=="AreaChart"&&T!=="ComposedChart")return null;var{height:V,width:U,x:F,y:q}=L;return!z||!z.length?null:A.createElement(kTe,pu({},E,{activeDot:n,animationBegin:i,animationDuration:s,animationEasing:a,baseLine:O,connectNulls:c,dot:u,fill:d,fillOpacity:h,height:V,hide:p,layout:R,isAnimationActive:g==="auto"?!_h.isSsr:g,isRange:j,legendType:y,needClip:M,points:z,stroke:S,width:U,left:F,top:q,xAxisId:x,yAxisId:w}))}var zTe=(t,e,r,n,i)=>{var s=r??e;if(Ne(s))return s;var a=t==="horizontal"?i:n,c=a.scale.domain();if(a.type==="number"){var u=Math.max(c[0],c[1]),d=Math.min(c[0],c[1]);return s==="dataMin"?d:s==="dataMax"||u<0?u:Math.max(Math.min(c[0],c[1]),0)}return s==="dataMin"?c[0]:s==="dataMax"?c[1]:c[0]};function UTe(t){var{areaSettings:{connectNulls:e,baseValue:r,dataKey:n},stackedData:i,layout:s,chartBaseValue:a,xAxis:c,yAxis:u,displayedData:d,dataStartIndex:h,xAxisTicks:p,yAxisTicks:g,bandSize:y}=t,S=i&&i.length,x=zTe(s,a,r,c,u),w=s==="horizontal",E=!1,R=d.map((M,D)=>{var z;S?z=i[h+D]:(z=Gr(M,n),Array.isArray(z)?E=!0:z=[x,z]);var j=z[1]==null||S&&!e&&Gr(M,n)==null;return w?{x:PS({axis:c,ticks:p,bandSize:y,entry:M,index:D}),y:j?null:u.scale(z[1]),value:z,payload:M}:{x:j?null:c.scale(z[1]),y:PS({axis:u,ticks:g,bandSize:y,entry:M,index:D}),value:z,payload:M}}),T;return S||E?T=R.map(M=>{var D=Array.isArray(M.value)?M.value[0]:null;return w?{x:M.x,y:D!=null&&M.y!=null?u.scale(D):null,payload:M.payload}:{x:D!=null?c.scale(D):null,y:M.y,payload:M.payload}}):T=w?u.scale(x):c.scale(x),{points:R,baseLine:T,isRange:E}}function BTe(t){var e=$r(t,d$),r=wn();return A.createElement(qG,{id:e.id,type:"area"},n=>A.createElement(A.Fragment,null,A.createElement(UG,{legendPayload:TTe(e)}),A.createElement(RTe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType}),A.createElement(FG,{type:"area",id:n,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:Nve(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:r,connectNulls:e.connectNulls}),A.createElement(LTe,pu({},e,{id:n}))))}var h$=A.memo(BTe,kx);h$.displayName="Area";var qTe=["domain","range"],VTe=["domain","range"];function OU(t,e){if(t==null)return{};var r,n,i=FTe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function FTe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function jU(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function f$(t,e){if(t===e)return!0;var{domain:r,range:n}=t,i=OU(t,qTe),{domain:s,range:a}=e,c=OU(e,VTe);return!jU(r,s)||!jU(n,a)?!1:kx(i,c)}var HTe=["dangerouslySetInnerHTML","ticks"],WTe=["id"];function WR(){return WR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},WR.apply(null,arguments)}function MU(t,e){if(t==null)return{};var r,n,i=KTe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function KTe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function GTe(t){var e=Tr(),r=A.useRef(null);return A.useLayoutEffect(()=>{r.current===null?e(aEe(t)):r.current!==t&&e(oEe({prev:r.current,next:t})),r.current=t},[t,e]),A.useLayoutEffect(()=>()=>{r.current&&(e(cEe(r.current)),r.current=null)},[e]),null}var $Te=t=>{var{xAxisId:e,className:r}=t,n=Oe(UH),i=wn(),s="xAxis",a=Oe(w=>Ih(w,s,e,i)),c=Oe(w=>WK(w,s,e,i)),u=Oe(w=>GCe(w,e)),d=Oe(w=>ZCe(w,e)),h=Oe(w=>hK(w,e));if(u==null||d==null||h==null)return null;var{dangerouslySetInnerHTML:p,ticks:g}=t,y=MU(t,HTe),{id:S}=h,x=MU(h,WTe);return A.createElement(iN,WR({},y,x,{scale:a,x:d.x,y:d.y,width:u.width,height:u.height,className:wt("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:c,axisType:s}))},YTe={allowDataOverflow:Vr.allowDataOverflow,allowDecimals:Vr.allowDecimals,allowDuplicatedCategory:Vr.allowDuplicatedCategory,angle:Vr.angle,axisLine:ro.axisLine,height:Vr.height,hide:!1,includeHidden:Vr.includeHidden,interval:Vr.interval,minTickGap:Vr.minTickGap,mirror:Vr.mirror,orientation:Vr.orientation,padding:Vr.padding,reversed:Vr.reversed,scale:Vr.scale,tick:Vr.tick,tickCount:Vr.tickCount,tickLine:ro.tickLine,tickSize:ro.tickSize,type:Vr.type,xAxisId:0},XTe=t=>{var e=$r(t,YTe);return A.createElement(A.Fragment,null,A.createElement(GTe,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),A.createElement($Te,e))},oN=A.memo(XTe,f$);oN.displayName="XAxis";var QTe=["dangerouslySetInnerHTML","ticks"],JTe=["id"];function KR(){return KR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},KR.apply(null,arguments)}function DU(t,e){if(t==null)return{};var r,n,i=ZTe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function ZTe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function eRe(t){var e=Tr(),r=A.useRef(null);return A.useLayoutEffect(()=>{r.current===null?e(lEe(t)):r.current!==t&&e(uEe({prev:r.current,next:t})),r.current=t},[t,e]),A.useLayoutEffect(()=>()=>{r.current&&(e(dEe(r.current)),r.current=null)},[e]),null}var tRe=t=>{var{yAxisId:e,className:r,width:n,label:i}=t,s=A.useRef(null),a=A.useRef(null),c=Oe(UH),u=wn(),d=Tr(),h="yAxis",p=Oe(D=>Ih(D,h,e,u)),g=Oe(D=>rxe(D,e)),y=Oe(D=>txe(D,e)),S=Oe(D=>WK(D,h,e,u)),x=Oe(D=>fK(D,e));if(A.useLayoutEffect(()=>{if(!(n!=="auto"||!g||ZI(i)||A.isValidElement(i)||x==null)){var D=s.current;if(D){var z=D.getCalculatedWidth();Math.round(g.width)!==Math.round(z)&&d(hEe({id:e,width:z}))}}},[S,g,d,i,e,n,x]),g==null||y==null||x==null)return null;var{dangerouslySetInnerHTML:w,ticks:E}=t,R=DU(t,QTe),{id:T}=x,M=DU(x,JTe);return A.createElement(iN,KR({},R,M,{ref:s,labelRef:a,scale:p,x:y.x,y:y.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:g.width,height:g.height,className:wt("recharts-".concat(h," ").concat(h),r),viewBox:c,ticks:S,axisType:h}))},rRe={allowDataOverflow:Fr.allowDataOverflow,allowDecimals:Fr.allowDecimals,allowDuplicatedCategory:Fr.allowDuplicatedCategory,angle:Fr.angle,axisLine:ro.axisLine,hide:!1,includeHidden:Fr.includeHidden,interval:Fr.interval,minTickGap:Fr.minTickGap,mirror:Fr.mirror,orientation:Fr.orientation,padding:Fr.padding,reversed:Fr.reversed,scale:Fr.scale,tick:Fr.tick,tickCount:Fr.tickCount,tickLine:ro.tickLine,tickSize:ro.tickSize,type:Fr.type,width:Fr.width,yAxisId:0},nRe=t=>{var e=$r(t,rRe);return A.createElement(A.Fragment,null,A.createElement(eRe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),A.createElement(tRe,e))},cN=A.memo(nRe,f$);cN.displayName="YAxis";var iRe=(t,e)=>e,lN=ie([iRe,Rt,uK,Lr,aG,_o,v1e,un],w1e),uN=t=>{var e=t.currentTarget.getBoundingClientRect(),r=e.width/t.currentTarget.offsetWidth,n=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/r),chartY:Math.round((t.clientY-e.top)/n)}},p$=Yi("mouseClick"),m$=Jg();m$.startListening({actionCreator:p$,effect:(t,e)=>{var r=t.payload,n=lN(e.getState(),uN(r));n?.activeIndex!=null&&e.dispatch(mxe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var GR=Yi("mouseMove"),v$=Jg(),vb=null;v$.startListening({actionCreator:GR,effect:(t,e)=>{var r=t.payload;vb!==null&&cancelAnimationFrame(vb);var n=uN(r);vb=requestAnimationFrame(()=>{var i=e.getState(),s=VI(i,i.tooltip.settings.shared);if(s==="axis"){var a=lN(i,n);a?.activeIndex!=null?e.dispatch(JK({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):e.dispatch(QK())}vb=null})}});var kU={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},g$=Yn({name:"rootProps",initialState:kU,reducers:{updateOptions:(t,e)=>{var r;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(r=e.payload.barGap)!==null&&r!==void 0?r:kU.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),sRe=g$.reducer,{updateOptions:aRe}=g$.actions,y$=Yn({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:fOe}=y$.actions,oRe=y$.reducer,b$=Yi("keyDown"),S$=Yi("focus"),dN=Jg();dN.startListening({actionCreator:b$,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var a=FI(i,Oh(r),oy(r),hy(r)),c=a==null?-1:Number(a);if(!(!Number.isFinite(c)||c<0)){var u=_o(r);if(s==="Enter"){var d=QS(r,"axis","hover",String(i.index));e.dispatch(LR({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:d}));return}var h=axe(r),p=h==="left-to-right"?1:-1,g=s==="ArrowRight"?1:-1,y=c+g*p;if(!(u==null||y>=u.length||y<0)){var S=QS(r,"axis","hover",String(y));e.dispatch(LR({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:S}))}}}}}});dN.startListening({actionCreator:S$,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var s="0",a=QS(r,"axis","hover",String(s));e.dispatch(LR({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:a}))}}}});var Bi=Yi("externalEvent"),C$=Jg(),rT=new Map;C$.startListening({actionCreator:Bi,effect:(t,e)=>{var{handler:r,reactEvent:n}=t.payload;if(r!=null){n.persist();var i=n.type,s=rT.get(i);s!==void 0&&cancelAnimationFrame(s);var a=requestAnimationFrame(()=>{try{var c=e.getState(),u={activeCoordinate:t1e(c),activeDataKey:Zxe(c),activeIndex:_g(c),activeLabel:lG(c),activeTooltipIndex:_g(c),isTooltipActive:r1e(c)};r(u,n)}finally{rT.delete(i)}});rT.set(i,a)}}});var cRe=ie([Nh],t=>t.tooltipItemPayloads),lRe=ie([cRe,uy,(t,e,r)=>e,(t,e,r)=>r],(t,e,r,n)=>{var i=t.find(c=>c.settings.dataKey===n);if(i!=null){var{positions:s}=i;if(s!=null){var a=e(s,r);return a}}}),x$=Yi("touchMove"),w$=Jg();w$.startListening({actionCreator:x$,effect:(t,e)=>{var r=t.payload;if(!(r.touches==null||r.touches.length===0)){var n=e.getState(),i=VI(n,n.tooltip.settings.shared);if(i==="axis"){var s=lN(n,uN({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));s?.activeIndex!=null&&e.dispatch(JK({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var a,c=r.touches[0];if(document.elementFromPoint==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(zve),h=(a=u.getAttribute(Uve))!==null&&a!==void 0?a:void 0,p=lRe(e.getState(),d,h);e.dispatch(pxe({activeDataKey:h,activeIndex:d,activeCoordinate:p}))}}}});var uRe=oH({brush:XEe,cartesianAxis:fEe,chartData:ewe,errorBars:xEe,graphicalItems:K_e,layout:Cve,legend:jge,options:Y1e,polarAxis:b_e,polarOptions:oRe,referenceElements:nAe,rootProps:sRe,tooltip:vxe,zIndex:L1e}),dRe=function(e){return Kme({reducer:uRe,preloadedState:e,middleware:r=>{var n;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((n="es6")!==null&&n!==void 0?n:"")}).concat([m$.middleware,v$.middleware,dN.middleware,C$.middleware,w$.middleware])},enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(xH({type:"raf"}))},devTools:_h.devToolsEnabled})};function hRe(t){var{preloadedState:e,children:r,reduxStoreName:n}=t,i=wn(),s=A.useRef(null);if(i)return r;s.current==null&&(s.current=dRe(e));var a=U2;return A.createElement(KEe,{context:a,store:s.current},r)}function fRe(t){var{layout:e,margin:r}=t,n=Tr(),i=wn();return A.useEffect(()=>{i||(n(yve(e)),n(gve(r)))},[n,i,e,r]),null}var pRe=A.memo(fRe,kx);function mRe(t){var e=Tr();return A.useEffect(()=>{e(aRe(t))},[e,t]),null}function LU(t){var{zIndex:e,isPanorama:r}=t,n=r?"recharts-zindex-panorama-":"recharts-zindex-",i=BG("".concat(n).concat(e)),s=Tr();return A.useLayoutEffect(()=>(s(D1e({zIndex:e,elementId:i,isPanorama:r})),()=>{s(k1e({zIndex:e,isPanorama:r}))}),[s,e,i,r]),A.createElement("g",{tabIndex:-1,id:i})}function zU(t){var{children:e,isPanorama:r}=t,n=Oe(E1e);if(!n||n.length===0)return e;var i=n.filter(a=>a<0),s=n.filter(a=>a>0);return A.createElement(A.Fragment,null,i.map(a=>A.createElement(LU,{key:a,zIndex:a,isPanorama:r})),e,s.map(a=>A.createElement(LU,{key:a,zIndex:a,isPanorama:r})))}var vRe=["children"];function gRe(t,e){if(t==null)return{};var r,n,i=yRe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function yRe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function sC(){return sC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sC.apply(null,arguments)}var bRe={width:"100%",height:"100%",display:"block"},SRe=A.forwardRef((t,e)=>{var r=Y2(),n=X2(),i=eW();if(!ha(r)||!ha(n))return null;var{children:s,otherAttributes:a,title:c,desc:u}=t,d,h;return a!=null&&(typeof a.tabIndex=="number"?d=a.tabIndex:d=i?0:void 0,typeof a.role=="string"?h=a.role:h=i?"application":void 0),A.createElement(P2,sC({},a,{title:c,desc:u,role:h,tabIndex:d,width:r,height:n,style:bRe,ref:e}),s)}),CRe=t=>{var{children:e}=t,r=Oe(lx);if(!r)return null;var{width:n,height:i,y:s,x:a}=r;return A.createElement(P2,{width:n,height:i,x:a,y:s},e)},UU=A.forwardRef((t,e)=>{var{children:r}=t,n=gRe(t,vRe),i=wn();return i?A.createElement(CRe,null,A.createElement(zU,{isPanorama:!0},r)):A.createElement(SRe,sC({ref:e},n),A.createElement(zU,{isPanorama:!1},r))});function xRe(){var t=Tr(),[e,r]=A.useState(null),n=Oe(Lve);return A.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),s=i.width/e.offsetWidth;ar(s)&&s!==n&&t(Sve(s))}},[e,t,n]),r}function BU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function wRe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BU(Object(r),!0).forEach(function(n){_Re(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _Re(t,e,r){return(e=ERe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ERe(t){var e=ARe(t,"string");return typeof e=="symbol"?e:e+""}function ARe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tu(){return Tu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tu.apply(null,arguments)}var TRe=()=>(lwe(),null);function aC(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var RRe=A.forwardRef((t,e)=>{var r,n,i=A.useRef(null),[s,a]=A.useState({containerWidth:aC((r=t.style)===null||r===void 0?void 0:r.width),containerHeight:aC((n=t.style)===null||n===void 0?void 0:n.height)}),c=A.useCallback((d,h)=>{a(p=>{var g=Math.round(d),y=Math.round(h);return p.containerWidth===g&&p.containerHeight===y?p:{containerWidth:g,containerHeight:y}})},[]),u=A.useCallback(d=>{if(typeof e=="function"&&e(d),d!=null&&typeof ResizeObserver<"u"){var{width:h,height:p}=d.getBoundingClientRect();c(h,p);var g=S=>{var{width:x,height:w}=S[0].contentRect;c(x,w)},y=new ResizeObserver(g);y.observe(d),i.current=y}},[e,c]);return A.useEffect(()=>()=>{var d=i.current;d?.disconnect()},[c]),A.createElement(A.Fragment,null,A.createElement(dx,{width:s.containerWidth,height:s.containerHeight}),A.createElement("div",Tu({ref:u},t)))}),PRe=A.forwardRef((t,e)=>{var{width:r,height:n}=t,[i,s]=A.useState({containerWidth:aC(r),containerHeight:aC(n)}),a=A.useCallback((u,d)=>{s(h=>{var p=Math.round(u),g=Math.round(d);return h.containerWidth===p&&h.containerHeight===g?h:{containerWidth:p,containerHeight:g}})},[]),c=A.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null){var{width:d,height:h}=u.getBoundingClientRect();a(d,h)}},[e,a]);return A.createElement(A.Fragment,null,A.createElement(dx,{width:i.containerWidth,height:i.containerHeight}),A.createElement("div",Tu({ref:c},t)))}),IRe=A.forwardRef((t,e)=>{var{width:r,height:n}=t;return A.createElement(A.Fragment,null,A.createElement(dx,{width:r,height:n}),A.createElement("div",Tu({ref:e},t)))}),NRe=A.forwardRef((t,e)=>{var{width:r,height:n}=t;return lo(r)||lo(n)?A.createElement(PRe,Tu({},t,{ref:e})):A.createElement(IRe,Tu({},t,{ref:e}))});function ORe(t){return t===!0?RRe:NRe}var jRe=A.forwardRef((t,e)=>{var{children:r,className:n,height:i,onClick:s,onContextMenu:a,onDoubleClick:c,onMouseDown:u,onMouseEnter:d,onMouseLeave:h,onMouseMove:p,onMouseUp:g,onTouchEnd:y,onTouchMove:S,onTouchStart:x,style:w,width:E,responsive:R,dispatchTouchEvents:T=!0}=t,M=A.useRef(null),D=Tr(),[z,j]=A.useState(null),[O,L]=A.useState(null),V=xRe(),U=$2(),F=U?.width>0?U.width:E,q=U?.height>0?U.height:i,ve=A.useCallback(se=>{V(se),typeof e=="function"&&e(se),j(se),L(se),se!=null&&(M.current=se)},[V,e,j,L]),Ae=A.useCallback(se=>{D(p$(se)),D(Bi({handler:s,reactEvent:se}))},[D,s]),Y=A.useCallback(se=>{D(GR(se)),D(Bi({handler:d,reactEvent:se}))},[D,d]),ae=A.useCallback(se=>{D(QK()),D(Bi({handler:h,reactEvent:se}))},[D,h]),pe=A.useCallback(se=>{D(GR(se)),D(Bi({handler:p,reactEvent:se}))},[D,p]),me=A.useCallback(()=>{D(S$())},[D]),_e=A.useCallback(se=>{D(b$(se.key))},[D]),H=A.useCallback(se=>{D(Bi({handler:a,reactEvent:se}))},[D,a]),G=A.useCallback(se=>{D(Bi({handler:c,reactEvent:se}))},[D,c]),le=A.useCallback(se=>{D(Bi({handler:u,reactEvent:se}))},[D,u]),X=A.useCallback(se=>{D(Bi({handler:g,reactEvent:se}))},[D,g]),ge=A.useCallback(se=>{D(Bi({handler:x,reactEvent:se}))},[D,x]),be=A.useCallback(se=>{T&&D(x$(se)),D(Bi({handler:S,reactEvent:se}))},[D,T,S]),we=A.useCallback(se=>{D(Bi({handler:y,reactEvent:se}))},[D,y]),Ke=ORe(R);return A.createElement(gG.Provider,{value:z},A.createElement(xF.Provider,{value:O},A.createElement(Ke,{width:F??w?.width,height:q??w?.height,className:wt("recharts-wrapper",n),style:wRe({position:"relative",cursor:"default",width:F,height:q},w),onClick:Ae,onContextMenu:H,onDoubleClick:G,onFocus:me,onKeyDown:_e,onMouseDown:le,onMouseEnter:Y,onMouseLeave:ae,onMouseMove:pe,onMouseUp:X,onTouchEnd:we,onTouchMove:be,onTouchStart:ge,ref:ve},A.createElement(TRe,null),r)))}),MRe=["width","height","responsive","children","className","style","compact","title","desc"];function DRe(t,e){if(t==null)return{};var r,n,i=kRe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function kRe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var LRe=A.forwardRef((t,e)=>{var{width:r,height:n,responsive:i,children:s,className:a,style:c,compact:u,title:d,desc:h}=t,p=DRe(t,MRe),g=Gi(p);return u?A.createElement(A.Fragment,null,A.createElement(dx,{width:r,height:n}),A.createElement(UU,{otherAttributes:g,title:d,desc:h},s)):A.createElement(jRe,{className:a,style:c,width:r,height:n,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},A.createElement(UU,{otherAttributes:g,title:d,desc:h,ref:e},A.createElement(sAe,null,s)))});function $R(){return $R=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$R.apply(null,arguments)}var zRe={top:5,right:5,bottom:5,left:5},URe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:zRe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},_$=A.forwardRef(function(e,r){var n,i=$r(e.categoricalChartProps,URe),{chartName:s,defaultTooltipEventType:a,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,categoricalChartProps:d}=e,h={chartName:s,defaultTooltipEventType:a,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,eventEmitter:void 0};return A.createElement(hRe,{preloadedState:{options:h},reduxStoreName:(n=d.id)!==null&&n!==void 0?n:s},A.createElement(YEe,{chartData:d.data}),A.createElement(pRe,{layout:i.layout,margin:i.margin}),A.createElement(mRe,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),A.createElement(LRe,$R({},i,{ref:r})))}),BRe=["axis"],qRe=A.forwardRef((t,e)=>A.createElement(_$,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:BRe,tooltipPayloadSearcher:yG,categoricalChartProps:t,ref:e})),VRe=["axis"],FRe=A.forwardRef((t,e)=>A.createElement(_$,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:VRe,tooltipPayloadSearcher:yG,categoricalChartProps:t,ref:e}));const py=({performance:t,evolutionData:e=[]})=>{const r=i=>`$${i.toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})}`,n=[{label:"ROI Total",value:`${t.totalReturn>0?"+":""}${t.totalReturn.toFixed(2)}%`,color:t.totalReturn>0?"text-success":t.totalReturn<0?"text-danger":"text-text-secondary",bgColor:t.totalReturn>0?"bg-success/10":t.totalReturn<0?"bg-danger/10":"bg-bg-secondary"},{label:"Capital Invertido",value:r(t.totalInvested),color:"text-primary",bgColor:"bg-primary/10"},{label:"Valor Actual",value:r(t.currentValue),color:"text-info",bgColor:"bg-info/10"},{label:"Ganancias Realizadas",value:r(t.realizedGains),color:"text-success",bgColor:"bg-success/10"},{label:"Ganancias No Realizadas",value:r(t.unrealizedGains),color:"text-warning",bgColor:"bg-warning/10"},{label:"Total de Operaciones",value:t.totalTrades.toString(),color:"text-text-primary",bgColor:"bg-bg-secondary"},{label:"Tasa de xito",value:`${t.winRate.toFixed(1)}%`,color:t.winRate>=50?"text-success":"text-danger",bgColor:t.winRate>=50?"bg-success/10":"bg-danger/10"}];return t.sharpeRatio!==void 0&&n.push({label:"Sharpe Ratio",value:t.sharpeRatio.toFixed(2),color:t.sharpeRatio>1?"text-success":"text-warning",bgColor:t.sharpeRatio>1?"bg-success/10":"bg-warning/10"}),t.maxDrawdown!==void 0&&n.push({label:"Max Drawdown",value:`${t.maxDrawdown.toFixed(2)}%`,color:"text-danger",bgColor:"bg-danger/10"}),m.jsxs("div",{className:"space-y-6",children:[m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map((i,s)=>m.jsxs("div",{className:`${i.bgColor} rounded-xl p-6 border border-border`,children:[m.jsx("p",{className:"text-sm text-text-secondary font-medium mb-2",children:i.label}),m.jsx("p",{className:`text-3xl font-bold ${i.color}`,children:i.value})]},s))}),e.length>0&&m.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-border",children:[m.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Evolucin del Capital"}),m.jsx(FH,{width:"100%",height:300,children:m.jsxs(FRe,{data:e,children:[m.jsx("defs",{children:m.jsxs("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[m.jsx("stop",{offset:"5%",stopColor:"#2d9bf0",stopOpacity:.8}),m.jsx("stop",{offset:"95%",stopColor:"#2d9bf0",stopOpacity:0})]})}),m.jsx(sN,{strokeDasharray:"3 3"}),m.jsx(oN,{dataKey:"date"}),m.jsx(cN,{}),m.jsx(CG,{formatter:i=>r(i),labelStyle:{color:"#111827"}}),m.jsx(h$,{type:"monotone",dataKey:"value",stroke:"#2d9bf0",fillOpacity:1,fill:"url(#colorValue)"})]})})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-border",children:[m.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Desglose Fiscal (Mxico)"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex justify-between items-center p-3 bg-bg-primary rounded-lg",children:[m.jsx("span",{className:"text-text-secondary",children:"ISR sobre Ganancias (10%)"}),m.jsx("span",{className:"font-semibold text-text-primary",children:r(t.realizedGains*.1)})]}),m.jsxs("div",{className:"flex justify-between items-center p-3 bg-bg-primary rounded-lg",children:[m.jsx("span",{className:"text-text-secondary",children:"Ganancias Netas (despus de impuestos)"}),m.jsx("span",{className:"font-semibold text-success",children:r(t.realizedGains*.9)})]})]})]})]})},Ws="strategies",Pn={async getAll(){try{const t=Ya(di(lt,Ws),Pb("createdAt","desc"));return(await Ac(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error getting strategies:",t),new Error("Error al obtener estrategias")}},async getById(t){try{const e=rr(lt,Ws,t),r=await kC(e);return r.exists()?{id:r.id,...r.data()}:null}catch(e){throw console.error("Error getting strategy:",e),new Error("Error al obtener estrategia")}},async create(t,e){try{const r={...t,createdAt:Ee.now(),updatedAt:Ee.now()};if(e){const n=rr(lt,Ws,e);return await Zd(n,r),e}else return(await dS(di(lt,Ws),r)).id}catch(r){throw console.error("Error creating strategy:",r),new Error("Error al crear estrategia")}},async update(t,e){try{const r=rr(lt,Ws,t);await Cc(r,{...e,updatedAt:Ee.now()})}catch(r){throw console.error("Error updating strategy:",r),new Error("Error al actualizar estrategia")}},async delete(t){try{const e=rr(lt,Ws,t);await a2(e)}catch(e){throw console.error("Error deleting strategy:",e),new Error("Error al eliminar estrategia")}},async updatePerformance(t,e){try{const r=rr(lt,Ws,t);await Cc(r,{performance:e,lastUpdate:Ee.now(),updatedAt:Ee.now()})}catch(r){throw console.error("Error updating performance:",r),new Error("Error al actualizar performance")}},async toggleTelegramNotifications(t,e){try{const r=rr(lt,Ws,t);await Cc(r,{telegramNotificationsEnabled:e,updatedAt:Ee.now()})}catch(r){throw console.error("Error toggling notifications:",r),new Error("Error al cambiar notificaciones")}},async toggleLiveAlerts(t,e){try{const r=rr(lt,Ws,t);await Cc(r,{liveAlertsEnabled:e,updatedAt:Ee.now()})}catch(r){throw console.error("Error toggling live alerts:",r),new Error("Error al cambiar alertas en vivo")}},async getActiveWithNotifications(){try{const t=Ya(di(lt,Ws),sn("isActive","==",!0),sn("telegramNotificationsEnabled","==",!0));return(await Ac(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error getting active strategies:",t),new Error("Error al obtener estrategias activas")}}};function E$(t,e){return function(){return t.apply(e,arguments)}}const{toString:HRe}=Object.prototype,{getPrototypeOf:hN}=Object,{iterator:Lx,toStringTag:A$}=Symbol,zx=(t=>e=>{const r=HRe.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Es=t=>(t=t.toLowerCase(),e=>zx(e)===t),Ux=t=>e=>typeof e===t,{isArray:jh}=Array,uh=Ux("undefined");function my(t){return t!==null&&!uh(t)&&t.constructor!==null&&!uh(t.constructor)&&Kn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const T$=Es("ArrayBuffer");function WRe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&T$(t.buffer),e}const KRe=Ux("string"),Kn=Ux("function"),R$=Ux("number"),vy=t=>t!==null&&typeof t=="object",GRe=t=>t===!0||t===!1,Ub=t=>{if(zx(t)!=="object")return!1;const e=hN(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(A$ in t)&&!(Lx in t)},$Re=t=>{if(!vy(t)||my(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},YRe=Es("Date"),XRe=Es("File"),QRe=Es("Blob"),JRe=Es("FileList"),ZRe=t=>vy(t)&&Kn(t.pipe),ePe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Kn(t.append)&&((e=zx(t))==="formdata"||e==="object"&&Kn(t.toString)&&t.toString()==="[object FormData]"))},tPe=Es("URLSearchParams"),[rPe,nPe,iPe,sPe]=["ReadableStream","Request","Response","Headers"].map(Es),aPe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function gy(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),jh(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{if(my(t))return;const s=r?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let c;for(n=0;n<a;n++)c=s[n],e.call(null,t[c],c,t)}}function P$(t,e){if(my(t))return null;e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const au=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,I$=t=>!uh(t)&&t!==au;function YR(){const{caseless:t,skipUndefined:e}=I$(this)&&this||{},r={},n=(i,s)=>{const a=t&&P$(r,s)||s;Ub(r[a])&&Ub(i)?r[a]=YR(r[a],i):Ub(i)?r[a]=YR({},i):jh(i)?r[a]=i.slice():(!e||!uh(i))&&(r[a]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&gy(arguments[i],n);return r}const oPe=(t,e,r,{allOwnKeys:n}={})=>(gy(e,(i,s)=>{r&&Kn(i)?t[s]=E$(i,r):t[s]=i},{allOwnKeys:n}),t),cPe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),lPe=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},uPe=(t,e,r,n)=>{let i,s,a;const c={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)a=i[s],(!n||n(a,t,e))&&!c[a]&&(e[a]=t[a],c[a]=!0);t=r!==!1&&hN(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},dPe=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},hPe=t=>{if(!t)return null;if(jh(t))return t;let e=t.length;if(!R$(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},fPe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&hN(Uint8Array)),pPe=(t,e)=>{const n=(t&&t[Lx]).call(t);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},mPe=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},vPe=Es("HTMLFormElement"),gPe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),qU=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),yPe=Es("RegExp"),N$=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};gy(r,(i,s)=>{let a;(a=e(i,s,t))!==!1&&(n[s]=a||i)}),Object.defineProperties(t,n)},bPe=t=>{N$(t,(e,r)=>{if(Kn(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Kn(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},SPe=(t,e)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return jh(t)?n(t):n(String(t).split(e)),r},CPe=()=>{},xPe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function wPe(t){return!!(t&&Kn(t.append)&&t[A$]==="FormData"&&t[Lx])}const _Pe=t=>{const e=new Array(10),r=(n,i)=>{if(vy(n)){if(e.indexOf(n)>=0)return;if(my(n))return n;if(!("toJSON"in n)){e[i]=n;const s=jh(n)?[]:{};return gy(n,(a,c)=>{const u=r(a,i+1);!uh(u)&&(s[c]=u)}),e[i]=void 0,s}}return n};return r(t,0)},EPe=Es("AsyncFunction"),APe=t=>t&&(vy(t)||Kn(t))&&Kn(t.then)&&Kn(t.catch),O$=((t,e)=>t?setImmediate:e?((r,n)=>(au.addEventListener("message",({source:i,data:s})=>{i===au&&s===r&&n.length&&n.shift()()},!1),i=>{n.push(i),au.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Kn(au.postMessage)),TPe=typeof queueMicrotask<"u"?queueMicrotask.bind(au):typeof process<"u"&&process.nextTick||O$,RPe=t=>t!=null&&Kn(t[Lx]),re={isArray:jh,isArrayBuffer:T$,isBuffer:my,isFormData:ePe,isArrayBufferView:WRe,isString:KRe,isNumber:R$,isBoolean:GRe,isObject:vy,isPlainObject:Ub,isEmptyObject:$Re,isReadableStream:rPe,isRequest:nPe,isResponse:iPe,isHeaders:sPe,isUndefined:uh,isDate:YRe,isFile:XRe,isBlob:QRe,isRegExp:yPe,isFunction:Kn,isStream:ZRe,isURLSearchParams:tPe,isTypedArray:fPe,isFileList:JRe,forEach:gy,merge:YR,extend:oPe,trim:aPe,stripBOM:cPe,inherits:lPe,toFlatObject:uPe,kindOf:zx,kindOfTest:Es,endsWith:dPe,toArray:hPe,forEachEntry:pPe,matchAll:mPe,isHTMLForm:vPe,hasOwnProperty:qU,hasOwnProp:qU,reduceDescriptors:N$,freezeMethods:bPe,toObjectSet:SPe,toCamelCase:gPe,noop:CPe,toFiniteNumber:xPe,findKey:P$,global:au,isContextDefined:I$,isSpecCompliantForm:wPe,toJSONObject:_Pe,isAsyncFn:EPe,isThenable:APe,setImmediate:O$,asap:TPe,isIterable:RPe};function Xe(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}re.inherits(Xe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:re.toJSONObject(this.config),code:this.code,status:this.status}}});const j$=Xe.prototype,M$={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{M$[t]={value:t}});Object.defineProperties(Xe,M$);Object.defineProperty(j$,"isAxiosError",{value:!0});Xe.from=(t,e,r,n,i,s)=>{const a=Object.create(j$);re.toFlatObject(t,a,function(h){return h!==Error.prototype},d=>d!=="isAxiosError");const c=t&&t.message?t.message:"Error",u=e==null&&t?t.code:e;return Xe.call(a,c,u,r,n,i),t&&a.cause==null&&Object.defineProperty(a,"cause",{value:t,configurable:!0}),a.name=t&&t.name||"Error",s&&Object.assign(a,s),a};const PPe=null;function XR(t){return re.isPlainObject(t)||re.isArray(t)}function D$(t){return re.endsWith(t,"[]")?t.slice(0,-2):t}function VU(t,e,r){return t?t.concat(e).map(function(i,s){return i=D$(i),!r&&s?"["+i+"]":i}).join(r?".":""):e}function IPe(t){return re.isArray(t)&&!t.some(XR)}const NPe=re.toFlatObject(re,{},null,function(e){return/^is[A-Z]/.test(e)});function Bx(t,e,r){if(!re.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=re.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,w){return!re.isUndefined(w[x])});const n=r.metaTokens,i=r.visitor||h,s=r.dots,a=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&re.isSpecCompliantForm(e);if(!re.isFunction(i))throw new TypeError("visitor must be a function");function d(S){if(S===null)return"";if(re.isDate(S))return S.toISOString();if(re.isBoolean(S))return S.toString();if(!u&&re.isBlob(S))throw new Xe("Blob is not supported. Use a Buffer instead.");return re.isArrayBuffer(S)||re.isTypedArray(S)?u&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function h(S,x,w){let E=S;if(S&&!w&&typeof S=="object"){if(re.endsWith(x,"{}"))x=n?x:x.slice(0,-2),S=JSON.stringify(S);else if(re.isArray(S)&&IPe(S)||(re.isFileList(S)||re.endsWith(x,"[]"))&&(E=re.toArray(S)))return x=D$(x),E.forEach(function(T,M){!(re.isUndefined(T)||T===null)&&e.append(a===!0?VU([x],M,s):a===null?x:x+"[]",d(T))}),!1}return XR(S)?!0:(e.append(VU(w,x,s),d(S)),!1)}const p=[],g=Object.assign(NPe,{defaultVisitor:h,convertValue:d,isVisitable:XR});function y(S,x){if(!re.isUndefined(S)){if(p.indexOf(S)!==-1)throw Error("Circular reference detected in "+x.join("."));p.push(S),re.forEach(S,function(E,R){(!(re.isUndefined(E)||E===null)&&i.call(e,E,re.isString(R)?R.trim():R,x,g))===!0&&y(E,x?x.concat(R):[R])}),p.pop()}}if(!re.isObject(t))throw new TypeError("data must be an object");return y(t),e}function FU(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function fN(t,e){this._pairs=[],t&&Bx(t,this,e)}const k$=fN.prototype;k$.append=function(e,r){this._pairs.push([e,r])};k$.toString=function(e){const r=e?function(n){return e.call(this,n,FU)}:FU;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function OPe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function L$(t,e,r){if(!e)return t;const n=r&&r.encode||OPe;re.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let s;if(i?s=i(e,r):s=re.isURLSearchParams(e)?e.toString():new fN(e,r).toString(n),s){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class HU{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){re.forEach(this.handlers,function(n){n!==null&&e(n)})}}const z$={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},jPe=typeof URLSearchParams<"u"?URLSearchParams:fN,MPe=typeof FormData<"u"?FormData:null,DPe=typeof Blob<"u"?Blob:null,kPe={isBrowser:!0,classes:{URLSearchParams:jPe,FormData:MPe,Blob:DPe},protocols:["http","https","file","blob","url","data"]},pN=typeof window<"u"&&typeof document<"u",QR=typeof navigator=="object"&&navigator||void 0,LPe=pN&&(!QR||["ReactNative","NativeScript","NS"].indexOf(QR.product)<0),zPe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",UPe=pN&&window.location.href||"http://localhost",BPe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:pN,hasStandardBrowserEnv:LPe,hasStandardBrowserWebWorkerEnv:zPe,navigator:QR,origin:UPe},Symbol.toStringTag,{value:"Module"})),bn={...BPe,...kPe};function qPe(t,e){return Bx(t,new bn.classes.URLSearchParams,{visitor:function(r,n,i,s){return bn.isNode&&re.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function VPe(t){return re.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function FPe(t){const e={},r=Object.keys(t);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function U$(t){function e(r,n,i,s){let a=r[s++];if(a==="__proto__")return!0;const c=Number.isFinite(+a),u=s>=r.length;return a=!a&&re.isArray(i)?i.length:a,u?(re.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!c):((!i[a]||!re.isObject(i[a]))&&(i[a]=[]),e(r,n,i[a],s)&&re.isArray(i[a])&&(i[a]=FPe(i[a])),!c)}if(re.isFormData(t)&&re.isFunction(t.entries)){const r={};return re.forEachEntry(t,(n,i)=>{e(VPe(n),i,r,0)}),r}return null}function HPe(t,e,r){if(re.isString(t))try{return(e||JSON.parse)(t),re.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const yy={transitional:z$,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=re.isObject(e);if(s&&re.isHTMLForm(e)&&(e=new FormData(e)),re.isFormData(e))return i?JSON.stringify(U$(e)):e;if(re.isArrayBuffer(e)||re.isBuffer(e)||re.isStream(e)||re.isFile(e)||re.isBlob(e)||re.isReadableStream(e))return e;if(re.isArrayBufferView(e))return e.buffer;if(re.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return qPe(e,this.formSerializer).toString();if((c=re.isFileList(e))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Bx(c?{"files[]":e}:e,u&&new u,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),HPe(e)):e}],transformResponse:[function(e){const r=this.transitional||yy.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(re.isResponse(e)||re.isReadableStream(e))return e;if(e&&re.isString(e)&&(n&&!this.responseType||i)){const a=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(c){if(a)throw c.name==="SyntaxError"?Xe.from(c,Xe.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:bn.classes.FormData,Blob:bn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};re.forEach(["delete","get","head","post","put","patch"],t=>{yy.headers[t]={}});const WPe=re.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),KPe=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(a){i=a.indexOf(":"),r=a.substring(0,i).trim().toLowerCase(),n=a.substring(i+1).trim(),!(!r||e[r]&&WPe[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},WU=Symbol("internals");function Dv(t){return t&&String(t).trim().toLowerCase()}function Bb(t){return t===!1||t==null?t:re.isArray(t)?t.map(Bb):String(t)}function GPe(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const $Pe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function nT(t,e,r,n,i){if(re.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!re.isString(e)){if(re.isString(n))return e.indexOf(n)!==-1;if(re.isRegExp(n))return n.test(e)}}function YPe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function XPe(t,e){const r=re.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,s,a){return this[n].call(this,e,i,s,a)},configurable:!0})})}let Gn=class{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function s(c,u,d){const h=Dv(u);if(!h)throw new Error("header name must be a non-empty string");const p=re.findKey(i,h);(!p||i[p]===void 0||d===!0||d===void 0&&i[p]!==!1)&&(i[p||u]=Bb(c))}const a=(c,u)=>re.forEach(c,(d,h)=>s(d,h,u));if(re.isPlainObject(e)||e instanceof this.constructor)a(e,r);else if(re.isString(e)&&(e=e.trim())&&!$Pe(e))a(KPe(e),r);else if(re.isObject(e)&&re.isIterable(e)){let c={},u,d;for(const h of e){if(!re.isArray(h))throw TypeError("Object iterator must return a key-value pair");c[d=h[0]]=(u=c[d])?re.isArray(u)?[...u,h[1]]:[u,h[1]]:h[1]}a(c,r)}else e!=null&&s(r,e,n);return this}get(e,r){if(e=Dv(e),e){const n=re.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return GPe(i);if(re.isFunction(r))return r.call(this,i,n);if(re.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Dv(e),e){const n=re.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||nT(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function s(a){if(a=Dv(a),a){const c=re.findKey(n,a);c&&(!r||nT(n,n[c],c,r))&&(delete n[c],i=!0)}}return re.isArray(e)?e.forEach(s):s(e),i}clear(e){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!e||nT(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const r=this,n={};return re.forEach(this,(i,s)=>{const a=re.findKey(n,s);if(a){r[a]=Bb(i),delete r[s];return}const c=e?YPe(s):String(s).trim();c!==s&&delete r[s],r[c]=Bb(i),n[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return re.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&re.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[WU]=this[WU]={accessors:{}}).accessors,i=this.prototype;function s(a){const c=Dv(a);n[c]||(XPe(i,a),n[c]=!0)}return re.isArray(e)?e.forEach(s):s(e),this}};Gn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);re.reduceDescriptors(Gn.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});re.freezeMethods(Gn);function iT(t,e){const r=this||yy,n=e||r,i=Gn.from(n.headers);let s=n.data;return re.forEach(t,function(c){s=c.call(r,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function B$(t){return!!(t&&t.__CANCEL__)}function Mh(t,e,r){Xe.call(this,t??"canceled",Xe.ERR_CANCELED,e,r),this.name="CanceledError"}re.inherits(Mh,Xe,{__CANCEL__:!0});function q$(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new Xe("Request failed with status code "+r.status,[Xe.ERR_BAD_REQUEST,Xe.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function QPe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function JPe(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,s=0,a;return e=e!==void 0?e:1e3,function(u){const d=Date.now(),h=n[s];a||(a=d),r[i]=u,n[i]=d;let p=s,g=0;for(;p!==i;)g+=r[p++],p=p%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),d-a<e)return;const y=h&&d-h;return y?Math.round(g*1e3/y):void 0}}function ZPe(t,e){let r=0,n=1e3/e,i,s;const a=(d,h=Date.now())=>{r=h,i=null,s&&(clearTimeout(s),s=null),t(...d)};return[(...d)=>{const h=Date.now(),p=h-r;p>=n?a(d,h):(i=d,s||(s=setTimeout(()=>{s=null,a(i)},n-p)))},()=>i&&a(i)]}const oC=(t,e,r=3)=>{let n=0;const i=JPe(50,250);return ZPe(s=>{const a=s.loaded,c=s.lengthComputable?s.total:void 0,u=a-n,d=i(u),h=a<=c;n=a;const p={loaded:a,total:c,progress:c?a/c:void 0,bytes:u,rate:d||void 0,estimated:d&&c&&h?(c-a)/d:void 0,event:s,lengthComputable:c!=null,[e?"download":"upload"]:!0};t(p)},r)},KU=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},GU=t=>(...e)=>re.asap(()=>t(...e)),e2e=bn.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,bn.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(bn.origin),bn.navigator&&/(msie|trident)/i.test(bn.navigator.userAgent)):()=>!0,t2e=bn.hasStandardBrowserEnv?{write(t,e,r,n,i,s,a){if(typeof document>"u")return;const c=[`${t}=${encodeURIComponent(e)}`];re.isNumber(r)&&c.push(`expires=${new Date(r).toUTCString()}`),re.isString(n)&&c.push(`path=${n}`),re.isString(i)&&c.push(`domain=${i}`),s===!0&&c.push("secure"),re.isString(a)&&c.push(`SameSite=${a}`),document.cookie=c.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function r2e(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function n2e(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function V$(t,e,r){let n=!r2e(e);return t&&(n||r==!1)?n2e(t,e):e}const $U=t=>t instanceof Gn?{...t}:t;function Ru(t,e){e=e||{};const r={};function n(d,h,p,g){return re.isPlainObject(d)&&re.isPlainObject(h)?re.merge.call({caseless:g},d,h):re.isPlainObject(h)?re.merge({},h):re.isArray(h)?h.slice():h}function i(d,h,p,g){if(re.isUndefined(h)){if(!re.isUndefined(d))return n(void 0,d,p,g)}else return n(d,h,p,g)}function s(d,h){if(!re.isUndefined(h))return n(void 0,h)}function a(d,h){if(re.isUndefined(h)){if(!re.isUndefined(d))return n(void 0,d)}else return n(void 0,h)}function c(d,h,p){if(p in e)return n(d,h);if(p in t)return n(void 0,d)}const u={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c,headers:(d,h,p)=>i($U(d),$U(h),p,!0)};return re.forEach(Object.keys({...t,...e}),function(h){const p=u[h]||i,g=p(t[h],e[h],h);re.isUndefined(g)&&p!==c||(r[h]=g)}),r}const F$=t=>{const e=Ru({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:c}=e;if(e.headers=a=Gn.from(a),e.url=L$(V$(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),re.isFormData(r)){if(bn.hasStandardBrowserEnv||bn.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(re.isFunction(r.getHeaders)){const u=r.getHeaders(),d=["content-type","content-length"];Object.entries(u).forEach(([h,p])=>{d.includes(h.toLowerCase())&&a.set(h,p)})}}if(bn.hasStandardBrowserEnv&&(n&&re.isFunction(n)&&(n=n(e)),n||n!==!1&&e2e(e.url))){const u=i&&s&&t2e.read(s);u&&a.set(i,u)}return e},i2e=typeof XMLHttpRequest<"u",s2e=i2e&&function(t){return new Promise(function(r,n){const i=F$(t);let s=i.data;const a=Gn.from(i.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:d}=i,h,p,g,y,S;function x(){y&&y(),S&&S(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let w=new XMLHttpRequest;w.open(i.method.toUpperCase(),i.url,!0),w.timeout=i.timeout;function E(){if(!w)return;const T=Gn.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),D={data:!c||c==="text"||c==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:T,config:t,request:w};q$(function(j){r(j),x()},function(j){n(j),x()},D),w=null}"onloadend"in w?w.onloadend=E:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(E)},w.onabort=function(){w&&(n(new Xe("Request aborted",Xe.ECONNABORTED,t,w)),w=null)},w.onerror=function(M){const D=M&&M.message?M.message:"Network Error",z=new Xe(D,Xe.ERR_NETWORK,t,w);z.event=M||null,n(z),w=null},w.ontimeout=function(){let M=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const D=i.transitional||z$;i.timeoutErrorMessage&&(M=i.timeoutErrorMessage),n(new Xe(M,D.clarifyTimeoutError?Xe.ETIMEDOUT:Xe.ECONNABORTED,t,w)),w=null},s===void 0&&a.setContentType(null),"setRequestHeader"in w&&re.forEach(a.toJSON(),function(M,D){w.setRequestHeader(D,M)}),re.isUndefined(i.withCredentials)||(w.withCredentials=!!i.withCredentials),c&&c!=="json"&&(w.responseType=i.responseType),d&&([g,S]=oC(d,!0),w.addEventListener("progress",g)),u&&w.upload&&([p,y]=oC(u),w.upload.addEventListener("progress",p),w.upload.addEventListener("loadend",y)),(i.cancelToken||i.signal)&&(h=T=>{w&&(n(!T||T.type?new Mh(null,t,w):T),w.abort(),w=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const R=QPe(i.url);if(R&&bn.protocols.indexOf(R)===-1){n(new Xe("Unsupported protocol "+R+":",Xe.ERR_BAD_REQUEST,t));return}w.send(s||null)})},a2e=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,i;const s=function(d){if(!i){i=!0,c();const h=d instanceof Error?d:this.reason;n.abort(h instanceof Xe?h:new Mh(h instanceof Error?h.message:h))}};let a=e&&setTimeout(()=>{a=null,s(new Xe(`timeout ${e} of ms exceeded`,Xe.ETIMEDOUT))},e);const c=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(s):d.removeEventListener("abort",s)}),t=null)};t.forEach(d=>d.addEventListener("abort",s));const{signal:u}=n;return u.unsubscribe=()=>re.asap(c),u}},o2e=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,i;for(;n<r;)i=n+e,yield t.slice(n,i),n=i},c2e=async function*(t,e){for await(const r of l2e(t))yield*o2e(r,e)},l2e=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},YU=(t,e,r,n)=>{const i=c2e(t,e);let s=0,a,c=u=>{a||(a=!0,n&&n(u))};return new ReadableStream({async pull(u){try{const{done:d,value:h}=await i.next();if(d){c(),u.close();return}let p=h.byteLength;if(r){let g=s+=p;r(g)}u.enqueue(new Uint8Array(h))}catch(d){throw c(d),d}},cancel(u){return c(u),i.return()}},{highWaterMark:2})},XU=64*1024,{isFunction:gb}=re,u2e=(({Request:t,Response:e})=>({Request:t,Response:e}))(re.global),{ReadableStream:QU,TextEncoder:JU}=re.global,ZU=(t,...e)=>{try{return!!t(...e)}catch{return!1}},d2e=t=>{t=re.merge.call({skipUndefined:!0},u2e,t);const{fetch:e,Request:r,Response:n}=t,i=e?gb(e):typeof fetch=="function",s=gb(r),a=gb(n);if(!i)return!1;const c=i&&gb(QU),u=i&&(typeof JU=="function"?(S=>x=>S.encode(x))(new JU):async S=>new Uint8Array(await new r(S).arrayBuffer())),d=s&&c&&ZU(()=>{let S=!1;const x=new r(bn.origin,{body:new QU,method:"POST",get duplex(){return S=!0,"half"}}).headers.has("Content-Type");return S&&!x}),h=a&&c&&ZU(()=>re.isReadableStream(new n("").body)),p={stream:h&&(S=>S.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(S=>{!p[S]&&(p[S]=(x,w)=>{let E=x&&x[S];if(E)return E.call(x);throw new Xe(`Response type '${S}' is not supported`,Xe.ERR_NOT_SUPPORT,w)})});const g=async S=>{if(S==null)return 0;if(re.isBlob(S))return S.size;if(re.isSpecCompliantForm(S))return(await new r(bn.origin,{method:"POST",body:S}).arrayBuffer()).byteLength;if(re.isArrayBufferView(S)||re.isArrayBuffer(S))return S.byteLength;if(re.isURLSearchParams(S)&&(S=S+""),re.isString(S))return(await u(S)).byteLength},y=async(S,x)=>{const w=re.toFiniteNumber(S.getContentLength());return w??g(x)};return async S=>{let{url:x,method:w,data:E,signal:R,cancelToken:T,timeout:M,onDownloadProgress:D,onUploadProgress:z,responseType:j,headers:O,withCredentials:L="same-origin",fetchOptions:V}=F$(S),U=e||fetch;j=j?(j+"").toLowerCase():"text";let F=a2e([R,T&&T.toAbortSignal()],M),q=null;const ve=F&&F.unsubscribe&&(()=>{F.unsubscribe()});let Ae;try{if(z&&d&&w!=="get"&&w!=="head"&&(Ae=await y(O,E))!==0){let H=new r(x,{method:"POST",body:E,duplex:"half"}),G;if(re.isFormData(E)&&(G=H.headers.get("content-type"))&&O.setContentType(G),H.body){const[le,X]=KU(Ae,oC(GU(z)));E=YU(H.body,XU,le,X)}}re.isString(L)||(L=L?"include":"omit");const Y=s&&"credentials"in r.prototype,ae={...V,signal:F,method:w.toUpperCase(),headers:O.normalize().toJSON(),body:E,duplex:"half",credentials:Y?L:void 0};q=s&&new r(x,ae);let pe=await(s?U(q,V):U(x,ae));const me=h&&(j==="stream"||j==="response");if(h&&(D||me&&ve)){const H={};["status","statusText","headers"].forEach(ge=>{H[ge]=pe[ge]});const G=re.toFiniteNumber(pe.headers.get("content-length")),[le,X]=D&&KU(G,oC(GU(D),!0))||[];pe=new n(YU(pe.body,XU,le,()=>{X&&X(),ve&&ve()}),H)}j=j||"text";let _e=await p[re.findKey(p,j)||"text"](pe,S);return!me&&ve&&ve(),await new Promise((H,G)=>{q$(H,G,{data:_e,headers:Gn.from(pe.headers),status:pe.status,statusText:pe.statusText,config:S,request:q})})}catch(Y){throw ve&&ve(),Y&&Y.name==="TypeError"&&/Load failed|fetch/i.test(Y.message)?Object.assign(new Xe("Network Error",Xe.ERR_NETWORK,S,q),{cause:Y.cause||Y}):Xe.from(Y,Y&&Y.code,S,q)}}},h2e=new Map,H$=t=>{let e=t&&t.env||{};const{fetch:r,Request:n,Response:i}=e,s=[n,i,r];let a=s.length,c=a,u,d,h=h2e;for(;c--;)u=s[c],d=h.get(u),d===void 0&&h.set(u,d=c?new Map:d2e(e)),h=d;return d};H$();const mN={http:PPe,xhr:s2e,fetch:{get:H$}};re.forEach(mN,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const eB=t=>`- ${t}`,f2e=t=>re.isFunction(t)||t===null||t===!1;function p2e(t,e){t=re.isArray(t)?t:[t];const{length:r}=t;let n,i;const s={};for(let a=0;a<r;a++){n=t[a];let c;if(i=n,!f2e(n)&&(i=mN[(c=String(n)).toLowerCase()],i===void 0))throw new Xe(`Unknown adapter '${c}'`);if(i&&(re.isFunction(i)||(i=i.get(e))))break;s[c||"#"+a]=i}if(!i){const a=Object.entries(s).map(([u,d])=>`adapter ${u} `+(d===!1?"is not supported by the environment":"is not available in the build"));let c=r?a.length>1?`since :
`+a.map(eB).join(`
`):" "+eB(a[0]):"as no adapter specified";throw new Xe("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i}const W$={getAdapter:p2e,adapters:mN};function sT(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Mh(null,t)}function tB(t){return sT(t),t.headers=Gn.from(t.headers),t.data=iT.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),W$.getAdapter(t.adapter||yy.adapter,t)(t).then(function(n){return sT(t),n.data=iT.call(t,t.transformResponse,n),n.headers=Gn.from(n.headers),n},function(n){return B$(n)||(sT(t),n&&n.response&&(n.response.data=iT.call(t,t.transformResponse,n.response),n.response.headers=Gn.from(n.response.headers))),Promise.reject(n)})}const K$="1.13.2",qx={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{qx[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const rB={};qx.transitional=function(e,r,n){function i(s,a){return"[Axios v"+K$+"] Transitional option '"+s+"'"+a+(n?". "+n:"")}return(s,a,c)=>{if(e===!1)throw new Xe(i(a," has been removed"+(r?" in "+r:"")),Xe.ERR_DEPRECATED);return r&&!rB[a]&&(rB[a]=!0,console.warn(i(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,a,c):!0}};qx.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function m2e(t,e,r){if(typeof t!="object")throw new Xe("options must be an object",Xe.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],a=e[s];if(a){const c=t[s],u=c===void 0||a(c,s,t);if(u!==!0)throw new Xe("option "+s+" must be "+u,Xe.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Xe("Unknown option "+s,Xe.ERR_BAD_OPTION)}}const qb={assertOptions:m2e,validators:qx},Ks=qb.validators;let mu=class{constructor(e){this.defaults=e||{},this.interceptors={request:new HU,response:new HU}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Ru(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&qb.assertOptions(n,{silentJSONParsing:Ks.transitional(Ks.boolean),forcedJSONParsing:Ks.transitional(Ks.boolean),clarifyTimeoutError:Ks.transitional(Ks.boolean)},!1),i!=null&&(re.isFunction(i)?r.paramsSerializer={serialize:i}:qb.assertOptions(i,{encode:Ks.function,serialize:Ks.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),qb.assertOptions(r,{baseUrl:Ks.spelling("baseURL"),withXsrfToken:Ks.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=s&&re.merge(s.common,s[r.method]);s&&re.forEach(["delete","get","head","post","put","patch","common"],S=>{delete s[S]}),r.headers=Gn.concat(a,s);const c=[];let u=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(r)===!1||(u=u&&x.synchronous,c.unshift(x.fulfilled,x.rejected))});const d=[];this.interceptors.response.forEach(function(x){d.push(x.fulfilled,x.rejected)});let h,p=0,g;if(!u){const S=[tB.bind(this),void 0];for(S.unshift(...c),S.push(...d),g=S.length,h=Promise.resolve(r);p<g;)h=h.then(S[p++],S[p++]);return h}g=c.length;let y=r;for(;p<g;){const S=c[p++],x=c[p++];try{y=S(y)}catch(w){x.call(this,w);break}}try{h=tB.call(this,y)}catch(S){return Promise.reject(S)}for(p=0,g=d.length;p<g;)h=h.then(d[p++],d[p++]);return h}getUri(e){e=Ru(this.defaults,e);const r=V$(e.baseURL,e.url,e.allowAbsoluteUrls);return L$(r,e.params,e.paramsSerializer)}};re.forEach(["delete","get","head","options"],function(e){mu.prototype[e]=function(r,n){return this.request(Ru(n||{},{method:e,url:r,data:(n||{}).data}))}});re.forEach(["post","put","patch"],function(e){function r(n){return function(s,a,c){return this.request(Ru(c||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}mu.prototype[e]=r(),mu.prototype[e+"Form"]=r(!0)});let v2e=class G${constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(c=>{n.subscribe(c),s=c}).then(i);return a.cancel=function(){n.unsubscribe(s)},a},e(function(s,a,c){n.reason||(n.reason=new Mh(s,a,c),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new G$(function(i){e=i}),cancel:e}}};function g2e(t){return function(r){return t.apply(null,r)}}function y2e(t){return re.isObject(t)&&t.isAxiosError===!0}const JR={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(JR).forEach(([t,e])=>{JR[e]=t});function $$(t){const e=new mu(t),r=E$(mu.prototype.request,e);return re.extend(r,mu.prototype,e,{allOwnKeys:!0}),re.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return $$(Ru(t,i))},r}const Nt=$$(yy);Nt.Axios=mu;Nt.CanceledError=Mh;Nt.CancelToken=v2e;Nt.isCancel=B$;Nt.VERSION=K$;Nt.toFormData=Bx;Nt.AxiosError=Xe;Nt.Cancel=Nt.CanceledError;Nt.all=function(e){return Promise.all(e)};Nt.spread=g2e;Nt.isAxiosError=y2e;Nt.mergeConfig=Ru;Nt.AxiosHeaders=Gn;Nt.formToJSON=t=>U$(re.isHTMLForm(t)?new FormData(t):t);Nt.getAdapter=W$.getAdapter;Nt.HttpStatusCode=JR;Nt.default=Nt;const{Axios:vOe,AxiosError:gOe,CanceledError:yOe,isCancel:bOe,CancelToken:SOe,VERSION:COe,all:xOe,Cancel:wOe,isAxiosError:_Oe,spread:EOe,toFormData:AOe,AxiosHeaders:TOe,HttpStatusCode:ROe,formToJSON:POe,getAdapter:IOe,mergeConfig:NOe}=Nt,Fl="P37614I5632GRBWT",Hl="https://www.alphavantage.co/query",Y$=new Map,b2e=6e4,Wl=t=>{const e=Y$.get(t);return e&&Date.now()-e.timestamp<b2e?e.data:null},Kl=(t,e)=>{Y$.set(t,{data:e,timestamp:Date.now()})},X$={async getQuote(t){const e=`quote_${t}`,r=Wl(e);if(r)return r;try{const i=(await Nt.get(Hl,{params:{function:"GLOBAL_QUOTE",symbol:t,apikey:Fl}})).data["Global Quote"];if(!i||Object.keys(i).length===0)throw new Error(`No se encontraron datos para ${t}`);const s={symbol:i["01. symbol"],price:parseFloat(i["05. price"]),change:parseFloat(i["09. change"]),changePercent:parseFloat(i["10. change percent"].replace("%","")),volume:parseInt(i["06. volume"]),high:parseFloat(i["03. high"]),low:parseFloat(i["04. low"]),open:parseFloat(i["02. open"]),previousClose:parseFloat(i["08. previous close"]),latestTradingDay:i["07. latest trading day"]};return Kl(e,s),s}catch(n){throw console.error("Error fetching quote:",n),new Error(`Error al obtener cotizacin de ${t}`)}},async getTimeSeries(t,e="compact"){const r=`timeseries_${t}_${e}`,n=Wl(r);if(n)return n;try{const s=(await Nt.get(Hl,{params:{function:"TIME_SERIES_DAILY",symbol:t,outputsize:e,apikey:Fl}})).data["Time Series (Daily)"];if(!s)throw new Error(`No se encontraron datos histricos para ${t}`);const a=Object.entries(s).map(([c,u])=>({date:c,open:parseFloat(u["1. open"]),high:parseFloat(u["2. high"]),low:parseFloat(u["3. low"]),close:parseFloat(u["4. close"]),volume:parseInt(u["5. volume"])}));return Kl(r,a),a}catch(i){throw console.error("Error fetching time series:",i),new Error(`Error al obtener histrico de ${t}`)}},async getRSI(t,e="daily",r=14){const n=`rsi_${t}_${e}_${r}`,i=Wl(n);if(i)return i;try{const a=(await Nt.get(Hl,{params:{function:"RSI",symbol:t,interval:e,time_period:r,series_type:"close",apikey:Fl}})).data["Technical Analysis: RSI"];if(!a)throw new Error(`No se encontraron datos de RSI para ${t}`);const c=Object.entries(a).map(([u,d])=>({date:u,value:parseFloat(d.RSI)}));return Kl(n,c),c}catch(s){throw console.error("Error fetching RSI:",s),new Error(`Error al obtener RSI de ${t}`)}},async getMACD(t,e="daily"){const r=`macd_${t}_${e}`,n=Wl(r);if(n)return n;try{const s=(await Nt.get(Hl,{params:{function:"MACD",symbol:t,interval:e,series_type:"close",apikey:Fl}})).data["Technical Analysis: MACD"];if(!s)throw new Error(`No se encontraron datos de MACD para ${t}`);const a=Object.entries(s).map(([c,u])=>({date:c,macd:parseFloat(u.MACD),signal:parseFloat(u.MACD_Signal),histogram:parseFloat(u.MACD_Hist)}));return Kl(r,a),a}catch(i){throw console.error("Error fetching MACD:",i),new Error(`Error al obtener MACD de ${t}`)}},async getSMA(t,e="daily",r=20){const n=`sma_${t}_${e}_${r}`,i=Wl(n);if(i)return i;try{const a=(await Nt.get(Hl,{params:{function:"SMA",symbol:t,interval:e,time_period:r,series_type:"close",apikey:Fl}})).data["Technical Analysis: SMA"];if(!a)throw new Error(`No se encontraron datos de SMA para ${t}`);const c=Object.entries(a).map(([u,d])=>({date:u,value:parseFloat(d.SMA)}));return Kl(n,c),c}catch(s){throw console.error("Error fetching SMA:",s),new Error(`Error al obtener SMA de ${t}`)}},async getFundamentals(t){const e=`fundamentals_${t}`,r=Wl(e);if(r)return r;try{const i=(await Nt.get(Hl,{params:{function:"OVERVIEW",symbol:t,apikey:Fl}})).data;if(!i||Object.keys(i).length===0)throw new Error(`No se encontraron datos fundamentales para ${t}`);const s={symbol:i.Symbol,name:i.Name,peRatio:parseFloat(i.PERatio)||0,pbRatio:parseFloat(i.PriceToBookRatio)||0,dividendYield:parseFloat(i.DividendYield)||0,eps:parseFloat(i.EPS)||0,marketCap:parseFloat(i.MarketCapitalization)||0,debtToEquity:parseFloat(i.DebtToEquity)||0};return Kl(e,s),s}catch(n){throw console.error("Error fetching fundamentals:",n),new Error(`Error al obtener datos fundamentales de ${t}`)}},async getExchangeRate(){const t="exchange_rate_usd_mxn",e=Wl(t);if(e)return e;try{const n=(await Nt.get(Hl,{params:{function:"CURRENCY_EXCHANGE_RATE",from_currency:"USD",to_currency:"MXN",apikey:Fl}})).data["Realtime Currency Exchange Rate"];if(!n)throw new Error("No se pudo obtener el tipo de cambio");const i=parseFloat(n["5. Exchange Rate"]);return Kl(t,i),i}catch(r){return console.error("Error fetching exchange rate:",r),20}}},Gl="trades",by={calculateFees(t,e=0){const r=t*ofe,n=e>0?e*cfe:0;return{commission:r,tax:n,total:r+n}},async create(t,e){try{const r=await X$.getExchangeRate(),n=e.price*r,s=e.price*e.quantity*r,a=this.calculateFees(s),c=s+a.commission,u={strategyId:t,symbol:e.symbol.toUpperCase(),companyName:e.companyName,type:e.type,quantity:e.quantity,price:e.price,priceInMXN:n,exchangeRate:r,timestamp:Ee.now(),date:e.date,fees:{commission:a.commission,tax:0,total:a.commission},totalCost:c,notes:e.notes,createdAt:Ee.now()};return(await dS(di(lt,Gl),u)).id}catch(r){throw console.error("Error creating trade:",r),new Error("Error al crear operacin")}},async getByStrategy(t){try{const e=Ya(di(lt,Gl),sn("strategyId","==",t),Pb("timestamp","desc"));return(await Ac(e)).docs.map(n=>({id:n.id,...n.data()}))}catch(e){throw console.error("Error getting trades:",e),new Error("Error al obtener operaciones")}},async getRecentByStrategy(t,e=10){try{const r=Ya(di(lt,Gl),sn("strategyId","==",t),Pb("timestamp","desc"),pse(e));return(await Ac(r)).docs.map(i=>({id:i.id,...i.data()}))}catch(r){throw console.error("Error getting recent trades:",r),new Error("Error al obtener operaciones recientes")}},async getBySymbol(t,e){try{const r=Ya(di(lt,Gl),sn("strategyId","==",t),sn("symbol","==",e.toUpperCase()),Pb("timestamp","desc"));return(await Ac(r)).docs.map(i=>({id:i.id,...i.data()}))}catch(r){throw console.error("Error getting trades by symbol:",r),new Error("Error al obtener operaciones por smbolo")}},async getById(t){try{const e=rr(lt,Gl,t),r=await kC(e);return r.exists()?{id:r.id,...r.data()}:null}catch(e){throw console.error("Error getting trade:",e),new Error("Error al obtener operacin")}},async update(t,e){try{const r=rr(lt,Gl,t);await Cc(r,e)}catch(r){throw console.error("Error updating trade:",r),new Error("Error al actualizar operacin")}},async delete(t){try{const e=rr(lt,Gl,t);await a2(e)}catch(e){throw console.error("Error deleting trade:",e),new Error("Error al eliminar operacin")}},calculateProfit(t,e,r,n){let i=e,s=0;for(const c of t){if(i<=0)break;const u=Math.min(i,c.quantity);s+=c.price*u*n,i-=u}return r*e*n-s},async getStats(t){try{const e=await this.getByStrategy(t),r={totalTrades:e.length,totalBuys:e.filter(n=>n.type==="BUY").length,totalSells:e.filter(n=>n.type==="SELL").length,totalInvested:0,totalRevenue:0,netProfit:0};return e.forEach(n=>{n.type==="BUY"?r.totalInvested+=n.totalCost:r.totalRevenue+=n.totalCost}),r.netProfit=r.totalRevenue-r.totalInvested,r}catch(e){throw console.error("Error getting trade stats:",e),new Error("Error al obtener estadsticas")}}},Sy={async getByStrategy(t){try{const e=await GT.getPositions();return await Promise.all(e.map(async n=>{const i=await X$.getExchangeRate(),s=parseFloat(n.avg_entry_price),a=parseFloat(n.current_price),c=parseFloat(n.qty),u=s*i,d=a*i,h=d*c,p=u*c,g=h-p,y=g/p*100,S={unrealizedGain:g,unrealizedGainPercent:y,totalValue:h,dayChange:0,dayChangePercent:0};return{id:n.symbol,strategyId:t||"default",symbol:n.symbol,companyName:n.symbol,quantity:c,avgBuyPrice:s,avgBuyPriceInMXN:u,currentPrice:a,currentPriceInMXN:d,exchangeRate:i,metrics:S,lastUpdate:new Date,createdAt:new Date}}))}catch(e){return console.error("Error getting positions from backend:",e),[]}},async getBySymbol(t,e){try{return(await this.getByStrategy(t)).find(n=>n.symbol===e.toUpperCase())||null}catch(r){return console.error("Error getting position by symbol:",r),null}},async getSummary(t){try{const e=await this.getByStrategy(t),r={totalPositions:e.length,totalValue:0,totalCost:0,totalUnrealizedGain:0,totalUnrealizedGainPercent:0};return e.forEach(n=>{r.totalValue+=n.metrics.totalValue,r.totalCost+=n.avgBuyPriceInMXN*n.quantity,r.totalUnrealizedGain+=n.metrics.unrealizedGain}),r.totalCost>0&&(r.totalUnrealizedGainPercent=r.totalUnrealizedGain/r.totalCost*100),r}catch(e){return console.error("Error getting position summary:",e),{totalPositions:0,totalValue:0,totalCost:0,totalUnrealizedGain:0,totalUnrealizedGainPercent:0}}},calculateMetrics(t,e,r,n,i){const s=r*t,a=e*t,c=s-a,u=a>0?c/a*100:0;return{unrealizedGain:c,unrealizedGainPercent:u,totalValue:s,dayChange:n*t,dayChangePercent:i}}},Kr={MOMENTUM:"MOMENTUM",VALUE:"VALUE",GROWTH:"GROWTH",DIVIDEND:"DIVIDEND",SECTOR_ROTATION:"SECTOR_ROTATION"},S2e=()=>{const[t,e]=A.useState(null),[r,n]=A.useState([]),[i,s]=A.useState([]),[a,c]=A.useState("overview"),[u,d]=A.useState(!0),h="momentum-trading";A.useEffect(()=>{p()},[]);const p=async()=>{d(!0);try{let y=await Pn.getById(h);if(!y){const S={name:"Momentum Trading",type:Kr.MOMENTUM,description:"Estrategia basada en el impulso del mercado. Identifica acciones con tendencias alcistas fuertes usando RSI, MACD y Moving Averages.",isActive:!0,telegramNotificationsEnabled:!1,liveAlertsEnabled:!1,virtualCapital:1e4,lastUpdate:Ee.now(),performance:{totalReturn:0,totalInvested:0,currentValue:0,realizedGains:0,unrealizedGains:0,totalTrades:0,winRate:0},createdAt:Ee.now(),updatedAt:Ee.now()};await Pn.create(S,h),y=await Pn.getById(h)}if(e(y),y){const[S,x]=await Promise.all([Sy.getByStrategy(y.id),by.getByStrategy(y.id)]);n(S),s(x)}}catch(y){console.error("Error loading strategy:",y)}finally{d(!1)}},g=[{id:"overview",label:"Vista General"},{id:"positions",label:"Posiciones"},{id:"history",label:"Histrico"},{id:"reports",label:"Reportes"}];return u?m.jsx(ir,{children:m.jsx("div",{className:"flex items-center justify-center h-96",children:m.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary"})})}):t?m.jsx(ir,{children:m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:"Momentum Trading"}),m.jsx("p",{className:"text-text-secondary mt-2",children:t.description}),m.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm",children:[m.jsx("span",{className:"text-text-secondary",children:"Capital Virtual:"}),m.jsxs("span",{className:"font-bold text-primary",children:["$",(t?.virtualCapital||1e4).toLocaleString("es-MX",{minimumFractionDigits:2})," MXN"]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[m.jsx(Er,{title:"ROI Total",value:`${t.performance.totalReturn>0?"+":""}${t.performance.totalReturn.toFixed(2)}%`,icon:m.jsx(ua,{}),trend:t.performance.totalReturn>0?"up":t.performance.totalReturn<0?"down":"neutral"}),m.jsx(Er,{title:"Capital Invertido",value:`$${t.performance.totalInvested.toLocaleString("es-MX",{minimumFractionDigits:2})}`,icon:m.jsx(Hc,{}),subtitle:"MXN"}),m.jsx(Er,{title:"Valor Actual",value:`$${t.performance.currentValue.toLocaleString("es-MX",{minimumFractionDigits:2})}`,icon:m.jsx(qg,{}),change:t.performance.unrealizedGains,subtitle:"MXN"}),m.jsx(Er,{title:"Tasa de xito",value:`${t.performance.winRate.toFixed(1)}%`,subtitle:`${t.performance.totalTrades} operaciones`,trend:t.performance.winRate>=50?"up":"down"})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-border overflow-hidden",children:[m.jsx("div",{className:"border-b border-border",children:m.jsx("div",{className:"flex",children:g.map(y=>m.jsx("button",{onClick:()=>c(y.id),className:`flex-1 px-6 py-4 font-semibold transition-colors cursor-pointer ${a===y.id?"bg-primary text-white":"text-text-secondary hover:bg-bg-primary"}`,children:y.label},y.id))})}),m.jsxs("div",{className:"p-6",children:[a==="overview"&&m.jsxs("div",{className:"space-y-6",children:[m.jsx(Wg,{symbol:"SPY",interval:"D",height:500,studies:["RSI@tv-basicstudies","MACD@tv-basicstudies","MASimple@tv-basicstudies"]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Indicadores Clave"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"p-4 bg-bg-primary rounded-lg",children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"RSI (14)"}),m.jsx("p",{className:"text-xl font-bold text-text-primary",children:"Seal de compra cuando > 60"})]}),m.jsxs("div",{className:"p-4 bg-bg-primary rounded-lg",children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"MACD"}),m.jsx("p",{className:"text-xl font-bold text-text-primary",children:"Cruce alcista de lneas"})]}),m.jsxs("div",{className:"p-4 bg-bg-primary rounded-lg",children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"Moving Averages"}),m.jsx("p",{className:"text-xl font-bold text-text-primary",children:"Precio sobre MA20, MA50, MA200"})]})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Reglas de la Estrategia"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"p-4 bg-success/10 rounded-lg border border-success/20",children:[m.jsx("p",{className:"text-sm font-semibold text-success mb-2",children:" Compra"}),m.jsxs("ul",{className:"text-xs text-text-secondary space-y-1",children:[m.jsx("li",{children:" RSI > 60"}),m.jsx("li",{children:" Precio cruza MA20 al alza"}),m.jsx("li",{children:" Volumen superior al promedio"}),m.jsx("li",{children:" MACD positivo"})]})]}),m.jsxs("div",{className:"p-4 bg-danger/10 rounded-lg border border-danger/20",children:[m.jsx("p",{className:"text-sm font-semibold text-danger mb-2",children:" Venta"}),m.jsxs("ul",{className:"text-xs text-text-secondary space-y-1",children:[m.jsx("li",{children:" RSI < 40"}),m.jsx("li",{children:" Precio cruza MA20 a la baja"}),m.jsx("li",{children:" MACD negativo"}),m.jsx("li",{children:" Stop loss: -5%"})]})]})]})]})]})]}),a==="positions"&&m.jsx(Kg,{positions:r}),a==="history"&&m.jsx(Gg,{trades:i}),a==="reports"&&m.jsx(py,{performance:t.performance})]})]})]})}):m.jsx(ir,{children:m.jsx("div",{className:"text-center py-12",children:m.jsx("p",{className:"text-text-secondary",children:"Error al cargar la estrategia"})})})},C2e=()=>{const[t,e]=A.useState(null),[r,n]=A.useState([]),[i,s]=A.useState([]),[a,c]=A.useState("overview"),[u,d]=A.useState(!0),h="value-investing";A.useEffect(()=>{p()},[]);const p=async()=>{d(!0);try{let y=await Pn.getById(h);if(!y){const S={name:"Value Investing",type:Kr.VALUE,description:"Inversin en valor. Identifica acciones subvaloradas con fundamentos slidos usando P/E, P/B, Debt-to-Equity y Free Cash Flow.",isActive:!0,telegramNotificationsEnabled:!1,liveAlertsEnabled:!1,virtualCapital:1e4,lastUpdate:Ee.now(),performance:{totalReturn:0,totalInvested:0,currentValue:0,realizedGains:0,unrealizedGains:0,totalTrades:0,winRate:0},createdAt:Ee.now(),updatedAt:Ee.now()};await Pn.create(S,h),y=await Pn.getById(h)}if(e(y),y){const[S,x]=await Promise.all([Sy.getByStrategy(y.id),by.getByStrategy(y.id)]);n(S),s(x)}}catch(y){console.error("Error loading strategy:",y)}finally{d(!1)}},g=[{id:"overview",label:"Vista General"},{id:"positions",label:"Posiciones"},{id:"history",label:"Histrico"},{id:"reports",label:"Reportes"}];return u||!t?m.jsx(ir,{children:m.jsx("div",{className:"flex items-center justify-center h-96",children:m.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary"})})}):m.jsx(ir,{children:m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:"Value Investing"}),m.jsx("p",{className:"text-text-secondary mt-2",children:t.description}),m.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm",children:[m.jsx("span",{className:"text-text-secondary",children:"Capital Virtual:"}),m.jsxs("span",{className:"font-bold text-primary",children:["$",(t?.virtualCapital||1e4).toLocaleString("es-MX",{minimumFractionDigits:2})," MXN"]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[m.jsx(Er,{title:"ROI Total",value:`${t.performance.totalReturn>0?"+":""}${t.performance.totalReturn.toFixed(2)}%`,icon:m.jsx(ua,{}),trend:t.performance.totalReturn>0?"up":t.performance.totalReturn<0?"down":"neutral"}),m.jsx(Er,{title:"Capital Invertido",value:`$${t.performance.totalInvested.toLocaleString("es-MX",{minimumFractionDigits:2})}`,icon:m.jsx(Hc,{}),subtitle:"MXN"}),m.jsx(Er,{title:"Valor Actual",value:`$${t.performance.currentValue.toLocaleString("es-MX",{minimumFractionDigits:2})}`,icon:m.jsx(Yae,{}),change:t.performance.unrealizedGains,subtitle:"MXN"}),m.jsx(Er,{title:"Tasa de xito",value:`${t.performance.winRate.toFixed(1)}%`,subtitle:`${t.performance.totalTrades} operaciones`,trend:t.performance.winRate>=50?"up":"down"})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-border overflow-hidden",children:[m.jsx("div",{className:"border-b border-border",children:m.jsx("div",{className:"flex",children:g.map(y=>m.jsx("button",{onClick:()=>c(y.id),className:`flex-1 px-6 py-4 font-semibold transition-colors cursor-pointer ${a===y.id?"bg-primary text-white":"text-text-secondary hover:bg-bg-primary"}`,children:y.label},y.id))})}),m.jsxs("div",{className:"p-6",children:[a==="overview"&&m.jsxs("div",{className:"space-y-6",children:[m.jsx(Wg,{symbol:"BRK.B",interval:"D",height:500}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Mtricas Fundamentales"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"p-4 bg-bg-primary rounded-lg",children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"P/E Ratio"}),m.jsx("p",{className:"text-xl font-bold text-text-primary",children:"< Promedio del sector"})]}),m.jsxs("div",{className:"p-4 bg-bg-primary rounded-lg",children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"P/B Ratio"}),m.jsx("p",{className:"text-xl font-bold text-text-primary",children:"< 1.5"})]}),m.jsxs("div",{className:"p-4 bg-bg-primary rounded-lg",children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"Debt-to-Equity"}),m.jsx("p",{className:"text-xl font-bold text-text-primary",children:"< 0.5 (conservador)"})]})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Criterios de Seleccin"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"p-4 bg-success/10 rounded-lg border border-success/20",children:[m.jsx("p",{className:"text-sm font-semibold text-success mb-2",children:" Compra"}),m.jsxs("ul",{className:"text-xs text-text-secondary space-y-1",children:[m.jsx("li",{children:" P/E menor al promedio del sector"}),m.jsx("li",{children:" P/B < 1.5"}),m.jsx("li",{children:" Flujo de caja positivo"}),m.jsx("li",{children:" Deuda manejable"})]})]}),m.jsxs("div",{className:"p-4 bg-info/10 rounded-lg border border-info/20",children:[m.jsx("p",{className:"text-sm font-semibold text-info mb-2",children:" Horizonte"}),m.jsx("p",{className:"text-xs text-text-secondary",children:"Inversin a largo plazo (1-5 aos)"})]})]})]})]})]}),a==="positions"&&m.jsx(Kg,{positions:r}),a==="history"&&m.jsx(Gg,{trades:i}),a==="reports"&&m.jsx(py,{performance:t.performance})]})]})]})})},x2e=()=>{const[t,e]=A.useState(null),[r,n]=A.useState([]),[i,s]=A.useState([]),[a,c]=A.useState("overview"),[u,d]=A.useState(!0),h="growth-investing";A.useEffect(()=>{p()},[]);const p=async()=>{d(!0);try{let y=await Pn.getById(h);if(!y){const S={name:"Growth Investing",type:Kr.GROWTH,description:"Inversin en crecimiento. Identifica empresas con alto potencial de expansin usando EPS Growth, Revenue Growth y proyecciones futuras.",isActive:!0,telegramNotificationsEnabled:!1,liveAlertsEnabled:!1,virtualCapital:1e4,lastUpdate:Ee.now(),performance:{totalReturn:0,totalInvested:0,currentValue:0,realizedGains:0,unrealizedGains:0,totalTrades:0,winRate:0},createdAt:Ee.now(),updatedAt:Ee.now()};await Pn.create(S,h),y=await Pn.getById(h)}if(e(y),y){const[S,x]=await Promise.all([Sy.getByStrategy(y.id),by.getByStrategy(y.id)]);n(S),s(x)}}catch(y){console.error("Error loading strategy:",y)}finally{d(!1)}},g=[{id:"overview",label:"Vista General"},{id:"positions",label:"Posiciones"},{id:"history",label:"Histrico"},{id:"reports",label:"Reportes"}];return u||!t?m.jsx(ir,{children:m.jsx("div",{className:"flex items-center justify-center h-96",children:m.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary"})})}):m.jsx(ir,{children:m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:"Growth Investing"}),m.jsx("p",{className:"text-text-secondary mt-2",children:t.description}),m.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm",children:[m.jsx("span",{className:"text-text-secondary",children:"Capital Virtual:"}),m.jsxs("span",{className:"font-bold text-primary",children:["$",(t?.virtualCapital||1e4).toLocaleString("es-MX",{minimumFractionDigits:2})," MXN"]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[m.jsx(Er,{title:"ROI Total",value:`${t.performance.totalReturn>0?"+":""}${t.performance.totalReturn.toFixed(2)}%`,icon:m.jsx(ua,{}),trend:t.performance.totalReturn>0?"up":t.performance.totalReturn<0?"down":"neutral"}),m.jsx(Er,{title:"Capital Invertido",value:`$${t.performance.totalInvested.toLocaleString("es-MX",{minimumFractionDigits:2})}`,icon:m.jsx(Hc,{}),subtitle:"MXN"}),m.jsx(Er,{title:"Valor Actual",value:`$${t.performance.currentValue.toLocaleString("es-MX",{minimumFractionDigits:2})}`,icon:m.jsx(qg,{}),change:t.performance.unrealizedGains,subtitle:"MXN"}),m.jsx(Er,{title:"Tasa de xito",value:`${t.performance.winRate.toFixed(1)}%`,subtitle:`${t.performance.totalTrades} operaciones`,trend:t.performance.winRate>=50?"up":"down"})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-border overflow-hidden",children:[m.jsx("div",{className:"border-b border-border",children:m.jsx("div",{className:"flex",children:g.map(y=>m.jsx("button",{onClick:()=>c(y.id),className:`flex-1 px-6 py-4 font-semibold transition-colors cursor-pointer ${a===y.id?"bg-primary text-white":"text-text-secondary hover:bg-bg-primary"}`,children:y.label},y.id))})}),m.jsxs("div",{className:"p-6",children:[a==="overview"&&m.jsxs("div",{className:"space-y-6",children:[m.jsx(Wg,{symbol:"NVDA",interval:"D",height:500}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Mtricas de Crecimiento"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"p-4 bg-bg-primary rounded-lg",children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"EPS Growth"}),m.jsx("p",{className:"text-xl font-bold text-text-primary",children:"> 20% anual"})]}),m.jsxs("div",{className:"p-4 bg-bg-primary rounded-lg",children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"Revenue Growth"}),m.jsx("p",{className:"text-xl font-bold text-text-primary",children:"> 15% anual"})]}),m.jsxs("div",{className:"p-4 bg-bg-primary rounded-lg",children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"PEG Ratio"}),m.jsx("p",{className:"text-xl font-bold text-text-primary",children:"< 2.0"})]})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Criterios de Seleccin"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"p-4 bg-success/10 rounded-lg border border-success/20",children:[m.jsx("p",{className:"text-sm font-semibold text-success mb-2",children:" Compra"}),m.jsxs("ul",{className:"text-xs text-text-secondary space-y-1",children:[m.jsx("li",{children:" EPS Growth > 20%"}),m.jsx("li",{children:" Revenue Growth > 15%"}),m.jsx("li",{children:" Sector en expansin"}),m.jsx("li",{children:" Ventaja competitiva clara"})]})]}),m.jsxs("div",{className:"p-4 bg-info/10 rounded-lg border border-info/20",children:[m.jsx("p",{className:"text-sm font-semibold text-info mb-2",children:" Sectores Objetivo"}),m.jsx("p",{className:"text-xs text-text-secondary",children:"Tecnologa, Healthcare, E-commerce, FinTech"})]})]})]})]})]}),a==="positions"&&m.jsx(Kg,{positions:r}),a==="history"&&m.jsx(Gg,{trades:i}),a==="reports"&&m.jsx(py,{performance:t.performance})]})]})]})})},w2e=()=>{const[t,e]=A.useState(null),[r,n]=A.useState([]),[i,s]=A.useState([]),[a,c]=A.useState("overview"),[u,d]=A.useState(!0),h="dividend-aristocrats";A.useEffect(()=>{p()},[]);const p=async()=>{d(!0);try{let y=await Pn.getById(h);if(!y){const S={name:"Dividend Aristocrats",type:Kr.DIVIDEND,description:"Inversin en dividendos consistentes. Empresas con 25+ aos de dividendos crecientes, enfocadas en ingresos pasivos estables.",isActive:!0,telegramNotificationsEnabled:!1,liveAlertsEnabled:!1,virtualCapital:1e4,lastUpdate:Ee.now(),performance:{totalReturn:0,totalInvested:0,currentValue:0,realizedGains:0,unrealizedGains:0,totalTrades:0,winRate:0},createdAt:Ee.now(),updatedAt:Ee.now()};await Pn.create(S,h),y=await Pn.getById(h)}if(e(y),y){const[S,x]=await Promise.all([Sy.getByStrategy(y.id),by.getByStrategy(y.id)]);n(S),s(x)}}catch(y){console.error("Error loading strategy:",y)}finally{d(!1)}},g=[{id:"overview",label:"Vista General"},{id:"positions",label:"Posiciones"},{id:"history",label:"Histrico"},{id:"reports",label:"Reportes"}];return u||!t?m.jsx(ir,{children:m.jsx("div",{className:"flex items-center justify-center h-96",children:m.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary"})})}):m.jsx(ir,{children:m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:"Dividend Aristocrats"}),m.jsx("p",{className:"text-text-secondary mt-2",children:t.description}),m.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm",children:[m.jsx("span",{className:"text-text-secondary",children:"Capital Virtual:"}),m.jsxs("span",{className:"font-bold text-primary",children:["$",(t?.virtualCapital||1e4).toLocaleString("es-MX",{minimumFractionDigits:2})," MXN"]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[m.jsx(Er,{title:"ROI Total",value:`${t.performance.totalReturn>0?"+":""}${t.performance.totalReturn.toFixed(2)}%`,icon:m.jsx(ua,{}),trend:t.performance.totalReturn>0?"up":t.performance.totalReturn<0?"down":"neutral"}),m.jsx(Er,{title:"Capital Invertido",value:`$${t.performance.totalInvested.toLocaleString("es-MX",{minimumFractionDigits:2})}`,icon:m.jsx(Hc,{}),subtitle:"MXN"}),m.jsx(Er,{title:"Valor Actual",value:`$${t.performance.currentValue.toLocaleString("es-MX",{minimumFractionDigits:2})}`,icon:m.jsx(doe,{}),change:t.performance.unrealizedGains,subtitle:"MXN"}),m.jsx(Er,{title:"Tasa de xito",value:`${t.performance.winRate.toFixed(1)}%`,subtitle:`${t.performance.totalTrades} operaciones`,trend:t.performance.winRate>=50?"up":"down"})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-border overflow-hidden",children:[m.jsx("div",{className:"border-b border-border",children:m.jsx("div",{className:"flex",children:g.map(y=>m.jsx("button",{onClick:()=>c(y.id),className:`flex-1 px-6 py-4 font-semibold transition-colors cursor-pointer ${a===y.id?"bg-primary text-white":"text-text-secondary hover:bg-bg-primary"}`,children:y.label},y.id))})}),m.jsxs("div",{className:"p-6",children:[a==="overview"&&m.jsxs("div",{className:"space-y-6",children:[m.jsx(Wg,{symbol:"JNJ",interval:"D",height:500}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Mtricas de Dividendos"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"p-4 bg-bg-primary rounded-lg",children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"Dividend Yield"}),m.jsx("p",{className:"text-xl font-bold text-text-primary",children:"> 3.0%"})]}),m.jsxs("div",{className:"p-4 bg-bg-primary rounded-lg",children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"Payout Ratio"}),m.jsx("p",{className:"text-xl font-bold text-text-primary",children:"< 60%"})]}),m.jsxs("div",{className:"p-4 bg-bg-primary rounded-lg",children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"Aos Consecutivos"}),m.jsx("p",{className:"text-xl font-bold text-text-primary",children:"> 25 aos"})]})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Criterios de Seleccin"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"p-4 bg-success/10 rounded-lg border border-success/20",children:[m.jsx("p",{className:"text-sm font-semibold text-success mb-2",children:" Compra"}),m.jsxs("ul",{className:"text-xs text-text-secondary space-y-1",children:[m.jsx("li",{children:" Dividend Yield > 3%"}),m.jsx("li",{children:" 25+ aos de dividendos crecientes"}),m.jsx("li",{children:" Payout Ratio < 60%"}),m.jsx("li",{children:" Empresa estable y rentable"})]})]}),m.jsxs("div",{className:"p-4 bg-info/10 rounded-lg border border-info/20",children:[m.jsx("p",{className:"text-sm font-semibold text-info mb-2",children:" Objetivo"}),m.jsx("p",{className:"text-xs text-text-secondary",children:"Ingresos pasivos consistentes a largo plazo"})]})]})]})]})]}),a==="positions"&&m.jsx(Kg,{positions:r}),a==="history"&&m.jsx(Gg,{trades:i}),a==="reports"&&m.jsx(py,{performance:t.performance})]})]})]})})},_2e=()=>{const[t,e]=A.useState(null),[r,n]=A.useState([]),[i,s]=A.useState([]),[a,c]=A.useState("overview"),[u,d]=A.useState(!0),h="sector-rotation";A.useEffect(()=>{p()},[]);const p=async()=>{d(!0);try{let y=await Pn.getById(h);if(!y){const S={name:"Sector Rotation",type:Kr.SECTOR_ROTATION,description:"Rotacin sectorial. Aprovecha ciclos econmicos invirtiendo en sectores con mejor performance relativa segn indicadores macroeconmicos.",isActive:!0,telegramNotificationsEnabled:!1,liveAlertsEnabled:!1,virtualCapital:1e4,lastUpdate:Ee.now(),performance:{totalReturn:0,totalInvested:0,currentValue:0,realizedGains:0,unrealizedGains:0,totalTrades:0,winRate:0},createdAt:Ee.now(),updatedAt:Ee.now()};await Pn.create(S,h),y=await Pn.getById(h)}if(e(y),y){const[S,x]=await Promise.all([Sy.getByStrategy(y.id),by.getByStrategy(y.id)]);n(S),s(x)}}catch(y){console.error("Error loading strategy:",y)}finally{d(!1)}},g=[{id:"overview",label:"Vista General"},{id:"positions",label:"Posiciones"},{id:"history",label:"Histrico"},{id:"reports",label:"Reportes"}];return u||!t?m.jsx(ir,{children:m.jsx("div",{className:"flex items-center justify-center h-96",children:m.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary"})})}):m.jsx(ir,{children:m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:"Sector Rotation"}),m.jsx("p",{className:"text-text-secondary mt-2",children:t.description}),m.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm",children:[m.jsx("span",{className:"text-text-secondary",children:"Capital Virtual:"}),m.jsxs("span",{className:"font-bold text-primary",children:["$",(t?.virtualCapital||1e4).toLocaleString("es-MX",{minimumFractionDigits:2})," MXN"]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[m.jsx(Er,{title:"ROI Total",value:`${t.performance.totalReturn>0?"+":""}${t.performance.totalReturn.toFixed(2)}%`,icon:m.jsx(ua,{}),trend:t.performance.totalReturn>0?"up":t.performance.totalReturn<0?"down":"neutral"}),m.jsx(Er,{title:"Capital Invertido",value:`$${t.performance.totalInvested.toLocaleString("es-MX",{minimumFractionDigits:2})}`,icon:m.jsx(Hc,{}),subtitle:"MXN"}),m.jsx(Er,{title:"Valor Actual",value:`$${t.performance.currentValue.toLocaleString("es-MX",{minimumFractionDigits:2})}`,icon:m.jsx(woe,{}),change:t.performance.unrealizedGains,subtitle:"MXN"}),m.jsx(Er,{title:"Tasa de xito",value:`${t.performance.winRate.toFixed(1)}%`,subtitle:`${t.performance.totalTrades} operaciones`,trend:t.performance.winRate>=50?"up":"down"})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-border overflow-hidden",children:[m.jsx("div",{className:"border-b border-border",children:m.jsx("div",{className:"flex",children:g.map(y=>m.jsx("button",{onClick:()=>c(y.id),className:`flex-1 px-6 py-4 font-semibold transition-colors cursor-pointer ${a===y.id?"bg-primary text-white":"text-text-secondary hover:bg-bg-primary"}`,children:y.label},y.id))})}),m.jsxs("div",{className:"p-6",children:[a==="overview"&&m.jsxs("div",{className:"space-y-6",children:[m.jsx(Wg,{symbol:"XLK",interval:"D",height:500}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Ciclo Econmico"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"p-4 bg-bg-primary rounded-lg",children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"Expansin Temprana"}),m.jsx("p",{className:"text-sm font-bold text-text-primary",children:"Financiero, Tecnologa"})]}),m.jsxs("div",{className:"p-4 bg-bg-primary rounded-lg",children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"Expansin Tarda"}),m.jsx("p",{className:"text-sm font-bold text-text-primary",children:"Energa, Materiales"})]}),m.jsxs("div",{className:"p-4 bg-bg-primary rounded-lg",children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"Recesin"}),m.jsx("p",{className:"text-sm font-bold text-text-primary",children:"Consumo Bsico, Salud"})]})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Indicadores Macro"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"p-4 bg-success/10 rounded-lg border border-success/20",children:[m.jsx("p",{className:"text-sm font-semibold text-success mb-2",children:" Seales"}),m.jsxs("ul",{className:"text-xs text-text-secondary space-y-1",children:[m.jsx("li",{children:" Performance relativa de sectores"}),m.jsx("li",{children:" Tasas de inters"}),m.jsx("li",{children:" PIB y empleo"}),m.jsx("li",{children:" Inflacin"})]})]}),m.jsxs("div",{className:"p-4 bg-info/10 rounded-lg border border-info/20",children:[m.jsx("p",{className:"text-sm font-semibold text-info mb-2",children:" ETFs Sectoriales"}),m.jsx("p",{className:"text-xs text-text-secondary",children:"XLK, XLF, XLE, XLV, XLP, XLI, XLY"})]})]})]})]})]}),a==="positions"&&m.jsx(Kg,{positions:r}),a==="history"&&m.jsx(Gg,{trades:i}),a==="reports"&&m.jsx(py,{performance:t.performance})]})]})]})})},E2e=({onSubmit:t,isLoading:e})=>{const r=["SPY","SLV","XLF","QQQ","IWM","HYG","THH","NVDA","TQQQ","SOXL","AVGO","ONDS","WULF","INTC","TE","DNN","RVNL","FEIM","BBAI","BMNR"],n=new Date,i=new Date;i.setFullYear(n.getFullYear()-1);const[s,a]=A.useState({strategyType:Kr.MOMENTUM,strategyName:"Momentum Trading",initialCapital:1e4,maxPositions:5,startDate:i.toISOString().split("T")[0],endDate:n.toISOString().split("T")[0],universe:"research",topN:20});A.useEffect(()=>{s.universe==="research"&&a(p=>({...p,topN:r.length}))},[s.universe]);const c=[{type:Kr.MOMENTUM,name:"Momentum Trading"},{type:Kr.VALUE,name:"Value Investing"},{type:Kr.GROWTH,name:"Growth Investing"},{type:Kr.DIVIDEND,name:"Dividend Aristocrats"},{type:Kr.SECTOR_ROTATION,name:"Sector Rotation"}],u=[{value:"research",label:` Investigacin (${r.length} acciones)`,count:r.length},{value:"sp500",label:"S&P 500 (100 smbolos)",count:100},{value:"nasdaq100",label:"NASDAQ 100",count:20},{value:"dow30",label:"Dow Jones 30",count:30}],d=p=>{p.preventDefault(),t(s)},h=p=>{const g=c.find(y=>y.type===p);g&&a({...s,strategyType:g.type,strategyName:g.name})};return m.jsxs("form",{onSubmit:d,className:"bg-white rounded-xl shadow-md border border-border p-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-6",children:"Configuracin de Simulacin"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Estrategia"}),m.jsx("select",{value:s.strategyType,onChange:p=>h(p.target.value),className:"w-full px-4 py-3 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",disabled:e,children:c.map(p=>m.jsx("option",{value:p.type,children:p.name},p.type))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Universo de Acciones"}),m.jsx("select",{value:s.universe,onChange:p=>a({...s,universe:p.target.value}),className:"w-full px-4 py-3 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",disabled:e,children:u.map(p=>m.jsx("option",{value:p.value,children:p.label},p.value))}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"El sistema escanear automticamente estos smbolos"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Capital Inicial (MXN)"}),m.jsx("input",{type:"number",value:s.initialCapital,onChange:p=>a({...s,initialCapital:Number(p.target.value)}),min:"1000",step:"1000",className:"w-full px-4 py-3 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",disabled:e})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Posiciones Simultneas"}),m.jsx("input",{type:"range",value:s.maxPositions,onChange:p=>a({...s,maxPositions:Number(p.target.value)}),min:"1",max:"10",className:"w-full",disabled:e}),m.jsx("div",{className:"text-center text-2xl font-bold text-primary mt-2",children:s.maxPositions})]}),m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Top Smbolos a Seleccionar"}),m.jsx("input",{type:"range",value:s.topN,onChange:p=>a({...s,topN:Number(p.target.value)}),min:"5",max:"20",className:"w-full",disabled:e}),m.jsxs("div",{className:"text-center text-2xl font-bold text-primary mt-2",children:[s.topN," smbolos"]}),m.jsxs("p",{className:"text-xs text-gray-500 text-center mt-1",children:["Se seleccionarn los ",s.topN," mejores segn la estrategia"]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Fecha Inicio"}),m.jsx("input",{type:"date",value:s.startDate,onChange:p=>a({...s,startDate:p.target.value}),max:s.endDate,className:"w-full px-4 py-3 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",disabled:e})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Fecha Fin"}),m.jsx("input",{type:"date",value:s.endDate,onChange:p=>a({...s,endDate:p.target.value}),min:s.startDate,max:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",disabled:e})]})]}),m.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[m.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:" Escaneo Automtico"}),m.jsxs("p",{className:"text-sm text-blue-800",children:["El sistema escanear automticamente el universo seleccionado, analizar cada smbolo segn la estrategia elegida, y seleccionar los ",s.topN," mejores para la simulacin."]})]}),m.jsxs("div",{className:"mt-6 flex gap-4",children:[m.jsx("button",{type:"submit",disabled:e,className:`flex-1 px-6 py-3 bg-primary text-white rounded-lg font-semibold transition-colors ${e?"opacity-50 cursor-not-allowed":"hover:bg-primary/90 cursor-pointer"}`,children:e?" Ejecutando...":" Ejecutar Simulacin"}),m.jsx("button",{type:"button",onClick:()=>a({strategyType:Kr.MOMENTUM,strategyName:"Momentum Trading",initialCapital:5e4,maxPositions:5,startDate:"2024-01-01",endDate:"2024-12-11",universe:"sp500",topN:10}),disabled:e,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg font-semibold hover:from-green-600 hover:to-green-700 transition-all cursor-pointer shadow-md hover:shadow-lg whitespace-nowrap",title:"Configura los mejores parmetros recomendados",children:" Ajustes Recomendados"}),m.jsx("button",{type:"button",onClick:()=>a({strategyType:Kr.MOMENTUM,strategyName:"Momentum Trading",initialCapital:1e4,maxPositions:5,startDate:"2024-01-01",endDate:"2024-12-11",universe:"sp500",topN:10}),disabled:e,className:"px-6 py-3 bg-gray-200 text-text-primary rounded-lg font-semibold hover:bg-gray-300 transition-colors cursor-pointer",children:" Limpiar"})]}),m.jsx("div",{className:"mt-4 p-3 bg-green-50 rounded-lg border border-green-200",children:m.jsxs("p",{className:"text-xs text-green-800",children:[m.jsx("strong",{children:" Ajustes Recomendados:"})," Momentum Trading  $50,000 MXN  S&P 500  Top 10 smbolos  5 posiciones  Ao 2024"]})})]})},A2e=({result:t})=>{const{metrics:e,snapshots:r,trades:n,config:i}=t,s=r.map(a=>({date:a.date,capital:a.totalValue,inicial:i.initialCapital}));return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-border p-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-6",children:"Resultados de Simulacin"}),m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[m.jsxs("div",{className:"p-4 bg-bg-primary rounded-lg",children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"Rendimiento Total"}),m.jsxs("p",{className:`text-2xl font-bold ${e.totalReturn>=0?"text-success":"text-danger"}`,children:[e.totalReturn>=0?"+":"",e.totalReturn.toFixed(2),"%"]})]}),m.jsxs("div",{className:"p-4 bg-bg-primary rounded-lg",children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"Ganancia Neta"}),m.jsxs("p",{className:`text-2xl font-bold ${e.totalReturnMXN>=0?"text-success":"text-danger"}`,children:["$",e.totalReturnMXN.toFixed(2)," MXN"]})]}),m.jsxs("div",{className:"p-4 bg-bg-primary rounded-lg",children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"Operaciones"}),m.jsx("p",{className:"text-2xl font-bold text-text-primary",children:e.totalTrades})]}),m.jsxs("div",{className:"p-4 bg-bg-primary rounded-lg",children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"Tasa de xito"}),m.jsxs("p",{className:"text-2xl font-bold text-primary",children:[e.winRate.toFixed(1),"%"]})]}),m.jsxs("div",{className:"p-4 bg-bg-primary rounded-lg",children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"Mejor Operacin"}),m.jsxs("p",{className:"text-xl font-bold text-success",children:["+$",e.bestTrade.toFixed(2)]})]}),m.jsxs("div",{className:"p-4 bg-bg-primary rounded-lg",children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"Peor Operacin"}),m.jsxs("p",{className:"text-xl font-bold text-danger",children:["$",e.worstTrade.toFixed(2)]})]}),m.jsxs("div",{className:"p-4 bg-bg-primary rounded-lg",children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"Drawdown Mximo"}),m.jsxs("p",{className:"text-xl font-bold text-warning",children:["-",e.maxDrawdown.toFixed(2),"%"]})]}),m.jsxs("div",{className:"p-4 bg-bg-primary rounded-lg",children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"vs Buy & Hold"}),m.jsxs("p",{className:`text-xl font-bold ${e.vsMarket>=0?"text-success":"text-danger"}`,children:[e.vsMarket>=0?"+":"",e.vsMarket.toFixed(2),"%"]})]})]}),m.jsxs("div",{className:"mt-6 p-4 bg-info/10 rounded-lg border border-info/20",children:[m.jsx("h3",{className:"font-semibold text-text-primary mb-2",children:"Comparacin con Buy & Hold"}),m.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[m.jsxs("div",{children:[m.jsxs("p",{className:"text-text-secondary",children:["Estrategia ",i.strategyName,":"]}),m.jsxs("p",{className:`font-bold ${e.totalReturn>=0?"text-success":"text-danger"}`,children:[e.totalReturn>=0?"+":"",e.totalReturn.toFixed(2),"%"]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-text-secondary",children:"Buy & Hold:"}),m.jsxs("p",{className:`font-bold ${e.buyAndHoldReturn>=0?"text-success":"text-danger"}`,children:[e.buyAndHoldReturn>=0?"+":"",e.buyAndHoldReturn.toFixed(2),"%"]})]})]})]}),m.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"p-3 bg-warning/10 rounded-lg",children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"Comisiones Totales"}),m.jsxs("p",{className:"text-lg font-bold text-warning",children:["$",e.totalCommissions.toFixed(2)]})]}),m.jsxs("div",{className:"p-3 bg-danger/10 rounded-lg",children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"Impuestos (ISR)"}),m.jsxs("p",{className:"text-lg font-bold text-danger",children:["$",e.totalTaxes.toFixed(2)]})]})]})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-border p-6",children:[m.jsx("h3",{className:"text-xl font-bold text-text-primary mb-4",children:"Evolucin del Capital"}),m.jsx(FH,{width:"100%",height:400,children:m.jsxs(qRe,{data:s,children:[m.jsx(sN,{strokeDasharray:"3 3"}),m.jsx(oN,{dataKey:"date",tick:{fontSize:12},angle:-45,textAnchor:"end",height:80}),m.jsx(cN,{tick:{fontSize:12}}),m.jsx(CG,{}),m.jsx(ZH,{}),m.jsx(HR,{type:"monotone",dataKey:"capital",stroke:"#2d9bf0",strokeWidth:2,name:"Capital",dot:!1}),m.jsx(HR,{type:"monotone",dataKey:"inicial",stroke:"#94a3b8",strokeWidth:1,strokeDasharray:"5 5",name:"Capital Inicial",dot:!1})]})})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-border p-6",children:[m.jsxs("h3",{className:"text-xl font-bold text-text-primary mb-4",children:["Historial de Operaciones (",n.length,")"]}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{className:"bg-bg-primary",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-text-primary",children:"Fecha"}),m.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-text-primary",children:"Tipo"}),m.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-text-primary",children:"Smbolo"}),m.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-text-primary",children:"Cantidad"}),m.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-text-primary",children:"Precio"}),m.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-text-primary",children:"Total"}),m.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-text-primary",children:"Ganancia"})]})}),m.jsx("tbody",{children:n.map((a,c)=>m.jsxs("tr",{className:"border-t border-border hover:bg-bg-primary",children:[m.jsx("td",{className:"px-4 py-3 text-sm text-text-secondary",children:a.date}),m.jsx("td",{className:"px-4 py-3",children:m.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${a.type==="BUY"?"bg-success/20 text-success":"bg-danger/20 text-danger"}`,children:a.type})}),m.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-text-primary",children:a.symbol}),m.jsx("td",{className:"px-4 py-3 text-sm text-text-secondary text-right",children:a.quantity}),m.jsxs("td",{className:"px-4 py-3 text-sm text-text-secondary text-right",children:["$",a.price.toFixed(2)]}),m.jsxs("td",{className:"px-4 py-3 text-sm text-text-primary text-right font-semibold",children:["$",a.total.toFixed(2)]}),m.jsx("td",{className:"px-4 py-3 text-sm text-right",children:a.profit!==void 0&&m.jsxs("span",{className:a.profit>=0?"text-success font-semibold":"text-danger font-semibold",children:[a.profit>=0?"+":"","$",a.profit.toFixed(2)]})})]},c))})]})})]})]})},T2e=({isOpen:t,progress:e})=>{if(!t||!e)return null;const r=i=>{switch(i){case"scanning":return"";case"ranking":return"";case"selecting":return"";case"complete":return"";default:return""}},n=i=>{switch(i){case"scanning":return"Escaneando Mercado";case"ranking":return"Rankeando Smbolos";case"selecting":return"Seleccionando Mejores";case"complete":return"Completado";default:return"Procesando"}};return m.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx("div",{className:"text-6xl mb-4 animate-pulse",children:r(e.stage)}),m.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:n(e.stage)}),m.jsx("p",{className:"text-sm text-gray-600",children:e.message})]}),m.jsxs("div",{className:"mb-6",children:[m.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[m.jsx("span",{children:"Progreso"}),m.jsxs("span",{className:"font-bold text-primary",children:[e.percentage,"%"]})]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden",children:m.jsx("div",{className:"bg-gradient-to-r from-primary to-blue-600 h-4 rounded-full transition-all duration-300 ease-out flex items-center justify-end pr-2",style:{width:`${e.percentage}%`},children:e.percentage>10&&m.jsxs("span",{className:"text-xs text-white font-bold",children:[e.percentage,"%"]})})})]}),m.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:m.jsxs("div",{className:"flex justify-between items-center text-sm",children:[m.jsx("span",{className:"text-gray-600",children:"Smbolos procesados:"}),m.jsxs("span",{className:"font-bold text-gray-800",children:[e.current," / ",e.total]})]})}),m.jsx("div",{className:"mt-6 space-y-2",children:["scanning","ranking","selecting","complete"].map(i=>m.jsxs("div",{className:`flex items-center gap-3 text-sm ${e.stage===i?"text-primary font-semibold":e.percentage>nB(i)?"text-green-600":"text-gray-400"}`,children:[e.percentage>nB(i)?m.jsx(lV,{className:"text-green-600"}):e.stage===i?m.jsx("div",{className:"w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin"}):m.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 rounded-full"}),m.jsx("span",{children:n(i)})]},i))}),m.jsxs("div",{className:"mt-6 text-center text-xs text-gray-500",children:[m.jsx("p",{children:"Este proceso puede tardar 1-2 minutos"}),m.jsx("p",{children:"Por favor, no cierres esta ventana"})]})]})})};function nB(t){switch(t){case"scanning":return 0;case"ranking":return 70;case"selecting":return 90;case"complete":return 100;default:return 0}}const $l="http://localhost:3001",Q$={baseUrl:$l,endpoints:{alpacaQuote:t=>`${$l}/api/alpaca/quote/${t}`,alpacaBars:t=>`${$l}/api/alpaca/bars/${t}`,alpacaAccount:()=>`${$l}/api/alpaca/account`,alpacaPositions:()=>`${$l}/api/alpaca/positions`,alpacaOrders:()=>`${$l}/api/alpaca/orders`,health:()=>`${$l}/health`}},R2e={async scanMarket(t,e,r,n,i,s){try{const a=`${Q$.baseUrl}/api/screener/scan`;s?.({stage:"scanning",current:0,total:100,message:"Iniciando escaneo del mercado...",percentage:0});const c=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({strategy:t,universe:e,topN:r,startDate:n,endDate:i})});if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const u=c.body?.getReader(),d=new TextDecoder;let h="",p=[];if(u)for(;;){const{done:g,value:y}=await u.read();if(g)break;h+=d.decode(y,{stream:!0});const S=h.split(`
`);h=S.pop()||"";for(const x of S)if(x.startsWith("data: ")){const w=JSON.parse(x.slice(6));w.type==="progress"?s?.(w.progress):w.type==="complete"&&(p=w.symbols)}}return p}catch(a){throw console.error("Error en stock screener:",a),a}}},iB=.0025,sB=.1,P2e={async runSimulation(t,e){console.log(" Iniciando simulacin...",t),console.log(" Escaneando mercado...");const r=await R2e.scanMarket(t.strategyType,t.universe,t.topN,t.startDate,t.endDate,e);console.log(` Smbolos seleccionados: ${r.join(", ")}`);const n=await this.getHistoricalData(r,t.startDate,t.endDate),i=this.prepareMarketData(n),{trades:s,snapshots:a}=await this.executeSimulation(t,i),c=this.calculateMetrics(t,s,a,n),u=a[a.length-1]?.totalValue||t.initialCapital;return{config:t,trades:s,snapshots:a,metrics:c,finalCapital:u,executedAt:Ee.now()}},async getHistoricalData(t,e,r){const n=new Map;for(const i of t)try{console.log(` Obteniendo datos histricos de ${i} desde API...`);const s=`${Q$.endpoints.alpacaBars(i)}?timeframe=1Day&start=${e}&end=${r}`,a=await fetch(s);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const c=await a.json();if(!c.bars||c.bars.length===0){console.warn(`No hay datos para ${i}`);continue}const d=c.bars.map(h=>({date:h.t.split("T")[0],open:h.o,high:h.h,low:h.l,close:h.c,volume:h.v})).filter(h=>h.date>=e&&h.date<=r).sort((h,p)=>h.date.localeCompare(p.date));n.set(i,d),console.log(` Obtenidos ${d.length} das de datos para ${i}`),await new Promise(h=>setTimeout(h,200))}catch(s){console.error(`Error obteniendo datos de ${i}:`,s)}return n},prepareMarketData(t){const e=new Map;for(const[r,n]of t.entries()){const i=n.map((s,a)=>{const c=this.calculateIndicators(n,a);return{...s,indicators:c}});e.set(r,i)}return e},calculateIndicators(t,e){const r={};return e>=14&&(r.rsi=this.calculateRSI(t,e,14)),e>=19&&(r.ma20=this.calculateMA(t,e,20)),e>=49&&(r.ma50=this.calculateMA(t,e,50)),r},calculateRSI(t,e,r){let n=0,i=0;for(let u=e-r+1;u<=e;u++){const d=t[u].close-t[u-1].close;d>0?n+=d:i+=Math.abs(d)}const s=n/r,a=i/r;return a===0?100:100-100/(1+s/a)},calculateMA(t,e,r){let n=0;for(let i=e-r+1;i<=e;i++)n+=t[i].close;return n/r},async executeSimulation(t,e){const r=[],n=[];let i=t.initialCapital;const s=new Map,a=new Set;for(const u of e.values())u.forEach(d=>a.add(d.date));const c=Array.from(a).sort();for(const u of c){for(const[h,p]of s.entries()){const y=e.get(h)?.find(S=>S.date===u);y&&(p.currentPrice=y.close,p.unrealizedProfit=(y.close-p.averagePrice)*p.quantity,p.unrealizedProfitPercent=(y.close-p.averagePrice)/p.averagePrice*100)}for(const h of e.keys()){const g=e.get(h)?.find(S=>S.date===u);if(!g)continue;const y=this.applyStrategy(t.strategyType,g,s.has(h));if(y==="BUY"&&s.size<t.maxPositions){const S=this.executeBuy(h,g,i,t.maxPositions,u);if(S){r.push(S),i-=S.total;const x=s.get(h);if(x){const w=x.quantity+S.quantity,E=x.averagePrice*x.quantity+S.price*S.quantity;x.quantity=w,x.averagePrice=E/w,x.currentPrice=S.price}else s.set(h,{symbol:h,quantity:S.quantity,averagePrice:S.price,currentPrice:S.price,unrealizedProfit:0,unrealizedProfitPercent:0})}}else if(y==="SELL"&&s.has(h)){const S=s.get(h),x=this.executeSell(h,g,S,u);x&&(r.push(x),i+=x.total,s.delete(h))}}const d=Array.from(s.values()).reduce((h,p)=>h+p.currentPrice*p.quantity,0);n.push({date:u,cash:i,positionsValue:d,totalValue:i+d,positions:Array.from(s.values())})}return{trades:r,snapshots:n}},applyStrategy(t,e,r){const{indicators:n,close:i}=e;switch(t){case Kr.MOMENTUM:if(!r&&n.rsi&&n.ma20){if(n.rsi>60&&i>n.ma20)return"BUY"}else if(r&&n.rsi&&n.rsi<40)return"SELL";break;case Kr.VALUE:if(!r&&n.ma20&&n.ma50){if(i<n.ma20&&n.ma20<n.ma50)return"BUY"}else if(r&&n.ma20&&i>n.ma20*1.15)return"SELL";break;case Kr.GROWTH:if(!r&&n.rsi&&n.ma20){if(n.rsi>55&&i>n.ma20)return"BUY"}else if(r&&n.rsi&&n.rsi<45)return"SELL";break;case Kr.DIVIDEND:case Kr.SECTOR_ROTATION:if(!r&&n.ma20){if(i>n.ma20)return"BUY"}else if(r&&n.ma20&&i<n.ma20)return"SELL";break}return null},executeBuy(t,e,r,n,i){const s=r/n,a=e.close,c=Math.floor(s/a);if(c<=0)return null;const u=c*a,d=u*iB,h=u+d;return h>r?null:{date:i,symbol:t,type:"BUY",quantity:c,price:a,commission:d,total:h,reason:`RSI: ${e.indicators.rsi?.toFixed(2)||"N/A"}, MA20: ${e.indicators.ma20?.toFixed(2)||"N/A"}`}},executeSell(t,e,r,n){const i=e.close,s=r.quantity,a=s*i,c=a*iB,u=(i-r.averagePrice)*s,d=u>0?u*sB:0,h=a-c-d,p=u-c-d;return{date:n,symbol:t,type:"SELL",quantity:s,price:i,commission:c,total:h,profit:p,reason:`Profit: ${p.toFixed(2)} MXN (${(p/(r.averagePrice*s)*100).toFixed(2)}%)`}},calculateMetrics(t,e,r,n){const i=t.initialCapital,s=r[r.length-1]?.totalValue||i,a=e.filter(z=>z.type==="SELL"),c=a.filter(z=>(z.profit||0)>0),u=a.filter(z=>(z.profit||0)<=0),d=a.map(z=>z.profit||0),h=d.length>0?Math.max(...d):0,p=d.length>0?Math.min(...d):0,g=c.length>0?c.reduce((z,j)=>z+(j.profit||0),0)/c.length:0,y=u.length>0?u.reduce((z,j)=>z+(j.profit||0),0)/u.length:0,S=e.reduce((z,j)=>z+j.commission,0),x=a.reduce((z,j)=>{const O=(j.profit||0)+j.commission;return z+(O>0?O*sB:0)},0);let w=i,E=0;for(const z of r){z.totalValue>w&&(w=z.totalValue);const j=(w-z.totalValue)/w*100;j>E&&(E=j)}let R=0;const T=Array.from(n.keys());if(T.length>0){const z=T[0],j=n.get(z);if(j&&j.length>0){const O=j[0].close;R=(j[j.length-1].close-O)/O*100}}const M=(s-i)/i*100,D=s-i;return{totalReturn:M,totalReturnMXN:D,totalTrades:e.length,winningTrades:c.length,losingTrades:u.length,winRate:a.length>0?c.length/a.length*100:0,bestTrade:h,worstTrade:p,averageWin:g,averageLoss:y,maxDrawdown:E,sharpeRatio:0,buyAndHoldReturn:R,vsMarket:M-R,totalCommissions:S,totalTaxes:x}}},I2e=()=>{const[t,e]=A.useState(!1),[r,n]=A.useState(null),[i,s]=A.useState(null),[a,c]=A.useState(null),u=async d=>{e(!0),s(null),n(null),c(null);try{console.log("Ejecutando simulacin con config:",d);const h=await P2e.runSimulation(d,p=>{c(p)});n(h),console.log("Simulacin completada:",h)}catch(h){console.error("Error en simulacin:",h),s(h instanceof Error?h.message:"Error desconocido en la simulacin")}finally{e(!1),c(null)}};return m.jsx(ir,{children:m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:m.jsx(hoe,{className:"text-3xl text-primary"})}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:"Simulacin Histrica"}),m.jsx("p",{className:"text-text-secondary mt-1",children:"El sistema escanea automticamente el mercado y selecciona las mejores oportunidades"})]})]}),m.jsx("div",{className:"bg-info/10 border border-info/20 rounded-xl p-4",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(ua,{className:"text-info text-xl mt-1"}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-info mb-1",children:" Escaneo Automtico de Mercado"}),m.jsx("p",{className:"text-sm text-text-secondary",children:"Selecciona una estrategia y un universo de acciones. El sistema escanear automticamente todos los smbolos, los rankear segn la estrategia elegida, y seleccionar los mejores para ejecutar la simulacin histrica."}),m.jsx("p",{className:"text-xs text-warning mt-2",children:" Nota: Los resultados pasados no garantizan rendimientos futuros. Herramienta educativa."})]})]})}),m.jsx(E2e,{onSubmit:u,isLoading:t}),i&&m.jsxs("div",{className:"bg-danger/10 border border-danger/20 rounded-xl p-4",children:[m.jsx("h3",{className:"font-semibold text-danger mb-2",children:"Error en la Simulacin"}),m.jsx("p",{className:"text-sm text-text-secondary",children:i})]}),r&&!t&&m.jsx(A2e,{result:r}),m.jsx(T2e,{isOpen:t,progress:a})]})})},N2e=()=>{const{currentUser:t}=bi(),e=["SPY","SLV","XLF","QQQ","IWM","HYG","THH","NVDA","TQQQ","SOXL","AVGO","ONDS","WULF","INTC","TE","DNN","RVNL","FEIM","BBAI","BMNR"],r=async()=>{if(!t){alert("Debes estar autenticado");return}try{await Zd(rr(lt,"users",t.uid,"research","latest"),{date:new Date().toISOString(),stocks:e,updatedAt:new Date}),alert(" Acciones guardadas! Ve a Simulacin y refresca la pgina")}catch(n){console.error("Error:",n),alert(" Error al guardar")}};return m.jsx("button",{onClick:r,className:"px-6 py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700",children:" Guardar Top 20 en Firebase"})},O2e=()=>{const{currentUser:t}=bi(),[e,r]=A.useState(!1),[n,i]=A.useState([]),[s,a]=A.useState(null),[c,u]=A.useState(null),d=async()=>{r(!0),u(null),i([]),a(null);try{const y=(await fetch("http://localhost:3001/api/research/top-performers?years=5&limit=20")).body?.getReader(),S=new TextDecoder;let x="";if(y)for(;;){const{done:w,value:E}=await y.read();if(w)break;x+=S.decode(E,{stream:!0});const R=x.split(`
`);x=R.pop()||"";for(const T of R)if(T.startsWith("data: ")){const M=JSON.parse(T.slice(6));if(M.type==="progress")a(M.progress);else if(M.type==="complete"){if(i(M.results),t){const D=M.results.slice(0,20);await Zd(rr(lt,"users",t.uid,"research","latest"),{date:new Date().toISOString(),stocks:D.map(z=>z.symbol),updatedAt:new Date})}}else M.type==="error"&&u(M.error)}}}catch(g){console.error("Error en investigacin:",g),u(g instanceof Error?g.message:"Error desconocido")}finally{r(!1),a(null)}},h=g=>{switch(g){case"BUY":return"text-green-600 bg-green-50";case"HOLD":return"text-yellow-600 bg-yellow-50";case"AVOID":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}},p=g=>{switch(g){case"BUY":return"";case"HOLD":return"";case"AVOID":return"";default:return""}};return m.jsx(ir,{children:m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:m.jsx(uoe,{className:"text-3xl text-purple-600"})}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:"Investigacin de Acciones"}),m.jsx("p",{className:"text-text-secondary mt-1",children:"Anlisis profundo de las mejores acciones del ltimo ao"})]})]}),!e&&n.length===0&&m.jsx(m.Fragment,{children:m.jsx("button",{onClick:d,className:"px-6 py-3 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 transition-colors shadow-md hover:shadow-lg",children:" Iniciar Investigacin"})}),n.length>0&&m.jsx(N2e,{})]}),m.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(ua,{className:"text-purple-600 text-xl mt-1"}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-purple-900 mb-1",children:"Qu hace esta herramienta?"}),m.jsx("p",{className:"text-sm text-purple-800",children:"Analiza las acciones ms activas del mercado durante el ltimo ao usando datos profesionales de Massive.com, calcula mtricas de estabilidad, rendimiento y riesgo, y te muestra las mejores opciones para invertir basndose en datos histricos reales."}),m.jsx("p",{className:"text-xs text-purple-700 mt-2",children:" Este anlisis puede tardar 15-20 minutos debido a lmites de API. Por favor, espera mientras procesamos los datos."})]})]})}),e&&m.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-border p-6",children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx("div",{className:"text-6xl mb-4 animate-pulse",children:""}),m.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Analizando Acciones"}),m.jsx("p",{className:"text-sm text-gray-600",children:s?.message||"Iniciando anlisis..."})]}),s&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"mb-6",children:[m.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[m.jsx("span",{children:"Progreso"}),m.jsxs("span",{className:"font-bold text-purple-600",children:[s.percentage,"%"]})]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden",children:m.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 h-4 rounded-full transition-all duration-300",style:{width:`${s.percentage}%`}})})]}),m.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:m.jsxs("div",{className:"flex justify-between items-center text-sm",children:[m.jsx("span",{className:"text-gray-600",children:"Acciones procesadas:"}),m.jsxs("span",{className:"font-bold text-gray-800",children:[s.current," / ",s.total]})]})})]})]}),c&&m.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:[m.jsx("h3",{className:"font-semibold text-red-900 mb-2",children:"Error en el Anlisis"}),m.jsx("p",{className:"text-sm text-red-800",children:c})]}),n.length>0&&!e&&m.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-border p-6",children:[m.jsxs("h2",{className:"text-2xl font-bold text-text-primary mb-6",children:[" Top ",n.length," Acciones - ltimo Ao"]}),m.jsx("div",{className:"space-y-4",children:n.map((g,y)=>m.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("div",{className:"text-2xl font-bold text-gray-400",children:["#",y+1]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-bold text-text-primary",children:g.symbol}),m.jsx("p",{className:"text-sm text-text-secondary",children:g.name})]})]}),m.jsxs("div",{className:"flex items-center gap-6",children:[m.jsxs("div",{className:"text-right",children:[m.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["+",g.totalReturn5Y.toFixed(1),"%"]}),m.jsxs("div",{className:"text-xs text-gray-500",children:["CAGR: ",g.cagr.toFixed(1),"%/ao"]})]}),m.jsxs("div",{className:"text-right",children:[m.jsxs("div",{className:"flex items-center gap-1 text-yellow-500",children:[m.jsx(Coe,{}),m.jsxs("span",{className:"font-bold",children:[g.stabilityScore,"/100"]})]}),m.jsx("div",{className:"text-xs text-gray-500",children:"Estabilidad"})]}),m.jsxs("div",{className:`px-4 py-2 rounded-lg font-semibold ${h(g.recommendation)}`,children:[p(g.recommendation)," ",g.recommendation]})]})]}),m.jsxs("div",{className:"mt-4 grid grid-cols-4 gap-4 text-sm",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-500",children:"Volatilidad:"}),m.jsxs("span",{className:"ml-2 font-semibold",children:[g.volatility.toFixed(1),"%"]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-500",children:"Sharpe:"}),m.jsx("span",{className:"ml-2 font-semibold",children:g.sharpeRatio.toFixed(2)})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-500",children:"Max Drawdown:"}),m.jsxs("span",{className:"ml-2 font-semibold text-red-600",children:[g.maxDrawdown.toFixed(1),"%"]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-500",children:"Aos Positivos:"}),m.jsxs("span",{className:"ml-2 font-semibold",children:[g.positiveYears,"/5"]})]})]})]},g.symbol))})]}),!e&&n.length===0&&!c&&m.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-border p-12 text-center",children:[m.jsx("div",{className:"text-6xl mb-4",children:""}),m.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Listo para Investigar"}),m.jsx("p",{className:"text-gray-600 mb-6",children:'Haz clic en "Iniciar Investigacin" para analizar las mejores acciones'})]})]})})},J$=({isOpen:t,onClose:e,title:r,message:n,buttonText:i="Aceptar"})=>m.jsx(eh,{isOpen:t,onClose:e,size:"sm",children:m.jsxs("div",{className:"text-center py-4",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-success/10 mb-4",children:m.jsx("svg",{className:"h-10 w-10 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),m.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-2",children:r}),m.jsx("p",{className:"text-text-secondary mb-6",children:n}),m.jsx(yn,{variant:"success",onClick:e,className:"min-w-[120px]",children:i})]})}),j2e=()=>{const{currentUser:t,firebaseUser:e,loading:r}=bi(),[n,i]=A.useState([]),[s,a]=A.useState(null),[c,u]=A.useState(!1),[d,h]=A.useState(!1),[p,g]=A.useState(!1),[y,S]=A.useState(!1),[x,w]=A.useState(!1),[E,R]=A.useState({title:"",message:""}),[T,M]=A.useState(null),[D,z]=A.useState(!1),j=G=>{R({title:"xito",message:G}),g(!0)},O=G=>{R({title:"Error",message:G}),S(!0)},L=()=>{const G=new Date,le=new Date(G.toLocaleString("en-US",{timeZone:"America/New_York"})),X=le.getDay(),ge=le.getHours(),be=le.getMinutes(),we=ge*60+be,Ke=X>=1&&X<=5,Ue=we>=570&&we<960;return Ke&&Ue};if(r)return m.jsx(ir,{children:m.jsx("div",{className:"p-6",children:m.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:m.jsx("p",{className:"text-blue-800",children:" Cargando..."})})})});if(!t)return m.jsx(ir,{children:m.jsx("div",{className:"p-6",children:m.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:m.jsx("p",{className:"text-yellow-800",children:" Debes iniciar sesin para acceder al trading en vivo"})})})});const V=async()=>{try{const G=await fetch("http://localhost:3001/api/trading/account");if(G.ok){const le=await G.json();a(le)}}catch(G){console.error("Error loading account:",G)}},U=async()=>{if(e)try{const G=await fetch(`http://localhost:3001/api/trading/positions?userId=${e.uid}`);if(G.ok){const le=await G.json();i(le)}}catch(G){console.error("Error loading positions:",G)}};A.useEffect(()=>{z(L());const G=setInterval(()=>{z(L())},6e4);return()=>clearInterval(G)},[]),A.useEffect(()=>{V(),U();const G=setInterval(()=>{V(),U()},1e4);return()=>clearInterval(G)},[e]),A.useEffect(()=>{(async()=>{if(e)try{const le=await fetch(`http://localhost:3001/api/trading/status?userId=${e.uid}`);if(le.ok){const X=await le.json();h(X.botActive||!1)}}catch(le){console.error("Error checking bot status:",le)}})()},[e]);const F=async()=>{if(console.log("=== DEBUGGING BOT START ==="),console.log("1. currentUser:",t),console.log("2. firebaseUser:",e),console.log("3. firebaseUser?.uid:",e?.uid),!t||!e){O("Usuario no autenticado. Por favor, recarga la pgina.");return}if(!e.uid){console.error("firebaseUser exists but uid is missing:",e),O("UID de usuario no disponible");return}console.log("4. Starting bot for user:",e.uid),u(!0);try{const G={userId:e.uid,capital:1e3,symbols:["SPY","SLV","XLF","QQQ","IWM","HYG","NVDA","TQQQ","SOXL","AVGO","ONDS","WULF","INTC","TE","DNN","FEIM","BBAI","BMNR"]};console.log("5. Request body:",JSON.stringify(G,null,2));const le=await fetch("http://localhost:3001/api/trading/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)});if(console.log("6. Response status:",le.status),console.log("7. Response ok:",le.ok),le.ok){const X=await le.json();console.log("8. Bot started successfully:",X),h(!0),U(),j("Bot activado - Buscar oportunidades automticamente")}else{const X=await le.text();console.error("9. Error response:",X),O("Error al iniciar el bot: "+X)}}catch(G){console.error("10. Exception:",G),O("Error al iniciar el bot: "+G.message)}finally{u(!1)}},q=async()=>{if(e){u(!0);try{(await fetch("http://localhost:3001/api/trading/stop",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.uid})})).ok&&(h(!1),j("Bot pausado - Las posiciones actuales se mantienen, pero no se harn nuevas compras/ventas"))}catch(G){console.error("Error stopping bot:",G),O("Error al detener el bot")}finally{u(!1)}}},ve=async()=>{if(confirm(" Cerrar TODAS las posiciones inmediatamente?")&&e){u(!0);try{(await fetch("http://localhost:3001/api/trading/emergency-stop",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.uid})})).ok&&(j("Parada de emergencia ejecutada - Todas las posiciones cerradas"),h(!1),U())}catch(G){console.error("Error in emergency stop:",G),O("Error en parada de emergencia")}finally{u(!1)}}},Ae=async G=>{M(G),w(!0)},Y=async()=>{if(!(!T||!e)){w(!1),u(!0);try{(await fetch(`http://localhost:3001/api/trading/close-position/${T}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.uid})})).ok&&(j(`Posicin de ${T} cerrada`),U())}catch(G){console.error("Error closing position:",G),O("Error al cerrar posicin")}finally{u(!1),M(null)}}},ae=1e5,pe=s?parseFloat(s.equity):ae,me=pe-ae,_e=(pe-ae)/ae*100,H=s?parseFloat(s.cash):0;return m.jsxs(ir,{children:[m.jsxs("div",{className:"p-6 space-y-6",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:"Trading en Vivo"}),m.jsx("p",{className:"text-text-secondary mt-1",children:"Bot automtico con estrategia Value Investing"})]}),m.jsx("div",{className:"flex gap-3",children:t?.role==="admin"&&m.jsxs(m.Fragment,{children:[d?m.jsxs("button",{onClick:q,disabled:c||!D,className:`px-6 py-3 rounded-lg font-semibold flex items-center gap-2 ${c||!D?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-gray-600 text-white hover:bg-gray-700"}`,children:[m.jsx(xoe,{})," Pausar Bot"]}):m.jsxs("button",{onClick:F,disabled:c||!D,className:`px-6 py-3 rounded-lg font-semibold flex items-center gap-2 ${c||!D?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:[m.jsx(yoe,{})," Iniciar Bot"]}),m.jsxs("button",{onClick:ve,disabled:c||!D,className:`px-6 py-3 rounded-lg font-semibold flex items-center gap-2 ${c||!D?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700"}`,children:[m.jsx(aoe,{})," Parada de Emergencia"]})]})})]}),!D&&m.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:m.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",m.jsx("strong",{children:"Mercado Cerrado:"})," El mercado de valores opera de Lunes a Viernes, 9:30 AM - 4:00 PM EST (8:30 AM - 3:00 PM hora de Mxico). Las operaciones de compra/venta solo estn disponibles durante el horario de mercado."]})}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[m.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-border p-6",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[m.jsx(ua,{className:"text-primary text-2xl"}),m.jsx("h3",{className:"text-sm font-semibold text-text-secondary",children:"ROI"})]}),m.jsxs("p",{className:`text-3xl font-bold ${_e>=0?"text-green-600":"text-red-600"}`,children:[_e>=0?"+":"",_e.toFixed(2),"%"]}),m.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Desde $100,000"})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-border p-6",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[m.jsx(Hc,{className:"text-green-600 text-2xl"}),m.jsx("h3",{className:"text-sm font-semibold text-text-secondary",children:"Valor de Cuenta"})]}),m.jsxs("p",{className:"text-3xl font-bold text-text-primary",children:["$",pe.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),m.jsxs("p",{className:"text-sm text-text-secondary mt-1",children:["Efectivo: $",H.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-border p-6",children:[m.jsx("h3",{className:"text-sm font-semibold text-text-secondary mb-2",children:"Posiciones"}),m.jsx("p",{className:"text-3xl font-bold text-text-primary",children:n.length}),m.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Activas"})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-border p-6",children:[m.jsx("h3",{className:"text-sm font-semibold text-text-secondary mb-2",children:"P&L Total"}),m.jsxs("p",{className:`text-3xl font-bold ${me>=0?"text-green-600":"text-red-600"}`,children:[me>=0?"+":"","$",me.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),m.jsx("p",{className:"text-sm text-text-secondary mt-1",children:me>=0?"Ganancia":"Prdida"})]})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-border p-6",children:[m.jsxs("h2",{className:"text-2xl font-bold text-text-primary mb-4",children:["Posiciones Activas (",n.length,")"]}),n.length===0?m.jsx("p",{className:"text-text-secondary text-center py-8",children:"No hay posiciones abiertas"}):m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"border-b border-gray-200",children:[m.jsx("th",{className:"text-left py-3 px-4 font-semibold text-text-primary",children:"Activo"}),m.jsx("th",{className:"text-right py-3 px-4 font-semibold text-text-primary",children:"Cantidad"}),m.jsx("th",{className:"text-right py-3 px-4 font-semibold text-text-primary",children:"Precio"}),m.jsx("th",{className:"text-right py-3 px-4 font-semibold text-text-primary",children:"Valor de Mercado"}),m.jsx("th",{className:"text-right py-3 px-4 font-semibold text-text-primary",children:"P&L Total"}),m.jsx("th",{className:"text-center py-3 px-4 font-semibold text-text-primary",children:"Accin"})]})}),m.jsx("tbody",{children:n.map(G=>{const le=parseFloat(G.qty),X=parseFloat(G.current_price),ge=parseFloat(G.market_value),be=parseFloat(G.unrealized_pl);return m.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[m.jsx("td",{className:"py-3 px-4 font-semibold",children:G.symbol}),m.jsx("td",{className:"py-3 px-4 text-right",children:le.toFixed(0)}),m.jsxs("td",{className:"py-3 px-4 text-right",children:["$",X.toFixed(2)]}),m.jsxs("td",{className:"py-3 px-4 text-right",children:["$",ge.toFixed(2)]}),m.jsxs("td",{className:`py-3 px-4 text-right font-semibold ${be>=0?"text-green-600":"text-red-600"}`,children:[be>=0?"+":"","$",be.toFixed(2)]}),m.jsx("td",{className:"text-center py-3 px-4",children:m.jsx("button",{onClick:()=>Ae(G.symbol),disabled:!D,className:`px-3 py-1 text-sm rounded ${D?"bg-red-600 text-white hover:bg-red-700":"bg-gray-400 text-gray-200 cursor-not-allowed"}`,children:"Cerrar"})})]},G.symbol)})})]})})]})]}),m.jsx(J$,{isOpen:p,onClose:()=>g(!1),title:E.title,message:E.message}),m.jsx(BC,{isOpen:y,onClose:()=>S(!1),title:E.title,message:E.message,type:"error"}),m.jsx(qC,{isOpen:x,onClose:()=>w(!1),onConfirm:Y,title:"Confirmar cierre de posicin",message:`Ests seguro de que deseas cerrar la posicin de ${T}? Esta accin vender todas las acciones al precio de mercado actual.`,confirmText:"Cerrar posicin",cancelText:"Cancelar"})]})},ui=({children:t,className:e="",onClick:r})=>m.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-border p-6 transition-all duration-200 hover:shadow-md ${r?"cursor-pointer hover:-translate-y-0.5":""} ${e}`,onClick:r,children:t}),M2e=({isOpen:t,onClose:e,onSuccess:r,existingUsers:n})=>{const{firebaseUser:i}=bi(),[s,a]=A.useState({displayName:"",email:"",role:"psychologist"}),[c,u]=A.useState({}),[d,h]=A.useState(!1),[p,g]=A.useState(null),[y,S]=A.useState(!1),[x,w]=A.useState(!1),[E,R]=A.useState(""),T=()=>{const O={};return s.displayName.trim()||(O.displayName="El nombre es obligatorio"),s.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(O.email="Email invlido"):O.email="El email es obligatorio",u(O),Object.keys(O).length===0},M=async O=>{if(O.preventDefault(),!T()||!i)return;if(n.some(V=>V.email.toLowerCase()===s.email.trim().toLowerCase())){const V=n.find(U=>U.email.toLowerCase()===s.email.trim().toLowerCase());R(`El correo ${s.email} ya est registrado para ${V?.displayName||"un usuario existente"}. Por favor usa otro correo electrnico.`),w(!0);return}h(!0);try{const V=zoe(),U=hS(s.role),F=Uoe(),q={token:V,displayName:s.displayName.trim(),email:s.email.trim(),role:s.role,permissions:U,createdBy:i.uid,expiresAt:Ee.fromDate(F),status:"pending"};await Qt.create("invitations",q);const ve=vV(V);g(ve),r()}catch(V){console.error("Error creating invitation:",V),R("Error al crear invitacin. Por favor intenta nuevamente."),w(!0)}finally{h(!1)}},D=async()=>{p&&await gV(p)&&(S(!0),setTimeout(()=>S(!1),2e3))},z=()=>{if(p){const O=`Hola ${s.displayName}, has sido invitado a unirte a nuestra plataforma de trading automatizado. Completa tu registro usando el siguiente link: ${p}`,L=`https://wa.me/?text=${encodeURIComponent(O)}`;window.open(L,"_blank")}},j=()=>{a({displayName:"",email:"",role:"investor"}),u({}),g(null),S(!1),e()};return m.jsxs(eh,{isOpen:t,onClose:j,title:p?"Invitacin Creada!":"Invitar Nuevo Usuario",children:[p?m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"p-4 bg-success/10 border border-success/20 rounded-lg",children:[m.jsx("p",{className:"text-sm text-success font-medium mb-2",children:" Invitacin creada exitosamente"}),m.jsxs("p",{className:"text-sm text-text-secondary",children:["Comparte el siguiente link con ",m.jsx("strong",{children:s.displayName})," para que complete su registro. El link expira en 7 das."]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Link de Invitacin"}),m.jsxs("div",{className:"flex gap-2 mb-3",children:[m.jsx("input",{type:"text",value:p,readOnly:!0,className:"flex-1 px-4 py-2 border border-border rounded-lg bg-background text-sm"}),m.jsx(yn,{variant:y?"success":"primary",onClick:D,className:"flex items-center gap-2",children:y?m.jsxs(m.Fragment,{children:[m.jsx(dc,{})," Copiado"]}):m.jsxs(m.Fragment,{children:[m.jsx(uV,{})," Copiar"]})})]}),m.jsxs(yn,{variant:"outline",onClick:z,className:"w-full flex items-center justify-center gap-2 bg-green-500 text-white hover:bg-green-600 border-green-500",children:[m.jsx(p2,{className:"text-xl"})," Enviar por WhatsApp"]})]}),m.jsx("div",{className:"flex justify-end pt-4",children:m.jsx(yn,{variant:"primary",onClick:j,children:"Cerrar"})})]}):m.jsxs("form",{onSubmit:M,className:"space-y-4",children:[m.jsx(oa,{label:"Nombre Completo",value:s.displayName,onChange:O=>a({...s,displayName:O.target.value}),error:c.displayName,required:!0,maxLength:100}),m.jsx(oa,{label:"Email",type:"email",value:s.email,onChange:O=>a({...s,email:O.target.value}),error:c.email,required:!0,maxLength:100}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-text-primary mb-1",children:["Rol ",m.jsx("span",{className:"text-danger",children:"*"})]}),m.jsxs("select",{value:s.role,onChange:O=>a({...s,role:O.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none cursor-pointer",children:[m.jsx("option",{value:"admin",children:"Administrador"}),m.jsx("option",{value:"psychologist",children:"Inversionista"})]})]}),c.submit&&m.jsx("div",{className:"text-danger text-sm",children:c.submit}),m.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[m.jsx(yn,{type:"button",variant:"outline",onClick:j,children:"Cancelar"}),m.jsx(yn,{type:"submit",variant:"primary",isLoading:d,children:"Generar Invitacin"})]})]}),m.jsx(BC,{isOpen:x,onClose:()=>w(!1),title:"Error",message:E,type:"error"})]})},D2e=({onUpdate:t,refreshTrigger:e})=>{const{currentUser:r,firebaseUser:n}=bi(),[i,s]=A.useState([]),[a,c]=A.useState(null),[u,d]=A.useState(!0),[h,p]=A.useState(!1),[g,y]=A.useState(null),[S,x]=A.useState(!1),[w,E]=A.useState(""),[R,T]=A.useState("name"),[M,D]=A.useState("asc"),[z,j]=A.useState(1),O=5;A.useEffect(()=>{L()},[n,e]);const L=async()=>{if(n)try{const ge=(await Qt.getActiveInvitations(n.uid)).map(be=>{const we=be.expiresAt.toDate();return be.status==="pending"&&zT(we)?(Qt.updateInvitationStatus(be.id,"expired"),{...be,status:"expired"}):be});s(ge)}catch(X){console.error("Error loading invitations:",X)}finally{d(!1)}};A.useEffect(()=>{if(!n)return;const X=Qt.subscribe("invitations",ge=>{const we=ge.filter(Ke=>Ke.createdBy===n.uid).map(Ke=>{const se=Ke.expiresAt.toDate();return Ke.status==="pending"&&zT(se)?(Qt.updateInvitationStatus(Ke.id,"expired"),{...Ke,status:"expired"}):Ke});s(we)});return()=>X()},[r]);const V=async(X,ge)=>{const be=vV(X);await gV(be)&&(c(ge),setTimeout(()=>c(null),2e3))},U=X=>{y(X),p(!0)},F=async()=>{if(g){x(!0);try{await Qt.delete("invitations",g.id),await L(),t(),p(!1),y(null)}catch(X){console.error("Error deleting invitation:",X)}finally{x(!1)}}},q=X=>{R===X?D(M==="asc"?"desc":"asc"):(T(X),D("asc")),j(1)},ve=X=>R!==X?m.jsx(pV,{className:"opacity-30"}):M==="asc"?m.jsx(fV,{}):m.jsx(hV,{}),Ae=X=>{const ge={pending:"bg-warning/10 text-warning",accepted:"bg-success/10 text-success",expired:"bg-text-secondary/10 text-text-secondary",revoked:"bg-danger/10 text-danger"},be={pending:"Pendiente",accepted:"Aceptada",expired:"Expirada",revoked:"Revocada"};return m.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${ge[X]}`,children:be[X]})},Y=X=>{const ge={admin:"bg-danger/10 text-danger",psychologist:"bg-primary/10 text-primary",receptionist:"bg-info/10 text-info",viewer:"bg-text-secondary/10 text-text-secondary"},be={admin:"Administrador",psychologist:"Inversionista",receptionist:"Recepcionista",viewer:"Visualizador"};return m.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${ge[X]}`,children:be[X]})},ae=()=>{let X=i;if(w.trim()){const ge=w.toLowerCase();X=X.filter(be=>{const we={pending:"pendiente",accepted:"aceptada",expired:"expirada",revoked:"revocada"},Ke={admin:"administrador",psychologist:"inversionista",receptionist:"recepcionista",viewer:"visualizador"},se=we[be.status],je=Ke[be.role],Ue=V4(be.expiresAt.toDate()).toLowerCase();return be.displayName?.toLowerCase().includes(ge)||be.email?.toLowerCase().includes(ge)||je?.includes(ge)||Ue.includes(ge)||se.includes(ge)})}return X=[...X].sort((ge,be)=>{let we=0;switch(R){case"name":we=(ge.displayName||"").localeCompare(be.displayName||"");break;case"email":we=(ge.email||"").localeCompare(be.email||"");break;case"role":we=(ge.role||"").localeCompare(be.role||"");break;case"expires":we=ge.expiresAt.toDate().getTime()-be.expiresAt.toDate().getTime();break;case"status":we=(ge.status||"").localeCompare(be.status||"");break}return M==="asc"?we:-we}),X},pe=()=>{const X=ae(),ge=(z-1)*O,be=ge+O;return X.slice(ge,be)},me=Math.ceil(ae().length/O);if(u)return m.jsx(ui,{children:m.jsx("div",{className:"p-8 text-center text-text-secondary",children:"Cargando invitaciones..."})});if(i.length===0)return m.jsx(ui,{children:m.jsx("div",{className:"p-8 text-center text-text-secondary",children:"No hay invitaciones creadas"})});const _e=i.length,H=i.filter(X=>X.status==="pending").length,G=i.filter(X=>X.status==="accepted").length,le=i.filter(X=>X.status==="expired").length;return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[m.jsx(ui,{className:"p-4",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:m.jsx(soe,{className:"text-2xl text-primary"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"Total Invitaciones"}),m.jsx("p",{className:"text-2xl font-bold text-text-primary",children:_e})]})]})}),m.jsx(ui,{className:"p-4",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-3 bg-warning/10 rounded-lg",children:m.jsx(toe,{className:"text-2xl text-warning"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"Pendientes"}),m.jsx("p",{className:"text-2xl font-bold text-text-primary",children:H})]})]})}),m.jsx(ui,{className:"p-4",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-3 bg-success/10 rounded-lg",children:m.jsx(lV,{className:"text-2xl text-success"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"Aceptadas"}),m.jsx("p",{className:"text-2xl font-bold text-text-primary",children:G})]})]})}),m.jsx(ui,{className:"p-4",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-3 bg-text-secondary/10 rounded-lg",children:m.jsx(Toe,{className:"text-2xl text-text-secondary"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"Expiradas"}),m.jsx("p",{className:"text-2xl font-bold text-text-primary",children:le})]})]})})]}),m.jsxs(ui,{children:[m.jsx("div",{className:"p-4 border-b border-border",children:m.jsx(oa,{type:"text",placeholder:"Buscar por nombre, email, rol, fecha de expiracin o estado...",value:w,onChange:X=>{E(X.target.value),j(1)}})}),pe().length===0?m.jsx("div",{className:"text-center py-12",children:m.jsx("p",{className:"text-text-secondary",children:w?"No se encontraron resultados para tu bsqueda.":"No hay invitaciones con el filtro seleccionado"})}):m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{className:"bg-background",children:m.jsxs("tr",{children:[m.jsx("th",{onClick:()=>q("name"),className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",children:m.jsxs("div",{className:"flex items-center gap-2",children:["Nombre",ve("name")]})}),m.jsx("th",{onClick:()=>q("email"),className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",children:m.jsxs("div",{className:"flex items-center gap-2",children:["Email",ve("email")]})}),m.jsx("th",{onClick:()=>q("role"),className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",children:m.jsxs("div",{className:"flex items-center gap-2",children:["Rol",ve("role")]})}),m.jsx("th",{onClick:()=>q("expires"),className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",children:m.jsxs("div",{className:"flex items-center gap-2",children:["Expira",ve("expires")]})}),m.jsx("th",{onClick:()=>q("status"),className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",children:m.jsxs("div",{className:"flex items-center gap-2",children:["Estado",ve("status")]})}),m.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Acciones"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-border",children:pe().map(X=>m.jsxs("tr",{className:"hover:bg-background transition-colors",children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("div",{className:"text-sm font-medium text-text-primary",children:X.displayName})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("div",{className:"text-sm text-text-secondary",children:X.email})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Y(X.role)}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("div",{className:"text-sm text-text-secondary",children:V4(X.expiresAt.toDate())})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ae(X.status)}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:m.jsxs("div",{className:"flex items-center justify-end gap-2",children:[X.status==="pending"&&m.jsx("button",{onClick:()=>V(X.token,X.id),className:`p-2 rounded-lg transition-colors ${a===X.id?"text-success bg-success/10":"text-primary hover:bg-primary/10"}`,title:"Copiar link",children:a===X.id?m.jsx(dc,{}):m.jsx(uV,{})}),m.jsx("button",{onClick:()=>U(X),className:"p-2 text-danger hover:bg-danger/10 rounded-lg transition-colors",title:"Eliminar",children:m.jsx(g2,{})})]})})]},X.id))})]})}),me>1&&m.jsxs("div",{className:"p-4 border-t border-border flex items-center justify-between",children:[m.jsxs("div",{className:"text-sm text-text-secondary",children:["Pgina ",z," de ",me," (",ae().length," invitaciones)"]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>j(1),disabled:z===1,className:"px-3 py-1 rounded-lg border border-border text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed hover:bg-primary hover:text-white hover:border-primary",children:"Primera"}),m.jsx("button",{onClick:()=>j(z-1),disabled:z===1,className:"px-3 py-1 rounded-lg border border-border text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed hover:bg-primary hover:text-white hover:border-primary",children:"Anterior"}),m.jsx("div",{className:"flex gap-1",children:Array.from({length:me},(X,ge)=>ge+1).filter(X=>X===1||X===me||Math.abs(X-z)<=1).map((X,ge,be)=>m.jsxs(ea.Fragment,{children:[ge>0&&be[ge-1]!==X-1&&m.jsx("span",{className:"px-2 py-1 text-text-secondary",children:"..."}),m.jsx("button",{onClick:()=>j(X),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${z===X?"bg-primary text-white border-primary":"border border-border hover:bg-primary hover:text-white hover:border-primary"}`,children:X})]},X))}),m.jsx("button",{onClick:()=>j(z+1),disabled:z===me,className:"px-3 py-1 rounded-lg border border-border text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed hover:bg-primary hover:text-white hover:border-primary",children:"Siguiente"}),m.jsx("button",{onClick:()=>j(me),disabled:z===me,className:"px-3 py-1 rounded-lg border border-border text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed hover:bg-primary hover:text-white hover:border-primary",children:"ltima"})]})]})]}),m.jsx(qC,{isOpen:h,onClose:()=>{p(!1),y(null)},onConfirm:F,title:"Eliminar Invitacin",message:`Ests seguro de que deseas eliminar la invitacin para ${g?.displayName}? Esta accin no se puede deshacer.`,confirmText:"Eliminar",isLoading:S})]})},k2e=()=>{const{currentUser:t}=bi(),[e,r]=A.useState([]),[n,i]=A.useState(!0),[s,a]=A.useState(""),[c,u]=A.useState("users"),[d,h]=A.useState(0),[p,g]=A.useState("name"),[y,S]=A.useState("asc"),[x,w]=A.useState(1),E=5,[R,T]=A.useState(!1),[M,D]=A.useState(!1),[z,j]=A.useState(!1),[O,L]=A.useState(!1),[V,U]=A.useState(!1),[F,q]=A.useState(!1),[ve,Ae]=A.useState(""),[Y,ae]=A.useState(""),[pe,me]=A.useState(null),[_e,H]=A.useState({displayName:"",email:"",role:"psychologist",isActive:!0}),[G,le]=A.useState({}),[X,ge]=A.useState(!1),[be,we]=A.useState(!1),[Ke,se]=A.useState(null);A.useEffect(()=>{je()},[]);const je=async()=>{try{const ye=await Qt.getAll("users");r(ye)}catch(ye){console.error("Error loading users:",ye),ae("Error al cargar usuarios"),U(!0)}finally{i(!1)}},Ue=ye=>{p===ye?S(y==="asc"?"desc":"asc"):(g(ye),S("asc")),w(1)},fe=ye=>p!==ye?m.jsx(pV,{className:"opacity-30"}):y==="asc"?m.jsx(fV,{}):m.jsx(hV,{}),Pt=()=>{let ye=e;if(s.trim()){const ut=s.toLowerCase();ye=ye.filter(kt=>{const Pr=kt.isActive?"activo":"inactivo";return kt.displayName?.toLowerCase().includes(ut)||kt.email?.toLowerCase().includes(ut)||kt.role?.toLowerCase().includes(ut)||Pr.includes(ut)})}return ye=[...ye].sort((ut,kt)=>{let Pr=0;switch(p){case"name":Pr=(ut.displayName||"").localeCompare(kt.displayName||"");break;case"email":Pr=(ut.email||"").localeCompare(kt.email||"");break;case"role":Pr=(ut.role||"").localeCompare(kt.role||"");break;case"status":Pr=ut.isActive===kt.isActive?0:ut.isActive?-1:1;break}return y==="asc"?Pr:-Pr}),ye},Ge=()=>{const ye=Pt(),ut=(x-1)*E,kt=ut+E;return ye.slice(ut,kt)},yt=Math.ceil(Pt().length/E),Dt=()=>{const ye={};return _e.displayName.trim()||(ye.displayName="El campo Nombre es obligatorio"),_e.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_e.email)||(ye.email="Email invlido"):ye.email="El campo Email es obligatorio",le(ye),Object.keys(ye).length===0},vt=ye=>{me(ye),H({displayName:ye.displayName,email:ye.email,role:ye.role,isActive:ye.isActive}),le({}),D(!0)},Ci=async ye=>{if(ye.preventDefault(),!(!Dt()||!pe)){ge(!0);try{const ut=hS(_e.role),kt={displayName:_e.displayName.trim(),email:_e.email.trim(),role:_e.role,permissions:ut,isActive:_e.isActive,updatedAt:Ee.now()};await Qt.update("users",pe.uid,kt),Ae("Usuario actualizado correctamente"),D(!1),L(!0),await je()}catch(ut){console.error("Error saving user:",ut),ae("Error al guardar usuario"),U(!0)}finally{ge(!1)}}},Bt=async()=>{if(Ke){if(Ke.uid===t?.uid){ae("No puedes eliminar tu propio usuario"),U(!0),j(!1);return}we(!0);try{await Qt.delete("users",Ke.uid),Ae("Usuario eliminado correctamente"),j(!1),L(!0),await je()}catch(ye){console.error("Error deleting user:",ye),ae("Error al eliminar usuario"),U(!0)}finally{we(!1),se(null)}}},Gt=ye=>{const ut={admin:"bg-danger/10 text-danger",investor:"bg-primary/10 text-primary",psychologist:"bg-primary/10 text-primary"},kt={admin:"Administrador",investor:"Inversionista",psychologist:"Inversionista"};return m.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${ut[ye]||"bg-gray-100 text-gray-600"}`,children:kt[ye]||ye})};if(n)return m.jsx(ir,{children:m.jsx("div",{className:"flex items-center justify-center h-64",children:m.jsx(UC,{size:"lg"})})});if(!t?.permissions.canManageUsers)return m.jsx(ir,{children:m.jsx(ui,{children:m.jsxs("div",{className:"text-center py-12",children:[m.jsx(mV,{className:"text-6xl text-text-secondary opacity-20 mx-auto mb-4"}),m.jsx("p",{className:"text-text-secondary",children:"No tienes permisos para gestionar usuarios"})]})})});const xi=e.length,Yc=e.filter(ye=>ye.isActive).length,Eo=e.filter(ye=>!ye.isActive).length,Rr=e.filter(ye=>ye.role==="investor"||ye.role==="psychologist").length;return m.jsxs(ir,{children:[m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Gestin de Usuarios"}),m.jsx("p",{className:"text-text-secondary mt-1",children:"Administra usuarios y permisos del sistema"})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs(yn,{variant:"outline",onClick:()=>q(!0),className:"flex items-center gap-2",children:[m.jsx(poe,{})," Permisos por Rol"]}),m.jsxs(yn,{variant:"primary",onClick:()=>T(!0),className:"flex items-center gap-2",children:[m.jsx(LT,{})," Invitar Usuario"]})]})]}),m.jsx("div",{className:"border-b border-border",children:m.jsxs("div",{className:"flex gap-4",children:[m.jsx("button",{onClick:()=>u("users"),className:`px-4 py-3 font-medium transition-colors border-b-2 ${c==="users"?"border-primary text-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(U4,{}),"Usuarios"]})}),m.jsx("button",{onClick:()=>u("invitations"),className:`px-4 py-3 font-medium transition-colors border-b-2 ${c==="invitations"?"border-primary text-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(LT,{}),"Invitaciones"]})})]})}),c==="users"?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[m.jsx(ui,{className:"p-4",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:m.jsx(U4,{className:"text-2xl text-primary"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"Total Usuarios"}),m.jsx("p",{className:"text-2xl font-bold text-text-primary",children:xi})]})]})}),m.jsx(ui,{className:"p-4",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-3 bg-success/10 rounded-lg",children:m.jsx(_oe,{className:"text-2xl text-success"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"Activos"}),m.jsx("p",{className:"text-2xl font-bold text-text-primary",children:Yc})]})]})}),m.jsx(ui,{className:"p-4",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-3 bg-danger/10 rounded-lg",children:m.jsx(Roe,{className:"text-2xl text-danger"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"Inactivos"}),m.jsx("p",{className:"text-2xl font-bold text-text-primary",children:Eo})]})]})}),m.jsx(ui,{className:"p-4",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-3 bg-info/10 rounded-lg",children:m.jsx(Aoe,{className:"text-2xl text-info"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-text-secondary",children:"Inversionistas"}),m.jsx("p",{className:"text-2xl font-bold text-text-primary",children:Rr})]})]})})]}),m.jsxs(ui,{children:[m.jsx("div",{className:"p-4 border-b border-border",children:m.jsx(oa,{type:"text",placeholder:"Buscar por nombre, email, rol o estado...",value:s,onChange:ye=>{a(ye.target.value),w(1)}})}),Ge().length===0?m.jsx("div",{className:"text-center py-12",children:m.jsx("p",{className:"text-text-secondary",children:s?"No se encontraron resultados para tu bsqueda.":"No hay usuarios registrados"})}):m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{className:"bg-background",children:m.jsxs("tr",{children:[m.jsx("th",{onClick:()=>Ue("name"),className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",children:m.jsxs("div",{className:"flex items-center gap-2",children:["Nombre",fe("name")]})}),m.jsx("th",{onClick:()=>Ue("email"),className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",children:m.jsxs("div",{className:"flex items-center gap-2",children:["Email",fe("email")]})}),m.jsx("th",{onClick:()=>Ue("role"),className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",children:m.jsxs("div",{className:"flex items-center gap-2",children:["Rol",fe("role")]})}),m.jsx("th",{onClick:()=>Ue("status"),className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",children:m.jsxs("div",{className:"flex items-center gap-2",children:["Estado",fe("status")]})}),m.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Acciones"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-border",children:Ge().map(ye=>m.jsxs("tr",{className:"hover:bg-background transition-colors",children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("div",{className:"text-sm font-medium text-text-primary",children:ye.displayName})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("div",{className:"text-sm text-text-secondary",children:ye.email})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Gt(ye.role)}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${ye.isActive?"bg-success/10 text-success":"bg-danger/10 text-danger"}`,children:ye.isActive?"Activo":"Inactivo"})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:m.jsxs("div",{className:"flex items-center justify-end gap-2",children:[m.jsx("button",{onClick:()=>vt(ye),className:"p-2 text-primary hover:bg-primary/10 rounded-lg transition-colors",title:"Editar",children:m.jsx(ioe,{})}),ye.uid!==t?.uid&&m.jsx("button",{onClick:()=>{se(ye),j(!0)},className:"p-2 text-danger hover:bg-danger/10 rounded-lg transition-colors",title:"Eliminar",children:m.jsx(g2,{})})]})})]},ye.uid))})]})}),yt>1&&m.jsxs("div",{className:"p-4 border-t border-border flex items-center justify-between",children:[m.jsxs("div",{className:"text-sm text-text-secondary",children:["Pgina ",x," de ",yt," (",Pt().length," usuarios)"]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>w(1),disabled:x===1,className:"px-3 py-1 rounded-lg border border-border text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed hover:bg-primary hover:text-white hover:border-primary",children:"Primera"}),m.jsx("button",{onClick:()=>w(x-1),disabled:x===1,className:"px-3 py-1 rounded-lg border border-border text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed hover:bg-primary hover:text-white hover:border-primary",children:"Anterior"}),m.jsx("div",{className:"flex gap-1",children:Array.from({length:yt},(ye,ut)=>ut+1).filter(ye=>ye===1||ye===yt||Math.abs(ye-x)<=1).map((ye,ut,kt)=>m.jsxs(ea.Fragment,{children:[ut>0&&kt[ut-1]!==ye-1&&m.jsx("span",{className:"px-2 py-1 text-text-secondary",children:"..."}),m.jsx("button",{onClick:()=>w(ye),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${x===ye?"bg-primary text-white border-primary":"border border-border hover:bg-primary hover:text-white hover:border-primary"}`,children:ye})]},ye))}),m.jsx("button",{onClick:()=>w(x+1),disabled:x===yt,className:"px-3 py-1 rounded-lg border border-border text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed hover:bg-primary hover:text-white hover:border-primary",children:"Siguiente"}),m.jsx("button",{onClick:()=>w(yt),disabled:x===yt,className:"px-3 py-1 rounded-lg border border-border text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed hover:bg-primary hover:text-white hover:border-primary",children:"ltima"})]})]})]})]}):m.jsx(D2e,{onUpdate:je,refreshTrigger:d})]}),m.jsx(M2e,{isOpen:R,onClose:()=>T(!1),onSuccess:()=>{Ae("Invitacin creada exitosamente"),L(!0),je(),h(ye=>ye+1)},existingUsers:e.map(ye=>({email:ye.email,displayName:ye.displayName}))}),m.jsx(eh,{isOpen:M,onClose:()=>D(!1),title:"Editar Usuario",children:m.jsxs("form",{onSubmit:Ci,className:"space-y-4",children:[m.jsx(oa,{label:"Nombre Completo",value:_e.displayName,onChange:ye=>H({..._e,displayName:ye.target.value}),error:G.displayName,required:!0,maxLength:100}),m.jsx(oa,{label:"Email",type:"email",value:_e.email,onChange:ye=>H({..._e,email:ye.target.value}),error:G.email,required:!0,maxLength:100,disabled:!0}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-text-primary mb-1",children:["Rol ",m.jsx("span",{className:"text-danger",children:"*"})]}),m.jsxs("select",{value:_e.role,onChange:ye=>H({..._e,role:ye.target.value}),className:"w-full px-4 py-2 border border-border rounded-lg focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none",children:[m.jsx("option",{value:"admin",children:"Administrador"}),m.jsx("option",{value:"psychologist",children:"Inversionista"})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"checkbox",id:"isActive",checked:_e.isActive,onChange:ye=>H({..._e,isActive:ye.target.checked}),className:"w-4 h-4 text-primary border-border rounded focus:ring-primary"}),m.jsx("label",{htmlFor:"isActive",className:"text-sm text-text-primary",children:"Usuario activo"})]}),m.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[m.jsx(yn,{type:"button",variant:"outline",onClick:()=>D(!1),children:"Cancelar"}),m.jsx(yn,{type:"submit",variant:"primary",isLoading:X,children:"Guardar Cambios"})]})]})}),m.jsx(qC,{isOpen:z,onClose:()=>{j(!1),se(null)},onConfirm:Bt,title:"Eliminar Usuario",message:`Ests seguro de que deseas eliminar al usuario ${Ke?.displayName}? Esta accin no se puede deshacer.`,confirmText:"Eliminar",isLoading:be}),m.jsx(eh,{isOpen:F,onClose:()=>q(!1),title:"Permisos por Rol",size:"lg",children:m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"p-4 bg-background rounded-lg",children:[m.jsx("h4",{className:"font-medium text-danger mb-2",children:" Administrador"}),m.jsx("p",{className:"text-sm text-text-secondary mb-3",children:"Acceso completo a todas las funcionalidades del sistema:"}),m.jsxs("ul",{className:"text-sm text-text-secondary space-y-1 ml-4",children:[m.jsx("li",{children:" Dashboard de trading"}),m.jsx("li",{children:" Control total del bot (Iniciar, Pausar, Parada de Emergencia)"}),m.jsx("li",{children:" Gestin de posiciones"}),m.jsx("li",{children:" Gestin de usuarios"}),m.jsx("li",{children:" Configuracin del sistema"})]})]}),m.jsxs("div",{className:"p-4 bg-background rounded-lg",children:[m.jsx("h4",{className:"font-medium text-primary mb-2",children:" Inversionista"}),m.jsx("p",{className:"text-sm text-text-secondary mb-3",children:"Acceso a funciones de trading sin control del bot:"}),m.jsxs("ul",{className:"text-sm text-text-secondary space-y-1 ml-4",children:[m.jsx("li",{children:" Dashboard de trading"}),m.jsx("li",{children:" Visualizacin de posiciones"}),m.jsx("li",{children:" Cierre manual de posiciones"}),m.jsx("li",{children:" No puede iniciar/pausar el bot"}),m.jsx("li",{children:" No puede ejecutar parada de emergencia"}),m.jsx("li",{children:" No tiene acceso a gestin de usuarios"})]})]})]})}),m.jsx(J$,{isOpen:O,onClose:()=>L(!1),title:"xito",message:ve}),m.jsx(BC,{isOpen:V,onClose:()=>U(!1),title:"Error",message:Y,type:"error"})]})},L2e=()=>{const[t,e]=A.useState("how-to-use"),r=[{id:"how-to-use",title:"Cmo Usar el Sistema",icon:Qae},{id:"how-it-works",title:"Cmo Funciona",icon:noe},{id:"why",title:"Por Qu Funciona As",icon:moe},{id:"faq",title:"Preguntas Frecuentes",icon:v2}];return m.jsx(ir,{children:m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h2",{className:"text-3xl font-bold text-text-primary mb-2",children:"Centro de Ayuda"}),m.jsx("p",{className:"text-text-secondary",children:"Encuentra toda la informacin que necesitas para usar el CRM de manera efectiva"})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[m.jsx("div",{className:"lg:col-span-1",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-border p-4 sticky top-6",children:[m.jsx("h3",{className:"font-semibold text-text-primary mb-4",children:"Secciones"}),m.jsx("nav",{className:"space-y-2",children:r.map(n=>{const i=n.icon;return m.jsxs("button",{onClick:()=>e(n.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${t===n.id?"bg-primary text-white":"text-text-secondary hover:bg-background"}`,children:[m.jsx(i,{className:"text-lg"}),m.jsx("span",{className:"flex-1 text-left text-sm",children:n.title}),t===n.id&&m.jsx(eoe,{})]},n.id)})})]})}),m.jsx("div",{className:"lg:col-span-3",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-border p-8",children:[t==="how-to-use"&&m.jsx(z2e,{}),t==="how-it-works"&&m.jsx(U2e,{}),t==="why"&&m.jsx(B2e,{}),t==="faq"&&m.jsx(q2e,{})]})})]})]})})},z2e=()=>m.jsxs("div",{className:"space-y-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-4",children:"Cmo Usar el Sistema"}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs(pc,{title:"1. Gestin de Pacientes",children:[m.jsx("p",{className:"text-text-secondary mb-4",children:"El mdulo de pacientes te permite administrar toda la informacin de tus pacientes de manera centralizada."}),m.jsxs("ul",{className:"list-disc list-inside space-y-2 text-text-secondary",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Crear Paciente:"}),' Haz clic en "Nuevo Paciente" y completa el formulario con datos personales, contacto de emergencia y notas. Recibirs una notificacin de confirmacin.']}),m.jsxs("li",{children:[m.jsx("strong",{children:"Editar Paciente:"})," Haz clic en el cono de editar (lpiz) en la lista de pacientes para actualizar su informacin."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Buscar Paciente:"})," Usa la barra de bsqueda para encontrar pacientes por nombre, email o telfono."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Eliminar Paciente:"})," Haz clic en el cono de eliminar (basura) y confirma la accin. Se notificar la eliminacin."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Ordenar y Filtrar:"})," Ordena por nombre, email, telfono o estado usando los encabezados de la tabla."]})]})]}),m.jsxs(pc,{title:"2. Gestin de Consultorios",children:[m.jsx("p",{className:"text-text-secondary mb-4",children:"Administra los espacios fsicos donde realizas las consultas."}),m.jsxs("ul",{className:"list-disc list-inside space-y-2 text-text-secondary",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Crear Consultorio:"})," Define nombre, direccin, capacidad, equipamiento disponible y notas adicionales."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Editar Consultorio:"})," Actualiza la informacin segn cambios en el espacio o equipamiento."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Eliminar Consultorio:"})," Elimina consultorios que ya no uses. Recibirs una notificacin de confirmacin."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Buscar y Ordenar:"})," Filtra por nombre, direccin o capacidad para encontrar rpidamente el consultorio que necesitas."]})]})]}),m.jsxs(pc,{title:"3. Gestin de Consultas",children:[m.jsx("p",{className:"text-text-secondary mb-4",children:"El mdulo de Consultas unifica todo en un solo lugar: agenda, notas clnicas y cobro."}),m.jsxs("ul",{className:"list-disc list-inside space-y-2 text-text-secondary",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Crear Consulta:"})," Selecciona paciente, psiclogo, consultorio, fecha, hora y duracin. Recibirs una notificacin al crearla."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Registrar Notas:"})," Durante o despus de la consulta, registra motivo, diagnstico, plan de tratamiento y objetivos para la prxima sesin."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Cobrar Consulta:"})," Ingresa monto y mtodo de pago. Se genera una factura automticamente y recibirs notificacin del pago."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Vista de Calendario:"})," Visualiza todas tus consultas en formato de calendario mensual, semanal o diario."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Actualizar Estado:"})," Marca consultas como programadas, en curso, completadas o canceladas."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Eliminar Consulta:"})," Elimina consultas canceladas o errneas. Se notificar la eliminacin."]})]})]}),m.jsxs(pc,{title:"4. Facturacin",children:[m.jsx("p",{className:"text-text-secondary mb-4",children:"Gestiona los aspectos financieros de tu prctica con facturacin automtica."}),m.jsxs("ul",{className:"list-disc list-inside space-y-2 text-text-secondary",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Facturas Automticas:"})," Se generan automticamente al cobrar una consulta con nmero secuencial (FAC-001, FAC-002, etc.)."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Crear Factura Manual:"})," Crea facturas independientes para otros servicios. Recibirs notificacin al crearla."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Editar Factura:"})," Actualiza informacin de facturas pendientes antes de marcarlas como pagadas."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Registrar Pago:"})," Marca facturas como pagadas ingresando monto y mtodo de pago. Recibirs notificacin del pago."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Eliminar Factura:"})," Elimina facturas errneas o canceladas. Se notificar la eliminacin."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Ver Historial:"})," Consulta todas las facturas pagadas y pendientes con totales por estado."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Buscar y Filtrar:"})," Encuentra facturas por nmero, paciente, fecha, monto o estado."]})]})]}),m.jsxs(pc,{title:"5. Gestin de Usuarios",children:[m.jsx("p",{className:"text-text-secondary mb-4",children:"Solo disponible para administradores. Gestiona los usuarios del sistema y sus permisos."}),m.jsxs("ul",{className:"list-disc list-inside space-y-2 text-text-secondary",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Invitar Usuario:"})," Enva invitaciones por email con enlace nico que expira en 7 das. Recibirs notificacin al enviarla."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Compartir Invitacin:"})," Copia el enlace o comprtelo directamente por WhatsApp."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Asignar Roles:"})," Define roles al invitar: Administrador, Psiclogo, Recepcionista o Visualizador."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Editar Usuario:"})," Actualiza nombre, email, rol o estado de usuarios existentes. Se notificar la actualizacin."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Activar/Desactivar:"})," Controla el acceso de usuarios sin eliminar sus datos."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Eliminar Usuario:"})," Elimina usuarios que ya no necesiten acceso. Recibirs notificacin de la eliminacin."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Revocar Invitacin:"})," Cancela invitaciones pendientes que ya no sean necesarias. Se notificar la revocacin."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Ver Permisos:"}),' Consulta los permisos especficos de cada rol en el modal "Permisos por Rol".']})]})]}),m.jsxs(pc,{title:"6. Sistema de Notificaciones",children:[m.jsx("p",{className:"text-text-secondary mb-4",children:"Mantente informado de todas las acciones importantes en el sistema."}),m.jsxs("ul",{className:"list-disc list-inside space-y-2 text-text-secondary",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Notificaciones en Tiempo Real:"})," Recibe notificaciones instantneas de todas las operaciones CRUD."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Campana de Notificaciones:"})," El cono de campana en el header muestra un contador de notificaciones no ledas."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Panel de Notificaciones:"})," Haz clic en la campana para ver todas tus notificaciones pendientes."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Marcar como Leda:"})," Haz clic en cualquier notificacin para marcarla como leda y que desaparezca del panel."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Marcar Todas:"}),' Usa el botn "Marcar todas como ledas" para limpiar todas las notificaciones de una vez.']}),m.jsxs("li",{children:[m.jsx("strong",{children:"Tipos de Notificaciones:"})," Pacientes, Consultorios, Consultas, Facturas, Pagos, Usuarios e Invitaciones."]})]})]})]})]}),U2e=()=>m.jsxs("div",{className:"space-y-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-4",children:"Cmo Funciona"}),m.jsxs(pc,{title:"Sistema de Permisos",children:[m.jsx("p",{className:"text-text-secondary mb-4",children:"Cada usuario tiene un rol que determina sus permisos:"}),m.jsxs("div",{className:"bg-background rounded-lg p-4 space-y-3",children:[m.jsxs("div",{children:[m.jsx("strong",{className:"text-primary",children:"Administrador:"}),m.jsx("p",{className:"text-text-secondary text-sm",children:"Acceso total al sistema, gestin de usuarios y configuracin."})]}),m.jsxs("div",{children:[m.jsx("strong",{className:"text-primary",children:"Psiclogo:"}),m.jsx("p",{className:"text-text-secondary text-sm",children:"Gestin de pacientes, citas, sesiones, facturacin y reportes."})]}),m.jsxs("div",{children:[m.jsx("strong",{className:"text-primary",children:"Recepcionista:"}),m.jsx("p",{className:"text-text-secondary text-sm",children:"Gestin de pacientes, citas y facturacin bsica."})]})]})]})]}),B2e=()=>m.jsxs("div",{className:"space-y-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-4",children:"Por Qu Funciona As"}),m.jsxs(pc,{title:"Beneficios del Sistema",children:[m.jsx("p",{className:"text-text-secondary mb-4",children:"Ventajas de usar este CRM:"}),m.jsxs("ul",{className:"list-disc list-inside space-y-2 text-text-secondary",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Centralizacin:"})," Toda la informacin en un solo lugar."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Accesibilidad:"})," Accede desde cualquier dispositivo con internet."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Seguridad:"})," Datos encriptados y protegidos por Firebase."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Escalabilidad:"})," Crece con tu prctica sin necesidad de cambios."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Actualizaciones:"})," Mejoras continuas sin interrupciones."]})]})]})]}),q2e=()=>m.jsxs("div",{className:"space-y-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-4",children:"Preguntas Frecuentes"}),m.jsxs("div",{className:"space-y-4",children:[m.jsx(fn,{question:"Cmo creo un nuevo paciente?",answer:"Ve al mdulo 'Pacientes' en el sidebar, haz clic en 'Nuevo Paciente', completa el formulario con los datos requeridos (nombre, apellido, email, telfono, fecha de nacimiento, direccin y contacto de emergencia) y haz clic en 'Crear'. Recibirs una notificacin de confirmacin y el paciente aparecer inmediatamente en la lista."}),m.jsx(fn,{question:"Cmo invito a un nuevo usuario al sistema?",answer:"Solo los administradores pueden invitar usuarios. Ve a 'Gestin de Usuarios', haz clic en 'Invitar Usuario', completa el formulario con nombre, email y rol (Administrador, Psiclogo, Recepcionista o Visualizador). Se generar un enlace nico que expira en 7 das. Puedes copiarlo o compartirlo directamente por WhatsApp. Recibirs una notificacin cuando la invitacin sea enviada."}),m.jsx(fn,{question:"Qu pasa si una invitacin expira?",answer:"Las invitaciones expiran despus de 7 das por seguridad. Si una invitacin expira, simplemente crea una nueva invitacin para el mismo usuario. Tambin puedes revocar invitaciones pendientes que ya no necesites desde la lista de invitaciones."}),m.jsx(fn,{question:"Cmo funciona el sistema de notificaciones?",answer:"El sistema enva notificaciones en tiempo real para todas las operaciones importantes: crear, actualizar o eliminar pacientes, consultorios, consultas, facturas, usuarios e invitaciones. Tambin recibes notificaciones cuando se registran pagos. Las notificaciones aparecen en la campana del header con un contador. Haz clic en cualquier notificacin para marcarla como leda, o usa 'Marcar todas como ledas' para limpiarlas todas."}),m.jsx(fn,{question:"Cmo funciona la facturacin automtica?",answer:"Cuando cobras una consulta, el sistema genera automticamente una factura con nmero secuencial (FAC-001, FAC-002, etc.). La factura incluye los datos del paciente, monto, impuestos y mtodo de pago. Tambin puedes crear facturas manuales para otros servicios. Recibirs notificaciones al crear facturas y al registrar pagos."}),m.jsx(fn,{question:"Puedo editar una factura despus de crearla?",answer:"S, puedes editar facturas que estn en estado 'Pendiente'. Una vez que una factura se marca como 'Pagada', no se puede editar para mantener la integridad del historial financiero. Si necesitas corregir una factura pagada, debes eliminarla y crear una nueva."}),m.jsx(fn,{question:"Cmo registro el pago de una factura?",answer:"En el mdulo 'Facturacin', encuentra la factura pendiente y haz clic en el botn de pago (cono de dlar). Ingresa el monto y mtodo de pago. El sistema actualizar automticamente el estado de la factura a 'Pagada' y recibirs una notificacin de confirmacin."}),m.jsx(fn,{question:"Puedo eliminar una consulta programada?",answer:"S, puedes eliminar consultas desde el mdulo 'Consultas'. Sin embargo, es recomendable cambiar el estado a 'Cancelada' en lugar de eliminarla para mantener un historial completo. Al eliminar una consulta, recibirs una notificacin de confirmacin."}),m.jsx(fn,{question:"Cmo veo el historial de un paciente?",answer:"En el mdulo 'Consultas', puedes filtrar por paciente para ver todas sus consultas pasadas y futuras. Cada consulta muestra las notas clnicas, diagnstico, plan de tratamiento y estado de pago. Tambin puedes ver las facturas asociadas en el mdulo 'Facturacin'."}),m.jsx(fn,{question:"Qu diferencia hay entre los roles de usuario?",answer:"Administrador: acceso total al sistema, gestin de usuarios y configuracin. Psiclogo: gestin de pacientes, consultas, notas clnicas y facturacin. Recepcionista: gestin de citas, pacientes y consultorios (sin acceso a notas clnicas). Visualizador: solo lectura de informacin sin capacidad de edicin. Puedes ver los permisos detallados en el modal 'Permisos por Rol' en Gestin de Usuarios."}),m.jsx(fn,{question:"Los datos estn seguros?",answer:"S, todos los datos estn almacenados en Firebase con encriptacin en trnsito y en reposo. Las reglas de seguridad de Firestore garantizan que cada usuario solo pueda acceder a los datos para los que tiene permisos. Adems, las notificaciones son privadas y solo visibles para el usuario que las genera."}),m.jsx(fn,{question:"Puedo acceder desde mi celular?",answer:"S, el sistema es completamente responsive y funciona perfectamente en dispositivos mviles, tablets y computadoras de escritorio. Todas las funcionalidades estn optimizadas para pantallas tctiles."}),m.jsx(fn,{question:"Qu hago si olvid mi contrasea?",answer:"En la pantalla de login, haz clic en 'Olvid mi contrasea' y sigue las instrucciones para restablecerla mediante tu correo electrnico. Recibirs un enlace de Firebase para crear una nueva contrasea."}),m.jsx(fn,{question:"Puedo buscar y filtrar informacin?",answer:"S, todos los mdulos principales (Pacientes, Consultorios, Consultas, Facturas, Usuarios) tienen barras de bsqueda y opciones de ordenamiento. Puedes buscar por nombre, email, fecha, nmero de factura, etc. Tambin puedes ordenar las listas haciendo clic en los encabezados de las columnas."}),m.jsx(fn,{question:"El sistema hace backups automticos?",answer:"S, Firebase realiza backups automticos diarios de toda la base de datos. Tus datos estn protegidos contra prdidas. Adems, cada operacin queda registrada con fecha y usuario que la realiz para trazabilidad completa."}),m.jsx(fn,{question:"Las notificaciones se eliminan automticamente?",answer:"No, las notificaciones permanecen hasta que las marques como ledas. Puedes marcarlas individualmente haciendo clic en ellas, o usar el botn 'Marcar todas como ledas' para limpiar todas las notificaciones de una vez. Esto te permite revisar las notificaciones a tu propio ritmo."})]})]}),pc=({title:t,children:e})=>m.jsxs("div",{className:"border-l-4 border-primary pl-4",children:[m.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:t}),e]}),fn=({question:t,answer:e})=>m.jsxs("div",{className:"bg-background rounded-lg p-4",children:[m.jsxs("h4",{className:"font-semibold text-text-primary mb-2 flex items-start gap-2",children:[m.jsx(v2,{className:"text-primary mt-1 flex-shrink-0"}),t]}),m.jsx("p",{className:"text-text-secondary text-sm pl-6",children:e})]});function V2e(){return m.jsx(tJ,{children:m.jsx(zae,{children:m.jsx(Bae,{children:m.jsxs(NQ,{children:[m.jsx(tn,{path:"/login",element:m.jsx(qae,{children:m.jsx(Noe,{})})}),m.jsx(tn,{path:"/register",element:m.jsx(Voe,{})}),m.jsx(tn,{path:"/terms",element:m.jsx(Foe,{})}),m.jsx(tn,{path:"/dashboard",element:m.jsx(ls,{children:m.jsx(afe,{})})}),m.jsx(tn,{path:"/strategies/momentum",element:m.jsx(ls,{children:m.jsx(S2e,{})})}),m.jsx(tn,{path:"/strategies/value",element:m.jsx(ls,{children:m.jsx(C2e,{})})}),m.jsx(tn,{path:"/strategies/growth",element:m.jsx(ls,{children:m.jsx(x2e,{})})}),m.jsx(tn,{path:"/strategies/dividend",element:m.jsx(ls,{children:m.jsx(w2e,{})})}),m.jsx(tn,{path:"/strategies/sector",element:m.jsx(ls,{children:m.jsx(_2e,{})})}),m.jsx(tn,{path:"/simulation",element:m.jsx(ls,{children:m.jsx(I2e,{})})}),m.jsx(tn,{path:"/research",element:m.jsx(ls,{children:m.jsx(O2e,{})})}),m.jsx(tn,{path:"/trading",element:m.jsx(ls,{children:m.jsx(j2e,{})})}),m.jsx(tn,{path:"/users",element:m.jsx(ls,{children:m.jsx(k2e,{})})}),m.jsx(tn,{path:"/help",element:m.jsx(ls,{children:m.jsx(L2e,{})})}),m.jsx(tn,{path:"/",element:m.jsx(Fb,{to:"/dashboard",replace:!0})}),m.jsx(tn,{path:"*",element:m.jsx(Fb,{to:"/dashboard",replace:!0})})]})})})})}BX.createRoot(document.getElementById("root")).render(m.jsx(A.StrictMode,{children:m.jsx(V2e,{})}));
